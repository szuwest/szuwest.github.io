<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>West's blog</title><link href="http://szuwest.github.io/" rel="alternate"></link><link href="http://szuwest.github.io/feeds/west.atom.xml" rel="self"></link><id>http://szuwest.github.io/</id><updated>2019-07-27T00:00:00+08:00</updated><entry><title>è®°ä¸€æ¬¡WebViewå¡«å‘è¿‡ç¨‹--ç”±æ¢è¡Œç¬¦å¼•å‘çš„è¡€æ¡ˆ</title><link href="http://szuwest.github.io/ji-yi-ci-webviewtian-keng-guo-cheng-you-huan-xing-fu-yin-fa-de-xie-an.html" rel="alternate"></link><updated>2019-07-27T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2019-07-27:ji-yi-ci-webviewtian-keng-guo-cheng-you-huan-xing-fu-yin-fa-de-xie-an.html</id><summary type="html">&lt;h1&gt;è®°ä¸€æ¬¡WebViewå¡«å‘è¿‡ç¨‹--ç”±æ¢è¡Œç¬¦å¼•å‘çš„è¡€æ¡ˆ&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘ä½¿ç”¨WebViewæ‰å‘äº†ï¼Œç„¶åè‰°éš¾çˆ¬å‘ç»å†æ„Ÿè§¦å¾ˆæ·±ï¼Œå†™å‡ºæ¥å¤§å®¶å€Ÿé‰´ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3&gt;éœ€æ±‚&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸ªç½‘é¡µéœ€è¦ç”¨åˆ°å¾ˆå¤šjsåº“ï¼Œè¿™äº›åº“æ¯”è¾ƒå¤§ï¼Œè€Œä¸”åŸºæœ¬ä¸Šæ˜¯ä¸å˜çš„ã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå°†è¿™äº›ç½‘é¡µå’ŒJSåº“æ”¾åˆ°æœ¬åœ°ï¼Œè¿›è¡ŒåŠ è½½ã€‚å˜çš„æ•°æ®ä»æœåŠ¡å™¨è·å–ï¼Œç„¶åè·Ÿæœ¬åœ°çš„HTMLç»„è£…åæ˜¾ç¤ºã€‚è¿™ç§éœ€æ±‚è¿˜æ˜¯æŒºæ™®éçš„ã€‚&lt;/p&gt;
&lt;h3&gt;å®ç°æ–¹å¼&lt;/h3&gt;
&lt;p&gt;ç”±webçš„åŒäº‹è°ƒè¯•å¥½HTMLæ–‡ä»¶ï¼Œä»–ä»¬æŠŠæ‰€æœ‰çš„HTMLï¼Œjs,css,imageå’Œèµ„æºä¸€èµ·æ‰“åŒ…ç»™æˆ‘ä»¬
æˆ‘ä»¬æŠŠè¿™äº›èµ„æºæ”¾åˆ°assetsç›®å½•ä¸‹ï¼ˆä¹Ÿå¯ä»¥ä¸“é—¨åœ¨assetså†å»ºä¸€ä¸ªå­ç›®å½•æ¥æ”¾ï¼‰&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨Androidè‡ªå¸¦çš„WebViewæ¥åŠ è½½å’Œæ˜¾ç¤ºè¿™äº›ç½‘é¡µã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•&lt;strong&gt;loadUrl&lt;/strong&gt;å’Œ&lt;strong&gt;loadDataWithBaseUrl&lt;/strong&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1.loadUrl("file:///android_asset/xxxxxx.html")è¿™ç§æ–¹å¼é€‚åˆHTMLä¸éœ€è¦æ”¹å˜çš„æƒ…å†µï¼Œç›´æ¥åŠ è½½å±•ç¤ºï¼Œçœæ—¶çœåŠ›&lt;/p&gt;
&lt;p&gt;2.loadDataWithBaseUrlæ–¹å¼éœ€è¦å…ˆæŠŠHTMLå†…å®¹ç°åœ¨åˆ°å†…å­˜ï¼Œç„¶åå†å±•ç¤ºã€‚è¿™ç§æ–¹å¼å¯ä»¥éšæ„ä¿®æ”¹HTMLé‡Œçš„å†…å®¹ï¼Œä¿®æ”¹å¥½å†äº¤ç”±WebViewå±•ç¤ºï¼Œçµæ´»æ€§å¼ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;é‡åˆ°çš„å‘&lt;/h3&gt;
&lt;p&gt;æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬é‡åˆ°åŒä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œé€šè¿‡loadUrlæ–¹å¼åŠ è½½å±•ç¤ºï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯é€šè¿‡loadDataWithBaseUrlåŠ è½½å±•ç¤ºï¼ŒHTMLçš„å†…å®¹æ­»æ´»å±•ç¤ºä¸å‡ºæ¥&lt;/p&gt;
&lt;h3&gt;çˆ¬å‘è¿‡ç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;åå¤ç¡®è®¤loadDataWithBaseURLçš„ç”¨æ³•æœ‰æ²¡æœ‰ç”¨å¯¹ï¼ŒbaseUrlå‚æ•°æ²¡æœ‰é—®é¢˜ã€‚
mWebView.loadDataWithBaseURL("file:///android_asset/", htmlContent, "text/html", "utf-8", null).
ç½‘ä¸Šæœèµ„æ–™çœ‹çœ‹åˆ«äººçš„ç”¨æ³•ï¼Œè¿˜æœ‰æŸ¥çœ‹æˆ‘ä»¬å·¥ç¨‹é‡Œå…¶ä»–ç”¨äº†loadDataWithBaseURLæ–¹æ³•çš„åœ°æ–¹ï¼Œéƒ½æ˜¯å·®ä¸å¤šçš„ã€‚ç„¶åæˆ‘æ€€ç–‘æ˜¯htmlContentæœ‰é—®é¢˜ï¼Œæ˜¯ä¸æ˜¯è¯»å–çš„æ—¶å€™å‡ºé”™äº†ã€‚
æˆ‘å»çœ‹ä»asseté‡Œè¯»å–æ–‡ä»¶çš„æ–¹æ³•.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;public static String getStringFromAssets(Context context,String fileName) {
        try {
            InputStreamReader inputReader = new InputStreamReader(context.getAssets().open(fileName));
            BufferedReader bufReader = new BufferedReader(inputReader);

            String line;
            StringBuilder stringBuilder = new StringBuilder();
            while ((line = bufReader.readLine()) != null) {
                stringBuilder.append(line);
            }
            return stringBuilder.toString();

        } catch (Exception e) {
            e.printStackTrace();
        }
        return &amp;quot;&amp;quot;;
    }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜å‘€ã€‚æˆ‘æœäº†ä¸‹è¿™ä¸ªæ–¹æ³•åœ¨æˆ‘ä»¬å·¥ç¨‹é‡Œçš„ä½¿ç”¨ï¼Œå‘ç°è¿˜æœ‰å¾ˆå¤šä½¿ç”¨çš„åœ°æ–¹ï¼Œä»–ä»¬ä½¿ç”¨éƒ½æ²¡é—®é¢˜ã€‚æˆ‘ä¸æ”¾å¼ƒï¼Œåˆ°ç½‘ä¸Šå†æœä¸€ä¸‹ã€‚å…¨æ˜¯åŒæ ·çš„æ–¹æ³•ã€‚æˆ‘æ–­ç‚¹è°ƒè¯•ï¼Œå¹¶ä¸”æŠŠhtmlContentæ‰“å°å‡ºæ¥ï¼Œå¥½åƒæ²¡æœ‰å¤ªå¤§çš„é—®é¢˜å‘€ï¼Œä¸æ˜¯è¿™é‡Œçš„é—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2.æŸ¥çœ‹æˆ‘ä»¬å·¥ç¨‹é‡Œå…¶ä»–ç”¨äº†loadDataWithBaseURLæ–¹æ³•çš„åœ°æ–¹ï¼Œæˆ‘çš„ç”¨æ³•è·Ÿä»–ä»¬ä¸€è‡´ã€‚ä¸è¿‡æœ€ç»ˆæˆ‘å‘ç°æˆ‘ç”¨çš„HTMLæ–‡ä»¶è·Ÿä»–ä»¬ç”¨çš„HTMLæ–‡ä»¶æœ‰ä¸åŒçš„åœ°æ–¹ï¼šæˆ‘ä½¿ç”¨çš„HTMLæ–‡ä»¶ä¸­
æ›´å¤æ‚ä¸€äº›ï¼Œåœ¨æ–‡ä»¶é‡Œå¼•ç”¨JSèµ„æºæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ï¼Œåœ¨HTMLé‡Œæœ¬èº«å†…åµŒäº†JSä»£ç ã€‚æˆ‘çŒœæµ‹æ˜¯å†…åµŒJSå¯¼è‡´çš„ã€‚æˆ‘ç½‘ä¸Šæœèµ„æ–™ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯è¿™æ ·çš„ã€‚ç»ˆäºæœåˆ°ä¸€ç¯‡&lt;a href="https://wenwen.sogou.com/z/q436628432.htm"&gt;æ–‡ç« &lt;/a&gt;è¯´è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªå¸–å­æ˜¯å¾ˆä¹…ä»¥å‰çš„ã€‚ä¸‹é¢æ˜¯å®ƒçš„åŸè¯ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨WebViewçš„loadUrl(url),ç½‘é¡µä¸­çš„Javascriptè¿è¡Œæ­£å¸¸ã€‚ä½†æ˜¯è·å–urlçš„htmlå†…å®¹åï¼Œä½¿ç”¨loadDataæˆ–è€…loadDataWithBaseURLä¹‹åï¼ŒJavascriptå°±ä¸èµ·ä½œç”¨äº†ï¼googleäº†ä¸€åœˆï¼Œä¼¼ä¹è¿™æ˜¯æ™®éé—®é¢˜ï¼Œä¸çŸ¥é“è¿™é‡Œçš„é«˜æ‰‹æœ‰æ³•å­è§£å†³ä¸ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è²Œä¼¼éªŒè¯äº†æˆ‘çš„æƒ³æ³•ã€‚ä½†æ˜¯è¿™æ˜¯å¾ˆä¹…ä»¥å‰çš„å¸–å­å‘€ã€‚æˆ‘æƒ³Googleæ”¹ä¸ä¼šé‚£ä¹ˆå‚»å§ã€‚åæ¥æˆ‘è°ƒè¯•æ—¶åœ¨logcaté‡Œçœ‹åˆ°ä¸€äº›æ—¥å¿—ã€‚åŠ è½½ç½‘é¡µæ—¶æ‰“å°äº†ç±»ä¼¼ä¸‹é¢çš„æ—¥å¿—&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[INFO:CONSOLE(1)] "Uncaught SyntaxError: Unexpected identifier "&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯´æ˜ç½‘é¡µåœ¨è§£æJSçš„æ—¶å€™æŠ¥é”™äº†ã€‚
æˆ‘çœ‹äº†ä¸‹ç½‘é¡µä¸­JavaScriptï¼ŒæŒ‰é“ç†çš„è¿™äº›éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºé‡‡ç”¨loadUrlæ–¹å¼åŠ è½½æ²¡é—®é¢˜ï¼Œç›´æ¥åœ¨ç”µè„‘ä¸Šæµè§ˆå™¨æ‰“å¼€ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚æˆ‘æŠŠè¿™äº›jséƒ½åˆ æ‰ï¼ŒåªåŠ äº†ä¸€æ¡console.log('1111')çš„æ‰“å°è¯­å¥ã€‚å†æ¬¡è¿è¡ŒåŠ è½½ï¼Œæ²¡æŠ¥é”™äº†ï¼ï¼è¯´æ˜å†…åµŒJavaScriptä»£ç æ˜¯å¯è¡Œçš„ã€‚é‚£å°±æ˜¯æˆ‘ä»¬åŸæœ¬çš„JavaScriptæœ‰é—®é¢˜äº†ï¼Ÿï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘æŠŠé‚£éƒ¨åˆ†JSæ”¾åˆ°ä¸€ä¸ªæ–°çš„å•ç‹¬çš„æ–‡ä»¶é‡Œã€‚å› ä¸ºæˆ‘ä»¬çš„HTMLæ–‡ä»¶æœ¬èº«ä¹Ÿå¼•ç”¨äº†å…¶ä»–çš„ç‹¬ç«‹JSæ–‡ä»¶ã€‚ä¸€è¿è¡Œï¼Œæ­£å¸¸åŠ è½½æ˜¾ç¤ºï¼JSè¿˜æ˜¯é‚£ä¸ªJSï¼Œæ¢åˆ°æ–‡ä»¶é‡Œå°±æ²¡é—®é¢˜äº†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘é‚£æ—¶å¾—å‡ºç»“è®ºï¼š
* å†…åµŒJavaScriptä»£ç åœ¨WebViewçš„è§£æè·Ÿç‹¬ç«‹JSæ–‡ä»¶ä¸å¤ªä¸€æ ·ï¼Œå¯èƒ½å†…åµŒJavaScriptä»£ç çš„è§£æè¦ä¸¥æ ¼ä¸€äº›ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘å¼€å§‹éªŒè¯è¿™ä¸ªæƒ³æ³•ï¼Œå»ä¿®æ”¹å†…åµŒJavaScriptä»£ç ã€‚
æˆ‘åœ¨å¾ˆå¤šåœ°æ–¹åŠ äº†consoleæ‰“å°ï¼Œçœ‹çœ‹æ‰§è¡Œåˆ°å“ªé‡ŒæŠ¥é”™ã€‚ç„¶åæˆ‘å‘ç°è²Œä¼¼å»æ‰äº†æ³¨é‡Šï¼ŒæŠ¥é”™å°±ä¸ä¸€æ ·äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Uncaught SyntaxError: Unexpected tokenã€‚&lt;/p&gt;
&lt;p&gt;Uncaught SyntaxError: Unexpected end of input&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ€åæˆ‘æŠŠæ³¨é‡Šéƒ½å»æ‰ï¼ŒæŠŠè¯¥åŠ åˆ†å·çš„åœ°æ–¹éƒ½åŠ ä¸Šã€‚å°±èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚
æˆ‘åˆæ­¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éœ€è¦HTMLæ–‡æ¡£é‡Œå†…åµŒJavaScriptä»£ç çš„è¯ï¼Œè¦éå¸¸æ³¨æ„JavaScriptçš„è¯­æ³•é—®é¢˜ã€‚WebViewå¯¹è¿™éƒ¨åˆ†çš„JSä»£ç è¯­æ³•è¦æ±‚éå¸¸ä¸¥ï¼Œç»å¸¸å‘ç”Ÿè¯†åˆ«ä¸äº†è€ŒæŠ¥é”™çš„æƒ…å†µã€‚
ç°åœ¨å‘ç°â‘ éå¸¸æ³¨æ„è¡¨è¾¾å¼åé¢è¦åŠ åˆ†å·ï¼Œä¸èƒ½çœç•¥åˆ†å·ï¼ï¼â‘¡ä¸èƒ½åœ¨JSé‡Œéšä¾¿åŠ æ³¨é‡Šã€‚è¦ä»”ç»†æ£€æŸ¥è¯­æ³•ï¼Œä¸¥æ ¼éµå¾ªJSæ ‡å‡†&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘æŠŠè¿™äº›ç»“è®ºè¿˜åŠ åˆ°äº†æˆ‘ä»¬ä»£ç çš„æ³¨é‡Šäº†ï¼Œä»¥å…åäººé‡‡å‘ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œé—®é¢˜è§£å†³äº†ï¼Œæˆ‘æŠŠHTMLä»assetä¸­åŠ è½½å‡ºæ¥ï¼Œå†HTMLå­—ç¬¦ä¸²ä¸­çš„ä¸€äº›å­—ç¬¦ä¸²ï¼ˆé»˜è®¤æ•°æ®ï¼‰æ›¿æ¢æˆæˆ‘ä»¬ä»æœåŠ¡å™¨å–åˆ°çš„æ•°æ®ï¼ˆçœŸå®ç”¨æˆ·æ•°æ®ï¼‰ï¼Œç„¶åè°ƒç”¨loadDataWithBaseURLæ–¹æ³•å±•ç¤ºã€‚å®Œç¾ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œæœ‰äº›äººä¼šè¯´loadUrlæ–¹æ³•ä¸æ˜¯æ²¡é—®é¢˜å—ï¼Œç›´æ¥ç”¨å®ƒä¸å°±è¡Œäº†ï¼ŒæŠ˜è…¾é‚£ä¹ˆå¤šå¹²å˜›ã€‚ç¡®å®æ˜¯å¦‚æ­¤ï¼Œç”¨loadUrlæ–¹æ³•èƒ½å®ç°æˆ‘çš„éœ€æ±‚ï¼Œå®é™…ä¸Šæˆ‘ä¹Ÿè¯•ç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ²¡é—®é¢˜ã€‚
ä¸è¿‡é‡‡ç”¨loadUrlçš„æ–¹å¼ï¼Œå®ç°èµ·æ¥ä¸å¤ªä¸€æ ·ã€‚éœ€è¦ä¿®æ”¹JavaScriptä»£ç ã€‚è¿™äº›HTMLæ˜¯æœ‰webåŒæ—¶æä¾›çš„ï¼Œä»–ä»¬éƒ½æ˜¯å·²ç»é»˜è®¤æ•°æ®ç›´æ¥è°ƒè¯•å¥½äº†ï¼Œä¸€æ‰“å¼€å°±èƒ½å±•ç¤ºã€‚é‡‡ç”¨loadUrlçš„æ–¹æ³•ï¼Œä½ ä¸èƒ½é¢„å…ˆä¿®æ”¹HTMLæ–‡ä»¶ï¼Œåªèƒ½åœ¨åŠ è½½å®ŒHTMLæ•°æ®ä¹‹åï¼Œåœ¨WebViewçš„webclientå›è°ƒæ–¹æ³•&lt;strong&gt;onPageFinished&lt;/strong&gt;é‡Œå»è°ƒç”¨JSæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å°±æ˜¯è¯´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1.ä½ å°†JSé‡Œçš„window.onloadæ–¹æ³•å»æ‰ï¼Œè®©ä»–ä»¬å…ˆä¸å±•ç¤º&lt;/li&gt;
&lt;li&gt;2.ä½ æ–°å¢ä¸€ä¸ªjsæ–¹æ³•ï¼Œè¿™æ–¹æ³•æ¥æ”¶ä¸€äº›å‚æ•°ï¼Œç„¶ååœ¨è¿™ä¸ªæ–¹æ³•é‡Œè°ƒç”¨æ¸²æŸ“æ–¹æ³•ï¼ˆå³åŸæ¥çš„window.onloadé‡Œçš„æ–¹æ³•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;3.åœ¨ä½ Javaä»£ç é‡Œï¼Œåœ¨WebViewçš„webclientå›è°ƒæ–¹æ³•&lt;strong&gt;onPageFinished&lt;/strong&gt;é‡Œå»è°ƒç”¨ä½ æ–°å¢çš„JSæ–¹æ³•ï¼ŒæŠŠå‚æ•°éƒ½ä¼ å…¥è¿›å»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çœ‹åˆ°æ²¡æœ‰ï¼Œè¿™é‡Œè¦ä¿®æ”¹çš„ä¸œè¥¿è¿˜è›®å¤šï¼Œè¿˜è¦è¦æ±‚å®¢æˆ·ç«¯å¼€å‘äººå‘˜æ‡‚JSä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨loadDataWithBaseURLæ–¹å¼ï¼Œç†æƒ³çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦æ”¹JSä»£ç ï¼Œç›´æ¥å‘Šè¯‰å¼€å‘äººå‘˜é»˜è®¤æ•°æ®åœ¨å“ªé‡Œï¼ŒæŠŠHTMLåŠ è½½è¿›å†…å­˜çš„æ—¶å€™ï¼Œé€šè¿‡String.replaceæ–¹æ³•ï¼ŒæŠŠé»˜è®¤æ•°æ®æ›¿æ¢ä¸ºçœŸå®æ•°æ®ï¼Œå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;iOSç«¯å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œä½†æ˜¯Androidè¿™è¾¹å®ç°çš„æ—¶å€™å°±é‡åˆ°äº†å‘ã€‚ã€‚ã€‚ã€‚
æˆ‘è‚¯å®šæƒ³ä¸¤ç«¯å®ç°æ–¹å¼ä¿æŒä¸€è‡´ï¼Œæ‰€æœ‰ä¼˜å…ˆé‡‡ç”¨loadDataWithBaseURLæ–¹å¼ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è®©webå¼€å‘äººå‘˜æŒ‰ä½ çš„è¦æ±‚å†™å¥½ï¼Œé‚£ä½ ä¹Ÿä¸ç”¨æ”¹åŠ¨é‚£ä¹ˆå¤šã€‚ã€‚ã€‚&lt;/p&gt;
&lt;h3&gt;èƒŒåçœŸç›¸&lt;/h3&gt;
&lt;p&gt;é—®é¢˜è§£å†³äº†ï¼Œç‰ˆæœ¬ä¹Ÿå‘äº†ã€‚ä½†é—®é¢˜çš„çœŸç›¸çœŸçš„æ˜¯WebViewè§£æå†…åµŒJavaScriptæ¯”è¾ƒä¸¥æ ¼å—ï¼Ÿä»ç°è±¡æ¥çœ‹ï¼Œä¸æ”¯æŒæ³¨é‡Šï¼Œä¸èƒ½çœç•¥è¡¨è¾¾å¼çš„åˆ†å·ï¼Œè¿™æ˜æ˜¾æ˜¯&lt;strong&gt;æ¢è¡Œ&lt;/strong&gt;é—®é¢˜ã€‚
æ‰€ä»¥æˆ‘æƒ³é—®é¢˜å¯èƒ½çœŸçš„å‡ºç°åœ¨ä»asseté‡Œè¯»å–æ–‡ä»¶åœ°æ–¹ã€‚çœ‹ä»£ç å°±æ˜¯æ²¡æœ‰æ˜æ˜¾é”™è¯¯ï¼Œä¸€è¡Œä¸€è¡Œçš„è¯»å–è¿›æ¥ï¼Œæ‹¼æ¥å¥½å…¨éƒ¨è¿”å›ã€‚ç½‘ä¸ŠæŸ¥åˆ°çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯è¿™ä¹ˆè¯»çš„ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶è¿›æ¥å‘¢ï¼Ÿæ‰€æœ‰æˆ‘æ‰¾äº†ä¸‹èµ„æ–™ï¼Œå°†ä»£ç æ”¹æˆä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;public static String getStringFromAssets(ontext context,String fileName) {
        try {
            InputStreamReader inputReader = new InputStreamReader(context.getAssets().open(fileName));
            BufferedReader bufReader = new BufferedReader(inputReader);

            StringWriter out = new StringWriter();
            copy(bufReader, out);
            return out.toString();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return &amp;quot;&amp;quot;;
    }

    private static void copy(Reader in, Writer out) throws IOException {
        int c = -1;
        while((c = in.read()) != -1) {
            out.write(c);
        }
    }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœç„¶ä»€ä¹ˆé—®é¢˜éƒ½æ²¡æœ‰ï¼çœ‹logcatæ‰“å°å‡ºæ¥çš„å†…å®¹ä¹Ÿæ˜¯è·ŸHTMLé‡Œçš„å†…å®¹ä¸€æ¨¡ä¸€æ ·ï¼Œä¹‹å‰æ–¹å¼æ‰“å°å‡ºæ¥çš„æ²¡æœ‰æ¢è¡Œå¹¶æ²¡æœ‰å¤ªè¿‡åœ¨æ„ï¼&lt;/p&gt;
&lt;p&gt;é‚£åªèƒ½è¯´æ˜bufReader.readLineçš„æ–¹æ³•æœ‰é—®é¢˜ï¼Œæˆ‘ç½‘ä¸Šæœäº†ä¸‹ï¼Œè¯´è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨å»æ‰æ¢è¡Œã€‚åŸæ¥çœŸç›¸æ˜¯è¿™ä¸ªä¹ˆï¼Ÿï¼ŸåŸæ¥WebViewä¸€ç›´æ˜¯ä¸ª&lt;strong&gt;èƒŒé”…ä¾ &lt;/strong&gt;å‘€ï¼Œè€Œä¸”è¿™ä¸ªé”…èƒŒäº†å¥½å¤šå¹´ğŸ˜‚ğŸ˜‚ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥çœ‹çœ‹æ—¶é—´çš„çœŸå‡¶readLineæ–¹æ³•çš„å£°æ˜ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * Reads a line of text.  A line is considered to be terminated by any one&lt;/span&gt;
&lt;span class="cm"&gt;     * of a line feed (&amp;#39;\n&amp;#39;), a carriage return (&amp;#39;\r&amp;#39;), or a carriage return&lt;/span&gt;
&lt;span class="cm"&gt;     * followed immediately by a linefeed.&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @return     A String containing the contents of the line, not including&lt;/span&gt;
&lt;span class="cm"&gt;     *             any line-termination characters, or null if the end of the&lt;/span&gt;
&lt;span class="cm"&gt;     *             stream has been reached&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @exception  IOException  If an I/O error occurs&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     * @see java.nio.file.Files#readAllLines&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;public&lt;span class="w"&gt; &lt;/span&gt;String&lt;span class="w"&gt; &lt;/span&gt;readLine&lt;span class="o"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;throws&lt;span class="w"&gt; &lt;/span&gt;IOException&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="kr"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;readLine&lt;span class="o"&gt;(&lt;/span&gt;false&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="err"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="err"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ³¨æ„çœ‹returnçš„å£°æ˜&lt;strong&gt;not includingany line-termination characters&lt;/strong&gt;.
äººå®¶è¿™é‡Œè¯´å¾—å¾ˆæ¸…æ¥šå˜›ï¼Œåè¡€äº†ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å¯¹Javaå¾ˆç†Ÿæ‚‰ï¼Œæˆ–è€…å¯¹readLine()æ–¹æ³•ç†Ÿæ‚‰ï¼Œä½ å°±ä¸ç”¨æŠ˜è…¾é‚£ä¹ˆå¤šï¼Œå°±ä¸ä¼šæ‰å‘é‡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨æƒ³ä¸ºä»€ä¹ˆä¸€ç›´æ²¡å‘ç°å‘¢ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äº†è¿™ä¹ˆä¹…ï¼Œç½‘ä¸Šä¹Ÿè¿™ä¹ˆå¤šäººç”¨ï¼Œå°±æ²¡äººé‡åˆ°é—®é¢˜ï¼Ÿæˆ‘çŒœä¸»è¦åŸå› æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ²¡æœ‰æ¢è¡Œç¬¦ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯æŠŠjsonæˆ–HTMLæ–‡ä»¶æ”¾assetsé‡Œï¼Œç„¶åè¯»å–å‡ºæ¥ä½¿ç”¨ã€‚jsonæ–‡ä»¶æœ‰æ²¡æœ‰æ¢è¡Œæ ¹æœ¬ä¸å½±å“ï¼æˆ‘ä»¬å·¥ç¨‹é‡Œå¤§éƒ¨åˆ†éƒ½æ˜¯è¿™ç§ç”¨æ³•ã€‚å¦‚æœHTMLé‡Œæ²¡æœ‰å†…åµŒJavaScriptä»£ç ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼å¦‚æœçœŸæœ‰å†…åµŒJavaScriptä»£ç äº†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‡‡ç”¨loadUrlæ–¹æ³•æ¥ç»•è¿‡ï¼Œå°±æ˜¯æˆ‘ä¹‹å‰çš„åšæ³•é‚£æ ·ã€‚&lt;/p&gt;
&lt;p&gt;åªæœ‰æ­£é¢åˆšï¼Œæ‰ä¼šå‘ç°è¿™é‡Œæœ‰ä¸ªå‘ã€‚readLineè¿™ä¸ªæ–¹æ³•ä¸å¥½ï¼Œå¤ªæœ‰è¿·æƒ‘æ€§äº†ã€‚
è¿˜æœ‰å°±æ˜¯ä¸è¦éšä¾¿ç›¸ä¿¡ç½‘ä¸Šæ‹·æ¥çš„ä»£ç ï¼ï¼ï¼è¿™äº›è¡€çš„æ•™è®­ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åé™„ä¸Šä¿®æ­£ç‰ˆçš„æ­£ç¡®çš„ä»assetsé‡Œè¯»å–æ–‡ä»¶çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; /**
     * è·å–assetçš„æ–‡ä»¶ï¼Œè½¬åŒ–æˆString
     *
     * @param context
     * @param fileName
     * @return
     */
    public static String parseAssetsData(Context context, String fileName) {
        StringBuilder stringBuilder = new StringBuilder();
        InputStreamReader inputStreamReader = null;
        BufferedReader bfReader = null;
        try {
            AssetManager assetManager = context.getAssets();
            inputStreamReader = new InputStreamReader(assetManager.open(fileName));
            bfReader = new BufferedReader(inputStreamReader);
            String line;
            //æ³¨æ„ï¼ï¼ readLine()è¿”å›çš„å†…å®¹å·²ç»æŠŠæ¢è¡Œç¬¦å»æ‰ï¼Œæ‰€ä»¥è¦è¡¥ä¸Š
            while ((line = bfReader.readLine()) != null) {
                stringBuilder.append(line);
                stringBuilder.append(&amp;quot;\n&amp;quot;);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            closeStream(inputStreamReader);
            closeStream(bfReader);
        }
        return stringBuilder.toString();
    }

    /**
     * å…³é—­æµ
     *
     * @param io
     */
    public static void closeStream(Closeable io) {
        if (io != null) {
            try {
                io.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="Androidå¼€å‘ WebView JavaScript"></category></entry><entry><title>å¦‚ä½•å†™å‡ºä¸å¤ªåçš„ä»£ç </title><link href="http://szuwest.github.io/ru-he-xie-chu-bu-tai-pi-de-dai-ma.html" rel="alternate"></link><updated>2019-02-28T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2019-02-28:ru-he-xie-chu-bu-tai-pi-de-dai-ma.html</id><summary type="html">&lt;h2&gt;å¦‚ä½•å†™å‡ºä¸å¤ªåçš„ä»£ç &lt;/h2&gt;
&lt;p&gt;æœ¬æ¥æƒ³æŠŠæ ‡é¢˜å®šä¸ºâ€œå¦‚ä½•å†™å‡ºå¥½ä»£ç â€çš„ï¼Œä½†æ˜¯è½¬å¿µä¸€æƒ³ï¼Œè§‰å¾—è‡ªå·±æ²¡é‚£ä¹ˆç‰›é€¼ï¼Œå°±æ”¹æˆäº†ä¸å¤ªåçš„ä»£ç ã€‚åªè¦ä¸è¦å†™å‡ºå¤ªç³Ÿç³•çš„ä»£ç ï¼Œä¸å°±æ˜¯å¥½ä»£ç äº†å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹åªæ˜¯ä¸ªäººçš„ä¸€äº›æ€»ç»“ï¼Œå¦‚æœ‰å¼‚è®®ï¼Œè¯·å‡ºé—¨å³è½¬ã€‚&lt;/p&gt;
&lt;h3&gt;1.æ³¨é‡å‘½å&lt;/h3&gt;
&lt;p&gt;åŒ…æ‹¬æ–‡ä»¶åï¼Œå˜é‡åï¼Œæ–¹æ³•åã€‚ä¸€èˆ¬å˜é‡åä»¥åŠŸèƒ½æ¥å‘½åï¼Œçœ‹å®ƒçš„åå­—å°±èƒ½çŸ¥é“å®ƒçš„ç”¨é€”æ˜¯ä»€ä¹ˆ
éµå¾ªä¸€äº›å‘½åè§„èŒƒã€‚Javaä¸­æˆå‘˜å˜é‡åä¸€èˆ¬ä»¥må¼€å¤´ï¼Œè€ŒOCä¸­çš„æˆå‘˜å˜é‡ä¸€èˆ¬ä»¥_å¼€å¤´&lt;/p&gt;
&lt;h3&gt;2.éµå¾ªä½è€¦åˆï¼Œé«˜å†…èšçš„åŸåˆ™ç¼–å†™ä»£ç &lt;/h3&gt;
&lt;p&gt;å…·ä½“è¡¨ç°éµå¾ªåˆ†å±‚åˆ†æ¨¡å—åŸåˆ™ï¼Œåº•å±‚æ¨¡å—ä¸èƒ½ä¾èµ–ä¸Šå±‚æ¨¡å—ï¼Œé€»è¾‘å±‚ä¸ä¾èµ–ç•Œé¢ï¼Œç»ä¸è¦æŠŠé€»è¾‘å±‚ä»£ç å’Œç•Œé¢ä»£ç æ··åœ¨ä¸€èµ·&lt;/p&gt;
&lt;h3&gt;3.é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯å®ç°ç¼–ç¨‹&lt;/h3&gt;
&lt;p&gt;å½“ä¸€ä¸ªç±»è¦æš´éœ²ä¸€äº›æ–¹æ³•ç»™å¤–éƒ¨è°ƒç”¨æˆ–è€…é€šä¿¡æ—¶ï¼Œå…ˆå®šä¹‰å¥½æ¥å£ã€‚æ¥å£å®šä¹‰åº”è¯¥ç®€å•æ˜äº†ï¼Œä¸å®¹æ˜“å¼•èµ·æ­§ä¹‰ï¼Œæ¥å£å°½é‡å°‘ã€‚æœ€åæ‰è€ƒè™‘å†…éƒ¨å®ç°ï¼Œè€Œä¸”å°½é‡ä¸æš´éœ²ç»™å¤–éƒ¨ï¼Œå°½é‡ä¸éœ€è¦å¤–éƒ¨çŸ¥é“å†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„&lt;/p&gt;
&lt;h3&gt;4.ä¸€ä¸ªç±»çš„ä»£ç é‡å°½é‡ä¸è¦å¤ªå¤§ï¼Œä¸€ä¸ªæ–¹æ³•åªåšä¸€ä»¶äº‹æƒ…&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªç±»ï¼ˆæˆ–è€…ä¸€ä¸ªæ–¹æ³•ï¼‰çš„ä»£ç è¶Šå¤šï¼Œå‡ºé”™çš„æ¦‚ç‡è¶Šå¤§ã€‚ä¸€ä¸ªç±»ä¸‰åˆ°5ç™¾è¡Œä»£ç æœ€ä½³ã€‚å¦‚æœä¸€ä¸ªç±»çš„ä»£ç å¤ªå¤šï¼Œå°±è¦è€ƒè™‘è¿™ä¸ªç±»æ˜¯ä¸æ˜¯åšçš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œå¯ä»¥æ‹†åˆ†ä¸€ä¸‹ã€‚å½“ç„¶ï¼Œæœ‰äº›ç±»ï¼ˆä¾‹å¦‚ä¸€äº›SDKåŸºç±»ï¼‰æ— æ³•é¿å…å¤ªå¤§ï¼Œå°±è¦å¥½å¥½éµå¾ªç¬¬5æ¡å‡†åˆ™ã€‚è€Œä¸€ä¸ªæ–¹æ³•ä¹Ÿä¸è¦åšå¤ªå¤šä¸œè¥¿ï¼Œåªåšä¸€ä»¶äº‹æƒ…å°±å¯ä»¥ã€‚&lt;/p&gt;
&lt;h3&gt;5.ç±»çš„æ–¹æ³•å’Œå˜é‡çš„æ’å¸ƒåº”è¯¥éµå¾ªä¸€å®šè§„åˆ™&lt;/h3&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç›¸åŒåŠŸèƒ½çš„æ–¹æ³•å°½é‡æ”¾åœ¨ä¸€èµ·ã€‚&lt;/li&gt;
&lt;li&gt;ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åº”è¯¥å°½é‡æ”¾ä¸€èµ·ï¼ŒæŒ‰æ—¶åºæ’åˆ—&lt;/li&gt;
&lt;li&gt;å…¬å¼€æ–¹æ³•æ’åœ¨å‰é¢ï¼Œç§æœ‰æ–¹æ³•æ’åœ¨åé¢&lt;/li&gt;
&lt;li&gt;OCå¯ä»¥å……åˆ†ä½¿ç”¨categoryç‰¹æ€§ï¼ŒåŒä¸€ç±»çš„æ–¹æ³•æ”¾ä¸€èµ·ï¼ˆswiftçš„Extensionä¹Ÿä¸€æ ·ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;6.å°½é‡ä¸é‡å¤å†™ä»£ç ï¼Œç‰¹åˆ«æ˜¯é€»è¾‘ä»£ç &lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é‡å¤ä»£ç éš¾ç»´æŠ¤ï¼Œå‡ºç°bugè¦æ¯ä¸ªé‡å¤åœ°æ–¹éƒ½å»ä¿®æ”¹ï¼Œå®¹æ˜“æ¼æ‰ã€‚&lt;/li&gt;
&lt;li&gt;åŠ å…¥ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨å®ç°æŸä¸ªåŠŸèƒ½ä¹‹å‰ï¼Œå¯ä»¥å…ˆçœ‹çœ‹é¡¹ç›®é‡Œæœ‰æ²¡æœ‰å·²ç»å®ç°è¿‡è¿™ä¸ªåŠŸèƒ½çš„ä»£ç ã€‚æ²¡æœ‰å¿…è¦é‡å¤é€ è½®å­ã€‚å¦‚æœæœ‰ï¼Œä½†æ˜¯å†™å¾—ä¸å¥½ï¼Œæˆ–è€…æœ‰bugï¼Œå¯ä»¥è·ŸåŸä½œè€…æ²Ÿé€šè®©å…¶æ”¹è¿›ï¼Œæˆ–è€…è‡ªå·±æ”¹è¿›ã€‚é™¤éä¸å¾—å·²ï¼Œä¸è¦é‡å¤å®ç°ã€‚å¦‚æœäººäººä¸€ä¸çˆ½å°±è‡ªå·±å¼„ä¸€å¥—ï¼Œé‚£ä¹…è€Œä¹…ä¹‹éƒ½æ˜¯é‡å¤ä»£ç ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚å¦‚æœç›¸äº’æ”¹è¿›ï¼Œåˆ™å¤§å®¶ä¸€èµ·è¿›æ­¥ã€‚&lt;/li&gt;
&lt;li&gt;ä¸è¿‡å‘¢ï¼Œå¦‚æœä¸€éƒ¨åˆ†çš„ä»£ç é‡å¤å¯ä»¥ä¸ºæ¶æ„å¸¦æ¥å¥½å¤„ï¼Œæ–¹ä¾¿ç»´æŠ¤ï¼Œé‚£æ˜¯å¯ä»¥çš„ï¼Œå€¼å¾—çš„ã€‚ä¾‹å¦‚ä»£ç çš„é‡å¤å¯ä»¥å‡å°‘ä¸¤ä¸ªæ¨¡å—ä¹‹å‰çš„é€šä¿¡å’Œå…³è”ï¼Œé‚£æ˜¯å¯ä»¥çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;7.ç»å¸¸å±€éƒ¨é‡æ„&lt;/h3&gt;
&lt;p&gt;æ²¡æœ‰äººèƒ½ä¸€ä¸‹å­å°±å†™å‡ºå¾ˆå¥½çš„ä»£ç ï¼Œç»å¸¸é‡æ„å¯ä»¥å‡å°‘ç¨‹åºbugï¼Œä¹Ÿå¯ä»¥æå‡è‡ªå·±çš„ä»£ç è´¨é‡&lt;/p&gt;
&lt;h3&gt;ä¹¦ç±æ¨è&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œæ¨èä¸€æœ¬ä¹¦ç±ï¼Œä¸“é—¨è®²é‡æ„çš„ï¼Œæœ‰ä¸“é—¨è®²å¦‚ä½•å¯¹å˜é‡å‘½åçš„ï¼Œæ˜¯ä¸€æœ¬å¥½ä¹¦ã€‚&lt;strong&gt;ã€Šé‡æ„ï¼Œæ”¹å–„æ—¢æœ‰ä»£ç çš„è´¨é‡ã€‹&lt;/strong&gt;&lt;/p&gt;</summary><category term="iOSå¼€å‘ Androidå¼€å‘"></category></entry><entry><title>2018å¹´æ€»ç»“å’Œ2019å¹´å±•æœ›</title><link href="http://szuwest.github.io/2018nian-zong-jie-he-2019nian-zhan-wang.html" rel="alternate"></link><updated>2019-02-10T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2019-02-10:2018nian-zong-jie-he-2019nian-zhan-wang.html</id><summary type="html">&lt;h2&gt;2018å¹´æ€»ç»“å’Œ2019å¹´å±•æœ›&lt;/h2&gt;
&lt;p&gt;ä¸€ç›´éƒ½æ²¡å†™ï¼Œä¸æ„¿æ„åŠ¨æ‰‹ï¼Œæ˜å¤©å°±è¦æ–°çš„ä¸€å¹´ä¸Šç­äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯ç®€å•å†™å†™å§ã€‚&lt;/p&gt;
&lt;h3&gt;2018å¹´æ€»ç»“&lt;/h3&gt;
&lt;p&gt;1.ä¸ŠåŠå¹´è¿‡å¾—å¾ˆä¸å¥½ï¼Œä¸€ç›´éå¸¸ç„¦è™‘ï¼Œå…¬å¸å‘å±•ä¸å¥½ï¼Œå¿ƒé‡Œå¾ˆæ…Œï¼Œå®³æ€•å€’é—­äº†è¢«åŠ¨æ‰¾å·¥ä½œã€‚åé¢å†³å®šæ»¡ä¸€å¹´åå°±æ¢å·¥ä½œï¼Œä½†æ˜¯ä¸€ç›´æ²¡æ‰¾åˆ°åˆé€‚çš„ã€‚åœ¨å¹´ä¸­çš„æ—¶å€™ä¸€åº¦éå¸¸ç„¦è™‘ï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡ç¢°è¿‡é¦™çƒŸäº†ï¼Œå› ä¸ºå¿ƒæƒ…å¤ªè¿‡ç„¦è™‘ï¼Œåˆå¼€å§‹åœ¨å…¬å¸å¶å°”æŠ½äº†èµ·æ¥ã€‚ç›´åˆ°åé¢æˆ‘åœ¨é‚£ä¸ªå…¬å¸æ»¡ä¸€å¹´åï¼ŒçœŸæ­£å†³å®šå¼€å§‹æ‰¾æ–°å·¥ä½œï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªè‡ªå·±æ¯”è¾ƒåˆé€‚çš„å…¬å¸ï¼Œå¿ƒæ‰å®šä¸‹æ¥ã€‚&lt;/p&gt;
&lt;p&gt;2.ä¸‹ç­å¹´å»äº†æ–°å…¬å¸åå¾ˆå¿™ï¼Œæ¯å¤©éƒ½åœ¨é©¬ä¸åœè¹„çš„èµ¶ï¼Œæä¾›å·¥ä½œæ•ˆç‡ï¼Œä½†æ˜¯å¹¶ä¸è§‰å¾—å¾ˆç´¯ã€‚å¾ˆä¹…æ²¡æœ‰è¿™ç§æ„Ÿè§‰äº†ã€‚ç»ˆäºæ‰¾åˆ°è·Ÿè‡ªå·±æ¯”è¾ƒåŒ¹é…çš„å·¥ä½œï¼Œä¹Ÿèƒ½æ¯”è¾ƒå¤§çš„å‘æŒ¥è‡ªå·±æ‰èƒ½çš„å·¥ä½œã€‚è€æ¿çš„ä»·å€¼è§‚ï¼Œç›´æ¥ä¸Šçº§çš„ä»·å€¼è§‚è·Ÿè‡ªå·±éƒ½æ¯”è¾ƒå¥‘åˆï¼Œå…¬å¸çš„æ–‡åŒ–ä¹ŸæŒºå¥½ã€‚çœŸå¿ƒå¸Œæœ›èƒ½åœ¨è¿™å®¶å…¬å¸å‘æŒ¥è‡ªå·±çš„æ‰èƒ½ï¼Œä¹Ÿå¸Œæœ›å…¬å¸èƒ½åšå¤§åšå¼ºã€‚&lt;/p&gt;
&lt;h3&gt;2019å¹´å±•æœ›&lt;/h3&gt;
&lt;p&gt;2019å¹´è¿˜æ˜¯å¸Œæœ›å·¥ä½œä¸Šèƒ½ç»§ç»­å‘æŒ¥èƒ½é‡ï¼Œå¸Œæœ›è‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›å’Œç®¡ç†èƒ½åŠ›éƒ½èƒ½å¾—åˆ°æå‡ï¼Œè¿˜æœ‰å¸Œæœ›è‡ªå·±çš„å›¢é˜Ÿçš„æ¯ä¸ªäººçš„èƒ½åŠ›éƒ½å¾—åˆ°æå‡ï¼Œå½“ç„¶ä¹Ÿå¸Œæœ›ä»–ä»¬èƒ½å¾—åˆ°ç›¸åº”çš„æŠ¥é…¬ã€‚&lt;/p&gt;
&lt;p&gt;2019å¹´æœ‰ä¸¤ä»¶å¤§äº‹ã€‚&lt;/p&gt;
&lt;p&gt;1.æ–°æˆ¿è£…ä¿®ã€‚ä¸€æ˜¯è¦æ‰¾é’±è£…ä¿®ï¼ŒäºŒæ˜¯è¦åœ¨å¹´åº•å‰è£…ä¿®å®Œï¼Œå¸Œæœ›èƒ½åœ¨å†œå†å¹´å‰ä½è¿›å»ã€‚æ–°æˆ¿è£…ä¿®æ˜¯ä¸ªå¤§å·¥ç¨‹ï¼Œè‡ªå·±å®Œå…¨æ²¡æœ‰ç»éªŒï¼Œæ‰€ä»¥è¦å¤šèŠ±ç‚¹å¿ƒæ€ã€‚&lt;/p&gt;
&lt;p&gt;2.å¸Œæœ›è€å©†èƒ½ç”Ÿä¸ªå°å­©å§&lt;/p&gt;
&lt;p&gt;2019åŠ æ²¹ã€‚åŠªåŠ›ï¼å¥‹æ–—ï¼&lt;/p&gt;</summary><category term="æ€»ç»“"></category></entry><entry><title>iOSå¼€å‘å¦‚ä½•åšå¤–éƒ¨æµ‹è¯•</title><link href="http://szuwest.github.io/ioskai-fa-ru-he-zuo-wai-bu-ce-shi.html" rel="alternate"></link><updated>2019-01-05T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2019-01-05:ioskai-fa-ru-he-zuo-wai-bu-ce-shi.html</id><summary type="html">&lt;h2&gt;iOSå¼€å‘å¦‚ä½•åšå¤–éƒ¨æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åšAPPå¼€å‘çš„ï¼Œå¼€å‘å‡ºæ¥çš„APPè¿˜æœªä¸Šçº¿ï¼Œåˆè¦æƒ³ç»™åˆ«äººç”¨ä¸€ä¸‹ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿå®é™…ä¸Šè¿™æ˜¯æˆ‘ä»¬æ¯ä¸ªåšAPPå¼€å‘çš„äººéƒ½ä¼šé‡åˆ°çš„ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½æ¸…æ¥šæ€ä¹ˆåšï¼Œæœ‰å“ªäº›æ–¹å¼ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥è®²ä¸€è®²ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å°†iOSçš„APPå¦‚ä½•ç»™åˆ«äººä½¿ç”¨å’Œæµ‹è¯•å‰ï¼Œå…ˆè¯´ä¸€ä¸‹å®‰å“APPå¼€å‘æ˜¯æ€ä¹ˆåšçš„ã€‚å®‰å“ç«¯æ˜¯å¾ˆç®€å•çš„ï¼Œä½ åªè¦å…ˆç”Ÿæˆä¸€ä¸ªè¯ä¹¦æ–‡ä»¶keystoneï¼Œç„¶åç”¨è¿™ä¸ªæ–‡ä»¶ç»™apkç­¾åï¼Œå°±å¯ä»¥å°†apkå‘ç»™ä»»æ„ä¸€ä¸ªäººå®‰è£…ä½¿ç”¨äº†ã€‚è¿™å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿ã€‚å¯æ˜¯iOSçš„å°±æ²¡é‚£ä¹ˆå®¹æ˜“äº†ã€‚æˆ‘ä»¬è¿˜æ˜¯ä»æœ€ç®€å•çš„å¼€å‘äººå‘˜å¦‚ä½•ç”¨çœŸæœºæµ‹è¯•å¼€å§‹è¯´èµ·ã€‚&lt;/p&gt;
&lt;h3&gt;çœŸæœºè°ƒè¯•&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæƒ³æ³•ï¼Œå¹¶å¼€å§‹å†™ä»£ç ï¼Œæ¨¡æ‹Ÿå™¨è°ƒè¯•å¾ˆæ–¹ä¾¿ï¼Œè¦åœ¨iPhoneä¸Šçœ‹æ•ˆæœæ€ä¹ˆåŠäº†ã€‚ä½ ç›´æ¥å°†iPhoneè¿ä¸Šç”µè„‘æ˜¯ä¸è¡Œçš„ã€‚ç°åœ¨çš„æƒ…å†µè‡³å°‘ä½ éœ€è¦ä¸€ä¸ªApple IDï¼Œåœ¨Xcodeä¸Šç™»å½•ä½ çš„è´¦å·ï¼Œåœ¨è°ƒè¯•å‰Xcodeä¼šè‡ªåŠ¨å¸®ä½ åˆå§‹åŒ–ä¸€äº›ä¸œè¥¿ï¼Œç„¶åå°±å¯ä»¥å°†APPå®‰è£…åˆ°ä½ çš„iPhoneä¸Šäº†ã€‚åœ¨ä»¥å‰ï¼Œä½ è¿™ä¸ªAppleIDä¸èƒ½æ˜¯æ™®é€šçš„è´¦å·ï¼Œå¿…é¡»æ˜¯ä»˜äº†å‰çš„å¼€å‘è€…è´¦å·æ‰è¡Œã€‚ç°åœ¨è‹¹æœæ”¾å®½é™åˆ¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹å¼çš„åšæ³•æ˜¯ä½ çš„æ‰‹æœºå¿…é¡»è¿ä¸Šä½ çš„ç”µè„‘ï¼Œåœ¨Xcodeä¸Šé€‰æ‹©ä½ çš„iPhoneæ¥è°ƒè¯•ï¼ŒXcodeä¼šè‡ªåŠ¨å¸®ä½ æ³¨å†Œè®¾å¤‡çš„UDIDã€‚å¦‚æœä½ æ²¡åŠæ³•æŠŠiPhoneè¿æ¥åˆ°ç”µè„‘ä¸Šå‘¢ï¼Ÿæˆ–è€…ä¸æ–¹ä¾¿æŠŠiPhoneè¿æ¥åˆ°ç”µè„‘ä¸Šï¼Œæ¯•ç«Ÿå¦‚æœæ˜¯è€æ¿çš„æ‰‹æœºçš„è¯ï¼Œä¸æ–¹ä¾¿é‚£ç§åšçš„ã€‚é‚£æˆ‘ä»¬éœ€è¦ä¸€ç§æŠŠå®‰è£…åŒ…æä¾›ç»™åˆ«äººå®‰è£…ï¼Œæˆ–è€…ä¸€ä¸ªåœ°å€ç»™åˆ«äººå®‰è£…çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3&gt;adhoc æ–¹å¼&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†é¡¹ç›®archiveåï¼Œåœ¨å¯¼å‡ºï¼ˆç°åœ¨Xcodeå«distributionï¼‰çš„æ—¶å€™ï¼Œæœ‰ä¸ªé€‰é¡¹æ˜¯adhocï¼Œå°±æ˜¯ä¸“é—¨æ¥åšè¿™ä¸ªçš„ã€‚æˆ‘ä»¬å¯ä»¥å°†APPå¯¼å‡ºæˆä¸€ä¸ªIPAï¼Œç„¶åæŠŠè¿™ä¸ªIPAä¸¢ç»™åˆ«äººï¼Œå¯¹æ–¹å¯ä»¥é€šè¿‡å°†iPhoneè¿æ¥åˆ°ç”µè„‘ï¼Œæ‰“å¼€iTunesï¼Œé€šè¿‡iTunesæ¥å®‰è£…è¿™ä¸ªIPAåˆ°æ‰‹æœºä¸Šã€‚è¿™è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œæ™®éåšæ³•éƒ½æ˜¯æ”¾åˆ°ä¸€ä¸ªç½‘é¡µä¸Šï¼Œåˆ«äººé€šè¿‡è¿™ä¸ªç½‘é¡µæ¥å®‰è£…è¿™ä¸ªIPAã€‚æˆ‘ä¸€èˆ¬éƒ½æ˜¯å€ŸåŠ©ç¬¬ä¸‰æ–¹æ¥åšè¿™æ­¥ï¼Œä¾‹å¦‚è’²å…¬è‹±ç½‘ç«™å°±æ˜¯ä¸“é—¨åšç§ä¸šåŠ¡çš„ã€‚æŠŠä½ çš„IPAä¸Šä¼ åˆ°è’²å…¬è‹±ä¸Šï¼Œè¿˜ä¼šç”Ÿæˆç½‘å€äºŒç»´ç ï¼Œå¾ˆæ–¹ä¾¿åˆ†å‘ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™ä¸ªIPAå¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½å¯ä»¥å®‰è£…çš„ï¼Œèƒ½å®‰è£…çš„å‰ææ˜¯ä»–/å¥¹çš„æ‰‹æœºå¿…é¡»å…ˆæ³¨å†Œè¿‡ï¼Œå³ä»–/å¥¹çš„æ‰‹æœºçš„UDIDå¿…é¡»å…ˆæ³¨å†Œåˆ°è‹¹æœçš„ç½‘ç«™ä¸Šï¼Œæœ€ç»ˆåœ¨æ‰“åŒ…IPAçš„æ—¶å€™è‹¹æœä¼šæŠŠè¿™äº›UDIDå†™å…¥è¯ä¹¦é‡Œï¼Œåªæœ‰æ³¨å†Œè¿‡çš„æ‰‹æœºæ‰èƒ½å®‰è£…æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•æ³¨å†Œæ‰‹æœºUDIDå‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ‰‹æœºè¿æ¥åˆ°å¼€å‘ç”µè„‘ï¼ŒXcodeä¼šè‡ªåŠ¨å¸®ä½ æ³¨å†Œè¿™ä¸ªè®¾å¤‡ã€‚ä½†æ˜¯å¹¶è¿™å¾ˆä¸æ–¹ä¾¿ï¼Œå› ä¸ºåˆ«äººçš„æ‰‹æœºä½ ä¸èƒ½é¢„å…ˆæ‹¿åˆ°çš„ã€‚å½“ç„¶è¿˜æœ‰åˆ«çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä½ æ”¾æ‰‹æœºæ‹¥æœ‰è¿™è¿æ¥ç”µè„‘ï¼Œåœ¨iTunesä¸Šå¯ä»¥çœ‹åˆ°é‚£éƒ¨æ‰‹æœºçš„UDIDï¼Œè®©ä»–æŠŠUDIDå‘ç»™ä½ ã€‚è¿™æ ·çš„æ“ä½œæˆæœ¬ä¹Ÿå¾ˆé«˜ã€‚è¿˜æ˜¯å€ŸåŠ©åˆ«äººç¬¬ä¸‰æ–¹æ¥åšè¿™ä¸ªäº‹æƒ…æ¯”è¾ƒå¥½ã€‚è’²å…¬è‹±åœ¨è¿™æ–¹é¢åšå¾—ä¸é”™ï¼Œä»–ä»¬ä¸“é—¨åšäº†ä¸ªç½‘ç«™æ¥å¸®ä½ è·å–UDIDã€‚ç½‘ç«™åœ°å€æ˜¯ï¼šhttps://www.pgyer.com/udidã€‚æˆ‘ä¸€èˆ¬éƒ½æ˜¯æŠŠè¿™ä¸ªç½‘å€å‘ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹æŒ‰ç…§ç½‘å€çš„åšæ³•å°±å¯ä»¥è·å–åˆ°ä»–æ‰‹æœºçš„UDIDï¼Œé€šè¿‡å¾®ä¿¡å‘ç»™æˆ‘ã€‚ç„¶åæˆ‘åˆ°itunesconnectç½‘ç«™ä¸Šï¼ŒæŠŠè¿™ä¸ªUDIDæ³¨å†Œå¥½ã€‚æœ‰ä¸€ç‚¹ç‰¹åˆ«éœ€è¦çš„æ˜¯ï¼Œä½ æ³¨å†Œå¥½UDIDåï¼Œè¦é‡æ–°å¯¼å‡ºIPAã€‚ä¹‹å‰å·²ç»å¯¼å‡ºçš„IPAè¿˜æ˜¯ä¸èƒ½è£…çš„ï¼Œè¦é‡æ–°æ‰“åŒ…å’Œå¯¼å‡ºIPAã€‚å¹¶ä¸”è¦ç‰¹åˆ«æ³¨æ„ï¼Œåœ¨å¯¼å‡ºIPAä¹‹å‰ï¼Œè¦æŠŠæœ¬åœ°çš„profilesæ–‡ä»¶å…ˆåˆ æ‰ï¼Œè®©Xcodeå»è‹¹æœæœåŠ¡å™¨åŒæ­¥æœ€æ–°çš„å·²æ³¨å†Œè®¾å¤‡åˆ—è¡¨ã€‚profilesæ–‡ä»¶ä¸€èˆ¬æ˜¯å­˜æ”¾åœ¨ /Users/ç”¨æˆ·å/Library/MobileDevice/Provisioning Profiles  è¿™ä¸ªç›®å½•ä¸‹ã€‚å°†è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½åˆ æ‰ï¼Œåœ¨ä¸‹æ¬¡æ‰“åŒ…å¯¼å‡ºçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨é‡æ–°ä¸‹è½½æœ€æ–°çš„ã€‚&lt;/p&gt;
&lt;p&gt;adhocæ–¹å¼è¿˜æ˜¯æœ‰UDIDè¿™ä¸ªå‰æï¼Œè¿˜æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæœ‰æ²¡æœ‰ä¸éœ€è¦ä»»ä½•ç™»è®°ï¼Œç›´æ¥ç»™ä¸ªå®‰è£…åœ°å€ï¼Œå°±èƒ½å®‰è£…çš„å‘¢ï¼Ÿè¿˜æ˜¯æœ‰çš„ï¼Œä¸‹é¢ä»‹ç»ã€‚&lt;/p&gt;
&lt;h3&gt;Enterpriseï¼ˆä¼ä¸šçº§è¯ä¹¦ï¼‰æ–¹å¼&lt;/h3&gt;
&lt;p&gt;æœ‰ä¸€ç§è¯ä¹¦å«ä¼ä¸šçº§å¼€å‘è¯ä¹¦ï¼Œè¿™ç§è¯ä¹¦è·Ÿæ™®é€šçš„å¼€å‘è€…è¯ä¹¦ä¸ä¸€æ ·ã€‚ä¼ä¸šçº§å¼€å‘è¯ä¹¦æ˜¯299ç¾åˆ€æ¯å¹´ï¼Œæ™®é€šçš„å¼€å‘è¯ä¹¦æ˜¯99åˆ€æ¯å¹´ã€‚è€Œä¸”ä¸è¦è·Ÿ99åˆ€æ¯å¹´çš„å¼€å‘è¯ä¹¦é‡Œé¢çš„ä¼ä¸šå¼€å‘è€…æ··æ·†ã€‚åœ¨99åˆ€æ¯å¹´çš„å¼€å‘è¯ä¹¦é‡Œï¼Œåˆ†ä¸ªäººå¼€å‘è€…å’Œä¼ä¸šå¼€å‘è€…ä¸¤ç§ï¼Œä¼ä¸šå¼€å‘è€…è¦æäº¤çš„èµ„æ–™å¤šä¸€äº›ã€‚ä¼ä¸šçº§å¼€å‘è¯ä¹¦æ˜¯ä¸“é—¨ç”¨æˆ·å¤„ç†APPä¸éœ€è¦ä¸Šæ¶App Storeçš„æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ä½ ç”¨è¿™ä¸ªè¯ä¹¦å¼€å‘çš„APPï¼Œå¯ä»¥ä¸ç»è¿‡Appleå®¡æ ¸ï¼Œä¸ä¸ŠApp Storeï¼Œè‡ªå·±å‘å¸ƒï¼Œåˆ«äººå°±èƒ½å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ°è¿™ç§è¯ä¹¦å‘¢ï¼Œæˆ‘æƒ³ä¸€ç§æƒ…å†µæ˜¯ä¼ä¸šå†…éƒ¨çš„APPï¼Œå› ä¸ºä¸€äº›é—®é¢˜ï¼Œä¸éœ€è¦ä¸ŠApp Storeï¼Œè‡ªå·±å†…éƒ¨äººå£«ä½¿ç”¨ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼æ˜¯å¾ˆå¥½çš„ã€‚è¿˜æœ‰ä¸€ç§ç”¨æ³•å°±æ˜¯ç”¨ä½œbetaæµ‹è¯•ã€‚æˆ‘ä»¬å¼€å‘å‡ºæ¥çš„APPï¼Œéœ€è¦è¿›è¡Œå¤šäººçš„betaæµ‹è¯•ï¼Œå¯ä»¥ç”¨ä¼ä¸šçº§è¯ä¹¦æ¥æ‰“åŒ…å‘å¸ƒï¼Œç„¶åæŠŠå®‰è£…ç½‘å€å‘ç»™ç”¨æˆ·ï¼Œç”¨æˆ·å°±å¯ä»¥å®‰è£…ä½¿ç”¨äº†ã€‚çœŸçš„å¾ˆæ–¹ä¾¿ã€‚è¿™ç§æ–¹å¼è¿˜æ˜¯æŒºæµè¡Œçš„ï¼Œç‰¹åˆ«æ˜¯å¤§å…¬å¸å†…éƒ¨ï¼Œéƒ½æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼æ¥åšæµ‹è¯•ï¼Œå½“æµ‹è¯•å®Œæˆä¹‹åï¼Œå†ç”¨æ™®é€šå¼€å‘è¯ä¹¦æ‰“åŒ…ï¼Œæäº¤åˆ°App Storeå®¡æ ¸ï¼Œå®Œç¾ã€‚&lt;/p&gt;
&lt;p&gt;é‚£è¿™ç§æ–¹å¼æœ‰æ²¡æœ‰ä»€ä¹ˆå¼Šç«¯ï¼Ÿå½“ç„¶æ˜¯æœ‰çš„ï¼Œä¾‹å¦‚ç”¨ä¼ä¸šçº§å¼€å‘è¯ä¹¦æ‰“åŒ…çš„APPï¼Œæ— æ³•ä½¿ç”¨æ¨é€é€šçŸ¥ï¼Œè¿˜æœ‰ä¸€äº›è·ŸApp Storeç›¸å…³çš„åŠŸèƒ½ã€‚å¦‚æœä½ æ˜¯å†…éƒ¨ä½¿ç”¨çš„APPï¼Œè¿˜æ— æ³•ä½¿ç”¨App Storeæ¥æ›´æ–°APPï¼Œåªæœ‰ä½ ä»¬è‡ªå·±å®ç°APPæ›´æ–°çš„åŠŸèƒ½ã€‚è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œä¸€èˆ¬æ¥è¯´ç”¨ä¼ä¸šçº§å¼€å‘è¯ä¹¦æ‰“åŒ…APPï¼Œä½¿ç”¨çš„BundleIDè·Ÿæ­£å¼è¦å‘å¸ƒåˆ°App Storeçš„BundleIDæ˜¯ä¸ä¸€æ ·çš„ï¼ˆæ™®é€šåšæ³•éƒ½æ˜¯åœ¨æ­£å¼çš„bundleIDåé¢åŠ Enterpriseåè€….enterpriseï¼‰,è¿™æ ·å®‰è£…åˆ°æ‰‹æœºä¸Šå°±æ˜¯ä¸¤ä¸ªä¸åŒçš„APPäº†ã€‚å¯¹åº”æ™®é€šç”¨æˆ·æ¥è¯´ï¼Œä½ ä¸çŸ¥é“æ€ä¹ˆç»™ä»–è§£é‡Šè¿™ä¸ªã€‚å¦‚æœä¼ä¸šç‰ˆå’Œæ­£å¼ç‰ˆéƒ½ç”¨åŒä¸€ä¸ªBundleIDï¼Œä¹Ÿæœ‰ä¸å¥½çš„åœ°æ–¹ã€‚å¦å¤–è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯å®‰è£…ä¼ä¸šç‰ˆAPPçš„æ—¶å€™ï¼Œéœ€è¦å…ˆä¿¡ä»»ä¸€ä¸ªè¯ä¹¦ã€‚è€Œä¸”æ˜¯è¦åˆ°è®¾ç½®é‡Œé¢è‡ªå·±ç‚¹å‡»ä¿¡ä»»ï¼Œæ“ä½œæœ‰ç‚¹éš¾åº¦ï¼Œè€Œä¸”å¾ˆå¤šäººä¸æ•¢æ€ä¹ˆä¿¡ä»»è¿™äº›ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œå¦‚æœä½ åªæ˜¯ç”¨ä¼ä¸šçº§å¼€å‘è¯ä¹¦æ¥æ‰“åŒ…æµ‹è¯•çš„ï¼Œé‚£ä¹ˆè¦ç»å¸¸åœ¨ä¼ä¸šçº§å¼€å‘è¯ä¹¦å’Œæ™®é€šå¼€å‘è¯ä¹¦ä¹‹å‰åˆ‡æ¢ï¼Œä½ ç”¨æŒç»­é›†æˆç¯å¢ƒæ‰“åŒ…çš„è¯ï¼Œè¿˜è¦ä¸“é—¨è®¾ç½®ä¼ä¸šç‰ˆæ‰“åŒ…ï¼Œæˆ‘ä»¥å‰ç”¨Jenkinsåšä¸ªè¿™ä¸ªè®¾ç½®ï¼ŒæŒºçƒ¦ï¼ŒæŠ˜è…¾äº†ä¸å°‘ç²¾åŠ›ï¼Œä¹Ÿä¸“é—¨å†™è¿‡è¿™æ–¹é¢çš„æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨è¿˜æœ‰å¾ˆå¤šä¼ä¸šæ˜¯ç”¨è¿™ç§æ–¹å¼æ¥åšbetaæµ‹è¯•çš„ã€‚&lt;/p&gt;
&lt;h3&gt;TestFlightï¼Œå…¬å¼€é“¾æ¥&lt;/h3&gt;
&lt;p&gt;å¤§å…¬å¸å¯ä»¥ç”³è¯·ä¼ä¸šçº§å¼€å‘è¯ä¹¦ï¼Œä»–ä»¬ä¸åœ¨ä¹é‚£ç‚¹é’±ã€‚ä¼ä¸šçº§å¼€å‘è¯ä¹¦æ‰“åŒ…å¯ä»¥éšæ—¶æ‰“åŒ…éšæ—¶å‘å¸ƒï¼Œé‚£çœŸæ˜¯æ¯”è¾ƒç†æƒ³çš„betaæµ‹è¯•æ–¹å¼ã€‚ä½†æ˜¯å°å…¬å¸æ€ä¹ˆåŠå‘¢ï¼Œå°å…¬å¸æ²¡é‚£ä¹ˆå¤šè´¢åŠ›å’Œç²¾åŠ›åšè¿™ä¸ªäº‹æƒ…ã€‚è‹¹æœä¹Ÿæä¾›äº†TestFlightçš„æ–¹å¼ã€‚
TestFlightæœ€æ—©æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å…¬å¸ï¼Œåæ¥è¢«è‹¹æœå…¬å¸æ”¶è´­äº†ï¼Œå¹¶æ•´åˆåˆ°äº†iTunesconnectä¸Šã€‚æ—©æœŸæˆ‘ä»¬æ€ä¹ˆç”¨TestFlightæ¥åšbetaæµ‹è¯•å‘¢ï¼Ÿä»iTunesconnectä¸Šå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨æµ‹è¯•å’Œå¤–éƒ¨æµ‹è¯•åˆ†ç±»ã€‚å†…éƒ¨æµ‹è¯•ï¼Œå°±æ˜¯ä½ å¯ä»¥é‚€è¯·ä¸€äº›äººï¼ˆé€šè¿‡ä»–ä»¬çš„Apple IDï¼‰æ¥åŠ å…¥iTunesconnectï¼Œè®©ä»–ä»¬ä½œä¸ºå†…éƒ¨æµ‹è¯•äººå‘˜ã€‚ä½ åªéœ€è¦å°†ä½ çš„APPä¸Šä¼ åˆ°iTunesconnectï¼Œç„¶åä½ åˆšåˆšä¸Šä¼ çš„ç‰ˆæœ¬ï¼ŒåŠ å…¥åˆ°å†…éƒ¨æµ‹è¯•ä¸­ï¼Œå†…éƒ¨æµ‹è¯•äººå‘˜å°±å¯ä»¥æ”¶åˆ°é‚®ä»¶ï¼Œé‚®ä»¶é‡Œä¼šæ•™ä»–ä»¬å¦‚ä½•ä½¿ç”¨TestFlightæ¥å®‰è£…æµ‹è¯•ã€‚è¿™ç§æ–¹ä¼¼ä¹æœ‰ç¼ºé™·ï¼Œå› ä¸ºå¿…é¡»é‚€è¯·ä»–ä»¬åŠ å…¥iTunesconnectæ‰è¡Œï¼Œæ˜¾ç¤ºè¿™æ˜¯é’ˆå¯¹å…¬å¸å†…éƒ¨äººå‘˜çš„ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå¤–éƒ¨æµ‹è¯•çš„è¯ï¼Œä¸éœ€è¦é‚€è¯·ï¼Œä½†æ˜¯éœ€è¦è·å–ä»–ä»¬çš„é‚®ä»¶åœ°å€ã€‚å¹¶ä¸”ä½ çš„APPç‰ˆæœ¬éœ€è¦å…ˆæäº¤å®¡æ ¸äººå‘˜å®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡äº†æ‰èƒ½é€šè¿‡é‚®ä»¶å‘ç»™ç›¸å…³äººå‘˜ã€‚åæ¥æœ‰ç¬¬ä¸‰æ–¹å…¬å¸ä¸“é—¨åšè¿™ä¸ªçš„ï¼Œä¸å†éœ€è¦ç”¨æˆ·æ˜¯é‚®ä»¶äº†ã€‚ä½ åªéœ€åœ¨å®¡æ ¸è¿‡åï¼Œå¯¼å…¥ä»–ä»¬æä¾›çš„æ–‡ä»¶å°±å¯ä»¥æ„‰å¿«çš„å‘å¸ƒä»»ä½•ç”¨æˆ·æµ‹è¯•äº†ã€‚è¿™ç§æ–¹å¼æˆ‘è‡ªå·±æ²¡æœ‰è¯•è¿‡ï¼Œä½†æ˜¯æˆ‘é€šè¿‡è¿™ç§æ–¹å¼å®‰è£…è¿‡åˆ«äººçš„APPã€‚å¦‚æœå¯ä»¥çœç•¥æ‰æ‰‹æœºç”¨æˆ·çš„é‚®ä»¶è¿™æ­¥ï¼ŒçœŸæ˜¯ä¸€ä¸ªå¤§è¿›æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡å¥½æ¶ˆæ¯æ˜¯ï¼Œç°åœ¨è‹¹æœå·²ç»æä¾›äº†ä¸€ç§å«&lt;strong&gt;å…¬å¼€é“¾æ¥&lt;/strong&gt;çš„æ–¹å¼ï¼Œä¸å†éœ€è¦æ‰‹æœºç”¨æˆ·çš„é‚®ä»¶æ¥åšbetaæµ‹è¯•äº†ã€‚å½“ç„¶å®¡æ ¸æ˜¯çœç•¥ä¸äº†ï¼Œä½ ä»ç„¶éœ€è¦ä¸Šä¼ ä½ æ„å»ºçš„APPï¼Œç„¶åå»ºä¸€ä¸ªå°ç»„ï¼Œåœ¨è¿™ä¸ªç»„é‡Œé€‰ä¸­ä½ åˆšæ„å»ºçš„ç‰ˆæœ¬ï¼Œæäº¤å®¡æ ¸ã€‚å®¡æ ¸è¿‡åï¼Œä¼šæœ‰ä¸€ä¸ªå«å…¬å¼€è¿æ¥çš„æŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åï¼Œä¼šç”Ÿæˆä¸€ä¸ªè¿æ¥åœ°å€ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªé“¾æ¥åœ°å€å‘ç»™ä»»ä½•äººï¼Œä»–ä»¬æ‰“å¼€è¿™ä¸ªé“¾æ¥åï¼Œä¼šæœ‰æ•™ä»–ä»¬æ€å®‰è£…ä½¿ç”¨ï¼ˆå½“è®©è¿˜æ˜¯é€šè¿‡TestFlightï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘çœ‹æ·˜å®å’Œäº¬ä¸œå·²ç»é‡‡ç”¨è¿™ç§æ–¹å¼åœ¨åšbetaæµ‹è¯•äº†ã€‚è¿™ç§æ–¹å¼ä¼˜ç‚¹å¾ˆæ˜æ˜¾ï¼šç”¨æˆ·æ˜¯é€šè¿‡è‹¹æœå®˜æ–¹æ–¹å¼å®‰è£…çš„ï¼Œä»–ä»¬æ¯”è¾ƒä¿¡ä»»è¿™ä¸ªï¼Œæ¯”é‚£ç§ä¼ä¸šç‰ˆè¦é¢å¤–ä¿¡ä»»çš„æ–¹å¼è¦å¥½ã€‚è¿˜æœ‰è¿™ç§æ–¹å¼è·Ÿæ­£å¼ç‰ˆæ˜¯æ²¡æœ‰ä»»ä½•åŒºåˆ«çš„ï¼Œæ¨é€ä»€ä¹ˆçš„éƒ½æ˜¯æ­£å¸¸å¯ä»¥ç”¨çš„ã€‚å½“ç„¶ç¼ºç‚¹å°±æ˜¯æ¯ä¸ªç‰ˆæœ¬éƒ½éœ€è¦è‹¹æœå…ˆå®¡æ ¸ï¼Œæœ‰ç‚¹æ…¢ï¼Œä¸å¤Ÿå¿«æ·ï¼ˆä¹Ÿè®¸è¿™ä¸ç®—ç¼ºç‚¹ï¼Œå› ä¸ºè¿™æ˜¯å¿…è¦çš„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è§‰å¾—&lt;strong&gt;å…¬å¼€é“¾æ¥&lt;/strong&gt;è¿™ç§æ–¹å¼æ˜¯æœ€å¥½çš„betaæµ‹è¯•æ–¹å¼ï¼Œå€¼å¾—æ¯ä¸ªiOSå¼€å‘è´Ÿè´£äººå»ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="iOSå¼€å‘ betaæµ‹è¯• TestFlight å…¬å¼€é“¾æ¥"></category></entry><entry><title>SVGå›¾ç‰‡åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨è§£å†³æ–¹æ¡ˆ</title><link href="http://szuwest.github.io/svgtu-pian-zai-yi-dong-duan-de-ying-yong-jie-jue-fang-an.html" rel="alternate"></link><updated>2018-11-03T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-11-03:svgtu-pian-zai-yi-dong-duan-de-ying-yong-jie-jue-fang-an.html</id><summary type="html">&lt;h2&gt;SVGå›¾ç‰‡åœ¨ç§»åŠ¨ç«¯çš„åº”ç”¨è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;è¿‘å‡ å¹´æ¥SVGä½¿ç”¨å¾—è¶Šæ¥è¶Šå¤šï¼Œå°±è¿Androidçš„å®˜æ–¹åº“ä¹ŸåŠ å…¥VectorDrawableçš„æ”¯æŒã€‚è¿™ä¸ªç±»å°±æ˜¯ç”¨æ¥æ”¯æŒå‘é‡å›¾çš„ã€‚SVGå›¾ç‰‡åœ¨webç«¯ä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªä¹Ÿæ˜¯åœ¨åšreact-nativeçš„é¡¹ç›®ä¸­ä½¿ç”¨çš„ã€‚å½“æ—¶æˆ‘ä»¬è¦åšä¸€äº›åŠ¨ç”»ï¼Œéœ€è¦ä»ä¸€ä¸ªå½¢çŠ¶å˜æ¢æˆå¦ä¸€ä¸ªå½¢çŠ¶ï¼Œè¿™ç§ä¸€èˆ¬éƒ½æ˜¯ç”¨çŸ¢é‡å›¾æ¥åšçš„ã€‚å½“æ—¶è®¾è®¡å¸ˆå°±ç»™äº†æˆ‘ä¸€äº›çŸ¢é‡å›¾ï¼Œäºæ˜¯æˆ‘å°±å¼€å§‹ç ”ç©¶è¿™ä¸ªä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨react-nativeä¸­ï¼Œæœ‰ä¸“é—¨ä¸€ä¸ªåº“å«&lt;a href="https://github.com/react-native-community/react-native-svg"&gt;react-native-svg&lt;/a&gt;æ¥å¤„ç†è¿™ä¸ªã€‚ä¸è¿‡å½“æ—¶è¦åšä¸¤ä¸ªSVGå½¢çŠ¶çš„åŠ¨ç”»å˜åŒ–ï¼Œå¹¶ä¸æ˜¯ä»»ä½•ä¸€ä¸ªå½¢çŠ¶éƒ½å¯ä»¥çš„ï¼Œéœ€è¦éµå¾ªä¸€å®šçš„æ ‡å‡†ã€‚è®¾è®¡å¸ˆç»™æˆ‘çš„ä¸¤ä¸ªSVGæ–‡ä»¶å¹¶ä¸èƒ½è½¬æ¢ã€‚åæ¥æ˜¯æˆ‘è‡ªå·±æ ¹æ®æ–‡ä»¶é‡Œçš„ä¸€äº›å…³é”®å‚æ•°è‡ªå·±åœ¨ä»£ç é‡Œç›´æ¥ç”»å‡ºæ¥åï¼Œå†åšè½¬æ¢åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘æˆ‘åœ¨åšçš„nativeé¡¹ç›®ä¸­ï¼Œä¹Ÿé‡åˆ°äº†è¦ç”¨SVGçš„å›¾ç‰‡ã€‚æˆ‘ä»¬çš„é¡¹ç›®é‡Œè¦ä»æœåŠ¡å™¨ä¸‹è½½SVGå›¾ç‰‡æ¥å±•ç¤ºã€‚æˆ‘ä»¬è¦å®ç°çš„è¿™äº›æ–‡ä»¶æ˜¯éœ€è¦æœåŠ¡å™¨åŠ¨æ€é…ç½®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸èƒ½é¢„å…ˆæ‰“åŒ…è¿›æˆ‘ä»¬çš„APPé‡Œã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œçš„è¦æä¾›ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œè·Ÿå›¾ç‰‡JPGå›¾ç‰‡ä¸€æ ·æ˜¾ç¤ºï¼Œç¼“å­˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªéœ€æ±‚è·Ÿä¹‹å‰æˆ‘é‡åˆ°çš„é‚£ä¸ªéœ€æ±‚æ˜¯å¾ˆä¸ä¸€æ ·çš„ï¼Œä¹‹å‰çš„æ˜¯è®¾è®¡å¸ˆå·²ç»å®šä¹‰å¥½å›¾ç‰‡ï¼Œæˆ‘ä»¬å·¥ç¨‹å¸ˆç›´æ¥æ‹¿åˆ°æ–‡ä»¶åœ¨ç¨‹åºé‡Œå±•ç¤ºï¼Œä¸éœ€è¦è€ƒè™‘ä¸‹è½½å’Œç¼“å­˜ä¹‹ç±»çš„ã€‚è¿™ç§éœ€æ±‚å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¤§éƒ¨åˆ†çš„éœ€æ±‚å°±æ˜¯è¿™ç§éœ€æ±‚ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šåº“å¯ä»¥å®Œæˆè¿™ç§éœ€æ±‚ã€‚æŠŠSVGå›¾ç‰‡è·ŸJPGç­‰æ™®é€šå›¾ç‰‡ä¸€æ ·ä½¿ç”¨ï¼Œç½‘ä¸Šçš„æ–¹æ¡ˆè¿˜çœŸä¸å¤šï¼Œç‰¹åˆ«æ˜¯iOSæ–¹é¢ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;è¦åƒæ™®é€šå›¾ç‰‡ä¸€æ ·ä½¿ç”¨ï¼Œå°±è¦è€ƒè™‘ä¸‹è½½ï¼Œæœ¬åœ°ç¼“å­˜ï¼Œå†…å­˜ç¼“å­˜ã€‚åƒè¿™ç§éœ€æ±‚ï¼Œæˆ‘ä»¬ç§»åŠ¨ç«¯éƒ½ä¼šä½¿ç”¨ä¸“é—¨çš„å›¾ç‰‡æ¡†æ¶ï¼Œåƒå®‰å“ç«¯çš„glideï¼ŒUILç­‰ï¼ŒiOSç«¯çš„SDWebImageç­‰ã€‚ä½†æ˜¯è¿™ç§åº“å®ƒæ˜¯é»˜è®¤éƒ½ä¸ä¼šè€ƒè™‘SVGå›¾ç‰‡ã€‚ä½†æ˜¯æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯åƒä½¿ç”¨è¿™ç§æ¡†æ¶æ¥å¤„ç†SVGå›¾ç‰‡ã€‚æœ€å¥½çš„æ–¹å¼å°±æ˜¯æŠŠSVGçš„æ”¯æŒé›†æˆåˆ°è¿™äº›åº“ä¸­ã€‚å¥½åœ¨è¿™äº›åº“çš„ä¼˜ç‚¹å°±æ˜¯å®¹æ˜“æ‰©å±•ã€‚&lt;/p&gt;
&lt;h3&gt;å®‰å“ç«¯çš„è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯é‡‡ç”¨glideæ¡†æ¶æ¥å¤„ç†å›¾ç‰‡ï¼Œæ‰€ä»¥è¿™é‡Œå°±åªè®²åœ¨è¿™ä¸ªæ¡†æ¶é›†æˆSVGå›¾ç‰‡çš„å±•ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸ŠglideçœŸçš„æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åº“ï¼Œæ€ªä¸å¾—é‚£ä¹ˆå¤šäººç”¨å®ƒï¼ˆæ—©å‡ å¹´æˆ‘ä»¬éƒ½æ˜¯ç”¨UILï¼‰ï¼Œå®ƒåœ¨å®ƒçš„sampleä¾‹å­é‡Œå°±æä¾›äº†SVGçš„å±•ç¤ºæ”¯æŒ&lt;a href="https://github.com/bumptech/glide/tree/master/samples/svg"&gt;svg&lt;/a&gt;ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œé‡‡ç”¨çš„SVGè§£ç æ–¹å¼æ˜¯ä½¿ç”¨å¤–éƒ¨çš„è§£ç åº“ã€‚å®ƒé‡‡ç”¨çš„è§£ç åº“æ˜¯&lt;a href="https://github.com/BigBadaboom/androidsvg"&gt;androidsvg&lt;/a&gt;ã€‚è¿™ä¸ªåº“æ˜¯webç«¯ç§»æ¤è¿‡æ¥çš„ï¼Œæ‰€ä»¥å®ƒæœ‰å¾ˆå¥½çš„å…¼å®¹æ€§ï¼Œæ˜¯å¾ˆä¸é”™çš„åº“ï¼Œè™½ç„¶å®ƒçš„starä¸æ˜¯å¾ˆå¤šã€‚Androidå°±æ˜¯å¥½ï¼Œæœ‰å¼ºå¤§çš„Javaç¤¾åŒºï¼Œå—ç›Šäºè¿™äº›ç¤¾åŒºï¼Œå¾ˆå¤šåº“éƒ½ä¸é”™ã€‚è€Œè¿™æ–¹é¢iOSå°±é‚£ä¹ˆå¥½äº†ï¼Œè¿™ä¸ªç­‰ä¸€ä¸‹å†è¯´ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§å®ƒæä¾›çš„sampleæ¥é›†æˆSVGçš„æ”¯æŒï¼Œä¸æ˜¯å¾ˆéš¾ã€‚ä½†æ˜¯æˆ‘é‡åˆ°äº†å…¶ä»–é—®é¢˜ã€‚å› ä¸ºæˆ‘ä»¬é¡¹ç›®é‡Œçš„glideä½¿ç”¨çš„æ˜¯3.7ç‰ˆæœ¬ï¼Œsampleæ˜¯åŸºäº4.8ç‰ˆæœ¬çš„ã€‚è¿™ä¸¤ä¸ªç‰ˆæœ¬åœ¨APIä¸Šæœ‰å¾ˆå¤§åŒºåˆ«ï¼Œå˜åŒ–å¾ˆå¤§ã€‚æ‰€ä»¥æˆ‘å¿…é¡»è¦å…ˆå‡çº§åˆ°4.8ç‰ˆæœ¬ã€‚ç­‰æˆ‘å‡çº§å®Œåï¼Œæ¥å…¥SVGçš„æ”¯æŒï¼Œç„¶è€ŒSVGå›¾ç‰‡æ­»æ´»æ˜¾ç¤ºä¸å‡ºæ¥ã€‚æœ€ç»ˆå‘ç°æ˜¯æˆ‘çš„AppModuleæ— æ³•ç”Ÿæˆã€‚ä¸€ç›´åœ¨æ–‡æ¡£ï¼ŒæŸ¥èµ„æ–™ï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ°é—®é¢˜ï¼Œæˆ‘æ˜¯å®Œå…¨æŒ‰ç…§å®˜æ–¹æ–‡æ¡£å‡çº§å’Œé›†æˆçš„ã€‚æœ€ç»ˆæˆ‘å‘ç°å¯èƒ½æ˜¯è·ŸAndroidXç›¸å…³ï¼ˆè¿˜ä¸çŸ¥é“AndroidXæ˜¯ä»€ä¹ˆçš„è‡ªå·±æŸ¥ï¼‰ã€‚æˆ‘ä»¬é¡¹ç›®å‡çº§åˆ°äº†AndroidXï¼Œå®ƒä¼šå½±å“ä¸€äº›annotationç”Ÿæˆæ–¹å¼ã€‚æˆ‘ä»¬çš„é¡¹ç›®é‡‡ç”¨æ’ä»¶å¼æ¡†æ¶ã€‚æˆ‘ä»¬å¾ˆå¤šé€šç”¨åº“æ˜¯æ”¾åœ¨ä¸€ä¸ªcommomlibraryçš„Moduleä¸­ï¼Œglideä¹Ÿæ˜¯ã€‚APP moduleå°±åªæ˜¯ä¸€ä¸ªå£³ã€‚ä½†æ˜¯ä¸€äº›annotationçš„å£°æ˜ä¸€å®šè¦æ”¾åœ¨APP moduleä¸­æ‰è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠ &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;annotationProcessor&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;androidx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1.0.0&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;annotationProcessor&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;github&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bumptech&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;glide&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;compiler&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;4.8.0&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ”¾åœ¨äº†APP moduleä¸­ï¼Œæœ€ç»ˆé‚£äº›è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç æ‰ä¼šçœŸæ­£çš„ç”Ÿæˆã€‚è¿™æ ·å°±å¯ä»¥å¾ˆæ„‰å¿«çš„ç”¨glideæ¥æ˜¾ç¤ºSVGå›¾ç‰‡äº†ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt; &lt;span class="n"&gt;GlideSvgUtil&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;//æ˜¾ç¤ºç½‘ç»œä¸­çš„svgæ–‡ä»¶&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;showSvg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImageView&lt;/span&gt; &lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Glide&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;as&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PictureDrawable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;listener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SvgSoftwareLayerSetter&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;//æŠŠsvgæ”¾å…¥åˆ°rawä¸­ï¼Œé€šè¿‡rawidæ¥æ˜¾ç¤º&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;showSvgRes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImageView&lt;/span&gt; &lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;rawId&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Uri&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Uri&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ContentResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SCHEME_ANDROID_RESOURCE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;://&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;getPackageName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;
                &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;rawId&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Glide&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;as&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PictureDrawable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;listener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SvgSoftwareLayerSetter&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;//æŠŠsvgçš„XMLåŠ è½½åˆ°å­—ç¬¦ä¸²ä¸­æ¥æ˜¾ç¤º&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;showSvgContent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ImageView&lt;/span&gt; &lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;svgContent&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Glide&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;as&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PictureDrawable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;listener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SvgSoftwareLayerSetter&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;svgContent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getBytes&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;imageView&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;iOSç«¯çš„è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;
&lt;p&gt;iOSçš„æ–¹æ¡ˆè¿˜ä¸æ˜¯å¾ˆå¥½è§£å†³ï¼Œæˆ‘æ²¡æœ‰å‘ç°æœ‰å“ªä¸€ä¸ªå›¾ç‰‡æ¡†æ¶æ˜¯é›†æˆäº†SVGæˆ–è€…æä¾›äº†é›†æˆçš„ä¾‹å­çš„ã€‚è€Œä¸”æˆ‘ä»¬çš„åŒäº‹è¿˜å‘ç°äº†ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬æœåŠ¡å™¨æä¾›çš„SVGå›¾ç‰‡åœ¨å¾ˆå¤šåº“è§£ç å‡ºæ¥åæ²¡æœ‰äº†é¢œè‰²ï¼Œæ˜¯é»‘ç™½çš„ã€‚å¾ˆè¯¡å¼‚çš„é—®é¢˜ï¼Œç„¶è€Œå®‰å“ç«¯æ²¡æœ‰è¿™é—®é¢˜ã€‚æˆ‘ä»¬æ‰¾å¾ˆå¤šåº“ï¼ŒåƒSVGKitï¼ŒSwiftSVGï¼ŒPocketSVGï¼ŒMacawï¼Œè¿™äº›åº“éƒ½æ˜¯è¶…è¿‡1000starçš„ï¼Œéƒ½æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚æˆ‘åŸºæœ¬ç¡®å®šæ˜¯æˆ‘ä»¬SVGæ–‡ä»¶çš„å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘é—®æˆ‘ä»¬çš„è®¾è®¡å¸ˆä»–æ˜¯æ€ä¹ˆç”ŸæˆSVGæ–‡ä»¶çš„ã€‚ä»–è¯´æ˜¯ç”¨sketchå¯¼å‡ºæ¥çš„ã€‚è¿™äº›æ–‡ä»¶åœ¨webå’Œå®‰å“çš„åº“ï¼Œè¿˜æœ‰ç”šè‡³xcodeé‡Œéƒ½æ˜¯èƒ½æ­£å¸¸æ˜¾ç¤ºçš„ã€‚è¿™é‡Œæˆ‘æä¾›ä¸€ä¸ªä¸èƒ½æ­£å¸¸æ˜¾ç¤ºçš„å›¾ç‰‡ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;svg&lt;/span&gt; &lt;span class="na"&gt;id=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;å›¾å±‚_1&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;data-name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;å›¾å±‚ 1&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2000/svg&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;viewBox=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0 0 80 80&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;defs&amp;gt;&amp;lt;style&amp;gt;&lt;/span&gt;.cls-1{fill:#ff9595;}.cls-2{fill:#ffcc80;}&lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&amp;lt;/defs&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;title&amp;gt;&lt;/span&gt;å½©è‰²å›¾æ ‡&lt;span class="nt"&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;path&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;cls-1&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;d=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;M43,77A27.14,27.14,0,0,0,58.64,27.67a24.55,24.55,0,0,1-6.4,8A24.44,24.44,0,0,0,34.55,3a24.48,24.48,0,0,1,.87,6.49c0,21.19-25.57,21.72-25.57,42.37C9.85,64.9,20.47,77,43,77Z&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&amp;lt;path&lt;/span&gt; &lt;span class="na"&gt;class=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;cls-2&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;d=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;M51,66c0-9.28-11.79-11.85-11.79-21.74A12.3,12.3,0,0,1,40,39.95,20.79,20.79,0,0,0,34.77,76.4,54.34,54.34,0,0,0,43,77c.86,0,1.7,0,2.53-.12A13.47,13.47,0,0,0,51,66Z&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/svg&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å› ä¸ºæ˜¯é¢œè‰²ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œæˆ‘çŒœè‚¯å®šæ˜¯defsæ ‡ç­¾é‡Œçš„å†…å®¹ä¸èƒ½æ­£å¸¸è§£æã€‚æˆ‘ç¨å¾®æ”¹äº†ä¸‹æ–‡ä»¶ï¼Œå°±èƒ½æ­£å¸¸æ˜¾ç¤ºäº†ã€‚æˆ‘è¿˜å‘ç°å¯¹SVGæ˜¾ç¤ºæ”¯æŒçš„æ¯”è¾ƒå¥½çš„æ˜¯Macawï¼Œå…¶ä»–çš„è²Œä¼¼éƒ½æœ‰ç‚¹å°é—®é¢˜ã€‚æ‰€ä»¥æˆ‘æŠŠè¿™ä¸ªé—®é¢˜åœ¨Macawä¸Šæäº¤äº†ã€‚æˆ‘ä¸çŸ¥é“ä»–ä»¬ä¼šä»€ä¹ˆæ—¶å€™ä¿®æ”¹ï¼Œæ‰€ä»¥æˆ‘å°±è‡ªå·±å»ç ”ç©¶ä»–ä»¬çš„æºä»£ç ï¼Œå‡†å¤‡è‡ªå·±æ¥è§£å†³äº†ã€‚å¾ˆå¿«æˆ‘å°±å‘ç°ä»–ä»¬åœ¨é¢„è§£æé˜¶æ®µï¼Œè§£ædefsæ ‡ç­¾çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰è€ƒè™‘styleè¿™ç§å­æ ‡ç­¾ã€‚æ‰€ä»¥æˆ‘å°±åŠ ä¸Šå»äº†ï¼Œå°±ä¸¤ä¸‰è¡Œä»£ç ï¼ˆä»–ä»¬çš„ä»£ç æ¶æ„æŒºå¥½ï¼‰ï¼Œç„¶åå°±æ­£å¸¸æ˜¾ç¤ºäº†ã€‚åæ¥æˆ‘åˆåˆ°Macawç½‘ç«™ä¸Šçœ‹ï¼Œä»–ä»¬å·²ç»å›å¤æˆ‘äº†ï¼Œå¹¶ä¸”å·²ç»æ”¯æŒï¼å‰åä¹Ÿå°±ä¸€ä¸ªå¤šå°æ—¶ï¼ä»–è¯´defsæ ‡ç­¾é‡Œä¸€èˆ¬ä¸ä¼šæ”¾styleæ ‡ç­¾ï¼Œä¸è¿‡å¾ˆå¤šå…¶ä»–åº“æ”¯æŒï¼Œæ‰€ä»¥ä»–ä»¬ä¹Ÿå°±æ”¯æŒäº†ã€‚æˆ‘å»çœ‹ä»–æ”¹çš„ä»£ç ï¼Œå‡ ä¹è·Ÿæˆ‘æ”¹ä¸€æ ·ã€‚æ‰€ä»¥æˆ‘å°±æ”¾å¼ƒè‡ªå·±çš„æ”¹åŠ¨ï¼Œé‡‡ç”¨cocoapodsç›´æ¥æ‹‰å–ä»–ä»¬çš„masterä¸Šçš„æœ€æ–°ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;è§£ç çš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯æ€ä¹ˆé›†æˆåˆ°å›¾ç‰‡æ¡†æ¶é‡Œå‘¢ï¼Ÿæˆ‘ä»¬é¡¹ç›®æ˜¯é‡‡ç”¨swiftå¼€å‘çš„ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„å›¾ç‰‡å¤„ç†æ¡†æ¶æ˜¯Kingfisherã€‚æˆ‘å»Kingfisherçš„ç½‘ç«™ä¸Šçœ‹ï¼Œå–µç¥å¾ˆå‰å®³ï¼Œå·²ç»æœ‰å¾ˆå¥½çš„æ–‡æ¡£æ•™æˆ‘ä»¬æ€ä¹ˆæ‰©å±•å›¾ç‰‡è§£ç å™¨ã€‚æˆ‘ä¸€çœ‹ï¼Œå¦ä¸€ä¸ªé—®é¢˜æ¥äº†ï¼Œè§£ç å™¨æ˜¯åœ¨å·¥ä½œçº¿ç¨‹ä¸­è¿›è¡Œçš„ï¼Œå¹¶ä¸”è¦è¿”å›ä¸€ä¸ªUIImageã€‚Macawè¿™ä¸ªåº“å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå¯ä»¥åœ¨å­çº¿ç¨‹ä¸­å°†SVGæ–‡ä»¶è½¬ä¸ºUIImageçš„æ–¹æ³•ã€‚ä»–ä»¬çš„æ–¹æ³•æ˜¯å°†SVGæ˜¾ç¤ºåœ¨ä¸€ä¸ªUIViewé‡Œç„¶åæˆªå›¾ã€‚ã€‚ã€‚ä¹Ÿæœ‰äººå°†è¿™ä¸ªé—®é¢˜æäº†ã€‚æˆ‘çœ‹ä»–ä»¬æºç å‘ç°æœ‰æ”¯æŒçš„ï¼Œä½†æ˜¯æ²¡æœ‰æ”¾å‡ºæ¥ï¼Œæ— æ³•ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æœ€ç»ˆä¹Ÿåªèƒ½é‡‡ç”¨æ›²çº¿æ•‘å›½çš„æ–¹æ³•äº†ã€‚è¿˜æ˜¯ç”¨ä»–ä»¬çš„æ–¹æ³•ï¼Œæˆ‘åœ¨è§£ç çº¿ç¨‹é‡ŒåŒæ­¥åˆ‡åˆ°ä¸»çº¿ç¨‹ä¸­ç”ŸæˆUIImageï¼Œç„¶åå†åœ¨å­çº¿ç¨‹ä¸­è¿”å›è¿™ä¸ªUIImageã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œæœ€è¿‘ä¸¤å¤©ï¼Œä»–ä»¬ç»ˆäºæ”¯æŒå°†ä¸€ä¸ªæ–‡ä»¶ç›´æ¥è½¬æ¢ä¸ºUIImageäº†å…·ä½“æ–¹æ¡ˆçœ‹&lt;a href="https://github.com/exyte/Macaw/issues/468"&gt;è¿™é‡Œ&lt;/a&gt;ï¼Œä¸è¿‡æˆ‘è¿˜æ²¡æµ‹è¯•ï¼Œä»–ä»¬ä¹Ÿè¿˜æ²¡å‘æ–°ç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;SVGè§£ç å™¨&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Foundation&lt;/span&gt;
&lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;UIKit&lt;/span&gt;
&lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Kingfisher&lt;/span&gt;
&lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Macaw&lt;/span&gt;

&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;SVGProcessor&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  &lt;span class="n"&gt;ImageProcessor&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;CGSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;height&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CGSize&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;height&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ä¸æ”¯æŒsizeä¸º0çš„æƒ…å†µmï¼Œå°†é‡‡ç”¨é»˜è®¤å€¼32&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;identifier&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;com.wegene.future&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;func&lt;/span&gt; &lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ImageProcessItem&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;KingfisherOptionsInfo&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;UIImage&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;:
            &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;already an image&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;image&lt;/span&gt;
        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;:
            &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;svgContent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Encoding&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;utf8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;UIImage&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt;
            &lt;span class="n"&gt;DispatchQueue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sync&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="c1"&gt;//ç°åœ¨Macawåº“æš‚æ—¶åªæ”¯æŒè¿™ç§æ–¹å¼ç”ŸæˆUIImage,ä¸‹ä¸€ç‰ˆä»–ä»¬æ”¯æŒåå°çº¿ç¨‹ç”ŸæˆUIImageçš„æ–¹å¼ï¼Œä»¥åå†åšä¿®æ”¹&lt;/span&gt;
                &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;rootNode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;try&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt; &lt;span class="n"&gt;SVGParser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;svgContent&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;macawView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;MacawView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rootNode&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;CGRect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;origin&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;CGPoint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zero&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="n"&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;UIScreen&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scale&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;macawView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;UIGraphicsGetCurrentContext&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;UIGraphicsEndImageContext&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;img&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;UIImageViewçš„æ‰©å±•&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;extension&lt;/span&gt; &lt;span class="n"&gt;UIImageView&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;func&lt;/span&gt; &lt;span class="n"&gt;setSvgImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;processor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SVGProcessor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;URL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;kf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[.&lt;/span&gt;&lt;span class="n"&gt;processor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processor&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è°¢è°¢é˜…è¯»ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="ç®—æ³• SVG androidsvg glide Macaw"></category></entry><entry><title>è°ˆè°ˆå½’å¹¶æ’åºç®—æ³•</title><link href="http://szuwest.github.io/tan-tan-gui-bing-pai-xu-suan-fa.html" rel="alternate"></link><updated>2018-08-06T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-08-06:tan-tan-gui-bing-pai-xu-suan-fa.html</id><summary type="html">&lt;h2&gt;è°ˆè°ˆå½’å¹¶æ’åºç®—æ³•&lt;/h2&gt;
&lt;p&gt;å½’å¹¶æ’åºç®—æ³•æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„ç®—æ³•ã€‚åœ¨æ’åºç®—æ³•ä¸­ï¼Œç®—æ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªç®—æ³•ã€‚æˆ‘ä»¬å¸¸è¯´çš„æ•°ç»„å½’å¹¶æ’åºï¼Œæ˜¯æŒ‡äºŒè·¯å½’å¹¶æ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(nlog(n)),ç©ºé—´è´Ÿè´£åº¦æ˜¯O(n).æ ¸å¿ƒçš„æ€æƒ³å°±æ˜¯å¯¹ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚å¯¹äºä¸€ä¸ªæœªæ’åºçš„æ•°ç»„æ€ä¹ˆäº§ç”Ÿä¸¤ä¸ªå·²æ’åºçš„æ•°ç»„å‘¢ï¼Ÿå…¶å®å°±æ˜¯å¯¹æ•°ç»„ä¸æ–­çš„åˆ†å‰²ï¼Œåˆ†å‰²æˆå¤šä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚åªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå½“ç„¶è¿™ä¸ªæ•°ç»„å°±æ˜¯æœ‰åºçš„äº†ã€‚ç„¶åå†å°†è¿™äº›æ•°ç»„è¿›è¡Œä¸¤ä¸¤åˆå¹¶ï¼Œåˆå¹¶åçš„æ•°ç»„è¿˜æ˜¯æœ‰åºæ•°ç»„ï¼Œè¿™æ ·å†æ¬¡è¿›è¡Œä¸¤ä¸¤åˆå¹¶ï¼Œæœ€ç»ˆå¯ä»¥åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ï¼Œè¿™æ ·æ’åºå°±å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;å½’å¹¶æ’åºçš„ç®—æ³•çœ‹èµ·æ¥ä¸æ˜¯å¾ˆå¤æ‚ï¼Œä½†æ˜¯å®ç°èµ·æ¥æˆ‘è§‰å¾—ä¸æ˜¯é‚£ä¹ˆç®€å•ã€‚é¦–å…ˆå®ƒéœ€è¦é¢å¤–çš„ç©ºé—´ï¼Œè¿™ä¸ªé¢å¤–çš„ç©ºé—´æ€ä¹ˆåˆ†é…è·Ÿç®—æ³•å®ç°æ–¹å¼æœ‰å…³ã€‚ç„¶åç®—æ³•çš„å®ç°æ–¹å¼æœ‰é€’å½’æ–¹å¼å’Œè¿­ä»£æ–¹å¼ä¸¤ç§ã€‚ç½‘ä¸Šæµè¡Œçš„éƒ½æ˜¯é€’å½’æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3&gt;é€’å½’æ–¹å¼&lt;/h3&gt;
&lt;p&gt;é€’å½’æ–¹å¼é‡‡ç”¨å…¸å‹ç®—æ³•ï¼šåˆ†æ²»æ³•æ¥è¿›è¡Œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1.å°†æ•°ç»„åˆ†ä¸ºä¸¤åŠï¼Œå‰ä¸€åŠå’Œåä¸€åŠã€‚&lt;/li&gt;
&lt;li&gt;2.å°†è¿™ä¸¤åŠè¿›è¡Œæœ‰åºæ•°ç»„åˆå¹¶&lt;/li&gt;
&lt;li&gt;3.ç»§ç»­è¿›è¡Œç¬¬1æ­¥ï¼Œç›´åˆ°æ•°ç»„ä¸èƒ½åœ¨åˆ†ä¸ºæ­¢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œæ˜æ˜¾é‡‡ç”¨äº†é€’å½’å®šä¹‰ï¼Œé€’å½’å®šä¹‰å…¶å®ä¸æ˜¯é‚£ä¹ˆå¥½ç†è§£ï¼Œä¹Ÿä¸æ˜¯é‚£ä¹ˆéš¾ç†è§£ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸æ–­çš„å°†ä¸€ä¸ªæ•°ç»„è¿›è¡Œå¯¹åŠåˆ†ï¼Œä¸€ç›´åˆ†åˆ°ä¸èƒ½åˆ†ä¸ºæ­¢ï¼Œè¿™æ ·æœ€ç»ˆå°±ä¼šåˆ†å¾—å¾ˆå¤šä¸ªå…ƒç´ ä¸ªæ•°ä¸º1çš„æ•°ç»„ï¼Œç„¶åå†å°†è¿™äº›æ•°ç»„è¿›è¡Œä¸¤ä¸¤åˆå¹¶ã€‚æ³¨æ„å­æ•°ç»„å¯èƒ½æ˜¯å¥‡æ•°ä¸ªï¼Œä½†æ˜¯è¿™ä¹Ÿæ²¡å…³ç³»ï¼Œæ²¡å¾—åˆå¹¶çš„å°±æš‚æ—¶æ”¾åœ¨åŸä½ï¼Œä¸‹ä¸€æ¬¡åˆå¹¶çš„æ—¶å€™æ€»ä¼šç”¨åˆ°ï¼Œæœ€ç»ˆä¸€ä¸ªä¼šåˆå¹¶æˆä¸€ä¸ªæ•°ç»„ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ªä»£ç ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;MergeSort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;If&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
     &lt;span class="mf"&gt;1.&lt;/span&gt; &lt;span class="n"&gt;Find&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;middle&lt;/span&gt; &lt;span class="n"&gt;point&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;divide&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;array&lt;/span&gt; &lt;span class="n"&gt;into&lt;/span&gt; &lt;span class="n"&gt;two&lt;/span&gt; &lt;span class="n"&gt;halves&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;  
             &lt;span class="n"&gt;middle&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;
     &lt;span class="mf"&gt;2.&lt;/span&gt; &lt;span class="n"&gt;Call&lt;/span&gt; &lt;span class="n"&gt;mergeSort&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;first&lt;/span&gt; &lt;span class="n"&gt;half&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;   
             &lt;span class="n"&gt;Call&lt;/span&gt; &lt;span class="n"&gt;mergeSort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
     &lt;span class="mf"&gt;3.&lt;/span&gt; &lt;span class="n"&gt;Call&lt;/span&gt; &lt;span class="n"&gt;mergeSort&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;second&lt;/span&gt; &lt;span class="n"&gt;half&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
             &lt;span class="n"&gt;Call&lt;/span&gt; &lt;span class="n"&gt;mergeSort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
     &lt;span class="mf"&gt;4.&lt;/span&gt; &lt;span class="n"&gt;Merge&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;two&lt;/span&gt; &lt;span class="n"&gt;halves&lt;/span&gt; &lt;span class="n"&gt;sorted&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="n"&gt;and&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
             &lt;span class="n"&gt;Call&lt;/span&gt; &lt;span class="n"&gt;merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¼ªä»£ç æ¥æºï¼š&lt;a href="https://www.geeksforgeeks.org/merge-sort/"&gt;geeksforgeeks&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç‰¹æ„æä¸€ä¸‹geeksforgeeksè¿™ä¸ªç½‘å€ï¼Œè¿™é‡Œä¸“é—¨è®²ç®—æ³•çš„ç½‘ç«™ï¼Œå¾ˆå¤šç®—æ³•æœ‰è§£æå’Œå®ç°ï¼Œè€Œä¸”åŸºæœ¬éƒ½æœ‰cå’ŒJavaçš„å®ç°ï¼Œç”šè‡³Pythonã€‚éå¸¸æœ‰ç”¨çš„ç½‘ç«™ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çš„å®ç°ä»£ç ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;lt;stdlib.h&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;_sorted_merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;len_l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;len_r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;arr_l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;len_l&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;arr_r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;len_r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;len_l&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;arr_l&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;len_r&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;arr_r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;len_l&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;len_r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr_l&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;arr_r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arr_l&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arr_r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;len_l&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arr_l&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;len_r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;arr_r&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

    &lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr_l&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr_r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;_recursive_merge_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;_recursive_merge_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;_recursive_merge_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;_sorted_merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;recursive_merge_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;_recursive_merge_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œæ•´ä¸ªå®Œæ•´çš„å®ç°æ˜¯ç”¨äº†3ä¸ªæ–¹æ³•ã€‚æš´éœ²ç»™å¤–ç•Œä½¿ç”¨çš„æ–¹æ³•æ˜¯ &lt;strong&gt;void recursive_merge_sort(int a[], int n)&lt;/strong&gt;è¿™ä¸ªã€‚é€’å½’åˆ†å‰²æ•°ç»„æ˜¯&lt;strong&gt;void _recursive_merge_sort(int a[], int start, int end)&lt;/strong&gt;è¿™ä¸ªæ–¹æ³•ã€‚æ³¨æ„æ–¹æ³•å‚æ•°æ˜¯æ•°ç»„æŒ‡é’ˆï¼Œè¦åˆ†å‰²çš„å¼€å§‹åæ ‡ï¼Œè¦ç»“æŸåˆ†å‰²çš„åæ ‡ã€‚å¦å¤–æ ¸å¿ƒçš„åˆå¹¶æ–¹æ³•æœ‰åºæ•°ç»„çš„æ–¹æ³•æ˜¯&lt;strong&gt;void _sorted_merge(int a[], int start, int mid, int end)&lt;/strong&gt;ã€‚æ³¨æ„è¿™é‡Œå¹¶ä¸æ˜¯ä¼ äº†ä¸¤ä¸ªæ•°ç»„è¿›å»ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç»™å®šäº†èµ·å§‹ï¼Œä¸­é—´åˆ†å‰²ï¼Œç»“æŸçš„åæ ‡ã€‚ä¸­é—´åˆ†å‰²åæ ‡æ˜¯å½’å¹¶åœ¨å‰ä¸€éƒ¨åˆ†çš„ã€‚è¿™äº›éƒ½æ˜¯ç»†èŠ‚ï¼Œæ²¡æœ‰ææ¸…æ¥šï¼Œç¨‹åºå°±ä¼šå‡ºé”™ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;strong&gt;_sorted_merge&lt;/strong&gt;è¿™ä¸ªæ–¹æ³•å†…ï¼Œæ–°å»ºäº†ä¸¤ä¸ªæ•°ç»„ï¼Œå°†ä¸¤åŠçš„å…ƒç´ æ‹·è´åˆ°è¿™ä¸¤ä¸ªæ•°ç»„ä¸­ï¼Œç„¶ååˆå¹¶åˆ°åŸå§‹æ•°ç»„ä¸­ã€‚å½’å¹¶æ’åºéœ€è¦çš„é¢å¤–ç©ºé—´æ˜¯åœ¨è¿™é‡ŒèŠ±è´¹çš„ã€‚è¿™ä¸ªç®—æ³•å®ç°å®Œå…¨æ˜¯é‡‡ç”¨çš„æ˜¯&lt;strong&gt;è‡ªé¡¶å‘ä¸‹&lt;/strong&gt;çš„æ€ç»´æ–¹å¼ã€‚ä¸€å±‚ä¸€å±‚çš„ä»é¡¶å¾€ä¸‹åˆ†å‰²ï¼Œåˆ†å‰²åˆ°æœ€ååœ¨åˆå¹¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æ–¹å¼å°±æ˜¯&lt;strong&gt;è‡ªåº•å‘ä¸Š&lt;/strong&gt;çš„æ€ç»´æ–¹å¼ã€‚æˆ‘ä»¬çŸ¥é“æ•°ç»„æ˜¯å¯ä»¥éšæœºè®¿é—®çš„ï¼Œå› ä¸ºåæ ‡å¯ä»¥éšæ—¶åˆ©ç”¨ã€‚å¦‚æœä¸€å¼€å§‹æˆ‘ä»¬å°±åªé’ˆå¯¹ä¸€ä¸ªä¸ªçš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿™äº›å…ƒç´ å°±å·²ç»æ˜¯ç‹¬ç«‹çš„ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å·²ç»åˆ†åˆ«å¥½çš„ã€‚æˆ‘ä»¬å°±é’ˆå¯¹æ¯ä¸€ä¸ªä¸ªä½“ï¼Œç›´æ¥è·Ÿå®ƒå‚è¾¹çš„å…ƒç´ è¿›è¡Œä¸¤ä¸¤åˆå¹¶å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;h3&gt;è¿­ä»£æ–¹å¼&lt;/h3&gt;
&lt;p&gt;è¿­ä»£çš„æ–¹å¼å°±æ˜¯æŠŠä¸Šé¢çš„&lt;strong&gt;void _recursive_merge_sort(int a[], int start, int end)&lt;/strong&gt;è¿™ä¸ªæ–¹æ³•æ¢æˆå¾ªç¯è¿­ä»£æ¥å®ç°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;iteractive_merge_sort&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;mid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;_sorted_merge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="n"&gt;step&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿­ä»£æ–¹å¼å®šä¹‰äº†ä¸€ä¸ªstep,è¿™ä¸ªæ˜¯éœ€è¦åˆå¹¶çš„å­æ•°ç»„çš„é•¿åº¦ï¼Œåˆå§‹åŒ–ä¸º1ï¼Œè¿™æ ·å°±ä¸èƒ½åˆ†å‰²æ•°ç»„ï¼Œç›´æ¥åˆå¹¶å°±å¥½ã€‚æ­¥é•¿æ¯æ¬¡ç¿»å€ï¼Œæœ€ç»ˆæ­¥é•¿è¶…å‡ºæ•°ç»„é•¿åº¦å°±é€€å‡ºã€‚è¿™é‡Œä¹Ÿæœ‰å¾ˆå¤šç»†èŠ‚è¦æ³¨æ„ï¼Œå®šäº†æ­¥é•¿ä¹‹åï¼Œè¦å¯¹æ•´ä¸ªæ•°ç»„æŒ‰ç…§è¿™ä¸ªæ­¥é•¿åˆ†æˆå¤šä¸ªå­æ•°ç»„æ¥åˆå¹¶ï¼Œè¿™é‡Œè¦æ³¨æ„æœ€åä¸€ä¸ªå­æ•°ç»„çš„å…ƒç´ ä¸ªæ•°å¯èƒ½ä¸ªæ•°ä¸å¤Ÿï¼Œä¸èƒ½è¶…è¿‡æ•°ç»„æ€»é•¿ã€‚&lt;/p&gt;
&lt;h3&gt;å¦ä¸€ç§è¿­ä»£æ–¹å¼&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬è¿™é‡Œçš„æœ‰åºæ•°ç»„åˆå¹¶éƒ½æ˜¯åœ¨åœ¨&lt;strong&gt;_sorted_merge&lt;/strong&gt;è¿™ä¸ªæ–¹æ³•å†…å®ç°çš„ï¼Œç©ºé—´åˆ†é…ä¹Ÿåœ¨è¿™ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¢«é¢‘ç¹è°ƒç”¨ã€‚ç©ºé—´ä¼šè¢«è¿›è¡Œå¾ˆå¤šæ¬¡åˆ†é…å’Œé‡Šæ”¾ã€‚åœ¨æˆ‘å¤§å­¦çš„æ•°æ®ç»“æ„çš„è¯¾æœ¬é‡Œï¼Œå½’å¹¶æ’åºé‡‡ç”¨çš„å¹¶ä¸æ˜¯ä¸Šé¢çš„æ–¹æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨äº†å¦å¤–ä¸€ç§è¿­ä»£æ–¹æ³•æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆä¸Šä»£ç ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;_merge_array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;end1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;start2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;end1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;start2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;end1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;end2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;end2&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;end2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;end1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;start2&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;end2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start1&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start2&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;end1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start1&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start2&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;end2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;start2&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

        &lt;span class="n"&gt;start1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;end2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;iteractive_merge_sort2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;flag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;flag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_merge_array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;flag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_merge_array&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;flag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;flag&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨&lt;strong&gt;void iteractive_merge_sort2(int a[], int n)&lt;/strong&gt;è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œç›´æ¥ç”³è¯·äº†ä¸€ä¸ªè·ŸåŸå§‹æ•°ç»„ä¸€æ ·å¤§å°çš„ç©ºé—´ï¼Œç„¶ååé¢çš„æ•°ç»„çš„åˆå¹¶ç®—æ³•å°±åœ¨è¿™ä¸¤ä¸ªæ•°ç»„ä¹‹é—´è¿›è¡Œã€‚å½“ç„¶æœ€åå¦‚æœæœ€ç»ˆç»“æœè¢«åˆå¹¶åˆ°äº†bæ•°ç»„ä¸­çš„è¯ï¼Œå°±æŠŠå®ƒæ‹·è´åˆ°åŸå§‹çš„aæ•°ç»„ä¸­ã€‚è€Œæ ¸å¿ƒçš„æ•°ç»„åˆå¹¶åœ¨&lt;strong&gt;void _merge_array(int a[], int b[], int n, int step)&lt;/strong&gt;è¿™ä¸ªæ–¹æ³•ä¸­ã€‚å®ƒæ¥æ”¶ä¸¤ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä½åŸå§‹æ•°ç»„ï¼Œç¬¬äºŒä¸ªä¸ºåˆå¹¶åçš„æ•°ç»„ã€‚ä»–ä»¬çš„æ•°ç»„å¤§å°ä¸€æ ·ï¼Œè¿˜æœ‰ä¸€ä¸ªå…³é”®å‚æ•°æ˜¯æ­¥é•¿ã€‚è¿™ä¸ªæ­¥é•¿å°±æ˜¯åˆ†å‰²å¥½çš„å·²æœ‰åºæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ã€‚é‡Œé¢çš„å®ç°ç»†èŠ‚è¿˜æ˜¯æ•°ç»„çš„ä¸‹æ ‡ï¼Œä¸èƒ½è¶…è¿‡æ€»æ•°ç»„é•¿åº¦ã€‚
è¿™ä¸ªæ–¹æ³•çš„ç‰¹åˆ«ä¹‹å¤„å°±æ˜¯å®ƒæ˜¯ä¸€æ¬¡æ€§åˆ†é…å†…å­˜çš„ã€‚è¿™ä¸ªè¯´æ˜¯å¥½è¿˜æ˜¯ä¸å¥½å‘¢ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ•¢ç¡®å®šã€‚ä½†æ˜¯æ„Ÿè§‰ä»–çš„æ•ˆç‡è¦é«˜äº›ï¼Œå› ä¸ºä¸ç”¨é¢‘ç¹åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚&lt;/p&gt;
&lt;h3&gt;é“¾è¡¨çš„æ’åº&lt;/h3&gt;
&lt;p&gt;å¤§å®¶éƒ½å¾ˆæ¸…æ¥šæ•°ç»„çš„æ’åºæœ‰å¾ˆå¤šç§ï¼Œæ–¹æ³•å„å¼‚ï¼Œä½†æ˜¯ä¸çŸ¥é“ä½ æƒ³è¿‡æ²¡æœ‰ï¼Œé“¾è¡¨æ˜¯æ€ä¹ˆæ’åºçš„ã€‚é“¾è¡¨å› ä¸ºåªèƒ½é¡ºåºè®¿é—®ï¼Œä¸èƒ½æƒ³æ•°ç»„é‚£æ ·éšæœºè®¿é—®ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ•°ç»„çš„æ’åºç®—æ³•å¾ˆéš¾ç›´æ¥ç”¨åˆ°é“¾è¡¨ä¸Šã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªç®—æ³•å¤©ç„¶çš„å¯ä»¥ç”¨åœ¨é“¾è¡¨ä¸Šï¼Œå°±æ˜¯&lt;strong&gt;å½’å¹¶æ’åºç®—æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½’å¹¶ç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯åˆ†å‰²ç»„å’Œåˆå¹¶æœ‰åºç»„ã€‚è¿™ä¸ªæ˜¯å¯ä»¥ç”¨åœ¨é“¾è¡¨ä¸Šçš„ã€‚å¯¹ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„åˆå¹¶å¯ä»¥è¯´æ¯”æœ‰åºæ•°ç»„çš„åˆå¹¶è¿˜ç®€å•ã€‚è€Œå¯¹é“¾è¡¨çš„åˆ†å‰²ä¹Ÿæœ‰å¥½åŠæ³•ã€‚&lt;/p&gt;
&lt;p&gt;é“¾è¡¨çš„åˆ†å‰²ç”¨åˆ°äº†é“¾è¡¨çš„å¸¸ç”¨ç®—æ³•ï¼šå¿«æ…¢æŒ‡é’ˆæ³•
å…ˆçœ‹é“¾è¡¨å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;_Node&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;_Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="n"&gt;Node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;PNode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å†çœ‹é“¾è¡¨åˆ†å‰²æ³•ï¼Œæˆ‘ä»¬åˆ†å‰²è‚¯å®šä¹Ÿæ˜¯æŒ‰ç…§ä¸­é—´åˆ†å‰²ï¼Œé‚£ä¹ˆå…³é”®ç‚¹å°±æ˜¯æ‰¾åˆ°ä¸­é—´é“¾è¡¨èŠ‚ç‚¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#include &amp;lt;stdlib.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include &amp;quot;CNode.h&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;PNode&lt;/span&gt; &lt;span class="nf"&gt;_getMiddleNode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PNode&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt;  &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;slow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fast&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;fast&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fast&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;slow&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;slow&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;slow&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªæ–¹æ³•é‡Œçš„å¿«æŒ‡é’ˆçš„é€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆçš„ä¸¤å€ï¼Œæ‰€æœ‰å¿«æŒ‡é’ˆåˆ°è¾¾ç»ˆç‚¹çš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆåˆšå¥½èµ°äº†ä¸€åŠã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ•°å¿«æŒ‡é’ˆçš„åˆå§‹ä½ç½®æ˜¯æ¯”æ…¢æŒ‡é’ˆå¤šä¸€æ­¥çš„ã€‚ç„¶åæŒ‰ç…§ä¸­é—´åˆ†å‰²ç‚¹çš„è¯ï¼Œæ…¢æŒ‡é’ˆæ˜¯ç®—åœ¨å‰ä¸€åŠé‡Œé¢çš„ã€‚&lt;/p&gt;
&lt;p&gt;å†çœ‹ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦‚ä½•ç”¨è¿™ä¸ªæ–¹æ³•å°†é“¾è¡¨è¿›è¡Œåˆ†å‰²çš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sortSingleList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Node&lt;/span&gt;  &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;midNode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_getMiddleNode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;restNode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;midNode&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;midNode&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;sortSingleList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;sortSingleList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;restNode&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_mergeSortedList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;restNode&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåˆ†å‰²æ–¹æ³•å’Œæ•°ç»„çš„é€’å½’åˆ†å‰²æ³•æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€’å½’è°ƒç”¨ï¼Œåªä¸è¿‡è¿™é‡Œå¤šäº†ä¸€æ­¥è®¡ç®—é“¾è¡¨ä¸­é—´èŠ‚ç‚¹çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;å†æ¥çœ‹æ ¸å¿ƒç®—æ³•å½’å¹¶ç®—æ³•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;PNode&lt;/span&gt; &lt;span class="nf"&gt;_mergeSortedList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PNode&lt;/span&gt; &lt;span class="n"&gt;head1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PNode&lt;/span&gt; &lt;span class="n"&gt;head2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;head1&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;head2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;head2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;head1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;newHead&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;head1&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;head2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;newHead&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;newHead&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;head1&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;Node&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;newHead&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;cur&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p1&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p2&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;newHead&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯éé€’å½’ç®—æ³•ï¼Œè¦ç‚¹æ˜¯å…ˆæŠŠå¤´èŠ‚ç‚¹ç¡®å®šï¼Œæ¥ä¸‹æ¥çš„è·Ÿæ•°ç»„çš„åˆå¹¶ç®—æ³•å·®ä¸å¤šï¼Œæ³¨æ„æœ€åå…ƒç´ åˆå¹¶è·Ÿæ•°ç»„ä¸ä¸€æ ·ï¼Œåªè¿æ¥nextèŠ‚ç‚¹ï¼Œä¸éœ€è¦whileå¾ªç¯ã€‚
å½“ç„¶è¿˜æœ‰é€’å½’æ–¹å¼æ¥å®ç°&lt;strong&gt;_mergeSortedList&lt;/strong&gt;æ–¹æ³•ï¼Œé“¾è¡¨å¤©ç”Ÿé€‚åˆé€’å½’ã€‚è¿™é‡Œå°±ä¸è¯´äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åˆ°æˆ‘çš„githubä¸Šçœ‹ï¼Œé‚£é‡Œæœ‰å„ç§å®ç°ã€‚&lt;/p&gt;
&lt;h3&gt;å½’å¹¶æ’åºçš„å…¶ä»–åº”ç”¨&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œæˆ‘åªè®²ä¸€ç§åœºæ™¯ã€‚å°±æ˜¯å¤–éƒ¨æ’åºã€‚å¦‚æœæˆ‘ä»¬çš„è¦æ’åºçš„æ•°æ®é‡å¾ˆå¤§ï¼Œè€Œå†…å­˜æœ‰æ¯”è¾ƒå°ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ’åºå‘¢ï¼Ÿè¿™ä¸ªä¹Ÿæ˜¯ç»å…¸é¢è¯•é¢˜ç›®ã€‚è¿™é‡Œè‚¯å®šæ˜¯è¦ç”¨åˆ°å½’å¹¶æ’åºï¼Œè€Œä¸”æ˜¯å¤šè·¯å½’å¹¶æ’åºï¼Œå› ä¸ºä½ éœ€è¦å°†æ•°æ®åˆ†ä¸ºNä»½æ¥æ‹¿åˆ°å†…å­˜ä¸­æ’åºï¼Œç„¶åå¯¹ç€Nä»½è¿›è¡Œå½’å¹¶æ’åºã€‚è¿™é‡Œé¢æ•´ä½“ç®—æ³•å°±å¤æ‚äº†ï¼Œä¹Ÿä¸æ˜¯è¿™é‡Œå¯ä»¥è¯´çš„æ˜ç™½çš„ã€‚æœ‰å…´è¶£å¯ä»¥åˆ°ç½‘ä¸ŠæŸ¥æŸ¥èµ„æ–™ã€‚&lt;/p&gt;
&lt;p&gt;å¥½äº†ï¼Œå°±åˆ°è¿™ã€‚è¿™ç¯‡æ–‡ç« å†æ—¶ä¸¤ä¸ªæœˆç»ˆäºå†™å®Œäº†ã€‚ã€‚ã€‚ã€‚æœ‰å…´è¶£å¯ä»¥çœ‹
&lt;strong&gt;&lt;a href="https://github.com/szuwest/AlgorithmTest"&gt;æˆ‘å†™çš„å„ç§ç®—æ³•githubå·¥ç¨‹&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="ç®—æ³• å½’å¹¶æ’åº"></category></entry><entry><title>ä¸­å›½äº’è”ç½‘ç¾¤ä½“è·Ÿå‡ å¹´å‰å‘ç”Ÿäº†å·¨å¤§å˜åŒ–</title><link href="http://szuwest.github.io/zhong-guo-hu-lian-wang-qun-ti-gen-ji-nian-qian-fa-sheng-liao-ju-da-bian-hua.html" rel="alternate"></link><updated>2018-08-04T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-08-04:zhong-guo-hu-lian-wang-qun-ti-gen-ji-nian-qian-fa-sheng-liao-ju-da-bian-hua.html</id><summary type="html">&lt;h2&gt;ä¸­å›½äº’è”ç½‘ç¾¤ä½“è·Ÿå‡ å¹´å‰å‘ç”Ÿäº†å·¨å¤§å˜åŒ–&lt;/h2&gt;
&lt;h3&gt;æŠ–éŸ³å’Œæ‹¼å¤šå¤š&lt;/h3&gt;
&lt;p&gt;ä»Šå¤©æ™šä¸Šåˆ·ç€åˆ·ç€æŠ–éŸ³çš„æ—¶å€™ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ç°åœ¨çš„äº’è”ç½‘è·Ÿå‡ å¹´å‰çš„äº’è”ç½‘å·²ç»å‘ç”Ÿäº†å·¨å¤§çš„å˜åŒ–ã€‚è¿™ä¸ªå˜åŒ–å…¶å®å¾ˆåœ¨å°±å¼€å§‹ï¼Œä¹Ÿå¾ˆæ—©æœ‰äººæè¿‡äº†ã€‚ä½†æ˜¯æˆ‘è‡ªå·±ä¹Ÿæ˜¯åˆšåˆšæ‰æ·±åˆ»çš„æ„è¯†åˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨æŠ–éŸ³ä¸Šåªå…³æ³¨äº†å‡ ä¸ªäººï¼Œè¿™äº›äººéƒ½åŸºæœ¬ä¸Šæ˜¯åœ¨å†œæ‘æˆ–è€…å°åŸå¸‚ç”Ÿæ´»çš„ã€‚ç„¶åè”æƒ³åˆ°æœ€è¿‘åµå¾—çš„å¾ˆç«çš„æ‹¼å¤šå¤šçš„ç”¨æˆ·ç¾¤ä½“ï¼Œè¿˜æœ‰æ›´æ—©çš„å¿«æ‰‹ï¼Œç°åœ¨å¾ˆç«çš„åº”ç”¨çš„ä¸»è¦ç”¨æˆ·ç¾¤ä½“ï¼Œéƒ½æ˜¯ä»¥å°åŸå¸‚å’Œå†œæ‘çš„ç”¨æˆ·ä¸ºä¸»ã€‚æ‰€ä»¥æˆ‘çªç„¶æ„è¯†åˆ°ï¼Œç°åœ¨å·²ç»ä¸æ˜¯ä»¥å‰é‚£ä¸ªä»¥ç¤¾ä¼šç™½é¢†ç”¨æˆ·æˆ–è€…é«˜ç«¯ç”¨æˆ·ä¸ºä¸»çš„äº’è”ç½‘äº†ã€‚å¦‚æœç°åœ¨è¦åšçº¯äº’è”ç½‘çš„åº”ç”¨ï¼Œå°±è¦è€ƒè™‘â€œä½ç«¯â€ç”¨æˆ·ä¸ºä¸»äº†ï¼Œå¯ä»¥è¯´å¾—å°åŸå¸‚æˆ–è€…å†œæ‘çš„ç”¨æˆ·å¾—å¤©ä¸‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä½ çœ‹æ‹¼å¤šå¤šï¼Œ3å¹´å°±ä¸Šå¸‚äº†ï¼Œå¸‚å€¼è¶…è¿‡200äº¿ç¾é‡‘ï¼Œå·ç§°æœ‰3äº¿ç”¨æˆ·ã€‚è€ŒæŠ–éŸ³ä¼°å€¼ä¹Ÿä¸ä½äº100äº¿ç¾é‡‘ã€‚æ‹¼å¤šå¤šè¢«å¾ˆå¤šéƒ½å¸‚ç™½é¢†åæ§½è´¨é‡å·®å‡è´§å¤šï¼Œæ®Šä¸çŸ¥äººå®¶çš„ä¸»è¦ç”¨æˆ·å°±ä¸æ˜¯ä½ ä»¬ã€‚è€ŒæŠ–éŸ³ä¸Šå¾ˆå¤šå†…å®¹éƒ½æ˜¯ä¸‰å››çº¿åŸå¸‚çš„äººæˆ–è€…å†œæ‘äººå‘çš„ã€‚æˆ‘ä¼°è®¡æŠ–éŸ³åå°åº”è¯¥å¾ˆæ¸…æ¥šï¼ŒæŠ–éŸ³çš„å‘å¸ƒå†…å®¹ä¸»è¦ç”¨æˆ·åº”è¯¥æ˜¯ä¸‰å››çº¿ä»¥å¤–çš„ç”¨æˆ·ç¾¤ä½“ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å­ï¼Œæˆ‘æƒ³åœ¨æˆ‘è¯´æˆ‘çš„æƒ³æ³•ä¹‹å‰å…ˆè¯´è¯´åˆ«çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±æœ€å¸¸ç”¨çš„å‡ ä¸ªåº”ç”¨æ˜¯å¾®ä¿¡ï¼Œå¾®åšï¼Œé›ªçƒï¼Œè¿˜æœ‰çŸ¥ä¹ç­‰ä¸€äº›è·Ÿè‡ªå·±ä¸“ä¸šç›¸å…³çš„ç¤¾åŒºåº”ç”¨ã€‚å¾®ä¿¡æ˜¯é€šä¿¡å·¥å…·æ²¡çš„è¯´ï¼Œä½†æ˜¯é‡Œé¢çš„å…¬ä¼—å·å†…å®¹å…¶å®ä¸»è¦æ˜¯ç»™ç¤¾ä¼šç²¾è‹±ï¼Œç™½é¢†æ¶ˆè´¹çš„ã€‚å¾®åšï¼Œå…¸å‹çš„ç¤¾ä¼šç²¾è‹±å’Œåª’ä½“ç¤¾äº¤å¹³å°ã€‚çŸ¥ä¹ï¼Œå¤§éƒ¨åˆ†ä¹Ÿæ˜¯ç¤¾ä¼šç™½é¢†åœ¨ä¸Šã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä»¥å‰å¼€å‘äº’è”ç½‘åº”ç”¨çš„ä¸»è¦ç›®æ ‡ç”¨æˆ·ç¾¤ä½“ã€‚&lt;/p&gt;
&lt;p&gt;ä½ çœ‹ï¼Œæˆ‘ä»¬ä¸€è‡´æ€§çš„å¿½ç•¥äº†â€œä½ç«¯â€ç”¨æˆ·ã€‚å…¶å®ä¸æ˜¯æˆ‘ä»¬æ•…æ„çš„ï¼Œè€Œä¸”ä»¥å‰è¿™äº›ç”¨æˆ·ä¸å­˜åœ¨æˆ–è€…æ²¡æœ‰æ¶ˆè´¹èƒ½åŠ›ã€‚é‚£ä¸ºä»€ä¹ˆç°åœ¨çªç„¶å°±å‘ç”Ÿå˜åŒ–äº†å‘¢ï¼Ÿå…¶å®é‚£äº›â€œé«˜ç«¯â€ç”¨æˆ·ä¹Ÿè¿˜åœ¨ï¼Œå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä½†æ˜¯å´ä¹Ÿè·Ÿä»¥å‰ä¸å¤ªä¸€æ ·äº†ã€‚å› ä¸ºè¿™äº›å¹´ä¸­å›½ç¤¾ä¼šæœ¬èº«ä¹Ÿå‘ç”Ÿäº†å·¨å¤§å˜åŒ–ã€‚&lt;/p&gt;
&lt;h3&gt;å˜åŒ–&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæ˜¯æ‰‹æœºç§»åŠ¨äº’è”ç½‘çš„æ™®åŠï¼Œè¿˜æœ‰4Gç½‘ç»œçš„æ™®åŠã€‚ç°åœ¨è·Ÿå‡ å¹´å‰æœ€å¤§çš„å·®åˆ«å°±æ˜¯æ‰‹æœºå¸‚åœºåŸºæœ¬è·‘å’Œäº†ï¼Œä¹Ÿå°±æ˜¯è¯´å¹´è½»äººè‚¯å®šæ˜¯äººæ‰‹ä¸€éƒ¨æ‰‹æœºã€‚ç„¶å4Gç½‘ç»œçš„æ™®åŠï¼Œç„¶åä½ å‡ ä¹èº«åœ¨ä¸­å›½ä»»ä½•åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä¾¿æ·ä¸Šç½‘ã€‚è¿™æ ·ç§»åŠ¨äº’è”ç½‘å°±æ¯”å‡ å¹´å‰å¤§å’Œå¹¿äº†è®¸å¤šã€‚ä»¥å‰è¿˜æ˜¯ä»¥PCäº’è”ç½‘ä¸ºä¸»ï¼Œç°åœ¨çœŸæ­£çš„æ˜¯ä»¥ç§»åŠ¨äº’è”ç½‘ä¸ºä¸»äº†ã€‚è€Œä¸”4Gç½‘ç»œçš„æ™®åŠä¹Ÿå¾ˆé‡è¦ï¼Œç°åœ¨æµé‡ä¹Ÿæ¯”å‡ å¹´å‰ä¾¿å®œå¥½å¤šäº†ï¼Œå¤§éƒ¨åˆ†äººå°±ç®—æ˜¯å†œæ‘çš„å¹´è½»äººéƒ½å¯ä»¥æ”¯ä»˜å¾—èµ·æµé‡è´¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ä¸ªæˆ‘è§‰å¾—ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯å†œæ‘å’Œå°åŸé•‡çš„å‘å±•å´›èµ·ã€‚ç°åœ¨çš„å†œæ‘è·Ÿä»¥å‰çš„å†œæ‘å·²ç»å¾ˆä¸ä¸€æ ·äº†ï¼Œè€Œå¤§åŸå¸‚çš„æˆ¿ä»·é«˜ä¼ï¼Œä¸­äº§é˜¶çº§ç”Ÿæ´»çš„å¾ˆç„¦è™‘ã€‚å¾ˆå¤šå¹´è½»äººæ— æ³•è½»æ¾åœ¨å¤§åŸå¸‚ç«‹è¶³ï¼Œä½†æ˜¯ä»–ä»¬å›å»å°åŸå¸‚å’Œå†œæ‘ï¼Œå´å¯ä»¥ç”Ÿæ´»çš„å¾ˆå¥½ã€‚ä½ çœ‹æŠ–éŸ³ä¸Šæœ‰å¾ˆå¤šå†…å®¹æ˜¯åœ¨å°åœ°æ–¹çš„ä¸€äº›ç”Ÿæ´»å’Œç¾é£Ÿï¼Œè¿˜æœ‰æ‹¼å¤šå¤šçš„æ¶ˆè´¹ç¾¤ä½“ï¼Œå°±å¯ä»¥çœ‹å¾—å‡ºæ¥ã€‚å¤§åŸå¸‚çš„ç™½é¢†æ¯å¤©å¾ˆç„¦è™‘ï¼Œæƒ³ç€å¦‚æœèµšé’±è¿˜æˆ¿è´·å’Œå…»å®¶ç³Šå£ï¼Œè€Œå°åŸå¸‚æ²¡æœ‰é‚£ä¹ˆå¤§çš„ç”Ÿæ´»å‹åŠ›ï¼Œå¯ä»¥æ¯”è¾ƒä»å®¹çš„ç”Ÿæ´»å’Œæ¶ˆè´¹ã€‚è¿™å°±å­•è‚²å‡ºäº†å¿«æ‰‹ï¼Œæ‹¼å¤šå¤šï¼ŒæŠ–éŸ³ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œéƒ½å¸‚ç™½é¢†ä»åœ¨åœ¨é‚£é‡Œï¼Œä¹Ÿå¹¶ä¸ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯ç”±äºä¸­å›½çš„äººç¾¤å·¨å¤§ï¼Œç‰¹åˆ«æ˜¯æœ‰å¹¿å¤§çš„å†œæ‘å’Œå°åŸé•‡ã€‚ä»¥åçš„äº’è”ç½‘å°±ä¸åªæ˜¯éƒ½å¸‚ç™½é¢†å’Œç¤¾ä¼šç²¾è‹±ä»¬çš„äº†ï¼Œç§»åŠ¨äº’è”ç½‘éƒ½å¹¿å¤§çš„äººæ°‘ç¾¤ä¼—ä¹Ÿéƒ½æ¥å…¥äº†è¿›æ¥ï¼Œè€Œä¸”ä»–ä»¬ä¹Ÿå·²ç»æœ‰ä¸€å®šçš„æ¶ˆè´¹èƒ½åŠ›ã€‚ä»¥åè¦åšçº¯äº’è”ç½‘çš„äº§å“å°±è·Ÿä»¥å‰è€ƒè™‘çš„å°±ä¸å¤ªä¸€æ ·äº†ã€‚&lt;/p&gt;</summary><category term="äº’è”ç½‘"></category></entry><entry><title>å¤šå®¶å…¬å¸çš„äººè¯æ¯”å¯¹ç®—æ³•ä½“éªŒå’Œå¼€å‘æ„Ÿæƒ³</title><link href="http://szuwest.github.io/duo-jia-gong-si-de-ren-zheng-bi-dui-suan-fa-ti-yan-he-kai-fa-gan-xiang.html" rel="alternate"></link><updated>2018-07-13T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-07-13:duo-jia-gong-si-de-ren-zheng-bi-dui-suan-fa-ti-yan-he-kai-fa-gan-xiang.html</id><summary type="html">&lt;h1&gt;å¤šå®¶å…¬å¸çš„äººè¯æ¯”å¯¹ç®—æ³•ä½“éªŒå’Œå¼€å‘æ„Ÿæƒ³&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªå£°çº¹é‡‡é›†ä¸€ä½“æœºç³»ç»Ÿï¼Œè¿™ä¸ªç³»ç»Ÿé‡Œç”¨åˆ°äº†äººè¯æ¯”å¯¹åŠŸèƒ½ï¼Œå³åˆ·èº«ä»½è¯åæ‹ç…§ï¼Œç„¶åå°†èº«ä»½è¯é‡Œé¢çš„ç…§ç‰‡è·Ÿæ‹ç…§æ¯”å¯¹ï¼ŒéªŒè¯æ˜¯å¦æ˜¯åŒä¸€ä¸ªäººã€‚æˆ‘ä»¬ä¸æ˜¯åšäººè„¸è¯†åˆ«çš„å…¬å¸ï¼Œæ‰€ä»¥äººè„¸è¯†åˆ«åŠŸèƒ½å½“ç„¶æ˜¯æ¥å…¥åˆ«äººçš„SDKï¼Œè¿™é‡Œæˆ‘ä»¬æ‰¾äº†å¥½å¤šå®¶çš„äººè„¸ç®—æ³•ï¼Œå¯¹æ¥è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°å¾ˆå¤šé—®é¢˜ã€‚ç»è¿‡è¿™æ¬¡çš„å¼€å‘ï¼Œæˆ‘äº†è§£åˆ°è¿™ä¸ªè¡Œä¸šçš„ä¸€äº›ç°çŠ¶ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„ç³»ç»Ÿä¸»è¦è¿è¡Œåœ¨Windowsç”µè„‘ä¸Šï¼Œè€Œä¸”éœ€è¦æ— ç½‘ç»œä¹Ÿèƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥äººè„¸ç®—æ³•å¿…é¡»æ˜¯ç”¨ç¦»çº¿ç‰ˆçš„ã€‚äººè„¸ç®—æ³•å‚å®¶ä¸€èˆ¬å¯¹å¤–æä¾›ä¸¤ç§æ–¹å¼ï¼šåœ¨çº¿ç‰ˆå’Œç¦»çº¿ç‰ˆã€‚ä¸€èˆ¬åœ¨çº¿ç‰ˆéƒ½å¯ä»¥æä¾›å…è´¹è¯•ç”¨ï¼Œç¦»çº¿ç‰ˆéœ€è¦æˆæƒä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;äº‘ç«¯æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;åœ¨çº¿ç‰ˆçš„äººè„¸è¯†åˆ«æˆ‘è¯•ç”¨è¿‡ä¾å›¾ç§‘æŠ€çš„å’Œä¸­ç§‘è§†æ‹“çš„SDKã€‚åœ¨æˆ‘ä»¬çš„åº”ç”¨å£°ä¸´å…¶å¢ƒAPPä¸Šæœ‰ä¸ªå£°çº¹è´­ç‰©çš„åœºæ™¯ï¼Œéœ€è¦äººè„¸éªŒè¯ã€‚è¿™ä¸¤ä¸ªå‚å®¶æä¾›çš„APIéƒ½å·®ä¸å¤šï¼Œä¾å›¾çš„APIå®‰å…¨æ€§è€ƒè™‘æ›´å…¨é¢ï¼Œé”™è¯¯ç å®šä¹‰çš„æ¯”è¾ƒè¯¦ç»†ã€‚è¿˜æœ‰ä»–ä»¬çš„APIå…±åŒç‚¹æ˜¯ï¼Œå›¾ç‰‡ä¼ è¾“éƒ½æ˜¯å°†å›¾ç‰‡æ•°æ®è¿›è¡Œbase64ç¼–ç åä¼ è¾“çš„ã€‚è‡³äºå‡†ç¡®ç‡ï¼Œæ„Ÿè§‰éƒ½å·®ä¸å¤šï¼Œæ²¡æœ‰ç‰¹åˆ«æ˜æ˜¾çš„å·®è·ã€‚&lt;/p&gt;
&lt;h2&gt;ç¦»çº¿æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;ç¦»çº¿ç‰ˆçš„äººè„¸ç®—æ³•ç”¨å¾—æ¯”å¯¹å¤šã€‚å› ä¸ºå®ƒæ˜¯ç”¨åœ¨æˆ‘ä»¬è¦å–çš„æœºå™¨ä¸Šï¼Œè€Œåœ¨çº¿ç‰ˆçš„æˆ‘ä»¬åªæ˜¯åšè¯•éªŒã€‚ç¦»çº¿ç‰ˆçš„é›†æˆå’Œä½¿ç”¨è¦æ¯”åœ¨çº¿ç‰ˆéº»çƒ¦å¾ˆå¤šã€‚ç”±äºç¦»çº¿ç‰ˆè¦ç»™å‡ºç®—æ³•åº“ï¼Œå¤„äºå®‰å…¨å’Œå®¹æ˜“è¢«æ‹·è´çš„åŸå› ï¼Œéƒ½æ˜¯è¦å…ˆæˆæƒçš„ã€‚æˆæƒçš„æ–¹å¼ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šåœ¨è®¾å¤‡ä¸Šæ¥å…¥åŠ å¯†ç‹—USB keyæˆ–è€…ç»‘å®šè®¾å¤‡æœºå™¨ç çš„æ–¹å¼ã€‚åŠ å¯†ç‹—æ–¹å¼æ¯”è¾ƒæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥å…¥äº†å¾ˆå¤šå‚å®¶ï¼Œæœ‰é˜…é¢ç§‘æŠ€ï¼Œä¸­æ§ï¼Œæ°é”è¾¾ï¼Œå•†æ±¤ï¼Œæˆ‘è¿˜æŠŠå¼€æºçš„dlibäººè„¸è¯†åˆ«ä¹Ÿæ¥å…¥äº†ã€‚æ€»ä½“æ¥è¯´ï¼Œéƒ½æ²¡æœ‰å¾ˆè®©äººæ»¡æ„çš„æ–¹æ¡ˆï¼Œéè¦æŒ‘ä¸€ä¸ªè¾ƒå¥½çš„ï¼Œå•†æ±¤ç®—æ˜¯å¯ä»¥ï¼Œåæ°”è¿™ä¹ˆå¤§ä¹Ÿä¸æ˜¯ç™½æ¥çš„ã€‚è¿™é‡Œè¦ä¸“é—¨è¯´æ˜æˆ‘ä»¬æ˜¯é‡‡ç”¨electronæŠ€æœ¯å¼€å‘Windowsè½¯ä»¶ï¼Œå³ç•Œé¢éƒ½é‡‡ç”¨JSæ¥å†™ï¼Œä¸€äº›åº•å±‚æ¨¡å—é‡‡ç”¨nodeæ’ä»¶æ¥å…¥ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸“é—¨åšäº†ä¸€ä¸ªäººè„¸ç®—æ³•æ’ä»¶æ¥æ¥å…¥æ‰€æœ‰çš„ç®—æ³•ã€‚å¯¹ä¸Šå±‚çš„æ¥å£éƒ½ä¸€æ ·ï¼Œæ ¹æ®å‚æ•°æ¥è°ƒç”¨ä¸åŒçš„ç®—æ³•æ¨¡å—ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§æ¯”è¾ƒæ–°é¢–çš„æ¥å…¥æ–¹å¼ï¼Œæˆ‘çŒœé‚£äº›ç®—æ³•å‚å®¶ä¹Ÿæ²¡æƒ³åˆ°åˆ«äººä¼šå·²è¿™æ ·çš„æ–¹å¼æ¥å…¥ä»–ä»¬çš„SDKã€‚è¿„ä»Šä¸ºæ­¢ï¼Œæ‰€æœ‰çš„å‚å®¶çš„ç®—æ³•æ¥å…¥éƒ½ä¸å¤ªé¡ºåˆ©ï¼Œæœ‰äº›ç”šè‡³ä¸€ç›´æœ‰é—®é¢˜å¯¼è‡´æˆ‘ä»¬æœ€ç»ˆæ”¾å¼ƒã€‚ä¾‹å¦‚æœ‰ä¸€å®¶çš„ç®—æ³•æ²¡æœ‰64ä½çš„SDKè¢«æˆ‘ä»¬æ”¾å¼ƒï¼Œå› ä¸ºæˆ‘ä»¬çš„æ’ä»¶åªæ”¯æŒ64çš„ã€‚&lt;/p&gt;
&lt;p&gt;é˜…é¢çš„ç®—æ³•æ€§èƒ½è¿˜å¯ä»¥ï¼Œäººè„¸æ£€æµ‹å¾ˆå¿«ï¼Œæ¯”å¯¹ä¹ŸæŒºå¿«ï¼Œä½†æ˜¯å®ƒè·Ÿä½¿ç”¨äº†ä¸€äº›ç¡¬ä»¶çš„ç‰¹æ€§ï¼Œå¯¼è‡´åœ¨æˆ‘ä»¬çš„ä¸€ä½“æœºä¸Šè·‘ä¸èµ·æ¥ï¼Œé—ªé€€ã€‚æˆ‘ä»¬åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šæµ‹è¯•ä¸€ç›´æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦è£…åˆ°æˆ‘ä»¬çš„ä¸€ä½“æœºä¸Šå°±ä¸è¡Œã€‚ç›´æ¥è®©ä»–ä»¬çš„å¼€å‘äººå‘˜åœ¨æˆ‘ä»¬çš„ä¸€ä½“æœºä¸Šè¿œç¨‹è°ƒè¯•ï¼Œä¹Ÿæ²¡æœ‰å‘ç°é—®é¢˜ã€‚åæ¥æˆ‘ä»¬å‘ç°ä¸€ä½“æœºçš„CPUæ˜¯i3çš„ï¼Œè€Œæˆ‘ä»¬çš„æ™®é€šç”µè„‘æ˜¯i5çš„ï¼ŒæŠŠè¿™ä¸ªç°è±¡åé¦ˆç»™ä»–ä»¬ï¼Œä»–ä»¬æ‰è¯´æœ‰å¯èƒ½æ˜¯è¿™ä¸ªé—®é¢˜ã€‚åæ¥ä»–ä»¬ç»™äº†ä¸ªæ–°demoï¼Œç¡®å®å¯ä»¥åœ¨ä¸€ä½“æœºä¸Šè·‘äº†ã€‚ä½†æ˜¯ä»–ä»¬ç»™çš„SDKï¼Œæˆ‘ä»¬æ¥å…¥åˆ°nodeæ’ä»¶ä¸Šï¼Œè¿˜æ˜¯è·‘ä¸èµ·æ¥ï¼Œä»–ä»¬ä¹Ÿè§£å†³ä¸äº†ã€‚ã€‚ã€‚ã€‚åæ¥æˆ‘ä»¬å°±æ”¾å¼ƒä»–ä»¬äº†ï¼Œä»–ä»¬å®åœ¨æµªè´¹äº†æˆ‘ä»¬å¤ªå¤šæ—¶é—´ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸­æ§ç®—æ³•æ¥å…¥ä¹Ÿä¸é¡ºåˆ©ï¼Œä»–ä»¬çš„å‡†ç¡®ç‡ä¸€èˆ¬ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®ï¼Œäººè„¸æ£€æµ‹éœ€è¦300æ¯«ç§’ï¼Œäººè„¸æ¯”å¯¹åˆ™æ›´å¤šï¼Œä¸è¿‡ä»–ä»¬APIè¿˜ç®—ç¨³å®šï¼Œæˆ‘ä»¬åé¦ˆç»™ä»–ä»¬çš„é—®é¢˜ä¹Ÿè§£å†³äº†ï¼Œç°åœ¨ä¸»è¦åœ¨ç”¨ä»–ä»¬çš„ç®—æ³•ã€‚ä¸€èˆ¬å‚å®¶æä¾›çš„SDK demoéƒ½æ˜¯åŸºäºc++çš„ï¼Œä»–ä»¬æŠŠä¸€äº›dllå’Œbinæ–‡ä»¶ï¼Œæ¨¡å‹æ–‡ä»¶éƒ½æ”¾åˆ°è·ŸdllåŒä¸€ç›®å½•ï¼Œåœ¨ä»£ç é‡ŒæŸ¥æ‰¾dllç›®å½•ï¼Œé¡ºä¾¿æŠŠæ¨¡å‹æ–‡ä»¶ä¹Ÿä¸€èµ·åŠ è½½äº†ã€‚è¿™ç§åšæ³•åœ¨c++å·¥ç¨‹é‡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨electronçš„å¼€å‘æ–¹å¼ä¼šæœ‰é—®é¢˜ã€‚å½“electronæ‰“åŒ…ä¹‹åï¼Œdllä¼šè¢«ä¸€èµ·æ‰“åŒ…å‹ç¼©ï¼Œç¨‹åºè¿è¡Œæ—¶å†å»åŠ è½½binæ–‡ä»¶ï¼Œå·²ç»æ‰¾ä¸åˆ°äº†ã€‚ç„¶è€Œä»–ä»¬å¹¶æ²¡æœ‰æä¾›å¯ä»¥è®¾ç½®binæ–‡ä»¶è·¯å¾„çš„åœ°æ–¹ã€‚ã€‚ã€‚åæ¥å°†è¿™ä¸ªé—®é¢˜åé¦ˆç»™ä»–ä»¬ï¼Œä»–ä»¬æ‰åŠ äº†ä¸ªå‚æ•°è®¾ç½®ï¼Œå¯ä»¥æŒ‡å®šbinæ–‡ä»¶è·¯å¾„æ¥åŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;æ°é”è¾¾çš„ç®—æ³•æ¥å…¥ä¹Ÿä¸é¡ºåˆ©ï¼Œå¼€å§‹æ²¡æœ‰64ä½çš„ï¼Œåæ¥ç»™äº†ï¼Œä½†æ˜¯å¯¹èº«ä»½è¯å°ç…§ç‰‡äººè„¸æ£€æµ‹çš„æ—¶å€™é—ªé€€äº†ï¼Œåé¦ˆç»™ä»–ä»¬è§£å†³ã€‚åæ¥äººè„¸æ¯”å¯¹å¾—åˆ†å¼‚å¸¸ï¼Œå‡ ä¹ä¸å¯ç”¨ï¼Œåˆåé¦ˆç»™ä»–ä»¬ï¼Œä¿®æ­£åæ‰å¯ç”¨ã€‚ç„¶ååœ¨ä¸€ä½“æœºä¸Šåˆè·‘ä¸èµ·æ¥ï¼ŒåŸæ¥æ˜¯ç¼ºå°‘äº†python.dllã€‚æ°ç‘è¾¾çš„äººè„¸ç®—æ³•æ€§èƒ½è·Ÿä¸­æ§å·®ä¸å¤šã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±æ‰¾äº†ä¸ªå¼€æºçš„äººè„¸æ£€æµ‹å’Œæ¯”å¯¹çš„ç®—æ³•ï¼šdlibï¼Œä¹ŸæŠŠå®ƒæ¥å…¥äº†è¿›æ¥ã€‚dlibæ˜¯ä¸€ä¸ªå¼€æºçš„æ·±åº¦å­¦ä¹ åº“ï¼Œé‡‡ç”¨c++è¯­è¨€å†™çš„ï¼Œä¾èµ–å°‘ï¼Œè·¨å¹³å°ã€‚ç„¶åæœ‰äººé‡‡ç”¨å®ƒè¿›è¡Œäº†äººè„¸æ£€æµ‹å’Œæ¯”å¯¹çš„è®­ç»ƒï¼ˆäººè„¸ç…§ç‰‡åº“æ˜¯LFWï¼‰ï¼Œäº§å‡ºä¸€ä¸ªæ¨¡å‹æ”¾åˆ°ç½‘ä¸Šã€‚å®ƒå·ç§°å¯¹è¿™åº“çš„è¯†åˆ«æœ‰99.13%çš„å‡†ç¡®ç‡ã€‚è¿™ä¸ªåº“æœ‰Pythonç‰ˆæœ¬çš„ï¼Œå¾ˆå®¹æ˜“å®‰è£…ä½¿ç”¨ã€‚ä½†æ˜¯c++ç‰ˆæœ¬çš„ï¼Œdemoä¸æ˜¯å¾ˆè¯¦ç»†ï¼Œæ¥å…¥çš„è¯è¿˜æ˜¯éœ€è¦è‡ªå·±å†™ä¸å°‘ä»£ç ã€‚æˆ‘æŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œç»“åˆOpenCVï¼Œæ‰åœ¨nodeæ’ä»¶é‡Œä½¿ç”¨èµ·æ¥ã€‚ä¸è¿‡æˆ‘å‘ç°ï¼Œç°å®çš„å‡†ç¡®æ²¡æœ‰é‚£ä¹ˆæ²¡æœ‰ï¼Œæˆ‘æµ‹è¯•çš„å‡†ç¡®ç‡ä¸æ˜¯å¾ˆé«˜ã€‚ç½‘ä¸Šå®ƒè‡ªç§°å‡†ç¡®ç‡é‚£ä¹ˆé«˜æ˜¯å› ä¸ºå®ƒé˜ˆå€¼æ¯”è¾ƒä½ï¼Œæ˜¯0.6.è¿™ä¸ªé˜ˆå€¼çš„è¯æˆ–å¯¼è‡´å¾ˆé«˜çš„è¯¯è¯†åˆ«ç‡ã€‚è¦è‡³å°‘è°ƒåˆ°0.48ï¼Œè¯¯è¯†åˆ«ç‡æ‰ä¼šé™ä½ï¼Œä½†æ˜¯è¿™æ ·çš„è¯†åˆ«æ•ˆæœå°±å·®äº†ï¼Œè·Ÿä¸­æ§çš„ç®—æ³•å·®ä¸å¤šã€‚å®ƒçš„äººè„¸æ£€æµ‹æ—¶é—´è€—æ—¶ä¹ŸæŒºå¤šã€‚&lt;/p&gt;
&lt;p&gt;å•†æ±¤æ˜¯ç®—æ³•æ¥å…¥æƒ…å†µä¹Ÿå·®ä¸å¤šã€‚ä½†æ˜¯å®ƒçš„APIè®¾è®¡å¾—æ¯”è¾ƒç®€å•å’Œç›´æ¥ã€‚å®ƒåŒæ ·æ²¡æœ‰æä¾›è®¾ç½®æ¨¡å‹åº“æ–‡ä»¶çš„åŠ è½½è·¯å¾„ã€‚è¿™æ ·æ˜¯æ²¡åŠæ³•åœ¨electronç”¨èµ·æ¥çš„ã€‚æ€§èƒ½å’Œå‡†ç¡®ç‡æ¯”åˆ«çš„å®¶è¦å¥½ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰å¯¹æ¥è¿™äº›å•†å®¶çš„SDKä¸­ï¼Œä»–ä»¬çš„Demoå‘è¿‡æ¥ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä¸èƒ½ç›´æ¥è·‘çš„ã€‚ã€‚ã€‚ä»–ä»¬å°±ä¸èƒ½æå®Œå–„ä¸€äº›å—ï¼Ÿè¿˜æœ‰ä»–ä»¬éƒ½æ˜¯ç›´æ¥æˆ–è€…é—´æ¥éƒ½ç”¨åˆ°äº†OpenCVè¿™ä¸ªåº“ã€‚OpenCVå›¾åƒå¤„ç†é¢†åŸŸçœŸæ˜¯è¿ç”¨å¹¿æ³›ï¼Œå‘æŒ¥äº†å¾ˆå¤§ä½œç”¨ã€‚æˆ‘ä¹Ÿæ˜¯å› ä¸ºè¿™æ¬¡å¼€å‘æ‰äº†è§£åˆ°äº†ä¸€äº›OpenCVçš„çŸ¥è¯†ã€‚è¿˜æœ‰å‡ ä¹æ‰€æœ‰çš„å‚å®¶çš„å›¾ç‰‡æ•°æ®éƒ½æ˜¯è½¬ä¸ºbgræ ¼å¼çš„æ•°æ®æ¥ä½¿ç”¨ã€‚è¿˜æœ‰ä»–ä»¬æ¯”å¯¹å‡ºæ¥çš„åˆ†æ•°çš„æ ‡å‡†éƒ½ä¸å¤ªä¸€æ ·ï¼Œæ²¡æœ‰å¯æ¯”æ€§ã€‚&lt;/p&gt;
&lt;h2&gt;ä¼˜åŒ–è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;ç”±äºæ˜¯é‡‡ç”¨electronæ¥å¼€å‘ï¼Œè·Ÿä¼ ç»Ÿçš„c++å¼€å‘æœ‰å¾ˆå¤šä¸åŒï¼Œå¼€å§‹äººè„¸è¯†åˆ«æ€§èƒ½å¾ˆå·®ï¼Œç»è¿‡ä¸€ä¸ªè‰°éš¾çš„ä¼˜åŒ–è¿‡ç¨‹åï¼Œæ‰æœ‰äº†åŸºæœ¬å¯æ¥å—çš„æ•ˆæœã€‚è‡³äºä¸ºä»€ä¹ˆç”¨electronå¼€å‘ï¼Œå½“ç„¶æ˜¯ä¸ºäº†èŠ‚çœå¼€å‘æˆæœ¬äº†ï¼Œå¹¶ä¸”æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸“é—¨å¼€å‘Windowsè½¯ä»¶çš„å¼€å‘äººå‘˜ã€‚JSå¼€å‘çœŸçš„åƒæƒ³è¦ä¸€ç»Ÿå¤©ä¸‹çš„èŠ‚å¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹äººè„¸è¯†åˆ«nodeæ’ä»¶å¹¶ä¸æ˜¯æˆ‘å¼€å‘çš„ã€‚ä»–ä»¬é‡‡ç”¨çš„åšæ³•æ˜¯JSä¸­æ¯æ¬¡ä¼ èº«ä»½è¯ç…§ç‰‡å’Œæ‹ç…§çš„ç…§ç‰‡å»æ¯”å¯¹ï¼Œè¿”å›ç»“æœã€‚å‰ç«¯æ˜¯å®šæ—¶é€šè¿‡æ‘„åƒå¤´æ‹ç…§ï¼Œå°†æ‹çš„ç…§ç‰‡è½¬ä¸ºbmpæ ¼å¼çš„ç…§ç‰‡ï¼Œè¿åŒèº«ä»½è¯ç…§ç‰‡ï¼ˆä¹Ÿæ˜¯bmpæ ¼å¼ï¼‰ä¸€èµ·ä¼ å…¥nodeæ’ä»¶æ¥æ¯”å¯¹ã€‚è¿™ä¸ªæ¯”å¯¹æ¥å£è¦è€—è´¹7ï¼Œ8ç™¾æ¯«ç§’çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ˜æ˜¾æœ‰ä¸ªå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œå› ä¸ºèº«ä»½è¯ç…§ç‰‡æ˜¯ä¸å˜çš„ï¼Œä¸å¿…æ¯æ¬¡éƒ½å»ç”Ÿæˆäººè„¸ç‰¹å¾ï¼Œåªéœ€ç”Ÿæˆä¸€æ¬¡å³å¯ï¼Œåå°å°±åªéœ€å¤„ç†æ‹ç…§çš„ç…§ç‰‡å°±è¡Œã€‚è¿™æ ·å›¾ç‰‡å¤„ç†æ—¶é—´å°±å¯ä»¥å‡å°‘æ¥è¿‘ä¸€åŠçš„æ—¶é—´äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–é‡‡ç”¨electronå¼€å‘ä¸å¥½çš„ä¸€ä¸ªåœ°æ–¹å°±æ˜¯ï¼Œä½ ä¸å¥½ç›´æ¥å¤„ç†è§†é¢‘æµã€‚è§†é¢‘æµè¦ä¼ ç»™videoæ ‡ç­¾æ¥æ˜¾ç¤ºé¢„è§ˆå›¾ï¼Œç„¶åå®ƒå´æ²¡æœ‰æä¾›ä»è§†é¢‘æµé‡Œæˆªå–ä¸€å¸§æ•°æ®æ¥å£ã€‚æˆ‘ä»¬JSå¼€å‘çš„åŒäº‹çš„åšæ³•æ˜¯åœ¨åœ¨ç•Œé¢ä¸Šæ”¾ç½®ä¸€ä¸ªcanvasï¼Œç„¶åæŠŠvideoæ”¾åˆ°è¿™ä¸ªç”»å¸ƒä¸Šï¼Œç„¶åç”»ä¸€å¸§å›¾åƒå‡ºæ¥ï¼Œç„¶åæŠŠè¿™å¸§å›¾åƒæ‹¿å‡ºæ¥ã€‚è¿™æ•°æ®æ˜¯RGBAæ ¼å¼çš„æ•°æ®ï¼Œä»–å°†è¿™ä¸ªæ•°æ®è½¬ä¸ºbmpæ ¼å¼çš„æ•°æ®åï¼Œå†ä¼ ç»™nodeæ’ä»¶ã€‚è¿™ä¸€æ­¥è½¬æ¢å¾ˆè€—æ—¶ï¼Œè¦èŠ±è´¹300å¤šæ¯«ç§’ã€‚å®é™…ä¸Šè¿™ä¸€æ­¥è½¬æ¢æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œç›´æ¥æŠŠRGBAçš„æ•°æ®ä¼ ç»™nodeæ’ä»¶ï¼Œç”±nodeæ’ä»¶æ¥è½¬æˆäººè„¸ç®—æ³•éœ€è¦çš„æ•°æ®æ ¼å¼ã€‚åœ¨c++ä¸­ï¼Œå¯ä»¥OpenCVçš„æ–¹æ³•æ¥è½¬æ¢ï¼Œå¾ˆæ–¹ä¾¿å¿«æ·ã€‚è¿™é‡Œè¯´ä¸€ä¸ªæˆ‘çŠ¯è¿‡çš„é”™è¯¯ã€‚Maté‡Œçš„rowså¯¹åº”çš„æ˜¯å›¾ç‰‡çš„é«˜ï¼Œcolså¯¹åº”çš„æ˜¯å›¾ç‰‡çš„å®½ï¼Œåˆ«æé”™äº†ï¼Œæˆ‘å°±æ˜¯å› ä¸ºå¼„åäº†è°ƒè¯•äº†ä¸€æ™šä¸Šã€‚ã€‚ã€‚åšäº†è¿™ä¸ªä¼˜åŒ–ä¹‹åï¼Œäººè„¸è¯†åˆ«å°±æ¯”ä¹‹å‰å¿«å¾ˆå¤šäº†ï¼Œæœ‰äº†è´¨çš„åŒºåˆ«ã€‚ä¸å¤šè¯è¯´å›æ¥ï¼Œå®ƒçš„æ€§èƒ½è¿˜æ˜¯æ¯”çº¯c++å†™çš„è¦å·®ã€‚ã€‚ã€‚æ‰€ä»¥é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™æ¬¡å¼€å‘ä½“éªŒï¼Œæ„Ÿè§‰å›½å†…çš„äººè„¸ç®—æ³•ï¼Œè¿˜æ˜¯æ²¡æœ‰åˆ°å¾ˆé è°±çš„åœ°æ­¥ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="äººè„¸æ£€æµ‹ äººè¯æ¯”å¯¹ dlib electron"></category></entry><entry><title>Flutteræ¡†æ¶ç ”ç©¶å’Œä¸RNå¯¹æ¯”</title><link href="http://szuwest.github.io/flutterkuang-jia-yan-jiu-he-yu-rndui-bi.html" rel="alternate"></link><updated>2018-03-16T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-03-16:flutterkuang-jia-yan-jiu-he-yu-rndui-bi.html</id><summary type="html">&lt;h2&gt;Flutteræ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æŠ€æœ¯æ›´æ–°è¿­ä»£çœŸçš„å¾ˆå¿«ï¼Œæ¯éš”å‡ å¹´å°±ä¼šå‡ºç°ä¸€äº›æ–°çš„æŠ€æœ¯ã€‚å½“ç„¶ï¼ŒFlutterå‡ºç°æœ‰æœ‰ä¸€ç‚¹æ—¶é—´äº†ï¼Œåªä¸è¿‡è¿˜æœªçœŸæ˜¯å‘å¸ƒï¼Œä½†æ˜¯å·²ç»æœ‰ä¸€äº›äººåœ¨ä½¿ç”¨äº†ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦å†…å®¹æ¥è‡ªæˆ‘åœ¨å…¬å¸å†…éƒ¨çš„ä¸€æ¬¡åˆ†äº«ä¼šï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯æç‚¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Flutter æ˜¯ç”± Google çš„å·¥ç¨‹å¸ˆå›¢é˜Ÿæ‰“é€ çš„ï¼Œç”¨äºåˆ›å»ºé«˜æ€§èƒ½ã€è·¨å¹³å°çš„ç§»åŠ¨åº”ç”¨çš„æ¡†æ¶ã€‚&lt;/li&gt;
&lt;li&gt;Flutter é’ˆå¯¹å½“ä¸‹ä»¥åŠæœªæ¥çš„ç§»åŠ¨è®¾å¤‡è¿›è¡Œä¼˜åŒ–ï¼Œä¸“æ³¨äº Android and iOS ä½å»¶è¿Ÿçš„è¾“å…¥å’Œé«˜å¸§ç‡&lt;/li&gt;
&lt;li&gt;Flutterçš„è®¾è®¡è·Ÿreact-nativeå¾ˆåƒï¼Œä½†æ˜¯æ¯”RNè¿›äº†ä¸€æ­¥&lt;/li&gt;
&lt;li&gt;Flutterçš„å¼€å‘è¯­è¨€æ˜¯Dart&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;ç§»åŠ¨ç«¯è·¨å¹³å°å¼€å‘æŠ€æœ¯æ¼”è¿›&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ä¸»æµçš„ç§»åŠ¨å¼€å‘å¹³å°æ˜¯Androidå’ŒiOSï¼Œä¹‹å‰è¿˜æœ‰è¿‡windows phoneï¼Œæ¯ä¸ªå¹³å°çš„å¼€å‘æŠ€æœ¯éƒ½ä¸å¤ªä¸€æ ·ã€‚å¤§å®¶éƒ½æ˜¯é’ˆå¯¹æ¯ä¸ªå¹³å°å¼€å‘åº”ç”¨ã€‚è‡ªç„¶æœ‰äººå°±ä¼šè§‰å¾—è¿™æ ·æ•ˆç‡ä½ä¸‹ï¼Œæƒ³è¿›è¡Œè·¨å¹³å°å¼€å‘ã€‚ä»æœ€å¼€å§‹çš„Hybridæ··åˆå¼€å‘æŠ€æœ¯ï¼Œåˆ°RNçš„æ¡¥æ¥æŠ€æœ¯ï¼Œåˆ°ç°åœ¨æ–°å…´çš„FlutteræŠ€æœ¯ï¼Œè·¨å¹³å°å¼€å‘æŠ€æœ¯ä¸€ç›´åœ¨æ¼”è¿›ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å¾€æœ€æ—©çš„Hybridå¼€å‘ï¼Œä¸»è¦ä¾èµ–äºWebViewã€‚ä½†æ˜¯WebViewæ˜¯ä¸€ä¸ªå¾ˆé‡çš„æ§ä»¶ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿå†…å­˜é—®é¢˜ï¼Œè€Œä¸”å¤æ‚çš„UIåœ¨WebViewä¸Šæ˜¾ç¤ºçš„æ€§èƒ½ä¸å¥½ã€‚react-nativeæŠ€æœ¯æŠ›å¼€äº†WebViewï¼Œåˆ©ç”¨JavaScriptCoreæ¥åšæ¡¥æ¥ï¼Œå°†jsè°ƒç”¨è½¬ä¸ºnativeè°ƒç”¨ï¼Œåªç‰ºç‰²äº†å°éƒ¨åˆ†æ€§èƒ½è·å–çš„è·¨å¹³å°å¼€å‘ï¼Œè¿™æ˜¯ä¸€å¤§è¿›æ­¥ã€‚æ‰€ä»¥ç°åœ¨react-nativeå¾ˆæµè¡Œçš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="react-nativeåŸç†å›¾" src="https://res.infoq.com/articles/why-is-flutter-revolutionary/zh/resources/2.png" /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾react-nativeæ¡†æ¶åŸç†&lt;/p&gt;
&lt;p&gt;Flutterå®ç°è·¨å¹³å°é‡‡ç”¨äº†æ›´ä¸ºå½»åº•çš„æ–¹æ¡ˆã€‚å®ƒæ—¢æ²¡æœ‰é‡‡ç”¨WebViewä¹Ÿæ²¡æœ‰é‡‡ç”¨JavaScriptCoreï¼Œè€Œæ˜¯è‡ªå·±å®ç°äº†ä¸€å°UIæ¡†æ¶ï¼Œç„¶åç›´æ¥ç³»ç»Ÿæ›´åº•å±‚æ¸²æŸ“ç³»ç»Ÿä¸Šç”»UIã€‚æ‰€ä»¥å®ƒé‡‡ç”¨çš„å¼€å‘è¯­è¨€ä¸æ˜¯JSï¼Œè€ŒDartã€‚æ®ç§°Dartè¯­è¨€å¯ä»¥ç¼–è¯‘æˆåŸç”Ÿä»£ç ï¼Œç›´æ¥è·ŸåŸç”Ÿé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="FlutteråŸç†å›¾" src="https://res.infoq.com/articles/why-is-flutter-revolutionary/zh/resources/4.png" /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯Flutteræ¡†æ¶åŸç†å›¾&lt;/p&gt;
&lt;p&gt;Flutterå°†UIç»„ä»¶å’Œæ¸²æŸ“å™¨ä»å¹³å°ç§»åŠ¨åˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥è‡ªå®šä¹‰å’Œå¯æ‰©å±•ã€‚Flutterå”¯ä¸€è¦æ±‚ç³»ç»Ÿæä¾›çš„æ˜¯canvasï¼Œä»¥ä¾¿å®šåˆ¶çš„UIç»„ä»¶å¯ä»¥å‡ºç°åœ¨è®¾å¤‡çš„å±å¹•ä¸Šï¼Œä»¥åŠè®¿é—®äº‹ä»¶ï¼ˆè§¦æ‘¸ï¼Œå®šæ—¶å™¨ç­‰ï¼‰å’ŒæœåŠ¡ï¼ˆä½ç½®ã€ç›¸æœºç­‰ï¼‰ã€‚è¿™æ˜¯Flutterå¯ä»¥åšåˆ°è·¨å¹³å°è€Œä¸”é«˜æ•ˆçš„å…³é”®ã€‚å¦å¤–Flutterå­¦ä¹ äº†RNçš„UIç¼–ç¨‹æ–¹å¼ï¼Œå¼•å…¥äº†çŠ¶æ€æœºï¼Œæ›´æ–°UIæ—¶åªæ›´æ–°æœ€å°æ”¹å˜åŒºåŸŸã€‚&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿçš„UIæ¡†æ¶å¯ä»¥å–ä»£ï¼Œä½†æ˜¯ç³»ç»Ÿæä¾›çš„ä¸€äº›æœåŠ¡æ˜¯æ— æ³•å–ä»£çš„ã€‚Flutteråœ¨è·Ÿç³»ç»Ÿserviceé€šä¿¡æ–¹å¼ï¼Œé‡‡ç”¨çš„æ˜¯ä¸€ç§ç±»ä¼¼æ’ä»¶å¼çš„æ–¹å¼ï¼Œæˆ–è€…æœ‰ç‚¹åƒè¿œç¨‹è¿‡ç¨‹è°ƒç”¨RPCæ–¹å¼ã€‚è¿™ç§æ–¹å¼æ®è¯´ä¹Ÿè¦æ¯”RNçš„æ¡¥æ¥æ–¹å¼é«˜æ•ˆã€‚&lt;/p&gt;
&lt;h2&gt;Flutterä¸RNå¼‚åŒ&lt;/h2&gt;
&lt;p&gt;ç®€å•æ€»ç»“ä¸€ä¸‹Flutterä¸RNçš„å¼‚åŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éƒ½å®ç°äº†ç§»åŠ¨å¼€å‘è·¨å¹³å°&lt;/li&gt;
&lt;li&gt;ç•Œé¢çš„ç¼–å†™éƒ½å¾ˆç±»å‹ï¼Œé‡‡ç”¨å“åº”å¼è§†å›¾ï¼Œç»´æŠ¤äº†ä¸€ä¸ªçŠ¶æ€æœºï¼Œåªæ›´æ–°æ”¹å˜çš„æœ€å°åŒºåŸŸç•Œé¢&lt;/li&gt;
&lt;li&gt;éƒ½æ”¯æŒçƒ­é‡è½½hot reloadï¼Œå¼€å‘è°ƒè¯•éå¸¸æ–¹ä¾¿&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ç³»ç»Ÿçš„serviceä»ç„¶éœ€è¦å°è£…æ¥å£ï¼Œä»ç„¶è¿˜æ˜¯éœ€è¦æ‡‚å¾—nativeå¼€å‘&lt;/li&gt;
&lt;li&gt;RNé‡‡ç”¨JSè¯­è¨€å¼€å‘ï¼ŒåŸºäºReactï¼Œå—ä¼—æ›´å¤šã€‚Dartè¯­è¨€å—ä¼—å°&lt;/li&gt;
&lt;li&gt;Flutterçš„UIæ¡†æ¶æ€§èƒ½è²Œä¼¼æ›´é«˜ä¸€äº›ï¼Œä½†æ˜¯ç›´æ¥ä¸¢å¼ƒäº†åŸç”ŸUIæ¡†æ¶ã€‚è€ŒRNè¿˜æ˜¯å¯ä»¥è‡ªå·±åˆ©ç”¨åŸç”Ÿæ¡†æ¶ï¼Œä¸¤ä¸ªå„æœ‰å¥½å¤„ã€‚Flutterçš„å…¼å®¹æ€§é«˜ï¼ŒRNå¯ä»¥åˆ©ç”¨åŸç”Ÿå·²æœ‰çš„ä¼˜ç§€UI&lt;/li&gt;
&lt;li&gt;Flutterçš„ç¬¬ä¸‰æ–¹åº“è¿˜å¾ˆå°‘ï¼ŒRNå‘å±•çš„æ—©ï¼Œè™½ç„¶ä¹Ÿè¿˜ä¸å®Œå–„ï¼Œä½†æ˜¯æ¯”Flutterå¥½&lt;/li&gt;
&lt;li&gt;RNçš„ç•Œé¢å¸ƒå±€æ›´åƒç½‘é¡µå¸ƒå±€ï¼Œè€ŒFlutterçš„å¸ƒå±€æ›´åƒnativeå¸ƒå±€&lt;/li&gt;
&lt;li&gt;Flutteråœ¨è·¨å¹³å°è¿™æ–¹é¢åšå¾—æ›´å½»åº•ä¸€äº›&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;æˆ‘è¯•ç”¨Flutterçš„æ„Ÿå—&lt;/h2&gt;
&lt;p&gt;æˆ‘è‡ªå·±æŒ‰ç…§å®˜æ–¹æ•™ç¨‹å†™äº†ä¸€ä¸ªç®€å•çš„æ— é™æ»šåŠ¨çš„ListViewï¼Œæ„Ÿè§‰Flutterçš„ç•Œé¢å¸ƒå±€æ˜¯å®Œå…¨è‡ªå·±æäº†ä¸€å¥—ï¼Œè·ŸRNçš„webé£æ ¼ä¸åŒï¼Œè·ŸåŸç”Ÿçš„ä¹Ÿä¸å¤ªç›¸åŒï¼Œè¿™é‡Œéœ€è¦ä¸€ç‚¹å­¦ä¹ æˆæœ¬ã€‚æˆ‘è¿˜è¿è¡Œäº†å®˜æ–¹è‡ªåŠ¨çš„sampleä¾‹å­ï¼Œå€’æ˜¯è¿˜ä¸é”™ï¼ŒæŠŠAndroidçš„materialé£æ ¼æ§ä»¶éƒ½ç§»æ¤è¿‡æ¥äº†ã€‚å¦å¤–æˆ‘å‘ç°Flutterçš„åœ¨è°ƒè¯•æ¨¡å¼å’ŒReleaseæ¨¡å¼ä¸‹æ€§èƒ½å·®åˆ«å¾ˆå¤§ã€‚å¦‚æœä½ è°ƒè¯•æ—¶å‘ç°æ€§èƒ½å·®ï¼Œå°±æœ€å¥½è¯•è¯•releaseæ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;Flutteré‡‡ç”¨Dartè¯­è¨€å¼€å‘ä¸çŸ¥é“æ˜¯å¥½æ˜¯åã€‚ç°åœ¨å¯æ˜¯JSçš„å¤©ä¸‹ï¼Œè¿™æ˜¯RNçš„ä¼˜åŠ¿ä¹‹ä¸€ï¼Œwebå¼€å‘äººå‘˜å¾ˆå®¹æ˜“å¼€å‘RNçš„ç•Œé¢ï¼Œä½†æ˜¯Flutterçš„ä¸€åˆ‡éƒ½è¦ä»æ–°å­¦ä¹ ã€‚Dartè¯­è¨€æˆ‘ä¹Ÿè¿˜æ²¡ä¹ æƒ¯ã€‚&lt;/p&gt;
&lt;p&gt;Flutterç°åœ¨è¿˜å¤„ç†Bataé˜¶æ®µï¼Œç¬¬ä¸‰æ–¹åº“è¿˜å¾ˆå°‘ã€‚æˆ‘ç”¨è¿‡ä¸€ä¸ªAudioPlayerçš„ç¬¬ä¸‰æ–¹åº“ï¼Œç«Ÿç„¶å‡ºé—®é¢˜ã€‚æ‰€ä»¥å¾ˆå¤šä¸œè¥¿éƒ½éœ€è¦è‡ªå·±å¼€å‘å’Œå°è£…ã€‚RNç»è¿‡äº†ä¸€æ®µæ—¶é—´ç§¯ç´¯ï¼Œå¥½ç”¨çš„åº“è¿˜æœ‰ä¸å°‘ã€‚ç°åœ¨ç”¨Flutteræ¥å¼€å‘APPï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹å¤ªæ—©ã€‚&lt;/p&gt;
&lt;p&gt;Flutterå®˜æ–¹å¹çš„å¾ˆå¤§ï¼Œè¯´å®ƒæ˜¯é©å‘½æ€§çš„ï¼Œä¹Ÿæœ‰ä¸€å®šé“ç†ã€‚ä½†æ˜¯æˆ‘è§‰å¾—RNå¯¹äºç†Ÿæ‚‰webå¼€å‘çš„äººæ¥è¯´ï¼Œæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä½†æ˜¯å¯¹äºçº¯nativeå¼€å‘çš„ç§»åŠ¨å¼€å‘äººå‘˜ï¼Œç›´æ¥å­¦ä¹ Flutterä¼šæ›´å¥½ï¼ŒFlutterä¹Ÿæ¯”è¾ƒé€‚åˆæœ¬æ¥å°±æ˜¯åšnativeå¼€å‘çš„äººã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="ReactNative Flutter"></category></entry><entry><title>Jenkins slave ReactNativeé¡¹ç›®è‡ªåŠ¨æ‰“åŒ…</title><link href="http://szuwest.github.io/jenkins-slave-reactnativexiang-mu-zi-dong-da-bao.html" rel="alternate"></link><updated>2018-03-08T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-03-08:jenkins-slave-reactnativexiang-mu-zi-dong-da-bao.html</id><summary type="html">&lt;h1&gt;Jenkins slave ReactNativeé¡¹ç›®è‡ªåŠ¨æ‰“åŒ…&lt;/h1&gt;
&lt;p&gt;è¿™æ¬¡æˆ‘æƒ³åœ¨è°ˆè°ˆJenkinsè‡ªåŠ¨æ‰“åŒ…çš„é—®é¢˜ã€‚é’ˆå¯¹react-nativeé¡¹ç›®ã€‚
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨ä¸€å°ç”µè„‘ä¸Šå®‰è£…Jenkinsï¼Œç„¶ååœ¨è¯¥ç”µè„‘ä¸Šæ‰“å¼€Jenkinsç½‘é¡µè¿›è¡Œæ‰“åŒ…é…ç½®ã€‚å¦‚æœæˆ‘ä»¬æœ‰å¾ˆå¤šé¡¹ç›®ï¼Œåˆ†å¸ƒåœ¨ä¸åŒçš„ç”µè„‘ï¼Œè€Œä¸”è¿è¡Œçš„ç³»ç»Ÿä¹Ÿä¸åŒï¼Œè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªmasteræ¥ç»Ÿä¸€ç®¡ç†è¿™äº›ç”µè„‘ï¼Œç„¶åç»Ÿä¸€åœ¨ä¸€ä¸ªç½‘é¡µä¸Šè¿›è¡Œæ‰“åŒ…é…ç½®ã€‚è¿™å°±æ˜¯Jenkinsçš„master-slaveæ‰“åŒ…æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼è·Ÿå•æœºæ¨¡å¼ç¨æœ‰ä¸åŒï¼Œè¿™é‡Œä¸»è¦è®²æ€ä¹ˆé…ç½®slaveã€‚&lt;/p&gt;
&lt;h2&gt;slaveèŠ‚ç‚¹é…ç½®&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆslaveä¸Šä¹ŸåŒæ ·è¦å®‰è£…Jenkinså’Œç›¸å…³çš„æ‰“åŒ…æ‰€ä¾èµ–çš„ç¯å¢ƒï¼Œä¸€ä¸ªéƒ½ä¸èƒ½å°‘ã€‚é…ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦åœ¨æœ¬æœºä¸Šæ‰“å¼€Jenkinsç½‘é¡µæ¥åˆ›å»ºé¡¹ç›®ï¼Œé…ç½®é¡¹ç›®ç­‰ï¼Œè€Œæ˜¯è¦åˆ°ä¸»æœºä¸Šå»é…ç½®ã€‚åœ¨å»ä¸»æœºçš„Jenkinsç®¡ç†é¡µé¢ä¸Šæ–°å»ºèŠ‚ç‚¹ä¹‹å‰ï¼Œä»æœºè¿˜éœ€è¦åšä¸€äº›å…¶ä»–é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;æ‰“å¼€è¿œç¨‹ç™»å½•ã€‚åœ¨ç³»ç»Ÿè®¾ç½®--&amp;gt;å…±äº«ï¼Œç„¶åé€‰ä¸­è¿œç¨‹ç™»å½•ï¼Œå…è®¸æ‰€æœ‰ç”¨æˆ·è®¿é—®ã€‚&lt;/li&gt;
&lt;li&gt;è®°ä½æœ¬æœºIPåœ°å€ã€‚åœ¨ç³»ç»Ÿè®¾ç½®--&amp;gt;ç½‘ç»œï¼Œå¯ä»¥çœ‹åˆ°å½“å‰ç½‘ç»œçš„IPåœ°å€ã€‚ä¸ºäº†ä»¥åæ–¹ä¾¿ï¼Œå¯ä»¥å°†IPåœ°å€è®¾ç½®ä¸ºä¸€ä¸ªå›ºå®šIPåœ°å€ã€‚ä¸ç„¶å½“è¯¥ç”µè„‘é‡å¯ä¹‹åï¼ŒIPåœ°å€å¯èƒ½ä¼šå˜ï¼Œç„¶åä¸»æœºå†æŒ‰ç…§ä¹‹å‰é…ç½®çš„æ—§IPè¿æ¥ä»æœºçš„æ—¶å€™ï¼Œå°±è¿ä¸ä¸Šäº†ã€‚Macç”µè„‘é…ç½®å›ºå®šIPä¹Ÿæœ‰æ³¨æ„çš„åœ°æ–¹ã€‚æˆ‘ç¬¬ä¸€æ¬¡é…ç½®å°±æ˜¯æ²¡æœ‰æˆåŠŸï¼Œä¸Šä¸äº†ç½‘ã€‚é€‰æ‹©æ‰‹åŠ¨æ–¹å¼ï¼Œç„¶åå¡«ä¸Šä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„IPåœ°å€ï¼Œç„¶åï¼Œå­ç½‘æ©ç ä¹Ÿè¦æ³¨æ„ï¼Œå¦‚æœè·ŸæœåŠ¡å™¨æ˜¯è·¨ç½‘æ®µè®¿é—®çš„ï¼Œéœ€è¦æ³¨æ„255.255.255.0è¿™ç§æ˜¯ä¸è¡Œçš„ã€‚å½“ç„¶æŒ‰ç…§ä¹‹å‰é»˜è®¤çš„æ¥ä¸€èˆ¬æ²¡é—®é¢˜ã€‚ç„¶åæœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯è¦é…ç½®DNSï¼ŒDNSè·Ÿè·¯ç”±å™¨çš„åœ°å€ä¸€æ ·ã€‚æˆ‘å°±é‡åˆ°æ²¡æœ‰é…ç½®DNSç„¶åå¯¼è‡´è¿ä¸ä¸Šç½‘çš„æƒ…å†µã€‚æˆ‘å¼€å§‹ä»¥ä¸ºå®ƒä¼šè‡ªåŠ¨é…ç½®çš„ï¼ŒåŸæ¥è¿˜éœ€è¦è‡ªå·±é…ç½®ã€‚   &lt;/li&gt;
&lt;li&gt;ä¸»æœºè·Ÿä»æœºæ€ä¹ˆè¿æ¥å‘¢ã€‚é¦–å…ˆåœ¨ä¸»æœºä¸Šçš„Jenkinsç®¡ç†é¡µé¢ä¸Šè¿›å…¥&lt;strong&gt;ç³»ç»Ÿç®¡ç†&lt;/strong&gt;--&amp;gt;&lt;strong&gt;ç®¡ç†èŠ‚ç‚¹&lt;/strong&gt;é¡µé¢ï¼Œç„¶åæ–°å»ºèŠ‚ç‚¹ã€‚å¡«å…¥ä¸€ä¸ªåç§°ï¼Œä¹‹åé è¿™ä¸ªåç§°æ¥è¯†åˆ«èŠ‚ç‚¹ã€‚æœ€å¥½èƒ½è¯†åˆ«ç³»ç»Ÿã€‚ä¾‹å¦‚å«macOS.å¦å¤–ä¸€ä¸ªé€‰é¡¹ï¼Œé€‰æ‹©å›ºå®šä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®èŠ‚ç‚¹ï¼šè¿™é‡Œæœ‰ä¸ªè¿œç¨‹å·¥ä½œç›®å½•ï¼ŒæŒ‡çš„æ˜¯Jenkinsçš„é…ç½®ç›®å½•ã€‚ä¸€ä¸ªæ˜¯/Users/ä½ çš„ç”¨æˆ·å/.jenkins.å¯åŠ¨æ–¹æ³•æˆ‘é€‰çš„æ˜¯Launch slave agents via sshï¼Œç„¶åå¡«ä¸Šä»æœºç”µè„‘çš„IPåœ°å€å’Œç™»å½•çš„ç”¨æˆ·åå¯†ç ï¼ˆCredentialsï¼‰ã€‚è¿™é‡Œå¦‚æœæ²¡æœ‰æ·»åŠ è¿‡ç”¨æˆ·åå’Œå¯†ç çš„è¯ï¼Œéœ€è¦å…ˆæ·»åŠ ã€‚è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå« &lt;strong&gt;Host Key Verification Strategy&lt;/strong&gt;çš„é€‰é¡¹ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯Non verifying Verification Strategy.åˆ«çš„å¥½åƒéƒ½ä¸è¡Œï¼Œå…·ä½“çš„åŸå› æˆ‘ä¹Ÿä¸çŸ¥é“ã€‚Availabilityé€‰æ‹©çš„æ˜¯å°½é‡ä¿æŒä»£ç†åœ¨çº¿ã€‚    &lt;br /&gt;
Node Propertiesé¡¹ç›®æ å¯ä»¥ä¸ç”¨å¡«ã€‚è²Œä¼¼æœ‰å¿…è¦ä¹Ÿå¯ä»¥å¡«ä¸€ä¸‹é‚£ä¸ªç¯å¢ƒå˜é‡ï¼Œä»¥é˜²ä¸€äº›å‘½ä»¤æ‰¾ä¸åˆ°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;åˆ›å»ºé¡¹ç›®&lt;/h2&gt;
&lt;p&gt;é…ç½®å¥½èŠ‚ç‚¹åªæœ‰ï¼Œå¯ä»¥æ–°å»ºé¡¹ç›®äº†ã€‚æ€ä¹ˆé…ç½®é¡¹ç›®ï¼Œç½‘ä¸Šä¹Ÿæœ‰éå¸¸å¤šçš„æ–‡ç« ã€‚è¿™é‡Œæœ‰å‡ ç‚¹è¦é¢å¤–è¯´æ˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ˜¯é¡¹ç›®æ€ä¹ˆè·Ÿä»æœºç»‘å®šåˆ°ä¸€èµ·å‘¢ã€‚æœ‰ä¸ªå·²äº¤&lt;strong&gt;Restrict where this project can be run&lt;/strong&gt;çš„é€‰é¡¹ï¼Œå‹¾é€‰å®ƒï¼Œç„¶åå¡«å…¥ä¹‹å‰åˆ›å»ºçš„èŠ‚ç‚¹åç§°ã€‚è¿™æ ·è¿™ä¸ªé¡¹ç›®çš„æ‰“åŒ…å°±æ˜¯åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–çš„ä¸€äº›é…ç½®ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œä¸è¯´ï¼Œè€Œä¸”æœ‰äº›é…ç½®å¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œæ¯ä¸ªäººçš„éœ€æ±‚ä¸åŒã€‚å¯¹äºæˆ‘çš„é¡¹ç›®ï¼Œæˆ‘åŸºæœ¬åªé…ç½®ä¸€ä¸ª å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ï¼Œå¯ä»¥é€‰æ‹©åˆ†æ”¯æ¥æ„å»ºã€‚ç„¶åæ˜¯æºç ç®¡ç†ï¼Œé€‰æ‹©gitã€‚gitçš„åœ°å€ä¸€èˆ¬é€‰æ‹©sshæ–¹å¼ã€‚è¿™æ ·çš„æ–¹å¼ç½‘ç»œè¿æ¥ä¹Ÿæ¯”è¾ƒç¨³å®šï¼Œä¸å®¹æ˜“å‡ºç°ä»£ç è¿‡å¤šï¼Œæ‹‰å–ä»£ç å¤ªä¹…è€Œå¯¼è‡´è¶…æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;å†æœ‰éœ€è¦çš„é…ç½®å°±æ„å»ºã€‚Jenkinsæœ‰xcodeæ’ä»¶ï¼Œå¯ä»¥æŒ‰ç…§æ’ä»¶æ¥é…ç½®ã€‚ä½†æ˜¯æˆ‘çš„é¡¹ç›®æ˜¯react-nativeé¡¹ç›®ï¼Œæ„Ÿè§‰æŒ‰ç…§ä¸€èˆ¬çš„xcodeé¡¹ç›®æ¥é…ç½®ä¸æ˜¯å¾ˆå¥½é…ç½®ã€‚æˆ‘ç›´æ¥å°±å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œåœ¨è¿™è„šæœ¬é‡Œåšäº†æ‰€ä»¥çš„ä¸€åˆ‡äº‹æƒ…ã€‚æ‰€ä»¥åœ¨Jenkinsé‡Œæˆ‘åªéœ€è¦å»ºç«‹ä¸€ä¸ªExecute Shellï¼Œç„¶ååœ¨è¿™ä¸ªshellé‡Œæ‰§è¡Œæˆ‘å»ºç«‹çš„è„šæœ¬ï¼Œä¸€åˆ‡éƒ½OKäº†ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„æˆ‘çš„è„šæœ¬æ˜¯æ”¾åœ¨ é¡¹ç›®æ ¹ç›®å½•/ios ç›®å½•ä¸‹ã€‚è€ŒJenkinsçš„ç›®å½•æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ã€‚
Jenkinsä¸­çš„é…ç½®ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="n"&gt;ios&lt;/span&gt;
&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;build_using_gym&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;build_using_gym.shçš„å†…å®¹ï¼š&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/bin/bash -ilex&lt;/span&gt;

&lt;span class="c"&gt;#è®¾ç½®è¶…æ—¶&lt;/span&gt;
&lt;span class="nb"&gt;export &lt;/span&gt;&lt;span class="nv"&gt;FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;120

&lt;span class="c"&gt;#è®¡æ—¶&lt;/span&gt;
&lt;span class="nv"&gt;SECONDS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;0

&lt;span class="c"&gt;#å‡è®¾è„šæœ¬æ”¾ç½®åœ¨ä¸iOSé¡¹ç›®ç›¸åŒçš„è·¯å¾„ä¸‹&lt;/span&gt;
&lt;span class="c"&gt;#project_path=&amp;quot;$(dirname &amp;quot;$(pwd)&amp;quot;)&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;project_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$(pwd)&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#å–å½“å‰æ—¶é—´å­—ç¬¦ä¸²æ·»åŠ åˆ°æ–‡ä»¶ç»“å°¾&lt;/span&gt;
&lt;span class="nv"&gt;now&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date +&lt;span class="s2"&gt;&amp;quot;%Y_%m_%d_%H_%M_%S&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="c"&gt;#é¡¹ç›®åç§°&lt;/span&gt;
&lt;span class="nv"&gt;projectName&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;VprScene&amp;quot;&lt;/span&gt;

&lt;span class="c"&gt;#æŒ‡å®šé¡¹ç›®çš„schemeåç§°&lt;/span&gt;
&lt;span class="nv"&gt;scheme&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;VprScene&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æŒ‡å®šè¦æ‰“åŒ…çš„é…ç½®å&lt;/span&gt;
&lt;span class="nv"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Release&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æŒ‡å®šæ‰“åŒ…æ‰€ä½¿ç”¨çš„è¾“å‡ºæ–¹å¼ï¼Œç›®å‰æ”¯æŒapp-store, package, ad-hoc, enterprise, development, å’Œdeveloper-idï¼Œå³xcodebuildçš„methodå‚æ•°&lt;/span&gt;
&lt;span class="nv"&gt;export_method&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ad-hoc&amp;#39;&lt;/span&gt;

&lt;span class="c"&gt;#æŒ‡å®šé¡¹ç›®åœ°å€ï¼Œå¦‚æœæ˜¯workspaceï¼Œéœ€è¦ä¿®æ”¹&lt;/span&gt;
&lt;span class="nv"&gt;workspace_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$project_path/${projectName}.xcodeproj&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æŒ‡å®šè¾“å‡ºè·¯å¾„&lt;/span&gt;
&lt;span class="nv"&gt;output_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/Users/xhkj/Desktop/${projectName}&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æŒ‡å®šè¾“å‡ºå½’æ¡£æ–‡ä»¶åœ°å€&lt;/span&gt;
&lt;span class="nv"&gt;archive_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$output_path/${projectName}_${now}.xcarchive&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æŒ‡å®šè¾“å‡ºipaåœ°å€&lt;/span&gt;
&lt;span class="nv"&gt;ipa_path&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$output_path/${projectName}_${now}.ipa&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æŒ‡å®šè¾“å‡ºipaåç§°&lt;/span&gt;
&lt;span class="nv"&gt;ipa_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;${projectName}_${now}.ipa&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#è·å–æ‰§è¡Œå‘½ä»¤æ—¶çš„commit message&lt;/span&gt;
&lt;span class="nv"&gt;commit_msg&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;$1&amp;quot;&lt;/span&gt;

&lt;span class="c"&gt;#è¾“å‡ºè®¾å®šçš„å˜é‡å€¼&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===workspace path: ${workspace_path}===&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===archive path: ${archive_path}===&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===ipa path: ${ipa_path}===&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===export method: ${export_method}===&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===commit msg: $1===&amp;quot;&lt;/span&gt;

&lt;span class="c"&gt;# è§£é”å¯¹login.keychainçš„è®¿é—®ï¼Œcodesignä¼šç”¨åˆ°ï¼Œéœ€è¦æ›¿æ¢ä¸ºå®é™…å¯†ç &lt;/span&gt;
security unlock-keychain -p &lt;span class="s2"&gt;&amp;quot;123456&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;$HOME&lt;/span&gt;/Library/Keychains/login.keychain

&lt;span class="c"&gt;#react-native yarn &lt;/span&gt;
&lt;span class="c"&gt;#yarn install --registry http://192.168.0.9&lt;/span&gt;
yarn install

&lt;span class="c"&gt;#cocoapods&lt;/span&gt;
&lt;span class="c"&gt;#pod install --no-repo-update&lt;/span&gt;


&lt;span class="c"&gt;#fasltlane buildï¼Œæ³¨æ„å¦‚æœæ˜¯cocoapodså·¥ç¨‹éœ€è¦ä¿®æ”¹å‘½ä»¤&lt;/span&gt;
fastlane gym --project &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;workspace_path&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; --scheme &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;scheme&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; --clean --configuration &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;configuration&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; --archive_path &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;archive_path&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; --export_method &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;export_method&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; -allowProvisioningUpdates --output_directory &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;output_path&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt; --output_name &lt;span class="k"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ipa_name&lt;/span&gt;&lt;span class="k"&gt;}&lt;/span&gt;

&lt;span class="c"&gt;#ä¸Šä¼ åˆ°pgyer&lt;/span&gt;
&lt;span class="c"&gt;#è’²å…¬è‹±ä¸Šçš„User Key&lt;/span&gt;
&lt;span class="nv"&gt;uKey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xxxxxxxxxxxxxxxxxxxx&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#è’²å…¬è‹±ä¸Šçš„API Key&lt;/span&gt;
&lt;span class="nv"&gt;apiKey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;xxxxxxxxxxxxxxxxxxxxx&amp;quot;&lt;/span&gt;
&lt;span class="c"&gt;#æ‰§è¡Œä¸Šä¼ è‡³è’²å…¬è‹±çš„å‘½ä»¤&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;++++++++++++++upload+++++++++++++&amp;quot;&lt;/span&gt;
curl -F &lt;span class="s2"&gt;&amp;quot;file=@${ipa_path}&amp;quot;&lt;/span&gt; -F &lt;span class="s2"&gt;&amp;quot;uKey=${uKey}&amp;quot;&lt;/span&gt; -F &lt;span class="s2"&gt;&amp;quot;_api_key=${apiKey}&amp;quot;&lt;/span&gt; https://qiniu-storage.pgyer.com/apiv1/app/upload

&lt;span class="c"&gt;#è¾“å‡ºæ€»ç”¨æ—¶&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===Finished. Total time: ${SECONDS}s===&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;è¿™ä¸ªè„šæœ¬é‡Œä¸»è¦åšäº†å‡ ä»¶äº‹æƒ…ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®šä¹‰äº†é¡¹ç›®åç§°ï¼Œé¡¹ç›®è·¯å¾„ï¼Œæ‰“åŒ…è¾“å‡ºè·¯å¾„ï¼Œæ‰“åŒ…æ–¹å¼ï¼ˆad-hocï¼‰ä¹‹ç±»çš„å˜é‡å®šä¹‰&lt;/li&gt;
&lt;li&gt;è§£é”keychainï¼Œéœ€è¦é¢„å…ˆå¡«å…¥è§£é”å¯†ç ã€‚å› ä¸ºè¦ç­¾åï¼Œæ‰€æœ‰è¦è®¿é—®keychainï¼Œè¿™é‡Œå¾ˆé‡è¦ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç­¾åå¤±è´¥&lt;/li&gt;
&lt;li&gt;è¿è¡Œyarn install.è¿™æ˜¯ReactNativeé¡¹ç›®æ‰“åŒ…å‰å¿…é¡»çš„&lt;/li&gt;
&lt;li&gt;è¿è¡Œcocoapods installã€‚å¦‚æœæ˜¯cocoapodsé¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯æ‰“åŒ…å‰å¿…é¡»çš„&lt;/li&gt;
&lt;li&gt;è¿ç”¨fastlaneæ¥æ‰“åŒ…ã€‚fastlaneçš„å®‰è£…è¯·è‡ªè¡ŒæŸ¥æ‰¾èµ„æ–™&lt;/li&gt;
&lt;li&gt;ä¸Šä¼ åˆ°è’²å…¬è‹±ã€‚è¿™é‡Œè¦é¢„å…ˆæŒ‡å®šæ™®å…¬ç›Šçš„keyå’Œsecretã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«è¦æ³¨æ„çš„åœ°æ–¹ã€‚å¦‚æœä½ çš„è„šæœ¬åœ¨å•æœºä¸Šè·‘æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯ä¸€é€šè¿‡Jenkinsæ¥è·‘å°±å‡ºé—®é¢˜ï¼Œå°±æ˜¯ è„šæœ¬ç¬¬ä¸€è¡Œè¦åŠ  -ilex å‚æ•°.&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè„šæœ¬çš„å¥½å¤„æ˜¯ï¼Œé™¤äº†è¦è§£é”keychainï¼Œå…¶ä»–çš„ä»€ä¹ˆå¼€å‘è€…è¯ä¹¦ï¼ŒteamIDéƒ½ä¸ç”¨å¡«å†™ã€‚è¿™äº›é…ç½®åªéœ€è¦åœ¨ä½ çš„xcodeå·¥ç¨‹é‡Œé…ç½®äº†å°±è¡Œã€‚è¿™ä¸ªè„šæœ¬çš„é‡ç”¨æ€§å°±å¾ˆé«˜ã€‚æˆ‘æ¯ä¸ªé¡¹ç›®ï¼Œéƒ½åªéœ€è¦æ‹·è´è¿™ä¸ªè„šæœ¬è¿‡å»ï¼Œä¿®æ”¹ä¸€ä¸‹å·¥ç¨‹åå­—ï¼Œå¿…è¦æ—¶ä¿®æ”¹ä¸€äº›å‘½ä»¤ï¼Œå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/szuwest/rn_build_ios_sh"&gt;iosæ‰“åŒ…è„šæœ¬åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="ReactNative Jenkins iOS"></category></entry><entry><title>react-nativeæ¡†æ¶æºç å­¦ä¹ (iOS)(ä¸‹)</title><link href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosxia.html" rel="alternate"></link><updated>2018-03-02T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-03-02:react-nativekuang-jia-yuan-ma-xue-xi-iosxia.html</id><summary type="html">&lt;h1&gt;react-nativeæ¡†æ¶æºç å­¦ä¹ (iOS)(ä¸‹)&lt;/h1&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰çœ‹è¿‡ä¸Šç¯‡ï¼Œè¯·å…ˆçœ‹&lt;a href=""&gt;react-nativeæ¡†æ¶æºç å­¦ä¹ (iOS)(ä¸Š)&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3&gt;JSCExecutorç›¸å…³åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šç¯‡ä¸­è¯´åˆ°Instanceçš„åˆå§‹åŒ–æ–¹æ³•initializeBridgeé‡Œï¼Œæœ€ä¸»è¦æ˜¯åˆ›å»ºäº†NativeToJsBridgeçš„å®ä¾‹ã€‚è€ŒNativeToJsBridgeçš„æ„é€ å‡½æ•°é‡Œï¼Œä¸»è¦æ˜¯è°ƒç”¨äº†executorFactoryæ¥åˆ›å»ºä¸€ä¸ªJSCExecutorã€‚NativeToJsBridgeçš„æ„é€ å‡½æ•°è¿˜åŒ…å«æ›´å¤šçš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;NativeToJsBridge&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;NativeToJsBridge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;JSExecutorFactory&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;jsExecutorFactory&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;shared_ptr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ModuleRegistry&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;registry&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;shared_ptr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;MessageQueueThread&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;jsQueue&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;shared_ptr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;InstanceCallback&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;m_destroyed&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;make_shared&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m_delegate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;make_shared&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;JsToNativeBridge&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;registry&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;callback&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m_executor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jsExecutorFactory&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;createJSExecutor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_delegate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;jsQueue&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m_executorMessageQueueThread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;jsQueue&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;NativeToJsBridgeçš„æˆå‘˜å˜é‡åŒ…æ‹¬äº†ä¸€ä¸ªm_delegate(JsToNativeBridge)ï¼Œä¸€ä¸ªm_executorMessageQueueThreadï¼ˆMessageQueueThreadï¼‰å’Œm_executorï¼ˆJSCExecutorï¼‰ï¼Œåœ¨å®ƒçš„æ„é€ å‡½æ•°é‡Œï¼Œå°†JsToNativeBridgeåˆ›å»ºäº†ç„¶ååˆä¼ ç»™jsExecutorFactoryæ¥åˆ›å»ºJSCExecutorï¼ŒJsToNativeBridgeå®é™…ä¸Šæ˜¯ç»™JSCExecutorä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;JSCExecutor::JSCExecutor(std::shared_ptr&lt;span class="nt"&gt;&amp;lt;ExecutorDelegate&amp;gt;&lt;/span&gt; delegate,
                         std::shared_ptr&lt;span class="nt"&gt;&amp;lt;MessageQueueThread&amp;gt;&lt;/span&gt; messageQueueThread,
                         const folly::dynamic&lt;span class="err"&gt;&amp;amp;&lt;/span&gt; jscConfig) throw(JSException) :
    m_delegate(delegate),
    m_messageQueueThread(messageQueueThread),
    m_nativeModules(delegate ? delegate-&amp;gt;getModuleRegistry() : nullptr),
    m_jscConfig(jscConfig) {
  initOnJSVMThread();

  {
    SystraceSection s(&amp;quot;nativeModuleProxy object&amp;quot;);
    installGlobalProxy(m_context, &amp;quot;nativeModuleProxy&amp;quot;,
                       exceptionWrapMethod&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;JSCExecutor::getNativeModule&amp;gt;());&lt;/span&gt;
  }
}

void JSCExecutor::initOnJSVMThread() throw(JSException) {
    ......
    m_context = JSC_JSGlobalContextCreateInGroup(useCustomJSC, nullptr, globalClass);
    .....
    installNativeHook&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;JSCExecutor::nativeFlushQueueImmediate&amp;gt;(&amp;quot;nativeFlushQueueImmediate&amp;quot;);&lt;/span&gt;
  installNativeHook&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;JSCExecutor::nativeCallSyncHook&amp;gt;(&amp;quot;nativeCallSyncHook&amp;quot;);&lt;/span&gt;
  ......
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åœ¨initOnJSVMThreadä¸­ï¼Œå…ˆåˆ›å»ºäº†å…¨å±€çš„JSGlobalContext,ç„¶åç»™è¿™ä¸ªcontextæ³¨å†Œäº†nativeFlushQueueImmediateå’ŒnativeCallSyncHookå›è°ƒå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¸“é—¨ç»™JSè°ƒç”¨ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å°†ä¼šåœ¨MessageQueue.jsä¸­è¢«è°ƒç”¨ã€‚åˆ°è¿™é‡Œç»ˆäºæœ‰çœ‹åˆ°JSç›¸å…³çš„è°ƒç”¨ï¼Œè¿™é‡Œè¯´æ˜ä¸€ä¸‹æ ¸å¿ƒçš„JSæºç å­˜æ”¾ç›®å½•ã€‚åœ¨å·¥ç¨‹ç›®å½•/node_modules/react-native/Libraries/BatchedBridgeç›®å½•ä¸‹ï¼Œä¸»è¦æœ‰BatchedBridge.js,MessageQueue.js,NativeModules.jsä¸‰ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åˆ›å»ºcontextçš„æ—¶å€™ï¼Œä½¿ç”¨äº†å®ï¼Œæœ€ç»ˆä¼šè°ƒç”¨JavaScriptCoreçš„ä»£ç ã€‚è¿™ä¸ªå…¨å±€çš„contextå¾ˆé‡è¦ï¼ŒOCä¸­è¦è¿è¡Œjsä»£ç å°±æ˜¯é ä»–ã€‚è€Œjsä»£ç ä¸­çš„globalå¯¹è±¡å¯¹åº”å°±æ˜¯OCä¸­çš„è¿™ä¸ªcontextã€‚è€ŒnativeFlushQueueImmediateè¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯å°†jsä¼ è¿‡æ¥çš„é˜Ÿåˆ—é‡Œé¢çš„éœ€è¦è°ƒç”¨çš„æ–¹æ³•ä¸€èµ·è°ƒç”¨äº†ã€‚nativeCallSyncHookè¿™ä¸ªæ–¹å¼ä¸»è¦æ˜¯ç»™JSç›´æ¥åŒæ­¥è°ƒç”¨OCæ–¹æ³•æ¥ç”¨çš„ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆåšåé¢å†è¯´ï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€çŸ¥é“åœ¨åˆ›å»ºcontextä¹‹åï¼Œå°±å·²ç»å°†OCçš„è¿™ä¸¤ä¸ªæ–¹æ³•æ³¨å…¥åˆ°jsçš„globalå¯¹è±¡ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;initOnJSVMThread()æ‰§è¡Œä¹‹åï¼Œå¾€m_contextä¸­æ³¨å†Œäº†nativeModuleProxyçš„JSå¯¹è±¡ï¼Œå°†è¿™ä¸ªå¯¹è±¡ç»‘å®šåˆ°äº†getNativeModuleè¿™ä¸ªå‡½æ•°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;installGlobalProxy(m_context, &amp;quot;nativeModuleProxy&amp;quot;,
                       exceptionWrapMethod&lt;span class="err"&gt;&amp;lt;&lt;/span&gt;&lt;span class="ni"&gt;&amp;amp;JSCExecutor::getNativeModule&amp;gt;());&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é‚£ä¹ˆnativeModuleProxyåœ¨JSä¸­åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿè¿™ä¸ªå®šä¹‰åœ¨NativeModules.jsä¸­ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;let&lt;/span&gt; &lt;span class="nx"&gt;NativeModules&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{[&lt;/span&gt;&lt;span class="nx"&gt;moduleName&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;string&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{};&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;global&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;nativeModuleProxy&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;NativeModules&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;global&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;nativeModuleProxy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;Â·Â·Â·Â·Â·Â·Â·&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;NativeModules&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°NativeModuleså°±æ˜¯æŒ‡å‘äº†nativeModuleProxyï¼Œå³å°±æ˜¯OCçš„ä»£ç†ã€‚æˆ‘ä»¬è¦è°ƒç”¨OCæŸä¸ªç±»çš„æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡NativeModulesæ¥è°ƒç”¨çš„ã€‚ä¾‹å¦‚æˆ‘ä»¬å·²ç»å®šä¹‰å¥½å¦ä¸€ä¸ªå¯¹JSæš´éœ²çš„å½•éŸ³ç±»AudioRecorder,é‚£ä¹ˆåœ¨JSä¸­è¦è°ƒç”¨è¿™ä¸ªç±»çš„æ–¹æ³•ï¼Œå°±å¯ä»¥ let AudioRecorder = NativeModules.AudioRecorder; AudioRecorder.record();è¿™æ ·è°ƒç”¨ã€‚é‚£ä¹ˆæˆ‘ä»¬çŸ¥é“å®ƒå…¶å®æ˜¯è°ƒç”¨åˆ°äº†OCçš„JSCExecutorä¸­çš„getNativeModuleæ–¹æ³•ï¼ŒgetNativeModuleæ–¹æ³•å…¶å®ä¸»è¦ä½œç”¨æ ¹æ®ä¼ å…¥çš„æ¨¡å—åå­—ç”Ÿæˆå¯¹åº”çš„æ¨¡å—é…ç½®ï¼Œå…·ä½“å®ç°åé¢å†è¯´ã€‚è¿™é‡Œè¯´ä¸€ä¸‹JSä»£ç é‡Œæœ‰ä¸ªelseåˆ†æ”¯ï¼Œè¿™æ˜¯NativeModulesç”Ÿæˆçš„å¦ä¸€ç§åšæ³•ï¼šæŠŠæ‰€æœ‰çš„OCè¦æš´éœ²çš„ç±»å’Œæ–¹æ³•éƒ½å­˜åœ¨remoteModuleConfigé‡Œï¼Œç„¶åä»–ä»¬æ³¨å…¥åˆ°NativeModulesé‡Œï¼ˆåœ¨OCé‡Œå¯¹åº”çš„ä»£ç åœ¨RCTObjcExecutorçš„æ„é€ å‡½æ•°é‡Œï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡ŒJSCExecutorçš„åˆå§‹åŒ–å®Œæˆã€‚æˆ‘ä»¬é‡æ–°å›åˆ°RCTCxxBridgeçš„startæ–¹æ³•ã€‚è·ŸJSCExecutoråŒæ—¶è¿›è¡Œçš„æ˜¯åŠ è½½jsæºç ï¼ŒjsBundleçš„åŠ è½½æ˜¯é€šè¿‡RCTJavaScriptLoaderè¿›è¡Œçš„ï¼Œè¿™é‡Œä¸è¿›è¡Œè®¨è®ºã€‚å½“åˆå§‹åŒ–å’Œjsæºç åŠ è½½å®Œæˆåï¼Œå°±ä¼šæ‰§è¡Œjsæºç ã€‚&lt;/p&gt;
&lt;h3&gt;jsæºç æ‰§è¡Œ&lt;/h3&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­æˆ‘ä»¬å·²ç»åˆ›å»ºå¥½å…¨å±€çš„JavaScriptCore contextï¼Œå¹¶åœ¨è¿™ä¸ªcontextä¸­æ³¨å…¥äº†nativeFlushQueueImmediateï¼ŒnativeCallSyncHookï¼ŒgetNativeModuleä¸‰ä¸ªå›è°ƒæ–¹æ³•ã€‚ç°åœ¨å°†æ‰§è¡Œå·²åŠ è½½çš„JSæºç ã€‚å®ƒæ˜¯æ‰§è¡Œé“¾æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;[RCTCxxBridge executeSourceCode: ]&lt;/li&gt;
&lt;li&gt;[RCTCxxBridge enqueueApplicationScript:]&lt;/li&gt;
&lt;li&gt;void Instance::loadScriptFromString()&lt;/li&gt;
&lt;li&gt;void NativeToJsBridge::loadApplication()&lt;ul&gt;
&lt;li&gt;void JSCExecutor::loadApplicationScript()&lt;/li&gt;
&lt;li&gt;void JSCExecutor::flush()&lt;/li&gt;
&lt;li&gt;void JSCExecutor::bindBridge()&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ void JSCExecutor::loadApplicationScriptæ–¹æ³•æœ€é‡è¦çš„ä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;......&lt;/span&gt;
&lt;span class="n"&gt;evaluateScript&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;jsScript&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;jsSourceURL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;.....&lt;/span&gt;
&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰§è¡Œåœ¨contextä¸­æ‰§è¡ŒJSæºç ï¼Œä¼šåˆå§‹åŒ–JSç¯å¢ƒï¼ŒBatchedBridge.js,NativeModules.jsä¸­çš„åˆå§‹åŒ–ä»£ç ä¹Ÿä¼šæ‰§è¡Œã€‚åœ¨BatchedBridge.jsä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªåä¸ºBatchedBridgeçš„MessageQueueï¼Œå¹¶è®¾ç½®åˆ°globalçš„__fbBatchedBridgeå±æ€§é‡Œï¼Œè¿™ä¸ªå±æ€§åé¢ä¼šç”¨åˆ°ã€‚åœ¨åˆå§‹åŒ–JSç¯å¢ƒçš„æ—¶å€™ï¼Œä¼šåŠ è½½åˆ°æŸäº›NativeModuleï¼Œè¿™äº›moduleæ‰ä¼šè¢«åˆå§‹åŒ–ï¼Œå³è°ƒç”¨åˆ°OCçš„getNativeModuleæ–¹æ³•ã€‚ä¾‹å¦‚æˆ‘æ‰“æ–­ç‚¹æ•è·åˆ°æœ€å¼€å§‹åˆå§‹åŒ–çš„ä¸€ä¸ªNativeModuleæ˜¯PlatformConstants,å®ƒå¯¹åº”çš„OCç±»æ˜¯RCTPlatformã€‚å½“ç›¸å…³çš„Moduleéƒ½åŠ è½½å®Œä¹‹åï¼ŒevaluateScriptæ–¹æ³•æ‰§è¡Œå®Œï¼ŒJSç¯å¢ƒåˆå§‹åŒ–å®Œæ¯•ã€‚ç„¶åå°±åˆ°æ‰§è¡Œflushæ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;JSCExecutor&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;SystraceSection&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;JSCExecutor::flush&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_flushedQueueJS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;callNativeModules&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_flushedQueueJS&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;callAsFunction&lt;/span&gt;&lt;span class="p"&gt;({}));&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="c1"&gt;// When a native module is called from JS, BatchedBridge.enqueueNativeCall()&lt;/span&gt;
  &lt;span class="c1"&gt;// is invoked.  For that to work, require(&amp;#39;BatchedBridge&amp;#39;) has to be called,&lt;/span&gt;
  &lt;span class="c1"&gt;// and when that happens, __fbBatchedBridge is set as a side effect.&lt;/span&gt;
  &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;getGlobalObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;global&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;__fbBatchedBridge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="c1"&gt;// So here, if __fbBatchedBridge doesn&amp;#39;t exist, then we know no native calls&lt;/span&gt;
  &lt;span class="c1"&gt;// have happened, and we were able to determine this without forcing&lt;/span&gt;
  &lt;span class="c1"&gt;// BatchedBridge to be loaded as a side effect.&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isUndefined&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// If calls were made, we bind to the JS bridge methods, and use them to&lt;/span&gt;
    &lt;span class="c1"&gt;// get the pending queue of native calls.&lt;/span&gt;
    &lt;span class="n"&gt;bindBridge&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;callNativeModules&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_flushedQueueJS&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;callAsFunction&lt;/span&gt;&lt;span class="p"&gt;({}));&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_delegate&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// If we have a delegate, we need to call it; we pass a null list to&lt;/span&gt;
    &lt;span class="c1"&gt;// callNativeModules, since we know there are no native calls, without&lt;/span&gt;
    &lt;span class="c1"&gt;// calling into JS again.  If no calls were made and there&amp;#39;s no delegate,&lt;/span&gt;
    &lt;span class="c1"&gt;// nothing happens, which is correct.&lt;/span&gt;
    &lt;span class="n"&gt;callNativeModules&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Value&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;makeNull&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ˜¯flushæ–¹æ³•è¢«ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œæ‰€ä»¥m_flushedQueueJSä¸ºç©ºï¼Œç„¶åå–åˆ°JSä¸­çš„globalå¯¹è±¡ä¸­çš„__fbBatchedBridgeå¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“åœ¨JSåˆå§‹åŒ–çš„æ—¶å€™ï¼Œè¿™ä¸ªå€¼å·²ç»è¢«å¡«ä¸ŠMessageQueueï¼Œæ‰€ä»¥è¿™é‡Œä¼šè¿›å…¥bindBridge()æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;JSCExecutor&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;bindBridge&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;throw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;JSException&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;SystraceSection&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;JSCExecutor::bindBridge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;call_once&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_bindFlag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;global&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;getGlobalObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;global&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;__fbBatchedBridge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isUndefined&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;requireBatchedBridge&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;global&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;__fbRequireBatchedBridge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;requireBatchedBridge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isUndefined&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requireBatchedBridge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;callAsFunction&lt;/span&gt;&lt;span class="p"&gt;({});&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isUndefined&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;JSException&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Could not get BatchedBridge, make sure your bundle is packaged correctly&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;batchedBridge&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batchedBridgeValue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;m_callFunctionReturnFlushedQueueJS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batchedBridge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;callFunctionReturnFlushedQueue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;m_invokeCallbackAndReturnFlushedQueueJS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batchedBridge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;invokeCallbackAndReturnFlushedQueue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;m_flushedQueueJS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batchedBridge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;flushedQueue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;m_callFunctionReturnResultAndFlushedQueueJS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;batchedBridge&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;callFunctionReturnResultAndFlushedQueue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä»ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå®ƒä»__fbBatchedBridgeï¼ˆä¹Ÿå³æ˜¯MessageQueueï¼‰ä¸­å°†å‡ ä¸ªå‡½æ•°è½¬æˆäº†OCå¯¹è±¡ï¼Œè¿™ä¸ªå‡ ä¸ªæ–¹æ³•å°†åœ¨åé¢åœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨ã€‚è¿™å‡ ä¸ªæ–¹æ³•éƒ½å®šä¹‰åœ¨MessageQueue.jsä¸­ã€‚MessageQueueè¿™ä¸ªJSç±»å¾ˆé‡è¦ï¼Œä»£ç ä¹Ÿæ¯”è¾ƒå¤šï¼Œè¿™é‡Œå°±ä¸è´´äº†ã€‚callFunctionReturnFlushedQueueè¿™ä¸ªå‡½æ•°ä¸»è¦å°±æ˜¯æ‰§è¡Œä¼ å…¥JSä¸­çš„æ¨¡å—å’Œæ–¹æ³•ï¼Œå¹¶æŠŠJSä¸­çš„queueè¿”å›ã€‚è¿™ä¸ªqueueå­˜å‚¨äº†JSè¦è°ƒç”¨çš„OCæ¨¡å—çš„ç±»å’Œæ–¹æ³•å’Œç›¸å…³å‚æ•°ã€‚OCä¸­è·å–åˆ°è¿™ä¸ªqueueåï¼Œå°±ä¼šè§£æè¿™ä¸ªqueueä¸­çš„å†…å®¹ï¼Œå¾—åˆ°ç›¸å…³æ¨¡å—çš„é…ç½®å’Œå‚æ•°ï¼Œå¹¶è¿›è¡ŒåŠ¨æ€è°ƒç”¨ã€‚m_flushedQueueJSè¿™ä¸ªå¯¹è±¡å¯¹åº”çš„JSå‡½æ•°æ˜¯flushedQueueï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯å°†queueè¿”å›ï¼Œç„¶åæ¸…ç©ºã€‚åœ¨bindBridge()æ‰§è¡Œå®Œä¹‹åï¼Œç«‹é©¬æ‰§è¡Œäº†callNativeModules(m_flushedQueueJS-&amp;gt;callAsFunction({}))ã€‚è¿™é‡Œå°±æ˜¯å°†jsä¸­çš„queueæ‹¿è¿‡æ¥è¿›è¡Œè°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½çš„ç†è§£OCä¸JSæ˜¯å¦‚ä½•ç›¸äº’è°ƒç”¨çš„ï¼Œè¿˜æ˜¯è¦å…ˆè¯´è¯´æ˜¯æ€ä¹ˆç”Ÿæˆæ¨¡å—é…ç½®çš„ã€‚JSå¦‚ä½•è°ƒç”¨åˆ°OCã€‚&lt;/p&gt;
&lt;h3&gt;JSè°ƒç”¨OC&lt;/h3&gt;
&lt;p&gt;å½“JSè¦åŠ è½½æŸä¸ªmoduleçš„ä¹‹åï¼Œä¼šè°ƒç”¨åˆ°JSCExecutorä¸­çš„getNativeModuleæ–¹æ³•ï¼Œç„¶åå®ƒä¼šæ‰¾è¯¥moduleï¼Œå¦‚æœç¬¬ä¸€æ¬¡åŠ è½½è¯¥moduleï¼Œå°±ä¼šå»åˆ›å»ºè¯¥moduleçš„é…ç½®ï¼Œç„¶åå­˜èµ·æ¥ï¼Œä¸‹æ¬¡å†å–æ—¶å°±ç›´æ¥è¿”å›å·²å°†å»ºå¥½çš„ã€‚ä¸‹é¢æ˜¯æ¶‰åŠçš„æ–¹æ³•è°ƒç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSCExecutor::getNativeModule()&lt;/li&gt;
&lt;li&gt;JSCNativeModules::getModule()&lt;/li&gt;
&lt;li&gt;JSCNativeModules::createModule()&lt;ul&gt;
&lt;li&gt;ModuleRegistry::getConfig()&lt;ul&gt;
&lt;li&gt;RCTNativeModule::getMethods()&lt;ul&gt;
&lt;li&gt;[RCTModuleData methods]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œçœ‹ä¸€ä¸‹å…³é”®æ–¹æ³•JSCNativeModules::createModuleæ–¹æ³•&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;folly&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;Optional&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;JSCNativeModules&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;createModule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;std&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;string&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;JSContextRef&lt;/span&gt; &lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="nx"&gt;ReactMarker&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;logTaggedMarker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ReactMarker&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;NATIVE_MODULE_SETUP_START&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;name.c_str&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;m_genNativeModuleJS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;auto&lt;/span&gt; &lt;span class="bp"&gt;global&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;getGlobalObject&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;m_genNativeModuleJS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;global.&lt;/span&gt;&lt;span class="nb"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;__fbGenNativeModule&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="nx"&gt;m_genNativeModuleJS&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nx"&gt;makeProtected&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="nx"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;m_moduleRegistry&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nx"&gt;getConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;result.hasValue&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;nullptr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="nb"&gt;Value&lt;/span&gt; &lt;span class="n"&gt;moduleInfo&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;m_genNativeModuleJS&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nx"&gt;callAsFunction&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
    &lt;span class="nb"&gt;Value&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;fromDynamic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;result&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nx"&gt;config&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="nb"&gt;Value&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;makeNumber&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;result&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="nb"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="nx"&gt;CHECK&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;moduleInfo.isNull&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Module returned from genNativeModule is null&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="nx"&gt;folly&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;Optional&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;Object&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;moduleInfo.asObject&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;getProperty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;module&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;asObject&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

  &lt;span class="nx"&gt;ReactMarker&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;logTaggedMarker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;ReactMarker&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;NATIVE_MODULE_SETUP_STOP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;name.c_str&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™å¯ä»¥çœ‹åˆ°å–äº†JSä¸­globalå¯¹è±¡çš„__fbGenNativeModuleå±æ€§ï¼Œå­˜åˆ°äº†m_genNativeModuleJSã€‚è€Œ__fbGenNativeModuleå®šä¹‰åœ¨NativeModules.jsä¸­ï¼Œå®ƒå¯¹åº”çš„æ˜¯genModuleå‡½æ•°ã€‚OCä¸­å°†è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒæŠŠOCçš„Moduleç”ŸæˆJSçš„moduleï¼Œè¿”å›ç»™JSï¼Œå¹¶æœ€ç»ˆOCä¸­ä¹Ÿä¼šæŠŠå®ƒå­˜åœ¨m_objectsï¼ˆmapï¼‰ä¸­ã€‚genModuleå‡½æ•°éœ€è¦ä¸€ä¸ªconfigå‚æ•°ï¼Œè¿™ä¸ªconfigä¸»è¦æ˜¯ç”±m_moduleRegistry-&amp;gt;getConfigç”Ÿæˆã€‚è¿™ä¸ªconfigé‡Œåªè¦åŒ…å«äº†åƒJSæš´éœ²çš„constants,methodsã€‚æˆ‘ä»¬è¿™é‡Œä¸»è¦çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆæ”¶é›†åˆ°æˆ‘ä»¬è¦æš´éœ²çš„æ–¹æ³•çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®ä»£ç åœ¨[RCTModuleData methods]ä¸­&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSArray&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTBridgeMethod&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;methods&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;_methods&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;NSMutableArray&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTBridgeMethod&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;moduleMethods&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSMutableArray&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;_moduleClass&lt;/span&gt; &lt;span class="n"&gt;instancesRespondToSelector&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="k"&gt;@selector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;methodsToExport&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;moduleMethods&lt;/span&gt; &lt;span class="n"&gt;addObjectsFromArray&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;instance&lt;/span&gt; &lt;span class="n"&gt;methodsToExport&lt;/span&gt;&lt;span class="p"&gt;]];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;methodCount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;Class&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_moduleClass&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cls&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSObject&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;cls&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSProxy&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;Method&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;methods&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;class_copyMethodList&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;object_getClass&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;methodCount&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="c1"&gt;//æ³¨æ„è¿™é‡Œå–çš„æ˜¯ç±»æ–¹æ³•&lt;/span&gt;

      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;methodCount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Method&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="kt"&gt;SEL&lt;/span&gt; &lt;span class="n"&gt;selector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;method_getName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="c1"&gt;//ä¸»è¦è¿™ä¸ªå‰ç¼€__rct_export__&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;NSStringFromSelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;selector&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;hasPrefix&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;__rct_export__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="kt"&gt;IMP&lt;/span&gt; &lt;span class="n"&gt;imp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;method_getImplementation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
          &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;exportedMethod&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;RCTMethodInfo&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;SEL&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="n"&gt;imp&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;_moduleClass&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;selector&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
          &lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTBridgeMethod&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;moduleMethod&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;RCTModuleMethod&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithExportedMethod&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;exportedMethod&lt;/span&gt;
                                                                                 &lt;span class="nl"&gt;moduleClass:&lt;/span&gt;&lt;span class="n"&gt;_moduleClass&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
          &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;moduleMethods&lt;/span&gt; &lt;span class="n"&gt;addObject&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;moduleMethod&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;

      &lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;methods&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;cls&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;class_getSuperclass&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cls&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;_methods&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;moduleMethods&lt;/span&gt; &lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;_methods&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œä»£ç ä¸»è¦æ„æ€æ˜¯å…ˆæ‹¿åˆ°æ‰€æœ‰ç±»æ–¹æ³•ï¼ˆæˆ–è€…å«é™æ€æ–¹æ³•ï¼‰ï¼Œç„¶åå¦‚æœæ˜¯ç‰¹å®šå‰ç¼€__rct_export__çš„æ–¹æ³•ï¼Œåˆ™æ˜¯æˆ‘ä»¬ä¹‹å‰é€šè¿‡å®RCT_REMAP_METHODï¼ˆRCT_EXPORT_METHODï¼‰å®šä¹‰ç”Ÿæˆçš„æ–¹æ³•ï¼Œç„¶åè·å–è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œå¹¶æ‰§è¡Œå¾—åˆ°ç»“æœRCTMethodInfoã€‚è¿™ä¸ªRCTMethodInfoé‡ŒåŒ…å«çœŸæ­£æˆ‘ä»¬è¦æš´éœ²ç»™JSè°ƒç”¨çš„æ–¹æ³•ï¼Œç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªRCTModuleMethodã€‚å°†æ‰€æœ‰éœ€è¦çš„æ–¹æ³•éƒ½ç”Ÿæˆä¹‹åï¼Œå°±ä¿å­˜äº†èµ·æ¥ã€‚è¿™é‡ŒRNçš„å¼€å‘è€…å¾ˆå·§å¦™ç”Ÿæˆäº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å°†çœŸæ­£éœ€è¦çš„æ–¹æ³•ä¿¡æ¯ç”Ÿæˆã€‚ä¸ºä»€ä¹ˆå°†è¿™ä¸ªç‰¹å®šæ–¹æ³•å®šä¹‰ä¸ºé™æ€æ–¹æ³•å‘¢ï¼Œæˆ‘ä¼°è®¡æ˜¯é™æ€æ–¹æ³•æ¯”è¾ƒå°‘ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™æ¯”æŸ¥æ‰¾å®ä¾‹æ–¹æ³•å¿«ã€‚&lt;/p&gt;
&lt;p&gt;å½“é…ç½®ä¿¡æ¯éƒ½ç”Ÿæˆå¥½ä¹‹åï¼Œè°ƒç”¨genModuleæ–¹æ³•ç”ŸæˆJSçš„moduleã€‚è¿™é‡Œè¦ç‰¹åˆ«è¯´æ˜ä¸€ä¸‹genModuleè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨åˆ°genMethodå‡½æ•°ï¼ŒgenMethodå‡½æ•°ä¼šç”Ÿæˆå¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œè€Œç”Ÿæˆå‡½æ•°é‡Œï¼Œå°†moduleçš„æ–¹æ³•è°ƒç”¨æ”¾åˆ°äº†MessageQueueçš„é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…OCè¢«è°ƒç”¨ã€‚è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹åœ¨JSçš„ä»£ç ä¸­ï¼Œä¼ é€’çš„å‚æ•°éƒ½æ˜¯moduleId, methodIdæ˜¯æ•°å­—ç±»å‹ï¼ŒmoduleIdå®ƒä»£è¡¨çš„æ˜¯è¯¥moduleåœ¨OCçš„modulesæ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼ŒmethodIdä»£è¡¨çš„æ˜¯è¯¥methodåœ¨methodNamesæ•°ç»„é‡Œçš„ä¸‹æ ‡ã€‚ç›¸å…³å‡½æ•°éƒ½æ˜¯æŒºå¤æ‚çš„ï¼Œç†è§£èµ·æ¥æœ‰ç‚¹ç»•ï¼Œå¯ä»¥å¤šçœ‹çœ‹genModuleå’ŒgenMethodå‡½æ•°çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå‡è®¾æˆ‘ä»¬å·²æœ‰ä¸€ä¸ªæ³¨å†Œæ¨¡å—AudioRecordå’Œæš´éœ²æ–¹æ³•record.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="n"&gt;let&lt;/span&gt; &lt;span class="n"&gt;AudioRecorder&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NativeModules&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AudioRecorder&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
 &lt;span class="n"&gt;AudioRecorder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;record&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ä¸¤å¥ä»£ç ä¼šå‘ç”Ÿï¼šå»OCä¸­getNativeModule(AudioRecorder)å¯»æ‰¾JSçš„moduleï¼Œç°åœ¨m_objectså­—æ®µä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™ä¼šèµ°åˆ›å»ºæµç¨‹ï¼Œå…ˆåˆ°m_moduleRegistryç”Ÿæˆæ”¹ç±»çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åå°†é…ç½®ä¿¡æ¯ä¼ ç»™JSçš„genModuleå‡½æ•°ç”Ÿæˆåä¸ºAudioRecorderçš„jså¯¹è±¡ï¼Œè°ƒç”¨genMethodç”Ÿæˆåä¸ºrecordå¯¹åº”çš„JSå‡½æ•°ï¼Œèµ‹å€¼ç»™AudioRecorderå¯¹è±¡,å¹¶ä¿å­˜åœ¨OCçš„ä¸€ä¸ªå­—å…¸ï¼ˆm_objectsï¼‰ä¸­å’Œè¿”å›è¿™ä¸ªJSå¯¹è±¡ã€‚åœ¨JSä¸­æ‹¿åˆ°è¿™ä¸ªå¯¹è±¡åè°ƒç”¨recordå‡½æ•°ï¼Œåœ¨recordå‡½æ•°é‡Œï¼ŒBatchedBridge.enqueueNativeCallå°±ä¼šè¢«è°ƒç”¨ï¼ŒmoduleIDï¼ŒmoduleIDç­‰ä¿¡æ¯å°±ä¼ å…¥MessageQueueã€‚æˆ‘ä»¬çœ‹çœ‹enqueueNativeCallå‡½æ•°å®ç°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;enqueueNativeCall&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="nx"&gt;moduleID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;number&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;methodID&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;number&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="k"&gt;params&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kt"&gt;Array&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;any&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;onFail&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nx"&gt;Function&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nx"&gt;onSucc&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt;&lt;span class="nx"&gt;Function&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;onFail&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="nx"&gt;onSucc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;......&lt;/span&gt;
      &lt;span class="c1"&gt;// Encode callIDs into pairs of callback identifiers by shifting left and using the rightmost bit&lt;/span&gt;
      &lt;span class="c1"&gt;// to indicate fail (0) or success (1)&lt;/span&gt;
      &lt;span class="nx"&gt;onFail&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;params&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;this._callID&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="nx"&gt;onSucc&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;params&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;push&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nx"&gt;this._callID&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="nx"&gt;this._successCallbacks&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;this._callID&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; = onSucc;
      this._failureCallbacks&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;this._callID&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; = onFail;
    }

    ......
    this._callID++;

    this._queue&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;MODULE_IDS&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;.push(moduleID);
    this._queue&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;METHOD_IDS&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;.push(methodID);

    ......
    this._queue&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="k"&gt;PARAMS&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;.push(params);

    const now = new Date().getTime();
    if (
      global.nativeFlushQueueImmediate &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
      (now - this._lastFlush &amp;gt;= MIN_TIME_BETWEEN_FLUSHES_MS ||
        this._inCall === 0)
    ) {
      var queue = this._queue;
      this._queue = &lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;, &lt;span class="cp"&gt;[]&lt;/span&gt;, &lt;span class="cp"&gt;[]&lt;/span&gt;, this._callID];
      this._lastFlush = now;
      global.nativeFlushQueueImmediate(queue);
    }
    Systrace.counterEvent(&amp;#39;pending_js_to_native_queue&amp;#39;, this._queue&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;.length);
    //
    if (this.__spy) {
      this.__spyNativeCall(moduleID, methodID, params, {
        failCbId: onFail ? params&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="k"&gt;params&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; : -1,
        successCbId: onSucc ? params&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="k"&gt;params&lt;/span&gt;&lt;span class="bp"&gt;.&lt;/span&gt;&lt;span class="nb"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; : -1,
      });
    }
  }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;JSæ‰€æœ‰å¼‚æ­¥è°ƒç”¨OCæ–¹æ³•éƒ½ä¼šèµ°åˆ°è¿™é‡Œï¼ˆåŒæ­¥æ–¹æ³•èµ°çš„æ˜¯callSyncHookï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…ˆæŠŠå›è°ƒå­˜åˆ°æ•°ç»„é‡Œï¼Œç„¶åæŠŠè¦è°ƒç”¨çš„æ¨¡å—ç±»ï¼Œæ–¹æ³•å’Œå‚æ•°éƒ½å­˜åœ¨äº†queueä¸­ï¼Œå½“ç„¶è¿˜æœ‰å›è°ƒå‡½æ•°å¯¹åº”çš„_callIDï¼ˆè¿™é‡Œå¾ˆå·§å¦™åœ°ç”¨ä¸€ä¸ªæ•°å­—ä»£è¡¨äº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼‰ã€‚è¿™é‡Œè¿˜æœ‰ä¸ªåˆ¤æ–­ï¼Œå¦‚æœè·ç¦»ä¸Šæ¬¡OCä¸»åŠ¨æ¥è°ƒç”¨JSè¶…è¿‡äº†5æ¯«ç§’ï¼Œå°±ä¼šä¸»åŠ¨è°ƒç”¨OCä¸€å¼€å§‹å°±æ³¨å…¥çš„nativeFlushQueueImmediateå›è°ƒå‡½æ•°ã€‚åœ¨nativeFlushQueueImmediateè¿™ä¸ªæ–¹æ³•é‡Œï¼ŒOCä¼šæŠŠä¼ è¿‡æ¥çš„queueé‡Œé¢éœ€è¦è°ƒç”¨çš„æ–¹æ³•å…¨éƒ¨è°ƒç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSCExecutor::nativeFlushQueueImmediate&lt;/li&gt;
&lt;li&gt;JSCExecutor::flushQueueImmediate&lt;/li&gt;
&lt;li&gt;JsToNativeBridge::callNativeModules&lt;ul&gt;
&lt;li&gt;ModuleRegistry::callNativeMethod&lt;ul&gt;
&lt;li&gt;RCTNativeModule::invoke&lt;ul&gt;
&lt;li&gt;RCTNativeModule::invokeInne&lt;ul&gt;
&lt;li&gt;[RCTModuleMethod invokeWithBridge:module:arguments:]&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œè°ƒç”¨é“¾æ¡ä¹Ÿå¾ˆé•¿ï¼Œæˆ‘ä»¬çŸ¥é“æœ€ç»ˆä¼šåˆ°RCTModuleMethodç±»ä¸­ï¼Œå®ƒæ˜¯é€šè¿‡NSInvocationæ¥å®ç°åŠ¨æ€è°ƒç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰è¶…è¿‡5æ¯«ç§’çš„è¯ï¼ŒJSä¸ä¸»åŠ¨è°ƒç”¨OCçš„moduleï¼Œé‚£OCåˆ°åº•ä»€ä¹ˆæ—¶å€™ä¼šä¸»åŠ¨è°ƒç”¨JSï¼Ÿ&lt;/p&gt;
&lt;h3&gt;OCè°ƒç”¨JS&lt;/h3&gt;
&lt;p&gt;åœ¨RCTCxxBridgeä¸­çš„startæ–¹æ³•é‡Œï¼Œæ‰§è¡Œå®ŒJSæºç åï¼Œä¼šå‘é€ä¸€ä¸ªé€šçŸ¥ã€‚åœ¨RCTRootViewä¸­ç›‘å¬äº†è¿™ä¸ªé€šçŸ¥ï¼Œæ‰§è¡Œäº†runApplicationæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œä¸»åŠ¨è°ƒç”¨äº†JSã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;runApplication:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RCTBridge&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;bridge&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;moduleName&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_moduleName&lt;/span&gt; &lt;span class="o"&gt;?:&lt;/span&gt; &lt;span class="s"&gt;@&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;NSDictionary&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;appParameters&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s"&gt;@&amp;quot;rootTag&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;_contentView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reactTag&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s"&gt;@&amp;quot;initialProps&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;_appProperties&lt;/span&gt; &lt;span class="o"&gt;?:&lt;/span&gt; &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="p"&gt;{},&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;

  &lt;span class="n"&gt;RCTLogInfo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;Running application %@ (%@)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;moduleName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;appParameters&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;bridge&lt;/span&gt; &lt;span class="n"&gt;enqueueJSCall&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;AppRegistry&amp;quot;&lt;/span&gt;
                 &lt;span class="nl"&gt;method:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;runApplication&amp;quot;&lt;/span&gt;
                   &lt;span class="nl"&gt;args:&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;moduleName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;appParameters&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
             &lt;span class="nl"&gt;completion:&lt;/span&gt;&lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œæ˜¯JSçš„ç¨‹åºå…¥å£ï¼Œä¹‹åä¼šåˆ›å»ºè§†å›¾ä¹‹ç±»çš„ã€‚æˆ‘ä»¬çœ‹çœ‹OCæ˜¯æ€ä¹ˆè°ƒç”¨JSçš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;RCTBridge:: enqueueJSCall()&lt;/li&gt;
&lt;li&gt;RCTCxxBridge:: enqueueJSCall()&lt;ul&gt;
&lt;li&gt;Instance::callJSFunction()&lt;ul&gt;
&lt;li&gt;NativeToJsBridge::callFunction()&lt;ul&gt;
&lt;li&gt;JSCExecutor::callFunction()&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹çœ‹JSCExecutoræ˜¯å¦‚ä½•è°ƒç”¨JSçš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;JSCExecutor&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;callFunction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;moduleId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;methodId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;folly&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;dynamic&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;arguments&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;SystraceSection&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;JSCExecutor::callFunction&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="c1"&gt;// This weird pattern is because Value is not default constructible.&lt;/span&gt;
  &lt;span class="c1"&gt;// The lambda is inlined, so there&amp;#39;s no overhead.&lt;/span&gt;
  &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;JSContextLock&lt;/span&gt; &lt;span class="n"&gt;lock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;m_callFunctionReturnResultAndFlushedQueueJS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;bindBridge&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;m_callFunctionReturnFlushedQueueJS&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;callAsFunction&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
        &lt;span class="n"&gt;Value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;createExpectingAscii&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;moduleId&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
        &lt;span class="n"&gt;Value&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;createExpectingAscii&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;methodId&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt;
        &lt;span class="n"&gt;Value&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;fromDynamic&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m_context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arguments&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
      &lt;span class="p"&gt;});&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;(...)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;throw_with_nested&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;runtime_error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error calling &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;moduleId&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;methodId&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}();&lt;/span&gt;
  &lt;span class="n"&gt;callNativeModules&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;move&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;OCè°ƒç”¨JSæ˜¯é€šè¿‡bindBridge()é‡Œå–åˆ°çš„JSå®šä¹‰çš„å‡½æ•°callFunctionReturnFlushedQueueæ¥è°ƒç”¨çš„ã€‚è¿™å‡½æ•°éœ€è¦çš„å‚æ•°å°±æ˜¯moduleName,methodNameå’Œmethodè°ƒç”¨éœ€è¦çš„å‚æ•°ã€‚JSä¸­æ‹¿åˆ°è¿™äº›å‚æ•°ä¼šåœ¨_lazyCallableModulesé‡Œæ‰¾åˆ°å¯¹åº”çš„JS moduleæ¥è¿›è¡Œå¯¹åº”çš„æ–¹æ³•è°ƒç”¨ã€‚_lazyCallableModuleså­˜çš„æ˜¯éœ€è¦ç»™OCè°ƒç”¨çš„JS moduleã€‚AppRegistryæ¨¡å—åœ¨æ‰§è¡ŒJSæºç çš„ä¹‹åå°±æ³¨å†Œåˆ°è¿™ä¸ª_lazyCallableModulesé‡Œã€‚callFunctionReturnFlushedQueueå‡½æ•°ä¸ä½†æ‰§è¡Œäº†OCè¦è°ƒç”¨çš„JSæ¨¡å—ï¼Œæœ€åè¿˜æŠŠqueueä¼ å›åˆ°äº†OCï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªqueueé‡Œå­˜çš„éƒ½æ˜¯JSè¦è°ƒç”¨çš„OCæ¨¡å—ä¿¡æ¯ï¼Œæ‰€ä»¥OCæ‹¿åˆ°è¿™ä¸ªqueueä¹‹åå°±æ‰§è¡Œäº†è°ƒç”¨callNativeModulesã€‚RNçš„æœºåˆ¶å°±æ˜¯OCåœ¨è°ƒç”¨JSæ¨¡å—ä¹‹åï¼Œä¹ŸæŠŠJSä¸­å¾…è°ƒç”¨çš„OCæ¨¡å—ä¸€èµ·æ‰§è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä»€ä¹ˆæƒ…å†µï¼ŒOCä¼šä¸»åŠ¨è°ƒç”¨JSå‘¢ã€‚é€šè¿‡åœ¨xcodeä¸­æœç´¢enqueueJSCallæ–¹æ³•çš„è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ°ä¸»è¦æ˜¯åœ¨RCTEventDispatcherï¼ŒRCTEventEmitterå’ŒRCTTimingã€‚ä»æ­¤å¯ä»¥çŸ¥é“ä¸»è¦æ˜¯è·Ÿäº‹ä»¶è§¦å‘å’Œå®šæ—¶å™¨ç›¸å…³ã€‚è¿™ä¹Ÿå¾ˆåˆç†ï¼Œå› ä¸ºåœ¨ç§»åŠ¨æ“ä½œç³»ç»Ÿæ˜¯åŸºäºäº‹ä»¶è§¦å‘æœºåˆ¶ã€‚å¤§éƒ¨åˆ†äº‹ä»¶éƒ½æ˜¯ç©ºè½¬ï¼Œåªæœ‰äº‹ä»¶è§¦å‘åæ‰ä¼šè¿›è¡Œç›¸å…³è°ƒç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¤§è‡´æ€»ç»“ä¸€ä¸‹RN APPçš„å¯åŠ¨æµç¨‹ï¼šåœ¨APPDelegateçš„å¯åŠ¨æ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ªRCTRootViewï¼Œç„¶ååœ¨RCTRootViewä¸­åˆ›å»ºäº†RCTBridgeï¼ŒRCTBridgeä¸­åˆ›å»ºäº†RCTCxxBridgeï¼Œå¹¶è°ƒç”¨äº†startæ–¹æ³•ã€‚åœ¨startæ–¹æ³•é‡Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªä¸“é—¨ç”¨æ¥è¿è¡ŒJSä»£ç çš„Threadï¼Œè¿™ä¸ªThreadç»‘å®šåˆ°äº†ä¸€ä¸ªrunloopã€‚ç„¶åå°†æ‰€æœ‰æ³¨å†Œçš„moduleç”ŸæˆRCTModuleDataï¼Œå¹¶æ ¹æ®éœ€è¦è°ƒç”¨ä»–ä»¬çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ç„¶åä¸€è¾¹åœ¨JSçº¿ç¨‹ä¸­æ‰§è¡ŒIntanceçš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä¸€è¾¹å¼‚æ­¥è¿›è¡Œjsæºç çš„åŠ è½½ã€‚åœ¨Intanceçš„åˆå§‹åŒ–æ–¹æ³•é‡Œæœ€ç»ˆä¼šåˆ›å»ºä¸€ä¸ªJSCExecutor,åœ¨JSCExecutoré‡Œåˆ›å»ºäº†ä¸€ä¸ªå…¨å±€çš„js context,å¹¶æ³¨å…¥äº†å‡ ä¸ªOCçš„å›è°ƒæ–¹æ³•ï¼ŒåŒ…æ‹¬NativeModuleProxyå¯¹åº”çš„getNativeModuleæ–¹æ³•ã€‚å½“JSæºç éƒ½åŠ è½½å®Œï¼Œå…¶ä»–åˆå§‹åŒ–ä¹Ÿå®Œæˆï¼Œå°±ä¼šåœ¨JS contextä¸­æ‰§è¡ŒJSæºç ï¼Œå»ºç«‹JSç¯å¢ƒå’ŒJSçš„åˆå§‹åŒ–ã€‚è¿™æ—¶å€™ä¸€äº›è¢«JSè°ƒç”¨åˆ°çš„OC moduleå°±ä¼šåˆå§‹åŒ–ï¼Œä¼šè°ƒç”¨ä¹‹å‰æ³¨å…¥JSä¸­çš„getNativeModuleæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæŠŠmoduleçš„é…ç½®ä¿¡æ¯ç”Ÿæˆï¼Œå¹¶äº¤ç»™JSçš„genModuleæ–¹æ³•æ¥ç”ŸæˆJSçš„å¯¹è±¡ï¼Œå¹¶åœ¨OCä¸­å­˜èµ·æ¥ã€‚JSæºç æ‰§è¡Œå®Œä¹‹åï¼ŒOCä¼šè°ƒç”¨flushæ–¹æ³•ï¼Œç„¶åä¼šè°ƒç”¨åˆ°bindBridgeæ–¹æ³•ï¼Œå°†MessageQueue.jsä¸­å®šä¹‰çš„å‡ ä¸ªæ–¹æ³•å­˜åœ¨OCä¸­ä»¥å¤‡è°ƒç”¨ã€‚ç„¶åå°†MessageQueueå­˜å‚¨çš„OCå¾…è°ƒç”¨æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚åˆ°è¿™é‡Œï¼ŒJSæºç æ‰§è¡Œå®Œæ¯•ï¼Œä¼šå‘ä¸€ä¸ªé€šçŸ¥ï¼ŒRCTRootViewä¼šæ”¶åˆ°è¿™ä¸ªé€šçŸ¥ï¼Œç„¶åå°±è°ƒç”¨äº†jsä¸­çš„AppRegistryçš„runApplicationæ–¹æ³•ï¼Œåˆ°è¿™é‡Œï¼ŒJSçš„å…¥å£å°±è¢«è°ƒç”¨ï¼Œç•Œé¢å°±ä¼šæ¸²æŸ“å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“èµ·æ¥ï¼ŒJSå’ŒOCçš„ç›¸äº’é€šä¿¡æ˜¯ç»è¿‡JavaScriptCoreæœºåˆ¶æ¥è¿›è¡Œçš„ã€‚OCå°†è¦æš´éœ²ç»™JSçš„æ”¾ç±»å’Œæ–¹æ³•ç”Ÿæˆé…ç½®ä¿¡æ¯ï¼Œç„¶åäº¤ä¸ªJSç”ŸæˆJSå¯¹è±¡å’Œæ–¹æ³•ï¼Œä½†æ˜¯JSä¸­å¯¹åº”çš„å¯¹è±¡å’Œæ–¹æ³•å¹¶ä¸æ˜¯ç›´æ¥è°ƒç”¨OCçš„æ–¹æ³•ï¼Œè€Œä¸”å…ˆæ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œäº¤ç”±OCæ¥è°ƒç”¨ã€‚OCæ‹¿åˆ°å¯¹åº”çš„é…ç½®ä¿¡æ¯ç„¶åè¿›è¡ŒåŠ¨æ€è°ƒç”¨ã€‚OCè°ƒç”¨JSçš„å¯¹è±¡å’Œæ–¹æ³•ï¼Œæ˜¯ç›´æ¥è°ƒç”¨ï¼ŒJSä¸­å­˜å‚¨äº†è¦æš´éœ²çš„å¯¹è±¡module.&lt;/p&gt;
&lt;h2&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://www.cocoachina.com/ios/20170720/19958.html"&gt;æ·±å…¥æµ…å‡º JavaScriptCore&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://cloud.tencent.com/developer/article/1004875"&gt;JavaScriptCoreå…¨é¢è§£æ ï¼ˆä¸Šç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://cloud.tencent.com/developer/article/1004876"&gt;JavaScriptCoreå…¨é¢è§£æ ï¼ˆä¸‹ç¯‡ï¼‰
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.jianshu.com/p/931367388a8d?utm_campaign=maleskine&amp;amp;utm_content=note&amp;amp;utm_medium=seo_notes&amp;amp;utm_source=recommendation"&gt;ç†è§£React-Native(0.46) ä¸­nativeå’Œjsé€šä¿¡åŸç†(iOS)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.cnbang.net/tech/2698/"&gt;React Nativeé€šä¿¡æœºåˆ¶è¯¦è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="ReactNative æºç  iOS"></category></entry><entry><title>react-nativeæ¡†æ¶æºç å­¦ä¹ (iOS)(ä¸Š)</title><link href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosshang.html" rel="alternate"></link><updated>2018-02-26T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-02-26:react-nativekuang-jia-yuan-ma-xue-xi-iosshang.html</id><summary type="html">&lt;h1&gt;react-nativeæ¡†æ¶æºç å­¦ä¹ (iOS)(ä¸Š)&lt;/h1&gt;
&lt;h2&gt;æ³¨æ„äº‹é¡¹&lt;/h2&gt;
&lt;p&gt;è¦å­¦ä¹ react-nativeæ¡†æ¶iOSç«¯æºç ï¼Œå…ˆè¦äº†è§£ä¸€ä¸‹æ³¨æ„çš„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ã€ é¦–å…ˆéœ€è¦éå¸¸ç†Ÿæ‚‰objective-cè¯­è¨€ï¼Œå¯¹OCçš„runtimeæœºåˆ¶æ›´æ˜¯å¿…ä¸å¯å°‘ã€‚æºç é‡Œå¤§é‡ç”¨äº†runtimeç‰¹æ€§ã€‚ç„¶åä¹Ÿè¦ç†Ÿæ‚‰c++è¯­è¨€ã€‚é™¤äº†OCè¯­è¨€ï¼Œé‡Œé¢è¿˜æœ‰å¤§é‡çš„c++ä»£ç ï¼ŒOCä¸c++æ··åˆä»£ç ã€‚å¯¹c++çš„templateå’Œstdåº“ä¹Ÿè¦ç†Ÿæ‚‰ã€‚æˆ‘æœ¬äººå¯¹c++ä¹Ÿç†Ÿæ‚‰ï¼Œä½†æ˜¯ä¸å¤Ÿæ·±å…¥ï¼Œå¯¹ä¸€äº›é«˜çº§ç‰¹æ€§ä¸æ˜¯å¾ˆäº†è§£ï¼Œæ‰€ä»¥ç›¸å…³çš„ä¸€äº›ä»£ç çœ‹èµ·æ¥å¾ˆåƒåŠ›ã€‚æœ€åå½“ç„¶ä¹Ÿç†Ÿæ‚‰jsè¯­è¨€ã€‚æˆ‘å¤§å­¦æ—¶å­¦ä¹ è¿‡jsï¼Œä½†æ˜¯é‚£è¿˜çœŸæ˜¯è¿œå¤æ—¶ä»£äº†ï¼Œjsè¿‘å¹´æ¥å‘å±•å¾ˆå¿«ï¼Œæˆ‘å¯¹å¾ˆå¤šæ–°ç‰¹æ€§ä¸æ˜¯å¾ˆäº†è§£ï¼Œè¿™ä¹Ÿå¯¹æˆ‘å­¦ä¹ æœ‰ä¸€å®šçš„é˜»ç¢ã€‚å¦å¤–è¿˜æœ‰è¦æ¯”è¾ƒäº†è§£iOSçš„JavaScriptCoreæ¡†æ¶ï¼Œè¿™ä¸ªæ˜¯jsä¸OCé€šä¿¡çš„åŸºç¡€ã€‚&lt;/li&gt;
&lt;li&gt;äºŒã€ è¦å¯¹react-nativeçš„ç‰ˆæœ¬äº†è§£ã€‚æŸ¥çœ‹ç½‘ä¸Šçš„èµ„æ–™æ—¶ä¹Ÿè¦æ³¨æ„ä»–ä»¬æ‰€è¯´çš„RNç‰ˆæœ¬ã€‚ç°åœ¨ç½‘ä¸Šå¾ˆå¤šç ”ç©¶èµ„æ–™ï¼Œä»–ä»¬æ‰€ç ”ç©¶çš„ç‰ˆæœ¬éƒ½æ˜¯å¾ˆæ—©ä¹‹å‰çš„ç‰ˆæœ¬ã€‚æ–°çš„ç‰ˆæœ¬è·Ÿè€ç‰ˆæœ¬æœ‰å¾ˆå¤šç»†èŠ‚å’Œæµç¨‹æ”¹å˜äº†ã€‚å¦‚æœä½ å‘ç°æœ‰äº›æ–‡ç« é‡Œè¯´çš„ä¸œè¥¿è·Ÿä½ æ‰€çœ‹åˆ°çš„å¯¹ä¸ä¸Šï¼Œé‚£å°±æ˜¯ç ”ç©¶çš„ç‰ˆæœ¬ä¸ä¸€è‡´ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‰ã€å¦‚æœçœ‹ä¸æ‡‚ï¼Œå¤šçœ‹çœ‹åˆ«äººçš„åˆ†ææ–‡ç« ã€‚å¦‚æœå¯¹æŸç§è¯­è¨€æˆ–è€…æ¡†æ¶åº“ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®å…ˆæŠŠè¯¥è¡¥çš„è¡¥ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘æ‰€ç ”ç©¶çš„RNç‰ˆæœ¬æ˜¯&lt;strong&gt;0.49&lt;/strong&gt;ï¼Œè€Œæœ€æ–°ç‰ˆæ˜¯0.51. æœ€åæˆ‘è‡ªå·±ä¹Ÿä¸æ•¢è¯´è‡ªå·±å®Œå…¨çœ‹æ‡‚äº†æºç ï¼Œè‡ªå·±çš„ç†è§£å®Œå…¨æ­£ç¡®ï¼Œæ‰€ä»¥ä¸‹é¢æ‰€è¯´çš„ä¹Ÿä¸ä¸€å®šå®Œå…¨æ­£ç¡®ã€‚&lt;/p&gt;
&lt;h2&gt;æ ¸å¿ƒåŸç†&lt;/h2&gt;
&lt;p&gt;ä¸»è¦åŸç†åˆ©ç”¨JavaScriptCoreçš„é€šä¿¡æœºåˆ¶æ¥åšä¸€äº›åŸºæœ¬çš„jså’ŒOCç›¸äº’è°ƒç”¨ï¼Œä½†æ˜¯RNè¿˜åšäº†æ›´å¤šäº‹æƒ…ã€‚
OCä¼šå°†æ‰€æœ‰è¦æš´éœ²ç»™JSè°ƒç”¨çš„æ–¹æ³•å’Œå±æ€§ç”Ÿæˆä¸€ä¸ªé…ç½®è¡¨ï¼Œç„¶åä¼šå°†è¿™ä¸ªé…ç½®è¡¨å†™å…¥åˆ°JSç«¯ã€‚RNä¸­OCå’ŒJSéƒ½åˆ†åˆ«æœ‰ä¸€ä¸ªæ¡¥æ¥å¯¹è±¡ï¼Œä»–ä»¬ç›¸äº’è°ƒç”¨éƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ¡¥æ¥å¯¹è±¡è¿›è¡Œã€‚
RNå¤§è‡´ç»“æ„å›¾ï¼š
&lt;img alt="RNç»“æ„å›¾" src="https://upload-images.jianshu.io/upload_images/1271831-7ba4d20000946a6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" /&gt;&lt;/p&gt;
&lt;h2&gt;å¯åŠ¨æµç¨‹&lt;/h2&gt;
&lt;p&gt;ç ”ç©¶æºç å½“ç„¶å¾—ä»å¯åŠ¨æµç¨‹å¼€å§‹ã€‚æ–°å»ºä¸€ä¸ªRNå·¥ç¨‹ï¼Œå®ƒçš„AppDelagteå…¥å£æ–¹æ³•ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;BOOL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;application:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;UIApplication&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;application&lt;/span&gt; &lt;span class="nf"&gt;didFinishLaunchingWithOptions:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSDictionary&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;launchOptions&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="n"&gt;NSURL&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;jsCodeLocation&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;jsCodeLocation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;RCTBundleURLProvider&lt;/span&gt; &lt;span class="n"&gt;sharedSettings&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;jsBundleURLForBundleRoot&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;index.ios&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;fallbackResource&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="n"&gt;RCTRootView&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;rootView&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;RCTRootView&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithBundleURL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;jsCodeLocation&lt;/span&gt;
                                                      &lt;span class="nl"&gt;moduleName:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;VprScene&amp;quot;&lt;/span&gt;
                                               &lt;span class="nl"&gt;initialProperties:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;
                                                   &lt;span class="nl"&gt;launchOptions:&lt;/span&gt;&lt;span class="n"&gt;launchOptions&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;rootView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;backgroundColor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;UIColor&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithRed&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt; &lt;span class="n"&gt;green&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt; &lt;span class="n"&gt;blue&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt; &lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;UIWindow&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithFrame&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;UIScreen&lt;/span&gt; &lt;span class="n"&gt;mainScreen&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;bounds&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;UIViewController&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;rootViewController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;UIViewController&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;rootViewController&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;view&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rootView&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rootViewController&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rootViewController&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="n"&gt;makeKeyAndVisible&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;YES&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€ä¸»è¦çš„ä»£ç å°±æ˜¯åˆå§‹åŒ–äº†RCTRootViewï¼Œåˆ«çš„éƒ½æ˜¯æ™®é€šçš„ä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´ç”±RCTRootViewæ¥è¿›è¡Œæ•´ä¸ªRNçš„åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;RCTRootViewçš„initWithBundleURL:æ–¹æ³•ä¸­åˆå§‹åŒ–äº†ä¸€ä¸ªRCTBridgeï¼ŒRCTBridgeçš„åˆå§‹åŒ–æ–¹æ³•é‡Œè°ƒç”¨äº†ä¸€ä¸ªsetUpæ–¹æ³•ï¼Œåœ¨è¿™é‡Œåˆåˆå§‹åŒ–äº†ä¸€ä¸ªRCTCxxBridgeï¼ˆæ—©æœŸç‰ˆæœ¬æ˜¯RCTBatchedBridgeï¼Œå®ƒä»¬éƒ½æ˜¯RCTBridgeçš„å­ç±»ï¼‰å¯¹è±¡ï¼Œç„¶åè°ƒç”¨äº†å®ƒçš„startæ–¹æ³•ã€‚è¿™æ˜¯ä¸ªå…³é”®æ–¹æ³•ã€‚RCTBridgeä¸RCTCxxBridgeç±»ä¼¼ä¸€ä¸ªä»£ç†æ¨¡å¼ï¼ŒRCTBridgeæä¾›äº†å¯¹å¤–æ¥å£ï¼Œå®é™…ä¸Šè°ƒç”¨äº†RCTCxxBridgeçš„å®ç°ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯æ–¹ä¾¿æ›¿æ¢å†…éƒ¨å®ç°ï¼Œè€Œæ¥å£ä¿æŒç¨³å®šã€‚&lt;/p&gt;
&lt;p&gt;RCTCxxBridgeçš„startæ–¹æ³•(ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œåˆ æ‰äº†ä¸å¿…è¦çš„ä»£ç ):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;start&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="p"&gt;......&lt;/span&gt;

  &lt;span class="c1"&gt;// Set up the JS thread early&lt;/span&gt;
  &lt;span class="n"&gt;_jsThread&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSThread&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithTarget&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                                      &lt;span class="nl"&gt;selector:&lt;/span&gt;&lt;span class="k"&gt;@selector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;runRunLoop&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                                        &lt;span class="nl"&gt;object:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;_jsThread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RCTJSThreadName&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;_jsThread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;qualityOfService&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NSOperationQualityOfServiceUserInteractive&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;_jsThread&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="kt"&gt;dispatch_group_t&lt;/span&gt; &lt;span class="n"&gt;prepareBridge&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;dispatch_group_create&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;registerExtraModules&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="c1"&gt;// Initialize all native modules that cannot be loaded lazily&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;_initModules&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;RCTGetModuleClasses&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;withDispatchGroup&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;prepareBridge&lt;/span&gt; &lt;span class="n"&gt;lazilyDiscovered&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;NO&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="c1"&gt;// This doesn&amp;#39;t really do anything.  The real work happens in initializeBridge.&lt;/span&gt;
  &lt;span class="n"&gt;_reactInstance&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Instance&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;__weak&lt;/span&gt; &lt;span class="n"&gt;RCTCxxBridge&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;weakSelf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// Prepare executor factory (shared_ptr for copy into block)&lt;/span&gt;
  &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;shared_ptr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;JSExecutorFactory&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;executorFactory&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;.....&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;executorFactory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="kt"&gt;BOOL&lt;/span&gt; &lt;span class="n"&gt;useCustomJSC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
        &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delegate&lt;/span&gt; &lt;span class="n"&gt;respondsToSelector&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="k"&gt;@selector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shouldBridgeUseCustomJSC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delegate&lt;/span&gt; &lt;span class="n"&gt;shouldBridgeUseCustomJSC&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
      &lt;span class="c1"&gt;// The arg is a cache dir.  It&amp;#39;s not used with standard JSC.&lt;/span&gt;
      &lt;span class="n"&gt;executorFactory&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JSCExecutorFactory&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;folly&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;dynamic&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;object&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;OwnerIdentity&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ReactNative&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UseCustomJSC&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;bool&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;useCustomJSC&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;......&lt;/span&gt;
  &lt;span class="c1"&gt;// Dispatch the instance initialization as soon as the initial module metadata has&lt;/span&gt;
  &lt;span class="c1"&gt;// been collected (see initModules)&lt;/span&gt;
  &lt;span class="n"&gt;dispatch_group_enter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prepareBridge&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;ensureOnJavaScriptThread&lt;/span&gt;&lt;span class="o"&gt;:^&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;weakSelf&lt;/span&gt; &lt;span class="n"&gt;_initializeBridge&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;executorFactory&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;dispatch_group_leave&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prepareBridge&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}];&lt;/span&gt;

    &lt;span class="p"&gt;.....&lt;/span&gt;
    &lt;span class="c1"&gt;// Load the source asynchronously, then store it for later execution.&lt;/span&gt;
    &lt;span class="n"&gt;dispatch_group_enter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prepareBridge&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;__block&lt;/span&gt; &lt;span class="n"&gt;NSData&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;sourceCode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;loadSource&lt;/span&gt;&lt;span class="o"&gt;:^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSError&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;RCTSource&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;weakSelf&lt;/span&gt; &lt;span class="n"&gt;handleError&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;

      &lt;span class="n"&gt;sourceCode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;dispatch_group_leave&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prepareBridge&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;onProgress&lt;/span&gt;&lt;span class="o"&gt;:^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RCTLoadingProgress&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;progressData&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;.....&lt;/span&gt;
    &lt;span class="p"&gt;}];&lt;/span&gt;

    &lt;span class="c1"&gt;// Wait for both the modules and source code to have finished loading&lt;/span&gt;
    &lt;span class="n"&gt;dispatch_group_notify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prepareBridge&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dispatch_get_global_queue&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QOS_CLASS_USER_INTERACTIVE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;RCTCxxBridge&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;strongSelf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;weakSelf&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sourceCode&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;strongSelf&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loading&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;strongSelf&lt;/span&gt; &lt;span class="n"&gt;executeSourceCode&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;sourceCode&lt;/span&gt; &lt;span class="n"&gt;sync&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;NO&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;.....&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªæ–¹æ³•å¾ˆå¤æ‚ï¼Œä¸»è¦åšäº†ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ›å»ºå¹¶å¼€å¯äº†ä¸€ä¸ªjsçº¿ç¨‹ï¼Œç»‘å®šäº†ä¸€ä¸ªrunloopï¼Œä¹Ÿå³æ˜¯è¯´jsä»£ç éƒ½æ˜¯åœ¨è¿™ä¸ªçº¿ç¨‹é‡Œæ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;å‡†å¤‡æ‰€æœ‰è¦æš´éœ²ç»™jsè°ƒç”¨çš„OCç±»,ModuleClassï¼Œä¸ºæ¯ä¸ªç±»å°è£…åˆ°RCTModuleDataé‡Œï¼Œå¦‚æœéœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ˜¯åˆ›å»ºæŸäº›ç±»çš„å®ä¾‹ï¼Œåˆ™ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­å»åˆ›å»ºå®ƒã€‚è¿™äº›RCTModuleDataä¼šåˆ†åˆ«å­˜å‚¨åœ¨ä¸€ä¸ªå­—å…¸å’Œæ•°ç»„é‡Œã€‚&lt;/li&gt;
&lt;li&gt;å‡†å¤‡JSè¿è¡Œç¯å¢ƒï¼Œåˆå§‹åŒ–JSExecutorFactoryï¼Œå¹¶åœ¨jsçº¿ç¨‹ä¸­åˆ›å»ºjsçš„RCTMessageThreadï¼Œåˆå§‹åŒ–_reactInstanceï¼ˆInstanceï¼Œè¿™æ˜¯nativeè·ŸjsBridgeçš„æ¡¥æ¢ï¼‰å’ŒJSCExecutor&lt;/li&gt;
&lt;li&gt;åŠ è½½JSæºç &lt;/li&gt;
&lt;li&gt;ä»¥ä¸Šå…¨åšå®Œä¹‹åï¼Œæ‰§è¡ŒJSæºç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ³¨æ„ä»£ç é‡Œç”¨åˆ°ä¸€ä¸ªå«prepareBridgeçš„dispatch_group_tï¼Œdispatch_group_tä¸»è¦æ˜¯ç”¨æ¥åšå¼‚æ­¥ä»£ç åŒæ­¥ç”¨çš„ã€‚æœ‰å¾ˆå¤šåˆå§‹åŒ–å·¥ä½œæ˜¯å¼‚æ­¥å¹¶è¡Œçš„ï¼Œè¿è¡Œæºç è‚¯å®šæ˜¯åœ¨æ‰€æœ‰å‡†å¤‡å·¥ä½œä¹‹åæ‰èƒ½è¿›è¡Œï¼Œæ‰€ä»¥ç”¨äº†dispatch_group_tå’Œdispatch_group_notifyæœºåˆ¶æ¥ç¡®ä¿è¿™ä¸ªé—®é¢˜ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€æ­¥å»åˆ†æä¸Šé¢è¯´çš„å‡ ä¸ªäº‹æƒ…ã€‚&lt;/p&gt;
&lt;h3&gt;JSçº¿ç¨‹&lt;/h3&gt;
&lt;p&gt;å¤§å®¶å¸¸è¯´JavaScriptæ˜¯å•çº¿ç¨‹çš„ï¼Œåœ¨RNé‡Œå°±æ˜¯è¿™æ ·çš„ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶åç»‘å®šåˆ°äº†ä¸€ä¸ªrunloopï¼Œç„¶åJSå°±æ˜¯åœ¨è¿™ä¸ªçº¿ç¨‹é‡Œæ‰§è¡Œã€‚åœ¨RCTCxxBridgeé‡Œä¸“é—¨æœ‰ä¸ªæ–¹æ³•å°†blockæ”¾åœ¨JSçº¿ç¨‹ä¸­æ‰§è¡Œ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Ensure block is run on the JS thread. If we&amp;#39;re already on the JS thread, the block will execute synchronously.&lt;/span&gt;
&lt;span class="cm"&gt; * If we&amp;#39;re not on the JS thread, the block is dispatched to that thread. Any errors encountered while executing&lt;/span&gt;
&lt;span class="cm"&gt; * the block will go through handleError:&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;ensureOnJavaScriptThread:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;dispatch_block_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;block&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;RCTAssert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_jsThread&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;@&amp;quot;This method must not be called before the JS thread is created&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// This does not use _jsMessageThread because it may be called early before the runloop reference is captured&lt;/span&gt;
  &lt;span class="c1"&gt;// and _jsMessageThread is valid. _jsMessageThread also doesn&amp;#39;t allow us to shortcut the dispatch if we&amp;#39;re&lt;/span&gt;
  &lt;span class="c1"&gt;// already on the correct thread.&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;NSThread&lt;/span&gt; &lt;span class="n"&gt;currentThread&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;_jsThread&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;_tryAndHandleError&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;performSelector&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="k"&gt;@selector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_tryAndHandleError&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="nl"&gt;onThread:&lt;/span&gt;&lt;span class="n"&gt;_jsThread&lt;/span&gt;
          &lt;span class="nl"&gt;withObject:&lt;/span&gt;&lt;span class="n"&gt;block&lt;/span&gt;
          &lt;span class="nl"&gt;waitUntilDone:&lt;/span&gt;&lt;span class="nb"&gt;NO&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é™¤æ­¤ä¹‹å¤–è¿˜æœ‰ä¸ªRCTMessageThreadç±»ï¼Œä¸“é—¨ç”¨äºåœ¨jsçº¿ç¨‹ä¸­æ‰§è¡Œc++çš„åŒæ­¥å’Œå¼‚æ­¥å‡½æ•°ã€‚&lt;/p&gt;
&lt;h3&gt;è·å–ModuleClass&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;[self _initModules:RCTGetModuleClasses() withDispatchGroup:prepareBridge lazilyDiscovered:NO]&lt;/strong&gt;æ–¹æ³•å°±æ˜¯è·å–æ‰€æœ‰è¦æš´éœ²çš„ç±»å¹¶åšç›¸åº”åˆå§‹åŒ–ã€‚é¦–å…ˆäº†è§£ä¸€ä¸‹è¦å°†ä¸€ä¸ªç±»æš´éœ²ç»™JSéœ€è¦æ€ä¹ˆåšã€‚æˆ‘ä»¬å·²RNé‡Œå·²ç»æœ‰çš„ä¸€ä¸ªç²˜è´´æ¿ç±»æ¥çœ‹ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;//RCTClipboard.h&lt;/span&gt;
&lt;span class="k"&gt;@interface&lt;/span&gt; &lt;span class="nc"&gt;RCTClipboard&lt;/span&gt; : &lt;span class="nc"&gt;NSObject&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTBridgeModule&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;@end&lt;/span&gt;

&lt;span class="c1"&gt;//RCTClipboard.m&lt;/span&gt;
&lt;span class="k"&gt;@implementation&lt;/span&gt; &lt;span class="nc"&gt;RCTClipboard&lt;/span&gt;

&lt;span class="n"&gt;RCT_EXPORT_MODULE&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;dispatch_queue_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;methodQueue&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="n"&gt;RCT_EXPORT_METHOD&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;setString&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;UIPasteboard&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;clipboard&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;UIPasteboard&lt;/span&gt; &lt;span class="n"&gt;generalPasteboard&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;clipboard&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;@&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;RCT_EXPORT_METHOD&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getString&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RCTPromiseResolveBlock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;resolve&lt;/span&gt;
                  &lt;span class="nl"&gt;rejecter:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;__unused&lt;/span&gt; &lt;span class="n"&gt;RCTPromiseRejectBlock&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;reject&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;UIPasteboard&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;clipboard&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;UIPasteboard&lt;/span&gt; &lt;span class="n"&gt;generalPasteboard&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;resolve&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;clipboard&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;@&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;@end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å…¶å®ä¸»è¦å…³é”®ç‚¹å°±æ˜¯ç±»éœ€è¦å®ç°åè®®RCTBridgeModuleï¼Œå¹¶åœ¨implementationé‡ŒåŠ RCT_EXPORT_MODULE()ã€‚åœ¨è¦æš´éœ²çš„æ–¹æ³•åœ¨å…¶å‰é¢åŠ å®RCT_EXPORT_METHODä¿®é¥°ã€‚æ³¨æ„è¿™é‡Œä¸æ”¯æŒæœ‰è¿”å›å€¼çš„æ–¹æ³•ï¼Œè¿˜æœ‰ä¹Ÿå¯ä»¥æš´éœ²ä¸€äº›å±æ€§çš„ï¼Œä½†æ˜¯è¿™é‡Œä¸å±•å¼€è¯´æ˜ã€‚&lt;/p&gt;
&lt;p&gt;RCTBridgeModuleåè®®å®šä¹‰äº†+ (NSString *)moduleNameè¿™ä¸ªå¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œè¿˜æœ‰å…¶ä»–å¯é€‰æ–¹æ³•å’Œå±æ€§ã€‚
çœ‹ä¸€ä¸‹RCT_EXPORT_MODULE()å®åˆ°åº•å¹²äº†ä»€ä¹ˆ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Place this macro in your class implementation to automatically register&lt;/span&gt;
&lt;span class="cm"&gt; * your module with the bridge when it loads. The optional js_name argument&lt;/span&gt;
&lt;span class="cm"&gt; * will be used as the JS module name. If omitted, the JS module name will&lt;/span&gt;
&lt;span class="cm"&gt; * match the Objective-C class name.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="n"&gt;define&lt;/span&gt; &lt;span class="no"&gt;RCT_EXPORT_MODULE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;js_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; \
&lt;span class="no"&gt;RCT_EXTERN&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="n"&gt;RCTRegisterModule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; \
&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;moduleName&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;@#&lt;/span&gt;&lt;span class="n"&gt;js_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; \
&lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;RCTRegisterModule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªå®é‡Œå®ç°moduleNameæ–¹æ³•ï¼Œå®šä¹‰äº†RCT_EXTERN void RCTRegisterModule(Class)ï¼Œè¿˜æœ‰å®ç°äº†loadæ–¹æ³•ï¼Œåœ¨loadæ–¹æ³•é‡Œè°ƒç”¨äº†RCTRegisterModuleæ–¹æ³•ã€‚RCTRegisterModuleå®ç°æ˜¯åœ¨RCTBridge.mé‡Œé¢ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;NSMutableArray&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;RCTModuleClasses&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;NSArray&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;RCTGetModuleClasses&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;RCTModuleClasses&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Register the given class as a bridge module. All modules must be registered&lt;/span&gt;
&lt;span class="cm"&gt; * prior to the first bridge initialization.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;RCTRegisterModule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;RCTRegisterModule&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Class&lt;/span&gt; &lt;span class="n"&gt;moduleClass&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;dispatch_once_t&lt;/span&gt; &lt;span class="n"&gt;onceToken&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;dispatch_once&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;onceToken&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;RCTModuleClasses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSMutableArray&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;

  &lt;span class="n"&gt;RCTAssert&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;moduleClass&lt;/span&gt; &lt;span class="n"&gt;conformsToProtocol&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;protocol&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RCTBridgeModule&lt;/span&gt;&lt;span class="p"&gt;)],&lt;/span&gt;
            &lt;span class="s"&gt;@&amp;quot;%@ does not conform to the RCTBridgeModule protocol&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;moduleClass&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// Register module&lt;/span&gt;
  &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;RCTModuleClasses&lt;/span&gt; &lt;span class="n"&gt;addObject&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;moduleClass&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å®é™…ä¸Šå°±æ˜¯è®²Classå¯¹è±¡åŠ å…¥åˆ°å…¨å±€å”¯ä¸€çš„ä¸€ä¸ªæ•°ç»„é‡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç³»ç»Ÿåœ¨åŠ è½½è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œå°±å°†è¿™ä¸ªç±»å¯¹è±¡åŠ å…¥åˆ°äº†ä¸€ä¸ªæ•°ç»„é‡Œï¼Œåé¢åªè¦ä»è¿™ä¸ªæ•°ç»„é‡Œå–æ‰€æœ‰è¦æš´éœ²ç»™JSçš„ç±»å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å†æ¥çœ‹çœ‹æ€ä¹ˆæš´éœ²æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#define RCT_EXPORT_METHOD(method) \&lt;/span&gt;
&lt;span class="cp"&gt;  RCT_REMAP_METHOD(, method)&lt;/span&gt;


&lt;span class="cp"&gt;#define RCT_REMAP_METHOD(js_name, method) \&lt;/span&gt;
&lt;span class="cp"&gt;  _RCT_EXTERN_REMAP_METHOD(js_name, method, NO) \&lt;/span&gt;
&lt;span class="cp"&gt;  - (void)method;&lt;/span&gt;


&lt;span class="cp"&gt;#define _RCT_EXTERN_REMAP_METHOD(js_name, method, is_blocking_synchronous_method) \&lt;/span&gt;
&lt;span class="cp"&gt;  + (const RCTMethodInfo *)RCT_CONCAT(__rct_export__, RCT_CONCAT(js_name, RCT_CONCAT(__LINE__, __COUNTER__))) { \&lt;/span&gt;
&lt;span class="cp"&gt;    static RCTMethodInfo config = {#js_name, #method, is_blocking_synchronous_method}; \&lt;/span&gt;
&lt;span class="cp"&gt;    return &amp;amp;config; \&lt;/span&gt;
&lt;span class="cp"&gt;  }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œçš„å®åµŒå¥—å¾—è®©äººçœ¼èŠ±ç¼­ä¹±ï¼Œåœ¨æ•´ä¸ªRNæºç ä¸­è¿ç”¨äº†å¤§é‡çš„å®ï¼Œè€Œä¸”å¤§å¤šæ˜¯é«˜çº§ç”¨æ³•ï¼Œè¿™ä¸ªç»™é˜…è¯»ç†è§£é€ æˆä¸€å®šçš„å›°éš¾ã€‚å¦‚æœçœ‹ä¸æ‡‚ï¼Œæœ€å¥½å…ˆæ‰¾ä¸“é—¨çš„è®²å®æ–‡ç« å…ˆçœ‹ä¸€çœ‹ã€‚è¿™é‡Œä¸»è¦ä½œç”¨å°±æ˜¯å£°æ˜äº†è¿”å›å€¼ä¸ºvoidçš„methodæ–¹æ³•ï¼Œå¹¶ä¸”ç”Ÿæˆäº†ä¸€ä¸ªä»¥__rct_export__å¼€å¤´ï¼ŒåŒ…å«äº†ç±»åï¼Œè¡Œå·ç­‰ä¿¡æ¯çš„ä¸ºç±»åï¼Œè¿”å›å€¼ä¸ºRCTMethodInfoçš„ç±»æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯ä¸ºåé¢ç”Ÿæˆé…ç½®ä¿¡æ¯ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[self _initModules:RCTGetModuleClasses() withDispatchGroup:prepareBridge lazilyDiscovered:NO]&lt;/strong&gt;ä¸»è¦ä»£ç æ˜¯&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;_initModules:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSArray&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTBridgeModule&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;modules&lt;/span&gt;
   &lt;span class="nl"&gt;withDispatchGroup:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;dispatch_group_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;dispatchGroup&lt;/span&gt;
    &lt;span class="nl"&gt;lazilyDiscovered:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;BOOL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;lazilyDiscovered&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;....&lt;/span&gt;
&lt;span class="c1"&gt;// Set up moduleData for automatically-exported modules&lt;/span&gt;
  &lt;span class="n"&gt;NSArray&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTModuleData&lt;/span&gt; &lt;span class="o"&gt;*&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;moduleDataById&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;registerModulesForClasses&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;modules&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="p"&gt;......&lt;/span&gt;
   &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;_prepareModulesWithDispatchGroup&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;dispatchGroup&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;registerModulesForClasses:æ–¹æ³•ä¸»è¦æ˜¯éå†RCTModuleClassesï¼Œä¸ºæ¯ä¸ªclassç”Ÿæˆä¸€ä¸ªRCTModuleDataå¹¶åœ¨ä¸€ä¸ªå­—å…¸å’Œæ•°ç»„é‡Œå­˜èµ·æ¥åé¢ä½¿ç”¨ã€‚_prepareModulesWithDispatchGroup:å°±æ˜¯æ£€æŸ¥æ¯ä¸ªRCTModuleDataæ˜¯å¦éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºå®ä¾‹ï¼Œæ˜¯çš„è¯ï¼Œå°±åˆ›å»ºå®ä¾‹å­˜èµ·æ¥ã€‚&lt;/p&gt;
&lt;h3&gt;å‡†å¤‡JSç›¸å…³ç±»ï¼ˆJSCExecutorï¼‰&lt;/h3&gt;
&lt;p&gt;åœ¨startæ–¹æ³•é‡Œé¢ï¼Œå®ƒå®ä¾‹åŒ–äº†Instance(_reactInstance)å’Œä¸€ä¸ªJSExecutorFactoryï¼Œç„¶ååœ¨jsçº¿ç¨‹ä¸­è°ƒç”¨äº†_initializeBridge:æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;_initializeBridge:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;shared_ptr&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;JSExecutorFactory&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;executorFactory&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;.....&lt;/span&gt;
&lt;span class="n"&gt;__weak&lt;/span&gt; &lt;span class="n"&gt;RCTCxxBridge&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;weakSelf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;_jsMessageThread&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;make_shared&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTMessageThread&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;NSRunLoop&lt;/span&gt; &lt;span class="n"&gt;currentRunLoop&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSError&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;weakSelf&lt;/span&gt; &lt;span class="n"&gt;handleError&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;});&lt;/span&gt;
  &lt;span class="p"&gt;.....&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_reactInstance&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// This is async, but any calls into JS are blocked by the m_syncReady CV in Instance&lt;/span&gt;
    &lt;span class="n"&gt;_reactInstance&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;initializeBridge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;make_unique&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RCTInstanceCallback&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
      &lt;span class="n"&gt;executorFactory&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="n"&gt;_jsMessageThread&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;_buildModuleRegistry&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
      &lt;span class="p"&gt;......&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥çœ‹åˆ°è¿™é‡Œä¸»è¦åˆ›å»ºäº†ä¸€ä¸ªRCTMessageThreadï¼Œå¹¶å°†ç›¸å…³å±æ€§ä¼ ç»™_reactInstanceè¿›è¡Œåˆå§‹åŒ–ã€‚_reactInstanceçš„åˆå§‹åŒ–éœ€è¦ä¸€ä¸ªModuleRegistryï¼ŒModuleRegistryé‡Œé¢æœ‰åŒ…å«äº†æ‰€æœ‰çš„RCTNativeModuleï¼Œè€Œæ¯ä¸ªRCTNativeModuleé‡ŒåˆåŒ…å«äº†ä¸€ä¸ªRCTModuleData.å³å°†å‰é¢ç”Ÿæˆçš„æ‰€æœ‰RCTModuleDataä¼ ç»™äº†_reactInstanceã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Instanceçš„åˆå§‹åŒ–æ–¹æ³•initializeBridgeé‡Œï¼Œæœ€ä¸»è¦æ˜¯åˆ›å»ºäº†NativeToJsBridgeçš„å®ä¾‹ã€‚è€ŒNativeToJsBridgeçš„æ„é€ å‡½æ•°é‡Œï¼Œä¸»è¦æ˜¯è°ƒç”¨äº†executorFactoryæ¥åˆ›å»ºä¸€ä¸ªJSCExecutorã€‚JSCExecutoræ˜¯ä¸€ä¸ªç›¸å½“é‡è¦çš„ç±»ï¼Œèµ°åˆ°è¿™é‡Œå¾ˆä¸å®¹æ˜“ï¼Œè·³è½¬äº†å¾ˆå¤šå±‚ã€‚è¿™ä¸€å—ä¹Ÿæ˜¯æœ€ä¸å¥½ç†è§£çš„ï¼ŒåŸºæœ¬ä¸Šc++å’ŒOCäº’è°ƒï¼Œè€Œä¸”ä½¿ç”¨äº†å¾ˆå¤šc++11çš„ç‰¹æ€§ï¼Œæˆ‘å¾ˆä¸ç†Ÿæ‚‰ã€‚ç„¶åä¹Ÿä½¿ç”¨äº†follyåº“ï¼Œè¿™ä¸ªåº“ä¹Ÿä¸æ˜¯å¾ˆå¥½ç†è§£ã€‚æ‰€ä»¥æˆ‘å‡†å¤‡æŠŠå‰©ä¸‹çš„ä¸œè¥¿æ”¾åˆ°ä¸‹ä¸€ç¯‡æ–‡ç« æ¥è®²ã€‚&lt;/p&gt;
&lt;h2&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://www.cocoachina.com/ios/20170720/19958.html"&gt;æ·±å…¥æµ…å‡º JavaScriptCore&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://cloud.tencent.com/developer/article/1004875"&gt;JavaScriptCoreå…¨é¢è§£æ ï¼ˆä¸Šç¯‡ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://cloud.tencent.com/developer/article/1004876"&gt;JavaScriptCoreå…¨é¢è§£æ ï¼ˆä¸‹ç¯‡ï¼‰
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.jianshu.com/p/931367388a8d?utm_campaign=maleskine&amp;amp;utm_content=note&amp;amp;utm_medium=seo_notes&amp;amp;utm_source=recommendation"&gt;ç†è§£React-Native(0.46) ä¸­nativeå’Œjsé€šä¿¡åŸç†(iOS)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.cnbang.net/tech/2698/"&gt;React Nativeé€šä¿¡æœºåˆ¶è¯¦è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="ReactNative æºç  iOS"></category></entry><entry><title>æµ…è°ˆReactNativeæŠ€æœ¯çš„ä¼˜åŠ£</title><link href="http://szuwest.github.io/qian-tan-reactnativeji-zhu-de-you-lie.html" rel="alternate"></link><updated>2018-02-06T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-02-06:qian-tan-reactnativeji-zhu-de-you-lie.html</id><summary type="html">&lt;h1&gt;æµ…è°ˆReactNativeæŠ€æœ¯çš„ä¼˜åŠ£&lt;/h1&gt;
&lt;p&gt;å»å¹´å¤§æ¦‚10æœˆä»½å¼€å§‹ä½¿ç”¨ReactNativeæŠ€æœ¯æ¥å¼€å‘é¡¹ç›®ï¼Œç°åœ¨ä¹Ÿå·²ç»æœ‰å‡ ä¸ªæœˆæ—¶é—´äº†ã€‚ä¹Ÿä¸Šçº¿äº†ä¸‰ä¸ªReactNativeå¼€å‘çš„é¡¹ç›®ã€‚ä¸€ç›´æƒ³è°ˆè°ˆä½¿ç”¨ReactNativeçš„å¼€å‘æ„Ÿå—ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨react-nativeç¡®å®å¯ä»¥æé«˜ç•Œé¢å¼€å‘æ•ˆç‡ï¼Œå› ä¸ºä¸¤ä¸ªå¹³å°ï¼Œåªéœ€è¦ç¼–å†™ä¸€å¥—ä»£ç ã€‚react-nativeåœ¨è¿™æ–¹é¢åšäº†å¾ˆå¤šå·¥ä½œï¼Œè®©ç•Œé¢å¼€å‘è·Ÿwebå¼€å‘åŸºæœ¬ä¸€è‡´ã€‚webå¼€å‘äººå‘˜å¯ä»¥å¾ˆæ–¹ä¾¿çš„å†™react-nativeç•Œé¢ï¼Œä¸éœ€è¦äºŒæ¬¡å­¦ä¹ ã€‚è€Œä¸”åœ¨react-nativeé‡Œé¢çš„åƒç´ æ˜¯é€»è¾‘åƒç´ ï¼Œå¯ä»¥æ¯”è¾ƒå¥½çš„é€‚é…ç•Œé¢ã€‚&lt;/li&gt;
&lt;li&gt;react-nativeç•Œé¢å¼€å‘æ–¹å¼è·Ÿwebå¼€å‘æ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼Œè¿™è·Ÿnativeå¼€å‘ç•Œé¢æœ‰å¾ˆå¤§ä¸åŒã€‚react-nativeç•Œé¢å¼€å‘æ˜¯å£°æ˜å¼å¼€å‘ï¼Œè€Œä¸”æ˜¯ç»§æ‰¿äºreactæ¡†æ¶ï¼Œè€Œçº¯nativeå¼€å‘äººå‘˜æ ¹æœ¬ä¸äº†è§£è¿™ä¸ªæ¡†æ¶ï¼Œéœ€è¦å­¦ä¹ æˆæœ¬ã€‚å®ƒçš„Viewå¸ƒå±€å±‚æ¬¡è·ŸåŸç”Ÿçš„å¸ƒå±€å±‚æ¬¡ä¸å¤ªä¸€æ ·ã€‚æˆ‘è‡ªå·±ä¹Ÿæäº†æŒºä¹…æ‰ææ¸…æ¥šã€‚&lt;/li&gt;
&lt;li&gt;react-nativeå¾ˆé€‚åˆé‚£äº›çº¯httpæ•°æ®äº¤äº’çš„åº”ç”¨ã€‚å³é‚£äº›æ•°æ®å’Œå†…å®¹éƒ½æ˜¯ä»æœåŠ¡å™¨æ‹‰å–ï¼ŒAPPåªæ˜¯å±•ç¤ºå’Œæ¶ˆè´¹çš„åœºæ™¯åº”ç”¨ã€‚è¿™æ ·ä¸ä½†ç•Œé¢å¯ä»¥react-nativeæ¥å†™ï¼ŒHTTPè¯·æ±‚ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨ReactNativeæ¥å†™ã€‚&lt;/li&gt;
&lt;li&gt;react-nativeä¸é€‚åˆç”¨äºé‚£äº›éœ€è¦å¤æ‚çš„é€šä¿¡æ–¹å¼çš„åº”ç”¨ï¼Œä¹Ÿä¸é€‚ç”¨äºé‚£äº›å¼ºå¤šåª’ä½“èµ„æºçš„åº”ç”¨ï¼Œä¾‹å¦‚è¦åšç›¸å†Œï¼ŒéŸ³è§†é¢‘æ’­æ”¾çš„åº”ç”¨ã€‚å› ä¸ºreact-nativeä¸Šä¸æ–¹ä¾¿ç”¨socketçš„é‚£äº›é€šä¿¡æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å°è£…ã€‚ç„¶åå†…å­˜é—®é¢˜ä¹Ÿä¸å¤ªå¥½æŠŠæ§ã€‚å¯¹äºç›¸å†Œï¼Œå¤šåª’ä½“æ’­æ”¾ï¼ŒReactNativeä¹Ÿæ²¡æœ‰å°è£…ã€‚&lt;/li&gt;
&lt;li&gt;react-nativeå¯¹äºwebè½¬nativeå¼€å‘æ˜¯å¾ˆæœ‰ç”¨ï¼Œå¯¹çº¯nativeå¼€å‘è½¬react-nativeå¼€å‘ä¸æ˜¯å¾ˆå‹å¥½ï¼Œä¸»è¦æ˜¯æ€ç»´æ–¹å¼å‘ç”Ÿæ¯”è¾ƒå¤§çš„å˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;react-nativeä¸èƒ½éš”ç»nativeå¼€å‘çš„çŸ¥è¯†ã€‚è¦åšAPPå¼€å‘ï¼Œæœ€ç»ˆè¿˜æ˜¯éœ€æ‡‚å¾—nativeå¼€å‘çš„ä¸€äº›çŸ¥è¯†ï¼Œreact-nativeå¹¶ä¸èƒ½å®Œå…¨å±è”½è¿™äº›ã€‚ä¸€ä¸ªçº¯webå¼€å‘æƒ³è¦è½¬react-nativeå¼€å‘ï¼Œè¿˜æ˜¯éœ€è¦æ‡‚nativeå¼€å‘çš„äººæ¥å¸®åŠ©å’ŒæŒ‡å¯¼ï¼Œæˆ–è€…è‡ªå·±éœ€è¦å…ˆå­¦ä¹ nativeç›¸å…³çŸ¥è¯†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;react-nativeå¼€å‘ä¼šæ˜¯æœªæ¥çš„æ–¹å‘å—&lt;/h1&gt;
&lt;p&gt;è¿™ä¸ªæˆ‘ä¹Ÿä¸æ•¢è¯´ã€‚ä¸è¿‡ReactNativeå¼€å‘æœªæ¥ä¼šä»£æ›¿æ‰ä¸€äº›nativeå‘ï¼Œè¿™æ˜¯ä¸€å®šä¼šå‘ç”Ÿçš„ï¼Œæˆ–è®¸å·²ç»æ­£åœ¨å‘ç”Ÿã€‚ä¸è¿‡react-nativeç‰ˆæœ¬æœ€æ–°çš„è¿˜æ˜¯0.51ç‰ˆæœ¬ï¼Œè¿˜æœ‰å¾ˆå¤šéœ€è¦å®Œå–„çš„åœ°æ–¹ã€‚ä¸è¿‡æƒ³åœ¨JavaScriptè²Œä¼¼æœ‰å¤§ä¸€ç»Ÿçš„è¶‹åŠ¿ã€‚æˆ‘ä»¬å…¬å¸ç°åœ¨éƒ½æ˜¯ç”¨jsæ¥åšPCå®¢æˆ·ç«¯çš„ã€‚æœ‰ä¸ªå«electronçš„æ¡†æ¶è²Œä¼¼å¾ˆæµè¡Œï¼Œå¯ä»¥å¼€å‘windowså’ŒMacçš„æ¡Œé¢APPã€‚åªè¦ä¼šjsï¼Œå°±å¯ä»¥å†™Macå®¢æˆ·ç«¯ï¼Œè¿™è¿˜çœŸæ˜¯æˆ‘ä¹‹å‰æ²¡æœ‰æƒ³è¿‡çš„ã€‚è¿™æ ·çœ‹ï¼ŒçœŸçš„è²Œä¼¼jsæœ‰å¤§ä¸€ç»Ÿçš„è¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œä¸ç®¡æ€æ ·è¿‡ï¼Œæˆ‘è§‰å¾—react-nativeè¿˜æ˜¯æ— æ³•å®Œå…¨æ›¿ä»£åŸç”Ÿå¼€å‘ï¼Œæ¯•ç«Ÿæœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦ç”¨åŸç”Ÿæ¥å¼€å‘ã€‚è€Œä¸”ï¼Œreact-nativeæœ¬èº«å°±æ˜¯åŸºäºåŸç”Ÿçš„ï¼Œå®ƒåªæ˜¯åšäº†ä¸€å±‚è½¬åŒ–è€Œå·²ã€‚æ‰€ä»¥åŸç”Ÿçš„å¼€å‘èƒ½åŠ›ä¸ä¼šå‰Šå¼±ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="react-native"></category></entry><entry><title>Code Reviewæ–¹æ¡ˆ</title><link href="http://szuwest.github.io/code-reviewfang-an.html" rel="alternate"></link><updated>2018-01-10T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-01-10:code-reviewfang-an.html</id><summary type="html">&lt;h1&gt;Code Reviewæ–¹æ¡ˆ&lt;/h1&gt;
&lt;h2&gt;å®šä¹‰&lt;/h2&gt;
&lt;p&gt;Code Reviewä»£ç è¯„å®¡æ˜¯æŒ‡åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å¯¹æºä»£ç è¿›è¡Œç³»ç»Ÿæ€§æ£€æŸ¥çš„è¿‡ç¨‹ã€‚é€šå¸¸çš„ç›®çš„æ˜¯æŸ¥æ‰¾å„ç§ç¼ºé™·ï¼ŒåŒ…æ‹¬ä»£ç ç¼ºé™·ã€åŠŸèƒ½å®ç°é—®é¢˜ã€ç¼–ç åˆç†æ€§ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼›ä¿è¯è½¯ä»¶æ€»ä½“è´¨é‡å’Œæé«˜å¼€å‘è€…è‡ªèº«æ°´å¹³&lt;/p&gt;
&lt;h2&gt;code review çš„å¥½å¤„&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;æé«˜ä»£ç è´¨é‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;åŠæ—©å‘ç°æ½œåœ¨ç¼ºé™·ï¼Œé™ä½ä¿®æ”¹/å¼¥è¡¥ç¼ºé™·çš„æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;ä¿ƒè¿›å›¢é˜Ÿå†…éƒ¨çŸ¥è¯†å…±äº«ï¼Œæé«˜å›¢é˜Ÿæ•´ä½“æ°´å¹³ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;è¯„å®¡è¿‡ç¨‹å¯¹äºè¯„å®¡äººå‘˜æ¥è¯´ï¼Œä¹Ÿæ˜¯ä¸€ç§æ€è·¯é‡æ„çš„è¿‡ç¨‹ã€‚å¸®åŠ©æ›´å¤šçš„äººç†è§£ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;æ˜¯ä¸€ä¸ªä¼ é€’çŸ¥è¯†çš„æ‰‹æ®µï¼Œå¯ä»¥è®©å…¶å®ƒå¹¶ä¸ç†Ÿæ‚‰ä»£ç çš„äººçŸ¥é“ä½œè€…çš„æ„å›¾å’Œæƒ³æ³•ï¼Œä»è€Œå¯ä»¥åœ¨ä»¥åè½»æ¾ç»´æŠ¤ä»£ç ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;é¼“åŠ±ç¨‹åºå‘˜ä»¬ç›¸äº’å­¦ä¹ å¯¹æ–¹çš„é•¿å¤„å’Œä¼˜ç‚¹ã€‚ &lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;
&lt;li&gt;å¯ä»¥è¢«ç”¨æ¥ç¡®è®¤è‡ªå·±çš„è®¾è®¡å’Œå®ç°æ˜¯ä¸€ä¸ªæ¸…æ¥šå’Œç®€å•çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;code reviewå½¢å¼&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬code reviewæœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯ä»£ç è¯„å®¡ä¼šè®®ï¼Œæˆ‘ç§°ä¹‹ä¸ºCode Review Meetingï¼Œå°±æ˜¯å°†å›¢é˜Ÿæˆå‘˜éƒ½ç»„ç»‡èµ·æ¥å¼€ä¼šï¼Œè®©ä»£ç Ownerä¸Šå»è®²è‡ªå·±ä»£ç çš„å®ç°å’Œæ€è·¯ï¼Œå…¶å®ƒäººå‘è¡¨æ„è§å’Œè¿›è¡Œè®¨è®ºï¼Œä¹Ÿæœ‰æŠŠè¿™ç§å«åšteam reviewã€‚å¦å¤–ä¸€ç§æ˜¯ä¸€å¯¹ä¸€è¯„å®¡ï¼Œæˆ‘ç§°ä¹‹ä¸ºSingle Reviewï¼Œå°±æ˜¯é¡¹ç›®owneræäº¤ä»£ç ä¹‹åï¼Œè®©revieweråœ¨ç©ºé—²çš„æ—¶å€™å¸®å¿™è¯„å®¡ä»£ç ï¼Œå¹¶ä¸”å†™å‡ºæ‰¹æ³¨ï¼Œowneræ”¶åˆ°æ‰¹æ³¨åï¼Œè¿›è¡Œä¿®æ”¹æˆ–è€…å›å¤ã€‚ä½†æ³¨æ„è¿™é‡Œçš„reviewerå¹¶ä¸æ˜¯åªæœ‰æŠ€æœ¯ä¸»ç®¡æˆ–æ¶æ„å¸ˆä¹‹ç±»çš„æ‰èƒ½åšï¼Œä»£ç è´¨é‡ç›‘ç®¡ä»…ä»…é æ¶æ„å¸ˆæ˜¯ä¸å¤Ÿçš„ï¼Œéœ€è¦æ‰€æœ‰ç»éªŒä¸°å¯Œæˆ–æœ‰ä¸“é•¿çš„åŒå­¦å‚ä¸å…¶ä¸­ã€‚ä¹Ÿæœ‰äººå°†è¿™ä¸ªå½¢å¼å«peer reviewã€‚
ç°åœ¨å¤§éƒ¨åˆ†å…¬å¸éƒ½ä½¿ç”¨ä¸ºSingle Reviewå½¢å¼ï¼Œæˆ–è€…ä¸¤è€…æ··åˆä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;code review å·¥å…·&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬è¿™é‡Œåªä»‹ç»single reviewå½¢å¼çš„å·¥å…·ã€‚ç°åœ¨æœ‰æ¯”è¾ƒå—å¥½è¯„code reviewå·¥å…·æœ‰Facebookçš„Phabricatorï¼ŒGoogleçš„Gerritï¼Œä»–ä»¬éƒ½æ˜¯å¼€æºçš„.å¦å¤–å¾®è½¯ä¹Ÿæœ‰ä»–çš„code reviewå·¥å…·TFS(Team Foundation Server),æ®è¯´ä¹ŸæŒºå¥½ç”¨ï¼Œä¸è¿‡æ˜¯æ”¶è´¹çš„ã€‚ä¸è¿‡ç°åœ¨å¤§å®¶ç”¨å¾—æœ€å¤šçš„code reviewæ–¹å¼æ˜¯åŸºäºPull Requestå·¥ä½œæµæ–¹æ³•ï¼Œç»“åˆgitlabæˆ–è€…githubæ¥ä½¿ç”¨ã€‚ç°åœ¨Gitæ˜¯æœ€æµè¡Œçš„ä»£ç ç®¡ç†å·¥å…·ï¼Œç»“åˆgitlabçš„pull requestï¼Œå¾ˆå®¹æ˜“å®ç°code reviewã€‚&lt;/p&gt;
&lt;h2&gt;Code Reviewæµç¨‹&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œä»‹ç»ä¸€ä¸‹åŸºäºgitflow+gitlabæ¥åšcode reviewçš„æµç¨‹ã€‚è¦åœ¨gitlabé‡Œåšå¥½code reviewéœ€è¦æœ‰ä¸ªå‰æï¼Œå°±æ˜¯åšå¥½æƒé™ç®¡ç†ã€‚æ¯ä¸ªæˆå‘˜åœ¨é¡¹ç›®é‡Œéƒ½æœ‰å¯¹åº”çš„è§’è‰²ï¼Œä¾‹å¦‚ownerï¼Œmasterï¼Œdeveloperç­‰ã€‚ç„¶åé¡¹ç›®ä»£ç é‡Œè®¾ç½®å—ä¿æŠ¤åˆ†æ”¯ï¼Œmasterä¸€å®šæ˜¯å—ä¿æŠ¤çš„åˆ†æ”¯ï¼Œè¿˜å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®å…¶ä»–åˆ†æ”¯ä¸ºå—ä¿æŠ¤åˆ†æ”¯ã€‚developeræƒé™çš„æˆå‘˜æ˜¯ä¸èƒ½å‘masteræˆ–è€…å…¶ä»–å—ä¿æŠ¤åˆ†æ”¯pushä»£ç çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰€ä»¥ç»“åˆcode reviewï¼Œå¼€å‘ä¸­çš„æ•´ä¸ªæµç¨‹å°±æ˜¯ï¼šå»ºç«‹featureåˆ†æ”¯--&amp;gt;ç¼–å†™ä»£ç --&amp;gt;pushåˆ†æ”¯ä»£ç --&amp;gt;gitlabä¸Šå‘èµ·ä¸€ä¸ªåˆå¹¶è¯·æ±‚ï¼ˆpull requestï¼‰--&amp;gt;å®¡æ ¸äººå‘˜å®¡æ ¸ä»£ç ï¼Œå¦‚æœ‰éœ€è¦ï¼Œæå‡ºä¿®æ”¹æ„è§--&amp;gt;å¼€å‘äººå‘˜ä¿®æ”¹ä»£ç --&amp;gt;å®¡æ ¸äººå‘˜å®¡æ ¸é€šè¿‡ï¼Œåˆå¹¶ä»£ç ï¼Œåˆ é™¤åˆ†æ”¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ä»‹ç»ä¸€ä¸‹è¯¦ç»†çš„æµç¨‹ï¼Œå’Œå¯¹åº”çš„gitæ“ä½œå‘½ä»¤ï¼š&lt;/p&gt;
&lt;p&gt;1ã€æ ¹æ®å¼€å‘ä»»åŠ¡ï¼Œå»ºç«‹gitåˆ†æ”¯, åˆ†æ”¯åç§°æ¨¡å¼ä¸ºfeature/ä»»åŠ¡åï¼Œæ¯”å¦‚å…³äºAPIç›¸å…³çš„ä¸€é¡¹ä»»åŠ¡ï¼Œå»ºç«‹åˆ†æ”¯feature/apiã€‚
git checkout -b feature/api&lt;/p&gt;
&lt;p&gt;2ã€è¿è¡Œgit branch ç¡®è®¤åˆ‡æ¢åˆ°äº†feature/apiåˆ†æ”¯&lt;/p&gt;
&lt;p&gt;3ã€ç¼–è¾‘ä»£ç å®Œæˆå¼€å‘ä»»åŠ¡ï¼Œ commitç›¸å…³ä»£ç 
git add -A
git commit -m "implement api architecture"&lt;/p&gt;
&lt;p&gt;4ã€å°†åˆ†æ”¯ä»£ç pushåˆ°æœåŠ¡å™¨
git push origin -u feature/api&lt;/p&gt;
&lt;p&gt;5ã€ç™»å½•åˆ°gitlabæºä»£ç åº“ï¼Œå¦‚http://192.168.0.2/native/record-app ï¼Œç‚¹å‡»åˆå¹¶è¯·æ±‚ï¼ˆPull requestï¼‰æŒ‰é’®å»åˆ›å»ºä¸€ä¸ªåˆå¹¶è¯·æ±‚ï¼ˆpull requestï¼‰&lt;/p&gt;
&lt;p&gt;6ã€å†pull requestè¯¦ç»†é¡µé¢ï¼Œ å¡«å†™ç›¸å…³æ ‡é¢˜ï¼è¯´æ˜ï¼reviewerï¼Œ ç›®å‰è¯·å°†reviewerè®¾æˆç›¸å…³äººå‘˜&lt;/p&gt;
&lt;p&gt;7ã€è¯·æé†’reviewerå»å®¡æ ¸pull requestï¼Œç³»ç»Ÿä¹Ÿä¼šå‘é‚®ä»¶æé†’reviewer&lt;/p&gt;
&lt;p&gt;8ã€Revieweræ‰“å¼€pull requesté¡µé¢ï¼ŒæŸ¥çœ‹ä»£ç ä¿®æ”¹æƒ…å†µï¼Œä¹Ÿå¯ä»¥åœ¨ç›¸åº”çš„ä»£ç å¤„æ·»åŠ æ³¨è§†ï¼Œæç¤ºä»£ç ä½œè€…å“ªé‡Œåº”è¯¥ä¿®æ­£ã€‚&lt;/p&gt;
&lt;p&gt;9ã€ä»£ç ä½œè€…æ ¹æ®reviewerçš„è¦æ±‚ï¼Œè°ƒæ•´ä»£ç åcommitï¼pushåˆ°æœåŠ¡å™¨ã€‚ ç„¶åreviewerç»§ç»­è®¾ç½®ï¼Œ å¦‚æ­¤å¾ªç¯ï¼ŒçŸ¥é“æ²¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;10ã€å½“ä»£ç æ²¡æœ‰é—®é¢˜ä»¥åï¼Œ éœ€è¦å°†ä»»åŠ¡ä»£ç mergeåˆ°ä¸»ä»£ç åº“ï¼Œ æœ‰ä¸¤ç§æ–¹æ³•ï¼š
 aã€Reviewerå¯ä»¥åœ¨pull requesté¡µé¢ç‚¹å‡»MergeæŒ‰é’®ï¼Œ æŠŠä»£ç mergeåˆ°ä¸»ä»£ç åº“
 bã€Revieweræ‰‹åŠ¨æœ¬åœ°mergeï¼Œ å¹¶pushåˆ°æœåŠ¡å™¨ã€‚
git pull origin develop
git log ..develop&lt;/p&gt;
&lt;p&gt;å¦‚æœçœ‹åˆ°developé‡Œæœ‰ä¿®æ”¹æ²¡åœ¨å½“å‰åˆ†æ”¯ï¼Œ é‚£ä¹ˆè¿è¡Œgit rebase developæ¥æŠŠdevelopçš„ä¿®æ”¹åŠ å…¥åˆ°å½“å‰åˆ†æ”¯
è¿è¡Œä¸€ä¸‹åˆå¹¶å‘½ä»¤
git checkout develop
git merge --no-ff feature/api
git push&lt;/p&gt;
&lt;p&gt;11ã€ä»£ç ä½œè€…åˆ é™¤featureå­åˆ†æ”¯ã€‚
git checkout develop
git branch -D feature/api
git push origin :feature/api&lt;/p&gt;
&lt;p&gt;git pull origin develop &lt;/p&gt;
&lt;p&gt;æ€»ç»“ï¼šæ ¸å¿ƒæµç¨‹å°±æ˜¯ å»ºç«‹åˆ†æ”¯--å‘èµ·PRè¯·æ±‚--å®¡æ ¸--åˆå¹¶ï¼Œä¸æ–­çš„å¾ªç¯åå¤ã€‚&lt;/p&gt;
&lt;h2&gt;code reviewæ³¨æ„äº‹é¡¹&lt;/h2&gt;
&lt;p&gt;å¾…è¡¥å……&lt;/p&gt;
&lt;h2&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/june_y/article/details/50817993"&gt;å­¦ä¹ ç¬”è®°_Gitä¹‹CodeReviewæµç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/wh_19910525/article/details/68068397"&gt;ä½¿ç”¨gitlabåšgit flowåŠä»£ç å®¡æŸ¥&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.jobbole.com/76854/"&gt;Gitå·¥ä½œæµæŒ‡å—ï¼šPull Requestå·¥ä½œæµ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/jsjwk/article/details/50379836"&gt;å¦‚ä½•åšå¥½ä»£ç å®¡æŸ¥ï¼ŸCode Review Meetingè¿˜æ˜¯Single Review
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.cnblogs.com/wenhx/p/How-We-Code-Review.html"&gt;æˆ‘ä»¬æ˜¯æ€ä¹ˆåšCode Reviewçš„&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/huver2007/article/details/75095303"&gt;å¦‚ä½•è¿›è¡Œé«˜æ•ˆè¿…é€Ÿçš„CodeReview&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/lackin/article/details/7754967"&gt;å¦‚ä½•æœ‰æ•ˆçš„åšCode Review&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;çŸ¥ä¹ä¸Šçš„è®¨è®ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.zhihu.com/question/19977889"&gt;æœ‰äººå®è·µè¿‡ Phabricator ä»¥åŠ Arcanist ä½œä¸º code review çš„å·¥å…·ä¹ˆï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.zhihu.com/question/41089988"&gt;å¤§å®¶çš„å…¬å¸çš„code reviewéƒ½æ˜¯æ€ä¹ˆåšçš„ï¼Ÿé‡åˆ°è¿‡ä»€ä¹ˆé—®é¢˜ä¹ˆï¼Ÿ&lt;/a&gt;&lt;/p&gt;</summary><category term="codereview"></category></entry><entry><title>Android soåº“åŠ å›ºåŠ å£³æ–¹æ¡ˆ</title><link href="http://szuwest.github.io/android-soku-jia-gu-jia-ke-fang-an.html" rel="alternate"></link><updated>2018-01-06T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2018-01-06:android-soku-jia-gu-jia-ke-fang-an.html</id><summary type="html">&lt;h1&gt;Android soåº“åŠ å›ºåŠ å£³æ–¹æ¡ˆ&lt;/h1&gt;
&lt;p&gt;Androidåº”ç”¨ä¸»è¦åŒ…å«èµ„æºæ–‡ä»¶å’Œä»£ç ï¼Œè€Œä»£ç ä¸€èˆ¬åŒ…æ‹¬Javaä»£ç å’ŒC/C++ä»£ç ã€‚Javaä»£ç ç¼–è¯‘åä¼šç”Ÿæˆdexæ–‡ä»¶ï¼Œè€ŒC/C++ç¼–è¯‘åä¼šç”Ÿæˆsoæ–‡ä»¶ã€‚Androidåº”ç”¨çš„ä¿æŠ¤ï¼Œä¸»è¦å¯¹ç¼–è¯‘åçš„dexæ–‡ä»¶å’Œsoæ–‡ä»¶æ¥ä¿æŠ¤ï¼Œé˜²æ­¢è¢«åˆ«äººåç¼–è¯‘æŸ¥çœ‹åˆ°é‡Œé¢çš„æ ¸å¿ƒä»£ç å’Œé€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºJavaä»£ç ï¼Œä¸€èˆ¬åœ¨ç¼–è¯‘æ—¶åšä»£ç æ··æ·†ï¼Œç¼–è¯‘åçš„æ–‡ä»¶åï¼Œå‡½æ•°åå’Œå˜é‡åä¼šå˜æˆä¸€äº›æ— æ„ä¹‰çš„åå­—ï¼Œè¿™ä¸ªå³ä½¿ä»£ç è¢«åç¼–è¯‘å‡ºæ¥ï¼Œä¹Ÿå¾ˆéš¾è¯»æ‡‚ã€‚ä¸è¿‡ç”±äºè°ƒç”¨å…³ç³»å’Œé€»è¾‘éƒ½è¿˜åœ¨ï¼ŒèŠ±äº›æ—¶é—´è¿˜æ˜¯æœ‰å¯èƒ½è¯»æ‡‚ã€‚æ‰€ä»¥å°±æœ‰äº†ä¸€äº›é˜²æ­¢åç¼–è¯‘çš„æ–¹æ³•å‡ºç°ã€‚è¿™å°±åŒ…æ‹¬äº†dexåŠ å£³æˆ–è€…åŠ å¯†æ–¹æ³•ã€‚å¯¹dexæ–‡ä»¶ä¿æŠ¤çš„æ–¹æ³•ç°åœ¨æœ‰ä¸å°‘æˆç†Ÿçš„æ–¹æ¡ˆï¼Œæœ‰ä¸å°‘ç¬¬ä¸‰æ–¹å…¬å¸å…è´¹æä¾›åŠ å›ºæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºC/C++ä»£ç çš„ä¿æŠ¤æ–¹æ¡ˆï¼Œä¼šæ¯”Javaä»£ç çš„æ›´éº»çƒ¦ä¸€ä¸‹ã€‚C/C++ç»è¿‡ç¼–è¯‘åç”Ÿæˆsoæ–‡ä»¶ï¼Œè¿™ä¸ªsoæ–‡ä»¶åŒæ ·ä¼šèƒ½è¢«åç¼–è¯‘ã€‚ç”±äºæˆ‘ä»¬çš„ä¸»è¦ç®—æ³•éƒ½é‡‡ç”¨C/C++æ¥å®ç°ï¼Œå¹¶ç”Ÿæˆsoæ–‡ä»¶æä¾›ç»™åˆä½œæ–¹ä½¿ç”¨ï¼Œæˆ‘ä»¬é‡ç‚¹è¯´çš„æ˜¯C/C++ä»£ç å’Œsoæ–‡ä»¶çš„ä¿æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºsoæ–‡ä»¶çš„ä¿æŠ¤ï¼Œå¯åˆ†ä¸ºæœ‰soæºä»£ç å’Œæ— soæºç çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h2&gt;æœ‰æºç ä¿æŠ¤&lt;/h2&gt;
&lt;p&gt;é’ˆå¯¹æœ‰æºä»£ç çš„æƒ…å†µï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºä»£ç æ··æ·†ï¼ŒSectionæˆ–è€…å‡½æ•°åŠ å¯†ã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç æ··æ·†&lt;/h3&gt;
&lt;p&gt;ä»£ç æ··æ·†æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åˆ©ç”¨å®å®šä¹‰æ··æ·†å‡½æ•°åã€‚ä¾‹å¦‚é€šè¿‡ä¸€ä¸ªå®å®šä¹‰æŠŠä¸€ä¸ªæœ‰æ„ä¹‰çš„å‡½æ•°åå˜ä¸ºä¸€ä¸ªæ— æ„ä¹‰çš„å­—æ¯ç»„åˆï¼Œåœ¨ç¼–è¯‘åæœ‰æ„ä¹‰çš„å‡½æ•°åå°±è¢«æ›¿æ¢ä¸ºæ— æ„ä¹‰çš„å­—æ¯ç»„åˆï¼Œå¢åŠ äº†è¢«åç¼–è¯‘åé˜…è¯»ç†è§£éš¾åº¦ã€‚å½“ç„¶è¿™ç§æ–¹æ³•æ•ˆç‡å¤ªä½ï¼Œæœ€å¥½å½“ç„¶æ˜¯ç¼–è¯‘å™¨æ¥åšã€‚NDKç¼–è¯‘å·¥å…·å¹¶æ²¡æœ‰æä¾›è¿™ç§æ··æ·†çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥åˆ©ç”¨LLVM-ObfuscatoråŠŸèƒ½æ¥æ··æ·†ä»£ç ã€‚LLVM-Obfuscatoræ˜¯ä¸€ä¸ªå¼€æºçš„ä¸“é—¨ç”¨äºä»£ç æ··æ·†çš„å·¥å…·ã€‚åœ¨Androidçš„NDKç¼–è¯‘å·¥å…·ä¸­å¯ä»¥é›†æˆLLVM-Obfuscatorï¼Œéœ€è¦ä¿®æ”¹äº¤å‰å·¥å…·é“¾çš„ä»£ç å’Œä¸€äº›é…ç½®å‚æ•°ï¼Œå¯ä»¥ç¼–è¯‘å‡ºæ··æ·†ä»£ç ã€‚ç°åœ¨ç½‘ä¸Šä¹Ÿæœ‰ä¸€ä¸ªä¸“åšè¿™ç§æ··æ·†çš„æ–¹æ¡ˆå•†
å«Safengineã€‚&lt;/p&gt;
&lt;h3&gt;Sectionæˆ–è€…å‡½æ•°åŠ å¯†&lt;/h3&gt;
&lt;p&gt;soåº“æ˜¯ä¸€ä¸ªELFæ–‡ä»¶ï¼Œå®ƒæ˜¯æœ‰ä¸€å®šçš„æ ¼å¼çš„ï¼ŒåŒ…å«äº†ELF headerï¼Œè‹¥å¹²Section headerï¼Œè‹¥å¹²sectionç­‰ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­å°†æ ¸å¿ƒå‡½æ•°å®šä¹‰åœ¨è‡ªå®šä¹‰çš„ä¸€ä¸ªsectionä¸­ ï¼ˆé€šè¿‡ __attribute__ ((section (".mytext")))ï¼‰ ã€‚ç„¶åç¼–è¯‘å‡ºæ¥çš„soæ–‡ä»¶ä¸­å°±èƒ½æ‰¾åˆ°è¿™ä¸ªè‡ªå®šä¹‰çš„sectionã€‚æˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªsectionè¿›è¡ŒåŠ å¯†ã€‚å½“ç¨‹åºloadè¿™ä¸ªsoåº“çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨mainå‡½æ•°ä¹‹å‰æŠŠsectionéƒ¨åˆ†è§£å¯†äº†ã€‚è§£å¯†å‡½æ•°ä»£ç æ˜¯å†™åœ¨soçš„æºä»£ç é‡Œï¼Œä¸ºäº†ç¡®ä¿è§£å¯†å‡½æ•°ä¼˜å…ˆäºmainå‡½æ•°ï¼Œéœ€å¯¹åŠ å¯†å‡½æ•°åŠ äº†ä¸€ä¸ª __attribute__((constructor))ç‰¹æ€§å£°æ˜ï¼Œä¼šå…ˆäºmainå‰æ‰§è¡Œã€‚è§£å¯†å‡½æ•°éœ€è¦å…ˆæ‰¾åˆ°soçš„èµ·å§‹åœ°å€ï¼Œè·å–åˆ°sectionçš„åç§»å€¼å’Œsizeï¼Œç„¶åä¿®æ”¹å†…å­˜æ“ä½œæƒé™å’Œè§£å¯†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç‰¹å®šçš„å‡½æ•°åŠ å¯†ï¼ŒåŸç†è·Ÿå¯¹è‡ªå®šä¹‰sectionåŠ å¯†çš„åŸç†æ˜¯ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯æŸ¥æ‰¾ä¸å†æ˜¯sectionï¼Œè€Œæ˜¯ç‰¹å®šå‡½æ•°åã€‚è¿™é‡Œä¸å†å±•å¼€ã€‚&lt;/p&gt;
&lt;h2&gt;æ— æºç ä¿æŠ¤&lt;/h2&gt;
&lt;p&gt;å¯¹äºåªæœ‰soåº“ï¼Œæ²¡æœ‰å…¶æºç çš„æƒ…å†µä¸‹ï¼Œå°±æ— æ³•è¿›è¡Œä»£ç æ··æ·†ã€‚ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ç ´åELF headeræˆ–è€…åˆ é™¤Section headerã€‚å› ä¸ºåœ¨åŠ¨æ€åº“çš„é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œsoæ–‡ä»¶ELF headeræŸäº›å­—æ®µæ˜¯æ— ç”¨çš„ï¼Œè¿™äº›å­—æ®µå¯ä»¥éšæ„ä¿®æ”¹ã€‚ä¿®æ”¹äº†è¿™äº›å­—æ®µä¼šå¯¼è‡´åç¼–è¯‘è½¯ä»¶idaæ‰“ä¸å¼€è¿™ä¸ªsoæ–‡ä»¶ã€‚åŒæ ·Section headerä¹Ÿæ˜¯åœ¨é“¾æ¥è¿‡ç¨‹ä¸­æ˜¯æ²¡æœ‰ç”¨åˆ°çš„ï¼Œå¯ä»¥éšæ„åˆ é™¤ï¼Œä¹Ÿä¼šå¯¼è‡´idaæ‰“ä¸å¼€è¿™ä¸ªsoæ–‡ä»¶ã€‚ä¸è¿‡è¿™ç§æ–¹å¼å®¹æ˜“è¢«ä¿®æ­£å’Œç ´è§£æ‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼éœ€è¦å¦å¤–ä¸€ä¸ªè§£å¯†soåº“æ¥å®ç°ã€‚é¦–å…ˆå¯¹æºç soæ–‡ä»¶ç‰¹å®šå‡½æ•°æˆ–è€…sectionè¿›è¡ŒåŠ å¯†ï¼Œç„¶åæŠŠè§£å¯†å‡½æ•°æ”¾åˆ°å¦å¤–ä¸€ä¸ªsoä¸­ã€‚ç„¶åç¨‹åºä¸­éœ€å…ˆåŠ è½½è¢«åŠ å¯†çš„soæ–‡ä»¶ï¼Œç„¶ååŠ è½½è§£å¯†soæ–‡ä»¶ï¼Œè§£å¯†soæ–‡ä»¶åŠ è½½è¿‡ç¨‹ä¸­å°±æ‰§è¡Œè§£å¯†å‡½æ•°ï¼Œè¿™æ ·ç¡®ä¿åŠ å¯†çš„soä¸­ç‰¹å®šå‡½æ•°æˆ–è€…sectionè§£å¯†äº†ã€‚&lt;/p&gt;
&lt;h2&gt;ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;å¯¹äºsoæ–‡ä»¶æˆ–è€…apkæ–‡ä»¶åŠ å›ºåŠ å£³ä¿æŠ¤æ–¹æ³•ï¼Œæ˜¯æ¯”è¾ƒä¸“ä¸šçš„é¢†åŸŸï¼Œç°åœ¨å¸‚åœºä¸Šä¹Ÿæœ‰ä¸€äº›ä¸“é—¨çš„å›¢é˜Ÿåœ¨åšã€‚ä¸è¿‡ä¸»è¦æä¾›çš„æ–¹æ¡ˆéƒ½æ˜¯é’ˆå¯¹apkæ¥åŠ å›ºåŠ å£³ã€‚å¯¹äºdexæ–‡ä»¶çš„åŠ å›ºåŠ å£³æ–¹æ¡ˆæ¯”è¾ƒæˆç†Ÿï¼Œä¸å°‘ç¬¬ä¸‰æ–¹éƒ½æ˜¯å…è´¹æä¾›ã€‚ä½†æ˜¯å¯¹äºsoæ–‡ä»¶çš„åŠ å›ºåŠ å£³ï¼Œéƒ½æ˜¯å±äºé«˜çº§åŠŸèƒ½ï¼Œéœ€è¦ä»˜è´¹ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºapkï¼ˆä¸»è¦æ˜¯Javaä»£ç ï¼‰åŠ å›ºåŠ å¯†æä¾›ç¬¬ä¸‰æ–¹æœåŠ¡ä¸»è¦æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è…¾è®¯äº‘åº”ç”¨ä¹å›º&lt;/li&gt;
&lt;li&gt;é˜¿é‡Œèšå®‰å…¨&lt;/li&gt;
&lt;li&gt;360åŠ å›ºä¿&lt;/li&gt;
&lt;li&gt;çˆ±åŠ å¯†&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¦åšsoæ–‡ä»¶çš„åŠ å›ºåŠ å£³ï¼Œä¹å›ºæš‚æ—¶æ²¡æœ‰å¯¹å¤–æä¾›ï¼Œé˜¿é‡Œèšå®‰å…¨éœ€è¦å…ˆä»˜è´¹ã€‚çˆ±åŠ å¯†ä¹Ÿæä¾›äº†soæ–‡ä»¶çš„åŠ å›ºåŠ å£³ï¼Œè¿˜æä¾›ä¸“é—¨çš„SDKåŠ å¯†æ–¹æ¡ˆï¼Œä¸è¿‡éœ€è¦å…ˆæ‰¾ä»–ä»¬çš„äººå¯¹æ¥æ´½è°ˆã€‚&lt;/p&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œè¦åšå¥½soæ–‡ä»¶çš„åŠ å›ºåŠ å£³ä¿æŠ¤å¹¶ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹ï¼Œéœ€è¦å¯¹soæ–‡ä»¶æ ¼å¼ï¼ŒsoåŠ è½½å’Œé“¾æ¥è¿‡ç¨‹æœ‰è¶³å¤Ÿå¤šçš„äº†è§£ã€‚å¦å¤–åŠ å›ºå’ŒåŠ å£³åä¹Ÿä¸æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½è¢«ç ´è§£ã€‚ä¸è¿‡åŠ å›ºå’ŒåŠ å£³å¯¹äºæ ¸å¿ƒç®—æ³•è¿˜æ˜¯éœ€è¦çš„ï¼ŒåŠ å¤§è¢«ç ´è§£çš„éš¾åº¦å’Œæˆæœ¬ã€‚æœ‰éœ€è¦çš„è¯ä¹Ÿå¯ä»¥é‡‡ç”¨ç¬¬ä¸‰æ–¹çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/wangbaochu/article/details/45370543"&gt;Android LLVM-Obfuscator C/C++ æ··æ·†ç¼–è¯‘çš„æ·±å…¥ç ”ç©¶&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/jiangwei0910410003/article/details/49336613"&gt;SO(ELF)æ–‡ä»¶æ ¼å¼è¯¦è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/jiangwei0910410003/article/details/49962173"&gt;åŸºäºå¯¹soä¸­çš„sectionåŠ å¯†æŠ€æœ¯å®ç°soåŠ å›º&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/jiangwei0910410003/article/details/49966719"&gt;åŸºäºå¯¹soä¸­çš„å‡½æ•°åŠ å¯†æŠ€æœ¯å®ç°soåŠ å›º&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bbs.pediy.com/thread-191649.htm"&gt;ç®€å•ç²—æš´çš„soåŠ è§£å¯†å®ç°&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bbs.pediy.com/thread-192047.htm"&gt;æ— æºç åŠ è§£å¯†å®ç° &amp;amp;&amp;amp; NDK Native Hook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bbs.pediy.com/thread-222760.htm"&gt;å¦ä¸€ç§æ— æºç çš„soåŠ å£³å®ç°&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/jltxgcy/article/details/52205210"&gt;Android SO åŠ å£³(åŠ å¯†)ä¸è„±å£³æ€è·¯&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.niwoxuexi.com/blog/android/article/233.html"&gt;android-åŠ å›ºæ–¹æ¡ˆå¯¹æ¯”&lt;/a&gt;&lt;/p&gt;</summary><category term="åŠ¨ç”» åŠ å›º åŠ å£³"></category></entry><entry><title>2017å¹´æ€»ç»“å’Œ2018å¹´å±•æœ›</title><link href="http://szuwest.github.io/2017nian-zong-jie-he-2018nian-zhan-wang.html" rel="alternate"></link><updated>2017-12-31T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-12-31:2017nian-zong-jie-he-2018nian-zhan-wang.html</id><summary type="html">&lt;h1&gt;2017å¹´æ€»ç»“å’Œ2018å¹´å±•æœ›&lt;/h1&gt;
&lt;p&gt;å·²ç»è¿‡å»çš„2017å¹´å‘ç”Ÿäº†å¾ˆå¤šäº‹ï¼Œæˆ‘æƒ³ä»å·¥ä½œï¼Œç”Ÿæ´»å’ŒæŠ•èµ„ä¸‰ä¸ªè§’åº¦å»æ€»ç»“ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h2&gt;å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;æˆ‘ç¦»å¼€äº†å·¥ä½œ3å¹´å¤šçš„è¿…é›·ï¼Œè¿™æ˜¯æˆ‘ç¬¬äºŒæ¬¡ç¦»å¼€è¿…é›·ã€‚è¿™å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸å¥½çš„é€‰æ‹©ã€‚å®é™…ä¸Šæˆ‘çš„ç¦»å¼€ä¸æ˜¯è¯´å·²ç»åœ¨è¿…é›·å‘†å¤Ÿäº†ï¼Œè€Œæ˜¯å› ä¸ºæˆ‘çš„é¢†å¯¼æŒ–æˆ‘è¿‡å»ä»–ä»¬å…¬å¸ã€‚å¥½çš„æ–¹é¢ï¼Œå½“ç„¶å·¥èµ„æ¶¨äº†ï¼Œè·¨å…¥äº†AIè¡Œä¸šï¼Œæœ‰è€å¤§ç½©ç€ã€‚ä¸å¥½çš„æ–¹é¢æ˜¯åˆ›ä¸šå…¬å¸ï¼Œé£é™©é«˜å¾ˆå¤šï¼Œå¾ˆæœ‰å¯èƒ½åä¸èµ·æ¥æˆ–è€…å€’é—­ï¼Œæµªè´¹æ—¶é—´ã€‚è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒé—æ†¾çš„æ˜¯ï¼Œç¦»å¼€äº†è‡ªå·±ä¸€ç›´çœ‹å¥½çš„äº§å“é¡¹ç›®ï¼Œç©å®¢äº‘å³å°†è¦å‘å¸ƒäº†ï¼Œè‡ªå·±å´ç¦»å¼€äº†ã€‚æ›¾å®¶è‡ªå·±å¾ˆçœ‹å¥½è¿™ä¸ªé¡¹ç›®ï¼Œä¹ŸæŠ•å…¥äº†ä¸å°‘ç²¾åŠ›ï¼ŒçœŸå¿ƒå¸Œæœ›èƒ½æˆåŠŸçš„äº§å“ï¼Œå´åœ¨é»æ˜å‰ç¦»å¼€äº†ï¼Œæœ‰ç‚¹é—æ†¾ã€‚æœ‰å¾—å¿…æœ‰å¤±ï¼Œè¿™ä¸ªé€‰æ‹©æ˜¯å¥½æ˜¯åè¿˜è¦å¾…æ—¶é—´æ¥éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¹´æ¥åˆ°æ–°å…¬å¸ï¼Œå€’æ˜¯å­¦åˆ°äº†ä¸€ç‚¹æ–°æŠ€æœ¯ï¼šReactNativeã€‚ä»¥å‰å®ƒå‡ºæ¥çš„æ—¶å€™ï¼Œè‡ªå·±ä¹Ÿå»çœ‹äº†ä¸€ä¸‹ï¼Œæ²¡æœºä¼šè¯•è¯•ã€‚ç°åœ¨åœ¨é¡¹ç›®é‡Œç”¨èµ·æ¥äº†ã€‚è¿™ä¸ªæŠ€æœ¯çœ‹èµ·æ¥ä¹Ÿæ²¡é‚£ä¹ˆç¥ï¼Œä½†æ˜¯ä¹Ÿç¡®å®æœ‰ä¸å°‘å¥½å¤„ã€‚è¿™äº›å¹´æ„Ÿè§‰è‡ªå·±çš„æŠ€æœ¯è¿›æ­¥æ…¢äº†ï¼Œç»ˆäºå¹´çºªä¹Ÿæ¥äº†ï¼Œæ¯”ä¸ä¸Šåˆšæ¯•ä¸šçš„å¹´è½»äººäº†ã€‚æˆ‘è‡ªå·±ä¹Ÿæ‹…å¿ƒè‡ªå·±æœªæ¥è·¯æ€ä¹ˆèµ°ã€‚æˆ‘ç°åœ¨ä¹Ÿæ²¡æœ‰ç­”æ¡ˆï¼Œæˆ‘çŸ¥é“è‡ªå·±éœ€è¦ä¸æ–­æ¢ç´¢å’Œæ€è€ƒã€‚è‡ªå·±è¦å‡å°‘æµªè´¹ä¸€äº›æ— æ‰€è°“çš„æ—¶é—´ï¼Œå¤šç‚¹æ—¶é—´èŠ±åœ¨å®¶åº­å’Œå·¥ä½œä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ç‚¹æ˜¯è¿›å…¥äº†AIè¡Œä¸šï¼Œå‘ç°è¿™ä¸ªè¡Œä¸šæ³¡æ²«ç¡®å®å·¨å¤§ã€‚ç°åœ¨çš„åˆ›ä¸šæ„Ÿè§‰è·Ÿ4å¹´å‰çš„åˆ›ä¸šå®Œå…¨ä¸ä¸€æ ·ã€‚ç¤¾ä¼šå˜åŒ–å¾ˆå¿«ã€‚ç°åœ¨å›½å®¶è²Œä¼¼å¤§åŠ›å‘å±•äººå·¥æ™ºèƒ½äº§ä¸šï¼Œè¦å‘å±•ä¸€ä¸ªæ–°äº§ä¸šï¼Œå¿…è¦éœ€è¦ä¸€å®šçš„æ³¡æ²«æ‰èƒ½æ”¯æ’‘ã€‚æˆ‘ä¹Ÿå¸Œæœ›èƒ½æ¥è§¦æ›´å¤šçš„AIæŠ€æœ¯ï¼Œä¹˜ä¸Šè¿™ä¸ªæµªæ½®å§ã€‚&lt;/p&gt;
&lt;h2&gt;ç”Ÿæ´»&lt;/h2&gt;
&lt;p&gt;ä»Šå¹´å®ç°äº†ä¸€ä¸ªç›®æ ‡ï¼Œå°±æ˜¯ä¹°æˆ¿ã€‚ä¸è¿‡å‡†ç¡®æ¥è¯´è¿˜æ²¡çœŸæ­£å®ç°ï¼Œå› ä¸ºé“¶è¡Œçš„è´·æ¬¾è¿˜æ²¡æœ€ç»ˆæ‰¹ä¸‹æ¥ã€‚æŒ‰ç…§æ­£å¸¸æƒ…å†µæ¥è¯´ï¼Œåº”è¯¥æ‰¹ä¸‹æ¥äº†ï¼Œå› ä¸ºæˆ‘å¾ä¿¡å’Œé“¶è¡Œæµæ°´æœ‰é—®é¢˜ï¼Œå¯¼è‡´è¦åŠ æ‹…ä¿äººåšæ‹…ä¿ã€‚ç°åœ¨è¿˜åœ¨ç­‰æœ€åçš„å®¡æ ¸ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä¹°äº†æˆ¿ä¹‹åï¼Œç”Ÿæ´»å‹åŠ›éª¤ç„¶å˜å¤§ã€‚ä¸æ•¢ä¹±æ¶ˆè´¹ã€‚ä»Šå¹´çš„æ—…è¡Œé€‰æ‹©äº†ä¸Šæµ·ï¼Œä¸æ•¢å‡ºå›½æ¸¸äº†ã€‚ä¹Ÿä¸å¤ªæ•¢ä¹±ä¹°ä¸œè¥¿ï¼Œä¸æ•¢éšæ„å‡ºå»åƒå¤§é¤ã€‚æƒ³æƒ³æˆ‘ä»¬è¿™ä¸€ä»£å¹´è½»äººè¿˜æ˜¯æŒºæ‚²å“€ï¼Œè¾›è‹¦èµšé’±ï¼Œç­‰æ¥åœ¨æˆ¿ä»·æš´æ¶¨ä¹‹åä¹°æˆ¿ï¼ŒèƒŒè´Ÿä¸€èº«å€ºï¼Œä¸ç®¡ä¹±æ¶ˆè´¹ã€‚&lt;/p&gt;
&lt;h2&gt;æŠ•èµ„&lt;/h2&gt;
&lt;p&gt;ä»Šå¹´æŠ•èµ„è¿˜ç®—æŒºé¡ºåˆ©ï¼Œä¹Ÿæ˜¯æˆ‘å¼€å§‹ç‚’è‚¡ä¸‰å¹´æ¥ç¬¬ä¸€æ¬¡å…¨é¢ç›ˆåˆ©ï¼Œè€Œä¸”å›æŠ¥ä¹Ÿä¸å°ã€‚ä¸å¤ªå¥½çš„å°±æ˜¯å› ä¸ºä¹°æˆ¿ï¼Œä¸å¾—ä¸æŠŠæ‰€æœ‰Aè‚¡éƒ½å–æ‰äº†ã€‚æˆ‘å¤§è‡´ç®—äº†ä¸‹ï¼ŒAè‚¡æ€»ä½“æ”¶ç›Šç‡æ˜¯18%ã€‚Aè‚¡ä¸»è¦å—ç›Šæ¥è‡ªä¸­å›½å¹³å®‰ï¼Œå›½æŠ•ç”µåŠ›ï¼Œè¿˜æœ‰å°éƒ¨åˆ†æ¥è‡ªä¸­æ·±åœ³æœºåœºï¼Œæµ·åº·å¨è§†ã€‚å¦‚æœä¸æ˜¯å› ä¸ºä¹°æˆ¿å–æ‰äº†ä¸­å›½å¹³å®‰çš„è¯ï¼Œå—ç›Šä¼šæ›´é«˜ï¼Œå› ä¸ºå–æ‰äº†ä¹‹åä¸­å›½å¹³å®‰åˆæ¶¨äº†ä¸å°‘ã€‚è‡³äºç¾è‚¡å’Œæ¸¯è‚¡ï¼Œå› ä¸ºèµ„é‡‘å°‘ï¼Œè‡³ä»Šä¸€åˆ†æ²¡åŠ¨è¿‡ã€‚ç¾è‚¡æ”¶ç›Šç‡æ˜¯73%ï¼Œæ¸¯è‚¡æ”¶ç›Šç‡æ˜¯63%ã€‚è¯´å®è¯ï¼Œè¿™ä¸ªæ”¶ç›Šç‡æˆ‘å¾ˆæ»¡æ„ï¼Œè¶…å‡ºæˆ‘çš„é¢„æ–™ã€‚ç¾è‚¡ä¸»è¦å—ç›Šæ¥è‡ªè‹±ä¼Ÿè¾¾ï¼Œç°åœ¨ä»ç„¶æŒæœ‰ï¼Œä½†æ˜¯æŒæœ‰å°‘éƒ¨åˆ†è¿…é›·ã€‚å…¶å®è¿…é›·æ¶¨äº†ä¸å°‘ï¼Œä½†æ˜¯ä»“ä½å®åœ¨å¤ªä½ï¼Œå°±ç®—èµšäº†3å€ï¼Œå¯¹æ•´ä½“è€Œå·²ï¼Œå½±å“å¾ˆå°ã€‚æ¸¯è‚¡ä¸»è¦æŒæœ‰è…¾è®¯ï¼Œèµšäº†80%å¤šï¼Œè¿™æ˜¯å¤§å¤´ä»“ä½ã€‚é•¿åŸæ±½è½¦ä¹ŸæŒæœ‰ä¸€æ®µæ—¶é—´ï¼Œä½†æ˜¯ä¸€ç›´åœ¨æˆæœ¬çº¿ä¸Šä¸‹æ³¢åŠ¨ï¼Œå¹´åº•æ¢æˆäº†å½©ç”Ÿæ´»ï¼Œç«‹é©¬å°±èµšäº†ã€‚æˆ‘å¯¹è¿™ä¸¤ä¸ªè‚¡å¾ˆæœ‰ä¿¡å¿ƒã€‚&lt;/p&gt;
&lt;h1&gt;2018å¹´å±•æœ›&lt;/h1&gt;
&lt;p&gt;2018å¹´æƒ³åšçš„ä¸œè¥¿å¾ˆå¤šå¾ˆå¤šã€‚å¯¹æœªæ¥æ›´åŠ ç„¦è™‘ã€‚ã€‚ã€‚ä¸è¿‡æˆ‘è¿˜æ˜¯çœ‹å¤šä¸­å›½çš„ã€‚æˆ‘å¸Œæœ›èƒ½è¶ç€å›½è¿ï¼Œé¡ºåŠ¿è€Œä¸ºï¼Œå¸Œæœ›èƒ½å®ç°è‡ªå·±çš„äººç”Ÿç›®æ ‡ï¼Œä¸è¿‡è¿™çœ‹èµ·æ¥è¿˜å¾ˆé¥è¿œã€‚åšå¥½å½“ä¸‹ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å§ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2018å¹´ï¼Œæˆ‘è¦å‡å°‘åˆ·é›ªçƒï¼Œåˆ·å¾®ä¿¡ä¹‹ç±»ç½‘ç«™å’Œç©æ¸¸æˆçš„æ—¶é—´ï¼Œå¤šèŠ±ç‚¹æ—¶é—´åœ¨å·¥ä½œä¸Šï¼Œæå‡è‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›ã€‚æˆ‘æ„è¯†åˆ°å¯¹äºæˆ‘ä»¬è¿™æ ·çš„äººæ¥è¯´ï¼ŒåŠªåŠ›å·¥ä½œèµšé’±æ‰æ˜¯æ­£é“ï¼Œæé«˜è‡ªå·±çš„æœ¬é‡‘æ‰èƒ½åœ¨è‚¡å¸‚èµšé’±ã€‚è€Œä¸”æˆ‘æ›´å¸Œæœ›è‡ªå·±èƒ½åœ¨å·¥ä½œä¸Šæœ‰æ‰€ä¸ºã€‚&lt;/li&gt;
&lt;li&gt;2018å¹´ï¼Œæˆ‘å¸Œæœ›èƒ½é˜…è¯»å¤šä¸€äº›ä¹¦ã€‚è¿‡å»å‡ å¹´å¾ˆå°‘é˜…è¯»çº¸è´¨ä¹¦ç±ï¼Œæˆ‘å‘ç°å¾ˆå¤šæˆåŠŸäººå£«éƒ½æœ‰å¾ˆå¥½çš„é˜…è¯»ä¹ æƒ¯ã€‚è‡ªå·±è¦åŠ å¼º&lt;/li&gt;
&lt;li&gt;2018å¹´ï¼Œæˆ‘å¸Œæœ›åœ¨æŠ€æœ¯ä¸Šæ·±åº¦ä¸Šæœ‰æ‰€çªç ´ï¼Œç„¶åå¤šå¤šæ€è€ƒè‡ªå·±ä»¥åçš„èŒä¸šè§„åˆ’&lt;/li&gt;
&lt;li&gt;2018å¹´ï¼Œå¸Œæœ›æˆ¿å­èƒ½åœ¨å¹´åº•äº¤æˆ¿ã€‚è²Œä¼¼è¿™ä¸æ˜¯æˆ‘èƒ½æ§åˆ¶çš„ã€‚&lt;/li&gt;
&lt;li&gt;2018å¹´ï¼Œå¸Œæœ›èƒ½æ”’ç‚¹é’±ç»™åª³å¦‡æ‘†é…’ï¼Œå¸Œæœ›ä»Šå¹´èƒ½å½“çˆ¸çˆ¸&lt;/li&gt;
&lt;li&gt;2018å¹´ï¼Œå¸Œæœ›å®¶äººèº«ä½“å¥åº·ã€‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸èƒ½è¯´æ›´å¤šäº†ã€‚æ•´ä½“æ¥è¯´ï¼Œ2017å¹´åŸºæœ¬è¾¾åˆ°äº†æˆ‘é¢„æœŸã€‚å¸Œæœ›2018å¹´ä¼šæ›´å¥½ã€‚&lt;/p&gt;</summary><category term="æ€»ç»“"></category></entry><entry><title>ç©å®¢äº‘çš„å‰ä¸–ä¸å‡ºç”Ÿ</title><link href="http://szuwest.github.io/wan-ke-yun-de-qian-shi-yu-chu-sheng.html" rel="alternate"></link><updated>2017-12-24T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-12-24:wan-ke-yun-de-qian-shi-yu-chu-sheng.html</id><summary type="html">&lt;h1&gt;ç©å®¢äº‘çš„å‰ä¸–ä¸å‡ºç”Ÿ&lt;/h1&gt;
&lt;p&gt;è¿…é›·æœ€è¿‘çš„è‚¡ä»·æ³¢åŠ¨å¾ˆå¤§ï¼Œè‚¡ä»·ä»æœ€ä½ç‚¹é™„è¿‘4ç¾å…ƒåˆ°ç°åœ¨13ç¾å…ƒé™„è¿‘ï¼Œæ¶¨äº†3å€å¤šï¼Œæœ€é«˜ç‚¹ç”šè‡³åˆ°27ç¾å…ƒã€‚åªæ˜¯çŸ­çŸ­å‡ ä¸ªæœˆçš„æ—¶é—´ï¼Œæ¶¨å¹…è¿™ä¹ˆå¤§ï¼Œä¸»è¦æ˜¯å› ä¸ºç©å®¢äº‘å’Œç©å®¢å¸ï¼ˆç°åœ¨å«é“¾å…‹ï¼‰ã€‚å¯¹äºç©å®¢å¸ï¼Œæˆ‘è‡ªå·±ä¸æƒ³è¯´å¤ªå¤šï¼Œä½†æ˜¯å¯¹äºç©å®¢äº‘è¿™ä¸ªäº§å“ï¼Œæˆ‘æ˜¯å¾ˆæœ‰æ„Ÿæƒ…çš„ã€‚è¿™ä¸ªäº§å“æ˜¯æˆ‘ä»å¤´å°±å¼€å§‹å‚ä¸å¼€å‘ï¼Œè™½ç„¶æˆ‘å·²ç»ç¦»å¼€ç©å®¢äº‘å›¢é˜Ÿä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æƒ³è¯´è¯´è¿™ä¸ªäº§å“ã€‚çŸ¥é“è¿™ä¸ªäº§å“å‰ä¸–ä¸ä»Šç”Ÿçš„äººï¼Œå…¶å®çœŸçš„ä¸æ˜¯å¾ˆå¤šã€‚æˆ‘æƒ³è¯´ä¸€è¯´è¿™ä¸ªäº§å“ï¼Œä¹Ÿç®—æ˜¯å¯¹è‡ªå·±çš„ä¸€æ®µæ€»ç»“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡æˆ‘è¯´çš„æ‰€æœ‰è§‚ç‚¹éƒ½æ˜¯æˆ‘ä¸ªäººè§‚ç‚¹ï¼Œè·Ÿç©å®¢äº‘å›¢é˜Ÿæ— å…³ï¼Œç‰¹æ­¤å£°æ˜ã€‚&lt;/p&gt;
&lt;h2&gt;ç©å®¢äº‘çš„å‡ºç”Ÿ&lt;/h2&gt;
&lt;p&gt;ç©å®¢äº‘æ˜¯æœ‰ç½‘å¿ƒç§‘æŠ€å‡ºå“çš„ä¸€æ¬¾æ™ºèƒ½ç¡¬ä»¶äº§å“ï¼Œä¸»æ‰“ä¸ªäººäº‘ç›˜åŠŸèƒ½ï¼Œå……å½“CDNèŠ‚ç‚¹åŠŸèƒ½ï¼Œåæ¥ä¹ŸåˆåŠ å…¥ç©å®¢å¸åŠŸèƒ½ã€‚ç©å®¢äº‘è¿™ä¸ªé¡¹ç›®æœ€åˆçš„æ—¶å€™å¹¶ä¸å«ç©å®¢äº‘ï¼Œå†…éƒ¨æˆ‘ä»¬å«èµšé’±å®3ä»£ã€‚å®ƒæ˜¯è¿…é›·ä¸‹è½½å®å’Œèµšé’±å®çš„åˆå¹¶çš„ä¸€ä¸ªäº§å“ã€‚å®é™…ä¸Š ç©å®¢äº‘=è¿…é›·ä¸‹è½½å®+èµšé’±å®+ç©å®¢å¸ è¿™æ ·çš„ä¸€ä¸ªäº§å“ã€‚æ‰€ä»¥åœ¨åšç©å®¢äº‘çš„æ—¶å€™ï¼Œä¸‹è½½å®å’Œèµšé’±å®è¿™ä¸¤ä¸ªé¡¹ç›®å·²ç»åœäº†ï¼Œç„¶åå›¢é˜Ÿåˆå¹¶æˆæ–°çš„å›¢é˜Ÿï¼šç©å®¢äº‘å›¢é˜Ÿã€‚è€Œè¿™ä¸ªå›¢é˜Ÿçš„ç»å¤§éƒ¨åˆ†äººï¼Œéƒ½æ˜¯ä¸‹è½½å®å›¢é˜Ÿçš„äººï¼Œä¸‹è½½å®æ•´ä¸ªé¡¹ç›®å°±æ˜¯è¿™æ ·ä»è¿…é›·æ€»éƒ¨å¹¶å…¥ç½‘å¿ƒç§‘æŠ€çš„ã€‚ç©å®¢äº‘çš„å‰èº«å°±æ˜¯è¿…é›·ä¸‹è½½å®ã€‚&lt;/p&gt;
&lt;p&gt;ç©å®¢äº‘çš„æœ€åˆç«‹é¡¹æ˜¯åœ¨3ï¼Œ4æœˆä»½ï¼Œä»ä¸€å¼€å§‹è€æ¿å°±éå¸¸é‡è§†æ•´ä¸ªé¡¹ç›®ã€‚æˆ‘ä»¬å†…éƒ¨å«èµšé’±å®3ä»£ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€ç›´åœ¨æƒ³ç»™ä»–ä¸€ä¸ªæ–°çš„åå­—ã€‚å“ç‰Œå’Œå•†åŠ¡çš„äººç»™äº†3ä¸ªåå­—ç»™å¤§å®¶æŠ•ç¥¨ï¼Œæœ€ç»ˆé€‰äº†ç©å®¢äº‘é¡¹ç›®ï¼Œè‹±æ–‡åOneCloudã€‚é€‰æ•´ä¸ªåå­—ä¸»è¦æ˜¯OneCloudå’Œç½‘å¿ƒç§‘æŠ€çš„åå­—OneThingå¾ˆå¥‘åˆï¼Œç„¶åç©å®¢è·Ÿè‹±æ–‡åå‘éŸ³ä¹Ÿç›¸ä¼¼ï¼Œç©å®¢è¿™ä¸ªè¯ä¹Ÿæ˜¯è€æ¿åœ¨ä¹‹å‰çš„æŸäº›åœºåˆæå€¡è¿‡çš„ï¼Œå¾ˆå¹´è½»åŒ–ï¼Œé€‚åˆå¹´è½»äººã€‚è¿™ä¸ªåå­—ç¡®å®æ˜¯ä¸é”™ã€‚ç©å®¢äº‘åŸºæœ¬ä¸Šå°†ä¸‹è½½å®çš„åŠŸèƒ½éƒ½è¿ç§»äº†è¿‡æ¥ï¼Œå¹¶ä¸”è¿›è¡Œäº†æ”¹è¿›å’Œæ”¹å–„ã€‚å› ä¸ºå›¢é˜Ÿéƒ½æ˜¯ä¸‹è½½å®è¿‡æ¥çš„ï¼Œéƒ½æœ‰æ¯”è¾ƒå¤šçš„ç»éªŒï¼Œæ‰€ä»¥å°‘èµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚ç‰¹åˆ«æ˜¯è¿œç¨‹è®¿é—®è¿™ä¸ªåŠŸèƒ½ã€‚ä»ä¸€å¼€å§‹å°±åœ¨æ–¹æ¡ˆä¸Šè®¨è®ºå¾ˆä¹…ï¼Œç„¶ååšäº†å¾ˆå¤šåŠŸè¯¾ã€‚æ‰æœ€ç»ˆè¾¾åˆ°ç°åœ¨è¿œç¨‹æ’­æ”¾è§†é¢‘ä¹Ÿå¾ˆæµç•…çš„æ•ˆæœã€‚è¯´è¿™ä¸€ç‚¹ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ„Ÿåˆ°å¾ˆè‡ªè±ªï¼Œå› ä¸ºè¿™ä¸ªåŠŸèƒ½æˆ‘ä»ç«‹é¡¹æ—¶å°±æå»ºè®®ç»™é¡¹ç›®è´Ÿè´£äººè¦é‡è§†è¿™ä¸ªæŠ€æœ¯éš¾ç‚¹ã€‚åœ¨æ•´ä¸ªé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ç›´å‚ä¸å…¶ä¸­ï¼ŒAPPç«¯ä¸æœåŠ¡å™¨çš„è°ƒè¯•éƒ½æ˜¯æˆ‘æ¥ä¸»å¯¼ï¼ŒiOSç«¯çš„åº“ä¹Ÿæ˜¯ç”±æˆ‘æ¥ä¿®æ”¹å’Œç¼–è¯‘çš„ï¼Œä¸ºæ­¤æˆ‘è¿˜å†™è¿‡åšå®¢è®°å½•æˆ‘çš„å¼€å‘å¿ƒå¾—ã€‚è¿œç¨‹è®¿é—®çš„ä½“éªŒç»å¯¹æ˜¯ç©å®¢äº‘çš„ä¸€ä¸ªäº®ç‚¹ï¼Œæ˜¯æ¯”å…¶ä»–ç«å“ä¼˜è¶Šçš„åœ°æ–¹ã€‚å½“ç„¶ï¼Œé™¤äº†è¿™ä¸ªï¼Œç©å®¢äº‘è¿˜åšäº†å¾ˆå¤šå¾ˆå¥½çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ–‡ä»¶å¤¹çš„æ•´ç†ï¼Œç…§ç‰‡çš„æ•´ç†ã€‚è¿œç¨‹ä¸‹è½½åŠŸèƒ½åŸºæœ¬ä¸Šæ˜¯å®Œå…¨å€Ÿé‰´ä¸‹è½½å®çš„ã€‚ä¸‹è½½å®åœ¨è¿œç¨‹ä¸‹è½½æ–¹é¢è¸©è¿‡å¾ˆå¤šå‘ï¼Œç§¯ç´¯äº†å¾ˆå¤šç»éªŒï¼Œæœ‰äº†è¿™äº›ç»éªŒï¼Œç©å®¢äº‘å¯ä»¥èµ°å¾—é¡ºå¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;è‡³äºç©å®¢å¸ï¼Œæ˜¯åæ¥å¿«è¦å‘å¸ƒçš„æ—¶å€™åŠ è¿›å»çš„ã€‚é‚£ä¸ªæ—¶å€™æˆ‘å·²ç»ç¦»å¼€äº†ç©å®¢äº‘å›¢é˜Ÿã€‚ä¸è¿‡å†…éƒ¨æˆ‘ä»¬æ˜¯æœ‰æå‰ç ”ç©¶åŒºå—é“¾çš„ï¼Œåœ¨6ï¼Œ7æœˆä»½çš„æ—¶å€™æˆ‘ä»¬å†…éƒ¨å·²ç»è®©å¤§å®¶ç ”ç©¶åŒºå—é“¾æŠ€æœ¯äº†ã€‚å› ä¸ºæˆ‘è‡ªå·±æ²¡æœ‰å‚ä¸ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä¸è®¨è®ºã€‚ç©å®¢äº‘èƒ½å–å¾—è¿™ä¹ˆå¤§çš„åŠŸèƒ½ï¼Œæˆ‘çœŸå¿ƒçš„æ„Ÿåˆ°é«˜å…´ï¼Œè¿™é‡Œæœ‰å¾ˆå¤§éƒ¨åˆ†æ˜¯å› ä¸ºå‰é¢è¿…é›·çš„ç§¯ç´¯ã€‚ç©å®¢äº‘æ˜¯ä¸‹è½½å®å’Œèµšé’±å®çš„åˆèº«ï¼Œç”±äºèµšé’±å®æˆ‘æ²¡æœ‰å‚ä¸ï¼Œä½†æ˜¯ä¸‹è½½å®æ˜¯ä¸€ç›´å‚ä¸çš„äº§å“ï¼Œæ‰€ä»¥æˆ‘æƒ³è¯´è¯´å®ƒçš„å‰èº«ï¼šä¸‹è½½å®&lt;/p&gt;
&lt;h2&gt;ç©å®¢äº‘å‰èº«ï¼šä¸‹è½½å®&lt;/h2&gt;
&lt;p&gt;æˆ‘å‰é¢è¯´è¿‡ç©å®¢äº‘æœ€åˆçš„å›¢é˜Ÿéƒ½æ˜¯ä¸‹è½½å®è¿‡æ¥çš„ï¼Œé‚£ä¹ˆä¸‹è½½å®åˆæ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„äº§å“ã€‚ä¸‹è½½å®å…¶å®å°±æ˜¯ä¸€ä¸ªä¸ªäººäº‘ç›˜äº§å“ã€‚å®ƒä¸»è¦åŒ…æ‹¬äº†ç¡¬ç›˜æ–‡ä»¶ç®¡ç†å’Œè¿œç¨‹ä¸‹è½½åŠŸèƒ½ï¼Œèµ„æºå—…æ¢åŠŸèƒ½ã€‚å…¶ä¸­ç¡¬ç›˜ç®¡ç†åŒ…æ‹¬äº†ä¼ ç»Ÿçš„æ–‡ä»¶æµè§ˆï¼Œç…§ç‰‡ï¼Œå½±é™¢åŠŸèƒ½ã€‚ä¸‹è½½å®æœ€åˆæœ‰ä¸€ä¸ªäº®ç‚¹åŠŸèƒ½å°±æ˜¯èµ„æºå—…æ¢åŠŸèƒ½ã€‚æ¯”å¦‚ä½ è¾“å…¥ åŠŸå¤«ï¼Œå®ƒä¼šè‡ªåŠ¨å…¨ç½‘æœç´¢è¿™éƒ¨ç”µå½±çš„èµ„æºï¼ŒæŠŠæ‰€æœ‰ä¸‹è½½èµ„æºç½—åˆ—å‡ºæ¥ï¼ŒåŒ…æ‹¬èµ„æºå¤§å°ç­‰ä¿¡æ¯ï¼Œä½ åªè¦ç‚¹å‡»ä¸€ä¸‹å°±ä¼šåŠ å…¥ä¸‹è½½åˆ—è¡¨ã€‚è¿™æ˜¯è›®å¥½çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯è¢«äººå‘Šè¯´æä¾›ç›—ç‰ˆèµ„æºï¼Œç„¶åå°±è¢«é˜‰å‰²äº†ä¸€äº›åŠŸèƒ½ï¼Œä½¿ç”¨èµ·æ¥å°±æ²¡æœ‰é‚£ä¹ˆå‹å¥½äº†ã€‚å½“ç„¶ä¸‹è½½å®è¿˜æœ‰å…¶ä»–å¾ˆå¥½çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è‡ªåŠ¨å¤‡ä»½ç›¸å†ŒåŠŸèƒ½ï¼Œè‡ªåŠ¨å¤‡ä»½SDåŠŸèƒ½ï¼Œå®¶åº­å±€åŸŸç½‘å†…å…±äº«åŠŸèƒ½ç­‰ï¼Œè¿™äº›åŠŸèƒ½éƒ½è¢«ç©å®¢äº‘ç»§æ‰¿äº†ï¼Œè€Œä¸”è¿˜åšäº†ä¼˜åŒ–ã€‚æ‰€ä»¥ç©å®¢äº‘åœ¨è¿™æ–¹é¢æ˜¯æœ‰ä¼˜åŠ¿çš„ï¼Œç©å®¢äº‘è¿˜æŠŠä¸‹è½½å®æ²¡æœ‰åšå¥½çš„ç»™åšå¥½äº†----è¿œç¨‹è®¿é—®åŠŸèƒ½ã€‚ä¸‹è½½å®åœ¨è¿œç¨‹è®¿é—®æ–¹é¢ç¡®å®åšå¾—ä¸å¥½ï¼Œå¯ä»¥è¯´å‡ ä¹ä¸èƒ½ç”¨ï¼Œé™¤äº†èƒ½è¿œç¨‹å¤‡ä»½ç…§ç‰‡å¤–ï¼Œè¿œç¨‹è®¿é—®ç…§ç‰‡éå¸¸æ…¢ï¼Œè€Œä¸”æ²¡æœ‰è¿œç¨‹æ’­æ”¾è§†é¢‘åŠŸèƒ½ã€‚å› ä¸ºè¿™ä¸€å—æˆ‘ä»¬é‡‡å–çš„æŠ€æœ¯æœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼Œè€Œä¸”æœ¬èº«ä¹Ÿæ²¡æœ‰åšå¥½ã€‚ç©å®¢äº‘åœ¨è¿™æ–¹é¢é‡‡ç”¨äº†æ–°çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œè€Œä¸”ä»å›ºä»¶ç«¯ï¼ŒæœåŠ¡å™¨ï¼Œåˆ°APPç«¯ï¼Œå¤§å®¶éƒ½éå¸¸é‡è§†è¿™å—çš„æŠ€æœ¯ï¼Œæ‰€æœ‰æœ€ç»ˆåšå‡ºæ¥çš„äº§å“ä½“éªŒè¿˜æ˜¯æŒºä¸é”™çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿…é›·ä¸‹è½½å®è¿™ä¸ªäº§å“ä¹Ÿæ˜¯èŠ±äº†å¾ˆå¤šæ—¶é—´å’ŒäººåŠ›çš„ã€‚è¿™ä¸ªäº§å“å…¶å®ä¹Ÿä¸æ˜¯ä»é›¶å¼€å§‹åšçš„ï¼Œå®ƒæ—©æœŸçš„æ—¶å€™ä¹Ÿä¸å«ä¸‹è½½å®ï¼Œæ˜¯å«æ—¶å…‰æœºï¼Œåæ¥æ‰æ”¹äº†åå­—å«ä¸‹è½½å®ã€‚è€Œæ—¶å…‰æœºçš„å‰èº«æ˜¯å¦å¤–ä¸€ä¸ªé¡¹ç›®ï¼Œå«è¶…çº§ç¡¬ç›˜ã€‚è¿™ä¸ªå°±æ˜¯ä¸‹è½½å®çš„å‰èº«äº†ï¼Œè¿™æ˜¯åé¢æˆ‘è¦è®²çš„ã€‚å¯¹äºä¸‹è½½å®è¿™å’Œç©å®¢äº‘è¿™ä¸¤ä¸ªäº§å“ï¼Œæˆ‘çœŸå€¾æ³¨äº†æˆ‘å¾ˆå¤šå¿ƒè¡€ï¼Œæˆ‘æ˜¯å½“æ—¶éƒ½æ˜¯çœŸå¿ƒæƒ³æŠŠäº§å“åšæˆåŠŸã€‚ä½†æ˜¯ä¸‹è½½å®è¿™ä¸ªé¡¹ç›®å‘½é€”å¤šèˆ›ã€‚ä»å¼€å§‹æ—¶å…‰æœºè¿™ä¸ªå°å°çš„é¡¹ç›®ï¼Œå‘å±•åˆ°ä¸‹è½½å®ä¸€ä¸ªå‡ åäººçš„å›¢é˜Ÿï¼Œå†åˆ°åé¢æˆç«‹äº†ä¸€ä¸ª100å¤šäººçš„éƒ¨é—¨ï¼Œå†åˆ°åé¢å¹¶å…¥ç½‘å¿ƒç§‘æŠ€ï¼Œåœæ‰ä¸‹è½½å®é¡¹ç›®ï¼Œå†æˆç«‹ç©å®¢äº‘é¡¹ç›®ï¼Œè¿™å…¶ä¸­ä¸å°‘äº‹ä»¤äººæ„Ÿæ…¨ã€‚å…¶å®æˆ‘ä»¬åœ¨åšä¸‹è½½å®æœŸé—´ï¼Œå°±æœ‰ç”¨æˆ·å‘¼åä¸‹è½½å®å’Œèµšé’±å®åˆå¹¶ï¼Œæ²¡æƒ³åˆ°æœ€åçœŸçš„åˆå¹¶äº†ã€‚ã€‚ã€‚ä¸è¿‡è¿™ä¹ŸæŒºå¥½ï¼Œå› ä¸ºç©å®¢äº‘æœ€ç»ˆæˆåŠŸäº†ï¼Œåªæ˜¯æœ€åˆçš„æ•…äº‹æ²¡æœ‰å¤šå°‘äººçŸ¥é“ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸‹è½½å®å‰èº«ï¼šè¶…çº§ç¡¬ç›˜&lt;/h2&gt;
&lt;p&gt;çŸ¥é“ä¸‹è½½å®å‰èº«æ˜¯è¶…çº§ç¡¬ç›˜è¿™ä¸ªé¡¹ç›®çš„äººå¹¶ä¸å¤šï¼Œå¦‚æœé™å®šåœ¨ç©å®¢äº‘å›¢ï¼Œé‚£å°±å¯¥å¯¥æ— å‡ äº†ã€‚ä¸è¿‡è¿™ç¡®å®æ˜¯æŒºä¹…è¿œçš„äº‹æƒ…äº†ã€‚åœ¨2014å¹´å¹´åˆï¼Œè¿…é›·åœ¨åšäº‘å­˜å‚¨æ–¹é¢çš„é¡¹ç›®ï¼Œè¿˜æœ‰ä¸€ä¸ªä¸“é—¨çš„éƒ¨é—¨å°±å«äº‘å­˜å‚¨ä¸ç»ˆç«¯äº‹ä¸šéƒ¨ï¼Œæˆ‘å°±æ˜¯é‚£ä¸ªæ—¶å€™é‡æ–°å›åˆ°è¿…é›·çš„ã€‚ä¸€å¼€å§‹æˆ‘å¹¶ä¸æ˜¯åšè¶…çº§ç¡¬ç›˜è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘åªç»™ä»–ä»¬æä¾›å°è£…å¥½çš„ä¸šåŠ¡SDKï¼Œåæ¥ä»–ä»¬å®åœ¨ä¸å¤Ÿäººæ‰‹ï¼Œæˆ‘å°±ç›´æ¥åŠ å…¥ä»–ä»¬ä¸€èµ·å¼€å‘ã€‚è¶…çº§ç¡¬ç›˜è¿™ä¸ªäº§å“ä¸»è¦åŠŸèƒ½å°±æ˜¯ç¡¬ç›˜+æ— çº¿WiFi+è¿…é›·ç½‘ç›˜çš„ç»“åˆå“ã€‚è¿™ä¸ªç¡¬ä»¶æœ¬èº«é›†æˆäº†ä¸€ä¸ªç³»ç»Ÿï¼Œå†…ç½®ä¸€ä¸ªç¡¬ç›˜ï¼Œä¸€ä¸ªWiFiå‘å°„å™¨å’Œæ¥æ”¶å™¨ã€‚ä½¿ç”¨å‰éœ€å…ˆå°†è¿™ä¸ªç¡¬ä»¶è¿ä¸Šä¸€ä¸ªWiFiï¼Œç„¶åå®ƒè‡ªå·±ä¹Ÿä¼šå‘å°„ä¸€ä¸ªWiFiï¼Œæ‰‹æœºAPPç«¯æ˜¯è¿ä¸Šç›’å­å‘å°„çš„WiFiæ¥è®¿é—®å’Œç®¡ç†è¿™ä¸ªç¡¬ä»¶ã€‚è¿™ä¸ªæµç¨‹å¾ˆå¤æ‚ï¼Œç¡¬ä»¶ç›’å­æœ¬èº«éœ€è¦æ¥å…¥ä¸€ä¸ªWiFiï¼Œè‡ªå·±åˆå‘å°„ä¸€ä¸ªWiFiï¼Œè¿™å¯¼è‡´å®ƒçš„ç½‘ç»œå¾ˆä¸ç¨³å®šã€‚è¿™äº›æ“ä½œéƒ½éœ€è¦APPç«¯æ“ä½œè¿›è¡Œï¼Œå¾ˆéš¾ç”¨ã€‚å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ç›’å­ä¸Šçš„ç³»ç»Ÿæ˜¯å¤–åŒ…ç»™åˆ«äººå¼€å‘çš„ï¼Œä¹Ÿå¾ˆä¸ç¨³å®šã€‚APPç«¯è¿˜åŠ å…¥äº†ä¸€ä¸ªè¿…é›·ç½‘ç›˜åŠŸèƒ½ï¼Œåšæˆäº†ä¸€ä¸ªå¤§è€Œå…¨çš„APPã€‚ç„¶åæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½åšçš„ä¸å¥½ï¼Œæ‰€ä»¥æˆäº†ä¸€ä¸ªçƒ‚äº§å“ï¼Œå¾ˆå¤šä¸œè¥¿ä¸å¯æ§ã€‚äº§å“å¾ˆå¿«å°±å¤±è´¥äº†ï¼Œè¿éƒ¨é—¨ä¹Ÿè§£æ•£äº†ã€‚é‚£ä¸ªæ—¶å€™æˆ‘è®°å¾—åˆšå¥½æœ‰ä¸ªå«â€œæ— ç§˜â€çš„åŒ¿ååæ§½å…¬å¸çš„APPï¼Œæˆ‘ä»¬å…¬å¸çš„äººå°±åœ¨ä¸Šé¢åæ§½ï¼Œå…¨éƒ¨é—¨æœ€ä¼˜ç§€çš„äººéƒ½åœ¨åšè¿™ä¸ªäº§å“ï¼Œå´åšå¾—è¿™ä¹ˆçƒ‚ã€‚å…¶å®è¿™ä¹Ÿç®¡ä¸å¾—æˆ‘ä»¬ï¼Œè¿™é‡Œé¢æœ‰å‡ ä¸ªæ·±åˆ»çš„æ•™è®­ï¼Œä¹Ÿæ˜¯ä¸ºåæ¥æˆ‘ä»¬åšä¸‹è½½å®æä¾›äº†å®è´µçš„ç»éªŒçš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¡¬ä»¶é‡Œé¢çš„å›ºä»¶å¿…é¡»æ˜¯è¦æˆ‘ä»¬è‡ªå·±åš &lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶æœ€å¥½æ˜¯æœ‰çº¿è¿æ¥è·¯ç”±å™¨çš„ï¼Œæ— çº¿è¿æ¥è·¯ç”±å™¨çš„ç½‘ç»œå¾ˆå®¹æ˜“ä¸ç¨³å®š&lt;/li&gt;
&lt;li&gt;ä¸€å¼€å§‹ä¸èƒ½æŠŠæˆ˜çº¿é“ºå¾—å¤ªå¼€ï¼Œåº”è¯¥å…ˆä¸“æ³¨ä¸€äº›æœ€ä¸»è¦åŠŸèƒ½æŠŠä½“éªŒåšå¥½&lt;/li&gt;
&lt;li&gt;ä¸èƒ½åšå¤§è€Œå…¨çš„äº§å“&lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶ä¸èƒ½å®šä»·å¤ªé«˜ï¼Œè¦èŠ‚çº¦æˆæœ¬ï¼ˆåé¢çš„äº§å“å°±æŠŠå†…ç½®ç¡¬ç›˜æ‹¿æ‰äº†ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åé¢æˆ‘ä»¬åšä¸‹è½½å®ï¼ˆæ—¶å…‰æœºï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ˜¯å¸å–è¿™äº›æ•™è®­ï¼Œæ‰æŠŠä¸‹è½½å®åšæˆåŠŸçš„ã€‚å› ä¸ºä¸‹è½½å®åšå¾—è¿˜ä¸é”™ï¼Œç”¨æˆ·å‘¼åä¸‹è½½å®å’Œèµšé’±å®åˆå¹¶ï¼Œåé¢æ‰æœ‰äº†ç©å®¢äº‘ï¼Œè€Œå®é™…ä¸Šæœ€åˆçš„ç©å®¢äº‘å›¢é˜Ÿä¹Ÿä¸»è¦æœ‰ä¸‹è½½å®å›¢é˜Ÿç»„æˆã€‚ä¸‹è½½å®è¿™ä¸ªé¡¹ç›®å‰åæ€»å…±åŠ èµ·æ¥ï¼Œæ—¶é—´ä¹Ÿè¶…è¿‡äº†ä¸€å¹´ã€‚æˆ‘æœ¬èº«ä¹ŸæŠŠä¸‹è½½å®æ‰€ç§¯ç´¯çš„ç»éªŒï¼Œå…¨éƒ¨éƒ½åº”ç”¨åœ¨äº†ç©å®¢äº‘ï¼Œå¹¶ä¸”å¾ˆå¤šéƒ½æ˜¯æ”¹è¿›äº†ã€‚çœ‹åˆ°ç©å®¢äº‘çš„æˆåŠŸæˆ‘è‡ªå·±çœŸå¿ƒçš„æ„Ÿåˆ°å¼€å¿ƒã€‚&lt;/p&gt;
&lt;h1&gt;æ€»ç»“&lt;/h1&gt;
&lt;p&gt;è¿…é›·è¿™äº›å¹´çœŸçš„åšäº†å¾ˆå¤šè½¬å‹çš„å°è¯•ï¼Œä½†æ˜¯æ²¡æœ‰å¤šå°‘æˆåŠŸçš„æ¡ˆä¾‹ã€‚è¿…é›·æ›¾ç»åœ¨PCæ—¶ä»£é£å…‰æ— é™ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£å´è·Ÿä¸ä¸Šæ­¥ä¼ã€‚ä½†æ˜¯è¿™äº›å¹´åšäº†å°è¯•ä¹Ÿæœ‰äº†è½¬æœºã€‚ä»è‚¡ä»·çš„ååº”ä¹Ÿå¯ä»¥çœ‹å‡ºã€‚ç©å®¢äº‘çš„æˆåŠŸä¹Ÿæ¥ä¹‹ä¸æ˜“ï¼Œç©å®¢å¸ï¼ˆé“¾å…‹ï¼‰ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‚¬åŒ–å‰‚ï¼ŒæŠŠè¿…é›·æ¿€æ´»äº†èµ·æ¥ã€‚è™½ç„¶è¿™äº›å·²ç»è·Ÿæˆ‘æ²¡æœ‰å¤ªå¤šçš„å…³ç³»äº†ï¼Œæˆ‘è¿˜æ˜¯å¸Œæœ›å¥¹è¶Šæ¥è¶Šå¥½ï¼Œæ¯•ç«Ÿè‡ªå·±æ›¾ç»åŠªåŠ›è¿‡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="è¿…é›· ç½‘å¿ƒ è¶…çº§ç¡¬ç›˜ è¿…é›·ä¸‹è½½å® èµšé’±å® ç©å®¢äº‘"></category></entry><entry><title>æ‰‹æœºå±€åŸŸç½‘å†…ï¼ˆåŒ…æ‹¬çƒ­ç‚¹ï¼‰å‘ç°å’Œç»„ç½‘é€šè®¯å®ç°</title><link href="http://szuwest.github.io/shou-ji-ju-yu-wang-nei-bao-gua-re-dian-fa-xian-he-zu-wang-tong-xun-shi-xian.html" rel="alternate"></link><updated>2017-11-05T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-11-05:shou-ji-ju-yu-wang-nei-bao-gua-re-dian-fa-xian-he-zu-wang-tong-xun-shi-xian.html</id><summary type="html">&lt;h1&gt;æ‰‹æœºå±€åŸŸç½‘å†…ï¼ˆåŒ…æ‹¬çƒ­ç‚¹ï¼‰ç»„ç½‘é€šè®¯å®ç°&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘åœ¨åšä¸€ä¸ªåº”ç”¨ï¼Œéœ€è¦å¤šä¸ªæ‰‹æœºä¸€èµ·ç»„ç½‘ï¼Œä¸€ä¸ªå……å½“ä¸»æœºï¼Œå…¶ä»–å¤šä¸ªæ‰‹æœºå……å½“ä»æœºã€‚ä¸»æœºè·Ÿæ¯ä¸ªä»æœºä¹‹é—´å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œå‘é€æ¶ˆæ¯å’Œæ–‡ä»¶ã€‚è¿™ä¸å°±æ˜¯ä¸ªCSï¼ˆclient-serverï¼‰æ¨¡å¼å—ï¼Œåªä¸è¿‡serverä¸æ˜¯åœ¨äº‘ç«¯ï¼Œåªæ˜¯åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘çš„æ‰‹æœºä¸Šç½¢äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œé¢æœ‰ä¸¤ä¸ªå…³é”®çš„åœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯å¦‚ä½•å‘ç°åŒä¸€ä¸ªå±€åŸŸç½‘å†…çš„æ‰‹æœºå®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬è‡ªå»ºçš„çƒ­ç‚¹ï¼Œä¸€ä¸ªæ˜¯çŸ¥é“å„ä¸ªæ‰‹æœºçš„Ipåœ°å€åï¼Œç”¨ä»€ä¹ˆæ–¹å¼æ¥å»ºç«‹é€šä¿¡ã€‚è¿™é‡Œè¯´ä¸€ä¸‹çƒ­ç‚¹ï¼Œæ‰‹æœºå¼€å¯çƒ­ç‚¹ä¹‹åï¼Œåˆ«çš„æ‰‹æœºè¿ä¸Šè¿™ä¸ªç‰¹ç‚¹ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå°å‹å±€åŸŸç½‘ï¼Œåªä¸è¿‡è¿™ä¸ªå±€åŸŸç½‘ç¨å¾®æœ‰ç‚¹ä¸ä¸€æ ·ï¼ˆIpåœ°å€ï¼‰ï¼Œå…¶ä»–çš„éƒ½ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h2&gt;å±€åŸŸç½‘å‘ç°&lt;/h2&gt;
&lt;p&gt;å±€åŸŸç½‘å‘ç°ä¸»è¦éš¾ç‚¹åœ¨äºå¦‚ä½•å¾—åˆ°å¯¹æ–¹Ipåœ°å€ã€‚æˆ‘ä»¬çš„åšæ³•æ˜¯å‘é€UDPåŒ…ã€‚UDPåè®®æ˜¯æ— é¢å‘è¿æ¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦åƒTCPåè®®é‚£æ ·æå‰å»ºç«‹è¿æ¥ã€‚æ‰€ä»¥æˆ‘ä»¬å‘å±€åŸŸç½‘å†…æŸä¸€ä¸ªç‰¹å®šçš„ç«¯å£å¹¿æ’­UDPåŒ…ï¼Œæ¥æ”¶åˆ°è¿™ä¸ªåŒ…çš„äººï¼Œå‘é€å›åŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“å½¼æ­¤çš„å­˜åœ¨å’Œåœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå…³é”®åœ°æ–¹æ˜¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ‰äººä¸€ç›´åœ¨ç›‘å¬ä¸€ä¸ªç«¯å£Xï¼Œæ¥æ”¶UDPåŒ…&lt;/li&gt;
&lt;li&gt;æœ‰äººåœ¨ä¸€ç›´å¾€è¿™ä¸ªç«¯å£Xå‘é€UDPåŒ…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›‘å¬ç«¯çš„äººæ”¶åˆ°äº†UDPåŒ…åï¼Œå°±çŸ¥é“äº†å‘é€è€…çš„Ipåœ°å€ã€‚ä½†è¿™æ—¶å‘é€è€…æ˜¯ä¸çŸ¥é“æ¥æ”¶è€…çš„ï¼Œå› ä¸ºè¿™æ˜¯UDPåŒ…ï¼Œæ— è¿æ¥çš„çŠ¶æ€çš„ã€‚é‚£æ€ä¹ˆåšæ‰è®©å‘é€è€…ä¹ŸçŸ¥é“äº†ã€‚å…¶å®åªè¦å‘è¿‡æ¥å†åšä¸€æ¬¡å°±è¡Œã€‚å‘é€è€…åŒæ—¶ä¹Ÿæ˜¯ç›‘å¬è€…ï¼Œè¿™å°±è¡Œäº†ã€‚ä¸è¿‡å‘é€è€…Aç›‘å¬çš„æ˜¯å¦ä¸€ä¸ªç«¯å£Yï¼Œæ¥æ”¶è€…Bæ¥æ”¶åˆ°åŒ…åï¼Œå‘é€ä¸€ä¸ªYç«¯å£çš„åŒ…ç»™Aå°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“èµ·æ¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸»æœºç›‘å¬ç«¯å£Xï¼Œä¸€ç›´å‘é€Yç«¯å£çš„å¹¿æ’­UDPåŒ…&lt;/li&gt;
&lt;li&gt;ä»æœºç›‘å¬ç«¯å£Yï¼Œæ¥æ”¶åˆ°UDPåŒ…åï¼Œå¾€Xç«¯å£å‘é€UDPåŒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ ·å°±èƒ½åŒæ–¹çŸ¥é“å¯¹æ–¹çš„Ipåœ°å€äº†ã€‚å‘é€çš„æ•°æ®åŒ…ä¹Ÿå¯ä»¥å¾ˆè®²ç©¶ï¼Œä¾‹å¦‚å‘é€jsonæ•°æ®ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›å­—æ®µï¼Œå½“æ¥æ”¶è€…æ”¶åˆ°ä¹‹åï¼Œè§£ææ•°æ®ï¼Œå¦‚æœä¸ç¬¦åˆè§„åˆ™çš„æ•°æ®åŒ…ç›´æ¥ä¸¢å¼ƒæ‰ã€‚è¿™å°±å¯ä»¥æ”¯æ’‘ä¸€äº›ä¸šåŠ¡é€»è¾‘äº†ã€‚&lt;/p&gt;
&lt;h3&gt;å¹¿æ’­åœ°å€&lt;/h3&gt;
&lt;p&gt;å¹¿æ’­åœ°å€æ˜¯ä»€ä¹ˆå‘¢ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨255.255.255.255ï¼Œä¹Ÿæœ‰ä¸ç”¨å¹¿æ’­ç”¨ç»„æ’­åœ°å€ä¾‹å¦‚192.168.43.255.è¿™ä¸ªç»„æ’­åœ°å€å°±æ˜¯çƒ­ç‚¹çš„æ—¶å€™é‡‡ç”¨çš„åœ°å€ï¼Œå› ä¸ºå¼€å¯çƒ­ç‚¹ä¹‹åï¼Œé‚£ä¸ªæ‰‹æœºçš„IPåœ°å€æ˜¯å›ºå®šçš„ï¼Œæ˜¯192.168.43.1å…¶ä»–ç«¯çš„æ‰‹æœºéƒ½æ˜¯è¿™ä¸ªåœ°å€åé¢çš„192.168.43.Xã€‚å¦‚æœå¹¿æ’­å‘é€ä¸äº†æˆ–è€…è¢«ç¦æ‰äº†ï¼Ÿä¸€èˆ¬æ¥è¯´è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å­ç½‘æ©ç é‡Œé¢çš„æ‰€æœ‰Ipåœ°å€éå†å‘ä¸€éï¼Œè¿™ä¹Ÿæ˜¯åŠæ³•ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸€å¯¹å¤šçš„é€šä¿¡&lt;/h2&gt;
&lt;p&gt;å½“çŸ¥é“å¯¹æ–¹çš„Ipåœ°å€åï¼Œä¸€åˆ‡éƒ½å¥½åŠäº†ã€‚ç«¯å¯¹ç«¯çš„é€šä¿¡æœ‰æŒºå¤šæ–¹æ³•ï¼Œä¸€å¯¹å¤šçš„é€šä¿¡ä¹Ÿä¸å°‘ã€‚å¦‚æœè¦åŒæ—¶è€ƒè™‘åœ¨Androidå’ŒiOSéƒ½å¥½å®ç°çš„è¯ï¼Œå…¶å®å¯é€‰çš„ä¸æ˜¯å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;æœ€ä¿å®ˆçš„æ–¹æ³•å°±æ˜¯ç›´æ¥é‡‡ç”¨TCPåè®®å»ºç«‹sockæ¥é€šä¿¡ã€‚åœ¨iOSç«¯å’ŒAndroidç«¯éƒ½æœ‰å¾ˆå¥½çš„socketåº“ï¼Œä¸ç”¨æ‹…å¿ƒèƒ½ä¸èƒ½å®ç°å’Œå…¼å®¹æ€§é—®é¢˜ã€‚è¿™ä¸ªæ–¹æ¡ˆæŒºå¥½ä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜æ˜¾ï¼Œå› ä¸ºsocké€šä¿¡åªå®šä¹‰äº†æœ€åŸºç¡€çš„ï¼Œæ¶ˆæ¯æ ¼å¼è¦å®Œå…¨è‡ªå·±å®šåˆ¶å’Œå®ç°ï¼Œè¿˜å¤šå¿ƒè·³ä¹‹ç±»çš„ï¼Œè¿™é‡Œçš„å·¥ä½œé‡è¿˜ä¸å°‘ã€‚ä¹Ÿè®¸è¿˜æœ‰å°‘çš„æ¡†æ¶å®ç°äº†è¿™äº›ï¼Œä½†æ˜¯è¦åŒæ—¶åœ¨iOSç«¯å’Œå®‰å“ç«¯éƒ½æœ‰å®ç°ï¼Œæˆ‘è¿˜çœŸä¸çŸ¥é“æœ‰å“ªäº›ã€‚è€Œä¸”æˆ‘çš„æƒ…æ™¯é‡Œæœ€é‡è¦çš„æ˜¯æœ‰ä¸€ä¸ªä¸»æœºåœ¨é‡Œé¢ï¼Œæ‰€æœ‰çš„ä»æœºéƒ½è·Ÿä¸»æœºé€šä¿¡ï¼Œæ‰€ä»¥å¿…é¡»è¯´è¦æœ‰ä¸€ä¸ªserverã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘åæ¥é‡‡ç”¨çš„çš„WebSocketæ¥å®ç°ã€‚WebSocketåœ¨Androidä¸Šæœ‰å¾ˆå¤šåº“ï¼Œä¸è¿‡å¤§å¤šæ•°éƒ½æ˜¯clientç«¯çš„,åŒ…æ‹¬äº†serverç«¯çš„æœ‰AndroidAsync,Java-Websocketã€‚æˆ‘é‡‡ç”¨çš„æ˜¯AndroidAysncã€‚è€ŒiOSç«¯å¯é€‰æ‹©çš„å°±æ›´å°‘äº†ã€‚æˆ‘åœ¨githubä¸Šæ‰¾äº†å¾ˆå¤šåº“ï¼Œéƒ½æ˜¯åªæ”¯æŒclientçš„ï¼Œæœ‰æ”¯æŒserverçš„éƒ½æ˜¯å¾ˆä¹…å¾ˆè€çš„é¡¹ç›®ï¼Œæ‰¾åˆ°ä¸€ä¸ªé‡‡ç”¨swiftå†™çš„å«Telegraphåº“ï¼Œè¯•ç”¨äº†èµ·æ¥ï¼Œè¿™ä¸ªåº“å®ç°å¾—ä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰æŒºå¤šé—®é¢˜ï¼Œä¸å°½å¦‚æ„ã€‚æœ€ç»ˆç°åœ¨iOSç«¯åªæœ‰é‡‡ç”¨äº†Facebookçš„SocketRocketæ¥ä½œä¸ºclientç«¯ï¼Œserverç«¯æš‚æ—¶æ²¡æœ‰å¥½çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨WebSocketæ¥å®ç°åŒå‘é€šä¿¡æœ‰ä¸å°‘å¥½å¤„ï¼Œä¾‹å¦‚å®ƒç›´æ¥æ”¯æŒå‘é€å­—ç¬¦ä¸²æ¶ˆæ¯ï¼ŒäºŒè¿›åˆ¶æ•°æ®ï¼ˆæ–‡ä»¶ï¼‰ï¼Œè¿˜æœ‰è¿æ¥ä¸Šå’Œæ–­å¼€éƒ½æœ‰ç›¸åº”çš„äº‹ä»¶ï¼Œè¿˜æœ‰ping-pongè¿™ç§å¿ƒè·³æœºåˆ¶ï¼Œæˆ‘è§‰å¾—æŒºå¥½çš„ã€‚iOSç«¯çš„WebSocket serveræš‚æ—¶æ²¡æœ‰æ‰¾åˆ°å¯é çš„ç¬¬ä¸‰æ–¹å®ç°ï¼Œæ¯”è¾ƒé—æ†¾ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è‡ªå·±åšäº†demoå·¥ç¨‹ï¼Œä¸Šä¼ åˆ°githubã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/szuwest/Recorder"&gt;Androidå±€åŸŸç½‘å‘ç°å’Œå»ºç«‹ä¸€å¯¹å¤šé€šä¿¡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/szuwest/SpeakinRecorder"&gt;iOSå±€åŸŸç½‘å‘ç°å’Œå»ºç«‹ä¸€å¯¹å¤šé€šä¿¡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;åè®°&lt;/h2&gt;
&lt;p&gt;åæ¥æˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªè¿˜ç®—æ¯”è¾ƒå¯é çš„åŒ…å«serverçš„iOSçš„WebSocketåº“ï¼š&lt;strong&gt;PocketSocket&lt;/strong&gt;ã€‚æˆ‘å·²ç»ä½¿ç”¨èµ·æ¥äº†ï¼Œæ•´ä½“æ¯”è¾ƒç¨³å®šï¼Œè™½ç„¶æœ‰äº›è¿˜æ˜¯ä¸æ˜¯å¾ˆå®Œå–„ï¼Œæ¯”èµ·å…¶ä»–çš„ï¼Œå·²ç»å¾ˆå¥½äº†ã€‚å”¯ä¸€æ¯”è¾ƒå¤§çš„é—®é¢˜æ˜¯å®ƒä¸æ”¯æŒè®¾ç½®è¿æ¥è¶…æ—¶ï¼Œéœ€è¦è‡ªå·±è®¾ç½®ä¸€ä¸ªå¿ƒè·³æ¥è‡ªå·±æ£€æµ‹ã€‚æ€»ä½“æ¥è¯´ä¹Ÿä¸é”™äº†.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/zwopple/PocketSocket"&gt;PocketSocket&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="å±€åŸŸç½‘ çƒ­ç‚¹ é€šè®¯ å¹¿æ’­ WebSocket"></category></entry><entry><title>å£°çº¹è¯†åˆ«ä¹‹Androidæ‰‹æœºå½•éŸ³é‡‡é›†æ¢è®¨</title><link href="http://szuwest.github.io/sheng-wen-shi-bie-zhi-androidshou-ji-lu-yin-cai-ji-tan-tao.html" rel="alternate"></link><updated>2017-10-08T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-10-08:sheng-wen-shi-bie-zhi-androidshou-ji-lu-yin-cai-ji-tan-tao.html</id><summary type="html">&lt;h1&gt;å£°çº¹è¯†åˆ«ä¹‹Androidæ‰‹æœºå½•éŸ³é‡‡é›†æ¢è®¨&lt;/h1&gt;
&lt;p&gt;å£°çº¹è¯†åˆ«æ˜¯äººå·¥æ™ºèƒ½è¯­éŸ³æ–¹å‘çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ã€‚æœ€è¿‘äººå·¥æ™ºèƒ½çš„å…´èµ·ä¹Ÿå¸¦åŠ¨äº†å£°çº¹è¯†åˆ«è¿™ä¸€é¢†åŸŸçš„å‘å±•ã€‚å£°çº¹è¯†åˆ«ä¹Ÿè¶Šæ¥è¶Šå‡†ç¡®ã€‚ä¸è¿‡åœ¨å£°éŸ³é‡‡é›†æ–¹é¢ï¼Œç‰¹åˆ«æ˜¯æ‰‹æœºç«¯çš„å£°éŸ³é‡‡é›†ï¼Œæ˜¯ä¸€ä¸ªå¾ˆè®²ç©¶çš„é—®é¢˜ã€‚æˆ‘åŠ å…¥äººå·¥æ™ºèƒ½å£°çº¹è¯†åˆ«å…¬å¸ä¹Ÿæœ‰ä¸¤ä¸ªå¤šæœˆäº†ï¼Œå¯¹æ‰‹æœºç«¯çš„è¯­éŸ³é‡‡é›†ä¹Ÿæœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œå‡†å¤‡æ•´ç†ä¸€ä¸‹åšæˆæ–‡ç« ï¼Œè·Ÿå¤§å®¶æ¢è®¨ã€‚ä»Šå¤©é‡ç‚¹è¯´Androidæ‰‹æœºçš„å½•éŸ³é‡‡é›†æ–¹é¢çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;h2&gt;è¯­éŸ³é‡‡é›†çš„ä¸€äº›åŸºç¡€æŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆè¦ææ¸…æ¥šçš„ä¸€ç‚¹æ˜¯æˆ‘ä»¬çš„äººå£°æ˜¯ä¸€äº›å£°æ³¢ï¼Œæ˜¯æ¨¡æ‹Ÿä¿¡å·ï¼Œæˆ‘ä»¬è®¡ç®—æœºçš„é‡‡é›†æ˜¯å°†è¿™äº›æ¨¡æ‹Ÿä¿¡å·è½¬åŒ–ä¸ºæ•°å­—ä¿¡å·å­˜å‚¨èµ·æ¥ã€‚æˆ‘ä»¬æ’­æ”¾è¯­éŸ³æ–‡ä»¶çš„æ—¶å€™ï¼Œæ˜¯å°†æ•°å­—ä¿¡å·è½¬åŒ–ä¸ºæ¨¡æ‹Ÿä¿¡å·ã€‚è¯´å®è¯ï¼Œè¿™ä¸€å—çš„çŸ¥è¯†æˆ‘å¤§å­¦ä¹Ÿå­¦å¾—ä¸å¥½ï¼Œæ¨¡ç”µæˆ‘ä»¬è½¯ä»¶å·¥ç¨‹çš„å­¦ç”Ÿæ²¡æœ‰ä¸“é—¨çš„è¯¾ç¨‹ï¼Œæ•°ç”µå€’æ˜¯æœ‰ã€‚ä¸è¿‡æ•°ç”µæ¨¡ç”µçš„è½¬åŒ–è¿™ä¸ªæ¦‚å¿µè¿™å€’ä¸éš¾ç†è§£ã€‚è¿™é‡Œé¢å°±æ¶‰åŠåˆ°äº†é‡‡æ ·ç‡å’Œé‡‡æ ·ä½æ•°è¿™ä¸¤ä¸ªæŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡æ ·ç‡ï¼Œæˆ–è€…å«é‡‡æ ·é¢‘ç‡ï¼ŒæŒ‡æ¯ç§’é’Ÿå–å¾—å£°éŸ³æ ·æœ¬çš„æ¬¡æ•°ã€‚é‡‡æ ·ç‡è¶Šé«˜ï¼Œæ•°æ®è¶Šç²¾ç¡®ã€‚æˆ‘ä»¬ä¹Ÿéœ€è¦äº†è§£å¸¸ç”¨çš„é‡‡æ ·ç‡æ˜¯å¤šå°‘ï¼š8k(8000ï¼‰ï¼Œ16k, 44.1k,48kã€‚8kæ˜¯ç”µè¯æ‰€ç”¨çš„é‡‡æ ·ç‡ï¼Œå¯¹äºæˆ‘ä»¬äººè¯´çš„å£°éŸ³çš„é¢‘ç‡ï¼ŒåŸºæœ¬åœ¨è¿™ä¸ªé‡‡æ ·ç‡ä¹‹å†…ã€‚æ‰€ä»¥ç”µè¯å°±æ‰é‡‡ç”¨è¿™ä¸ªé¢‘ç‡é‡‡æ ·ã€‚48ké‡‡æ ·ç‡æ˜¯CDï¼ŒDVDæ‰€é‡‡ç”¨çš„ã€‚è¶…è¿‡è¿™ä¸ªé¢‘ç‡äººè€³æ˜¯åˆ†è¾¨ä¸å‡ºæ¥çš„äº†ã€‚&lt;/li&gt;
&lt;li&gt;é‡‡æ ·ä½æ•°ï¼Œè¯´çš„æ˜¯æ¯ä¸ªé‡‡æ ·æ•°æ®å çš„ä½æ•°ã€‚æ¯ä¸ªé‡‡æ ·æ•°æ®è®°å½•çš„æ˜¯æŒ¯å¹…, é‡‡æ ·ç²¾åº¦å–å†³äºé‡‡æ ·ä½æ•°çš„å¤§å°ã€‚å¸¸ç”¨çš„ä½æ•°æ˜¯8ä½ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚è¿˜æœ‰16ä½æˆ–è€…32ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå£°é“æ•°ä¹Ÿå¾ˆé‡è¦ã€‚å£°é“æ•°ä¹Ÿå«é€šé“æ•°ï¼Œå³å£°éŸ³çš„é€šé“çš„æ•°ç›®ã€‚å¸¸è§çš„å•å£°é“å’Œç«‹ä½“å£°ï¼ˆåŒå£°é“ï¼‰ï¼Œç°åœ¨å‘å±•åˆ°äº†å››å£°ç¯ç»•ï¼ˆå››å£°é“ï¼‰å’Œ5.1å£°é“ã€‚æˆ‘ç°åœ¨æ¥è§¦åˆ°çš„åªæœ‰å•å£°é“å’ŒåŒå£°é“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•å£°é“.å•å£°é“çš„å£°éŸ³åªèƒ½ä½¿ç”¨ä¸€ä¸ªæ‰¬å£°å™¨å‘å£°ï¼Œæœ‰çš„ä¹Ÿå¤„ç†æˆä¸¤ä¸ªæ‰¬å£°å™¨è¾“å‡ºåŒä¸€ä¸ªå£°é“çš„å£°éŸ³ï¼Œå½“é€šè¿‡ä¸¤ä¸ªæ‰¬å£°å™¨å›æ”¾å•å£°é“ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°å£°éŸ³æ˜¯ä»ä¸¤ä¸ªéŸ³ç®±ä¸­é—´ä¼ é€’åˆ°æˆ‘ä»¬è€³æœµé‡Œçš„ï¼Œæ— æ³•åˆ¤æ–­å£°æºçš„å…·ä½“ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;åŒå£°é“ åŒå£°é“å°±æ˜¯æœ‰ä¸¤ä¸ªå£°éŸ³é€šé“ï¼Œå…¶åŸç†æ˜¯äººä»¬å¬åˆ°å£°éŸ³æ—¶å¯ä»¥æ ¹æ®å·¦è€³å’Œå³è€³å¯¹å£°éŸ³ç›¸ä½å·®æ¥åˆ¤æ–­å£°æºçš„å…·ä½“ä½ç½®ã€‚å£°éŸ³åœ¨å½•åˆ¶è¿‡ç¨‹ä¸­è¢«åˆ†é…åˆ°ä¸¤ä¸ªç‹¬ç«‹çš„å£°é“ï¼Œä»è€Œè¾¾åˆ°äº†å¾ˆå¥½çš„å£°éŸ³å®šä½æ•ˆæœã€‚è¿™ç§æŠ€æœ¯åœ¨éŸ³ä¹æ¬£èµä¸­æ˜¾å¾—å°¤ä¸ºæœ‰ç”¨ï¼Œå¬ä¼—å¯ä»¥æ¸…æ™°åœ°åˆ†è¾¨å‡ºå„ç§ä¹å™¨æ¥è‡ªçš„æ–¹å‘ï¼Œä»è€Œä½¿éŸ³ä¹æ›´å¯Œæƒ³è±¡åŠ›ï¼Œæ›´åŠ æ¥è¿‘äºä¸´åœºæ„Ÿå—ã€‚åŒå£°ç›®å‰æœ€å¸¸ç”¨é€”ä¸ä¸¤ä¸ªï¼Œåœ¨å¡æ‹‰OKä¸­ï¼Œä¸€ä¸ªæ˜¯å¥ä¹ï¼Œä¸€ä¸ªæ˜¯æ­Œæ‰‹çš„å£°éŸ³ï¼›åœ¨VCDä¸­,ä¸€ä¸ªæ˜¯æ™®é€šè¯é…éŸ³ï¼Œä¸€ä¸ªæ˜¯ç²¤è¯­é…éŸ³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‡‡æ ·ç‡ï¼Œé‡‡æ ·ä½æ•°ï¼Œå£°é“æ•°ï¼Œè¿™ä¸‰ä¸ªæ¦‚å¿µå¾ˆé‡è¦ï¼Œæ˜¯å£°éŸ³é‡‡é›†çš„åŸºç¡€ï¼Œä¸ç®¡ä»€ä¹ˆå¹³å°çš„å£°éŸ³é‡‡é›†ï¼Œéƒ½ä¼šæ¶‰åŠè¿™ä¸‰ä¸ªæŒ‡æ ‡ã€‚åœ¨æ‰‹æœºè®¾å¤‡ä¸­ï¼Œä¸ç®¡æ˜¯Androidè¿˜æ˜¯iPhoneæ‰‹æœºï¼Œä»–ä»¬éƒ½æœ‰è¿™ä¸ªä¸‰ä¸ªæ¦‚å¿µã€‚è€Œä¸”åœ¨æ‰‹æœºå¹³å°ä¸­ï¼Œé‡‡æ ·ç‡å¤§éƒ½æ•°é‡‡æ ·16k, 16bité‡‡æ ·ä½æ•°ã€‚è€Œåœ¨äººå·¥æ™ºèƒ½è¯­éŸ³æ–¹é¢ï¼ŒåŸºæœ¬éƒ½æ˜¯é‡‡æ ·å•å£°é“ã€‚è‡³äºä¸ºä»€ä¹ˆè¿™æ ·ï¼Œæˆ‘çŒœ8kçš„é‡‡æ ·ç‡è™½ç„¶å¯¹äººè¯´è¯è¶³å¤Ÿï¼Œä½†æ˜¯è¿˜æ˜¯ä¼šä¸¢æ‰ä¸€äº›äººè€³å¬ä¸è§ï¼Œä½†æ˜¯å¯¹å£°çº¹è¯†åˆ«åˆå¾ˆé‡è¦çš„ç»†èŠ‚ä¼šè¢«ä¸¢æ‰ã€‚æ‰€ä»¥é‡‡ç”¨16kçš„æ¯”è¾ƒåˆé€‚ã€‚ä¸ºä»€ä¹ˆä¸é‡‡ç”¨æ›´é«˜çš„é‡‡æ ·ç‡ï¼Œä¸€æ˜¯è¶Šé«˜çš„é‡‡æ ·ç‡æ‰€éœ€å­˜å‚¨ç©ºé—´è¶Šåˆ°ï¼Œå¦å¤–ä¼°è®¡æš‚æ—¶ä¹Ÿç”¨ä¸åˆ°è¿™ä¹ˆé«˜çš„é‡‡æ ·ç‡ã€‚è€Œé‡‡æ ·ä½æ•°8bitæ˜¾ç„¶å¤ªå°‘ï¼Œ16bitæ˜¯æ¯”è¾ƒåˆé€‚ï¼Œç°åœ¨çš„å¾ˆå¤šç®—æ³•ä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªä½æ•°æ¥åšçš„ã€‚è‡³äº32bitï¼Œæˆ‘æƒ³å½“ç„¶æ›´å¥½ï¼Œä½†æ˜¯å­˜å‚¨ç©ºé—´æ›´å¤§ï¼Œç®—æ³•ä¹Ÿè¦ä¿®æ”¹ï¼ˆæˆ‘çŒœçš„ï¼‰ã€‚è€Œå£°é“æ•°ï¼Œå¤šå£°é“è²Œä¼¼å¯¹å£°çº¹è¯†åˆ«æ²¡æœ‰å¤ªå¤§çš„å¸®åŠ©ï¼Œå¤šå£°é“è²Œä¼¼æ›´å¤šçš„ç”¨åœ¨éŸ³ä¹æ–¹é¢ã€‚&lt;/p&gt;
&lt;h2&gt;éŸ³é¢‘æ ¼å¼&lt;/h2&gt;
&lt;p&gt;è¯´å®Œå½•éŸ³é‡‡é›†çš„æŒ‡æ ‡ï¼Œéœ€è¦è¯´è¯´å£°éŸ³çš„å­˜å‚¨ã€‚é‚£äº›æŒ‡æ ‡å¯¹äºæˆ‘ä»¬å¤§éƒ¨åˆ†äººæ¥è¯´ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å¤šå°‘äº†è§£ï¼Œåè€ŒéŸ³é¢‘æ ¼å¼å¬å¾—æ¯”è¾ƒå¤šã€‚éŸ³é¢‘å­˜å‚¨ä¸‹æ¥æ˜¯æŒ‰ç…§ä¸€å®šçš„æ ¼å¼çš„ï¼Œä¾‹å¦‚æˆ‘ä»¬ç”¨çš„æœ€å¤šçš„MP3ã€‚å®é™…ä¸Šå®ƒæ˜¯ä¸€ç§ç»è¿‡ç¼–ç å‹ç¼©è¿‡çš„éŸ³é¢‘ã€‚ç»è¿‡å½•éŸ³è®¾å¤‡é‡‡é›†çš„å£°éŸ³ï¼Œæœªç»ç¼–ç ï¼Œæˆ‘ä»¬å«PCMæ•°æ®ã€‚æ€ä¹ˆç®—å®ƒçš„å­˜å‚¨ç©ºé—´å‘¢ï¼Œè¿™é‡Œæœ‰ä¸ªæ¦‚å¿µå«æ¯”ç‰¹ç‡ï¼Œä¹Ÿå«ç ç‡ï¼Œå°±æ˜¯ä¸€ç§’ä¸­æ•°æ®æœ‰å¤šå¤§ã€‚è®¡ç®—æ–¹å¼ä¹Ÿæ˜“ç†è§£ï¼šé‡‡æ ·ç‡xé‡‡æ ·ä½æ•°xå£°é“æ•°ï¼Œå•ä½å°±æ˜¯bit/ç§’ï¼Œå½“ç„¶æˆ‘ä»¬è¦ç”¨å­—èŠ‚æ•°æ¥è¡¨è¿°çš„è¯ï¼Œéœ€è¦å†é™¤ä»¥8.&lt;/p&gt;
&lt;p&gt;åœ¨æ‰‹æœºå¹³å°ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯(16000x16x1)/8 = 32000byte/s ~ 32KB/s.ä¸€åˆ†é’Ÿçš„åŸå§‹éŸ³é¢‘å¤§çº¦1.92MB,4åˆ†é’Ÿçš„å¤§çº¦7.68MBï¼Œè¿˜æ˜¯æŒºå¤§çš„ã€‚æ‰€ä»¥æˆ‘ä»¬çš„éŸ³ä¹æ ¼å¼ä¸€èˆ¬éƒ½è¦ç»è¿‡ç¼–ç å‹ç¼©ï¼Œä¾‹å¦‚MP3ï¼Œ4åˆ†é’Ÿçš„æ­Œæ›²å¤§æ¦‚ä¹Ÿå°±4MBå·¦å³ã€‚ä½†æ˜¯å¯¹äºäººå·¥æ™ºèƒ½çš„å£°çº¹è¯†åˆ«æ¥è®²ï¼Œæ˜¯ä¸èƒ½å‹ç¼©çš„ï¼Œå› ä¸ºå‹ç¼©å°±ä¼šå¤±çœŸï¼Œä¸€äº›é‡è¦çš„ç»†èŠ‚å°±ä¼šä¸¢å¤±ï¼Œè¿™äº›ç»†èŠ‚å¯¹å£°çº¹è¯†åˆ«å´å¾ˆé‡è¦ã€‚ä¸€èˆ¬æˆ‘ä»¬å°±ç›´æ¥ä½¿ç”¨pcmæ•°æ®æˆ–è€…WAVæ•°æ®ã€‚WAVæ ¼å¼çš„éŸ³é¢‘ï¼Œå°±æ˜¯åœ¨pcmæ•°æ®å‰é¢å†åŠ ä¸ªæ–‡ä»¶å¤´ã€‚æ–‡ä»¶å¤´é‡Œè¯´æ˜äº†é‡‡æ ·ç‡ï¼Œé‡‡æ ·ä½æ•°ï¼Œå£°é“æ•°å’Œæ–‡ä»¶å¤§å°ç­‰ä¿¡æ¯ï¼Œç„¶åå¾ˆå¤šéŸ³é¢‘æ’­æ”¾å™¨å°±èƒ½è¯»å–è¿™ä¸ªå¤´ç„¶åæ’­æ”¾éŸ³é¢‘ã€‚æ²¡æœ‰è¿™ä¸ªå¤´çš„è¯ï¼ŒéŸ³é¢‘æ’­æ”¾å™¨æ˜¯æ’­æ”¾ä¸äº†çš„ã€‚&lt;/p&gt;
&lt;h2&gt;Androidå½•éŸ³ç±»&lt;/h2&gt;
&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šå½•éŸ³ç›¸å…³çš„æŒ‡æ ‡æ¦‚å¿µï¼Œæ¥ä¸‹æ¥è¯´è¯´Androidä¸­æ˜¯æ€ä¹ˆå½•éŸ³çš„ï¼Œå°†è¿™äº›ç›¸å…³çš„æŒ‡æ ‡å¦‚ä½•å¯¹åº”çš„ã€‚&lt;/p&gt;
&lt;p&gt;Androidç³»ç»Ÿä¸­æä¾›äº†ä¸¤ä¸ªå½•éŸ³ç›¸å…³çš„ç±»ï¼Œä¸€ä¸ªæ˜¯MediaRecorderï¼Œä¸€ä¸ªæ˜¯AudioRecordã€‚MediaRecorderé›†æˆäº†å½•éŸ³ï¼Œç¼–ç ç­‰åŠŸèƒ½ï¼Œä½¿ç”¨å‰é…ç½®å¥½å‚æ•°ï¼Œç¼–ç æ ¼å¼ï¼ŒéŸ³é¢‘å­˜å‚¨è·¯å¾„ï¼Œå‘èµ·å¼€å§‹å½•éŸ³å’Œç»“æŸå½•éŸ³å‘½ä»¤ï¼Œæœ€ç»ˆä½ å°±ä¼šå¾—åˆ°ä¸€ä¸ªéŸ³é¢‘æ–‡ä»¶ã€‚AudioRecordéœ€è¦ä½¿ç”¨è€…è‡ªå·±å»é…ç½®å‚æ•°ï¼Œè®¾å®šéŸ³é¢‘å­˜å‚¨bufferå¤§å°ï¼Œç„¶åéœ€è¦è‡ªå·±è¯»å–æ•°æ®ï¼Œå¤„ç†å½•éŸ³æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;MediaRecorderè¾ƒç®€å•æ˜“ç”¨ï¼ŒéŸ³é¢‘å­˜å‚¨ç©ºé—´å°ï¼Œè€ŒAudioRecordéœ€è¦å¯¹éŸ³é¢‘å®æ—¶å¤„ç†ï¼Œå®ƒè¾“å‡ºçš„æ˜¯pcmè¯­éŸ³æ•°æ®ï¼Œç©ºé—´å ç”¨å¤§ã€‚å¯¹äºä¸€äº›åªéœ€è¦è®°å½•è¯­éŸ³çš„åº”ç”¨æ¥è¯´ï¼ŒMediaRecorderæ›´å¥½ç”¨ï¼Œè€Œå¯¹äºåƒå£°çº¹è¯†åˆ«è¿™äº›åº”ç”¨åœºæ™¯æ¥è¯´ï¼ŒAudioRecordæ˜¯å¿…ç„¶é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h2&gt;å½•éŸ³æº&lt;/h2&gt;
&lt;p&gt;Androidå½•éŸ³é‡‡é›†è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼Œå«å½•éŸ³æºaudioResourceã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹AudioRecordçš„æ„é€ å‡½æ•°ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="n"&gt;AudioRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;audioSource&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;sampleRateInHz&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;channelConfig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;audioFormat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;bufferSizeInBytes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¬¬ä¸€ä¸ªå‚æ•°audioSourceå°±æ˜¯å½•éŸ³æºï¼ŒsampleRateInHzæ˜¯é‡‡æ ·ç‡ï¼ŒchannelConfigæ˜¯å£°é“æ•°ï¼ŒaudioFormatæ˜¯é‡‡æ ·ä½æ•°ï¼ŒbufferSizeInBytesæ˜¯é‡‡æ ·æ—¶ç¼“å†²åŒºå¤§å°ï¼Œç¡¬ä»¶è®¾å¤‡é‡‡æ ·çš„æ•°æ®ä¼šå…ˆå­˜åˆ°è¿™ä¸ªç¼“å­˜åŒºï¼Œæˆ‘ä»¬ç¨‹åºä»è¿™ä¸ªç¼“å­˜åŒºè¯»å–æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;Androidç³»ç»Ÿä¸­è¿˜ä¸“é—¨ä¸ºè¿™ä¸ªaudioSourceå®šä¹‰ä¸å°‘çš„å¸¸é‡ã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬çš„å½•éŸ³æºä¸å°±æ˜¯éº¦å…‹é£å—ï¼Œä¸ºå•¥è¿˜ä¼šæœ‰è¿™ä¹ˆå¤šçš„å–å€¼ï¼Ÿ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cm"&gt;/** é»˜è®¤å£°éŸ³ **/&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;DEFAULT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

 &lt;span class="cm"&gt;/** éº¦å…‹é£å£°éŸ³ */&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;MIC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** é€šè¯ä¸Šè¡Œå£°éŸ³ */&lt;/span&gt;

 &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;VOICE_UPLINK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** é€šè¯ä¸‹è¡Œå£°éŸ³ */&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;VOICE_DOWNLINK&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** é€šè¯ä¸Šä¸‹è¡Œå£°éŸ³ */&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;VOICE_CALL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** æ ¹æ®æ‘„åƒå¤´è½¬å‘é€‰æ‹©éº¦å…‹é£*/&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;CAMCORDER&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

 &lt;span class="cm"&gt;/** å¯¹éº¦å…‹é£å£°éŸ³è¿›è¡Œå£°éŸ³è¯†åˆ«ï¼Œç„¶åè¿›è¡Œå½•åˆ¶ */&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;VOICE_RECOGNITION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** å¯¹éº¦å…‹é£ä¸­ç±»ä¼¼ipé€šè¯çš„äº¤æµå£°éŸ³è¿›è¡Œè¯†åˆ«ï¼Œé»˜è®¤ä¼šå¼€å¯å›å£°æ¶ˆé™¤å’Œè‡ªåŠ¨å¢ç›Š */&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;VOICE_COMMUNICATION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/** å½•åˆ¶ç³»ç»Ÿå†…ç½®å£°éŸ³ */&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;REMOTE_SUBMIX&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**å¯¹éº¦å…‹é£å½•éŸ³ä¸å¤„ç†ï¼ŒAndroid7.0æ‰åŠ å…¥çš„ **/&lt;/span&gt;

&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="no"&gt;UNPROCESSED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;9&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æˆ‘ä¹Ÿä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆè¦æè¿™ä¹ˆå¤šå€¼ï¼Œä½†æ˜¯ä»å®ƒä»¬çš„å®šä¹‰æ¥çœ‹éƒ½æ˜¯é’ˆå¯¹ä¸åŒçš„åœºæ™¯ã€‚è¿™é‡Œæœ‰ä¸‰ä¸ªæ˜¯é’ˆå¯¹ç”µè¯é€šè¯çš„ï¼Œè€Œä¸”ä¸€èˆ¬åªç»™ç³»ç»Ÿç”¨ã€‚æœ€å¸¸ç”¨çš„æ˜¯MICï¼Œè¿™ä¸ªå°±æ˜¯ä¸»éº¦å…‹é£ï¼Œè¿™é€‚ç”¨äºå¤§éƒ¨åˆ†çš„åœºæ™¯ã€‚å¯¹äºå£°çº¹è¯†åˆ«åœºæ™¯æ¥è¯´ï¼Œå¸Œæœ›èƒ½åšå¾—æ›´å¥½ï¼Œå¸Œæœ›å¾—åˆ°æ›´åŸå§‹æ›´çœŸå®çš„æ•°æ®ã€‚VOICE_RECOGNITIONå’ŒVOICE_COMMUNICATIONè²Œä¼¼ä¹ŸæŒºé€‚åˆå£°çº¹è¯†åˆ«åœºæ™¯ï¼Œä½†æ˜¯å®˜æ–¹æ²¡æœ‰æ›´å¤šçš„èµ„æ–™ï¼Œç½‘ä¸Šä¹Ÿå¾ˆå°‘ã€‚è¿˜æœ‰å°±æ˜¯ä¸çŸ¥é“æœ‰æ²¡æœ‰å…¼å®¹æ€§é—®é¢˜ã€‚åœ¨7.0ç³»ç»Ÿï¼Œè¿˜æ–°å¢äº†ä¸€ä¸ªUNPROCESSEDå®šä¹‰ã€‚æˆ‘è¿˜ä¸“é—¨è¯•è¿‡è¿™ä¸ªå‚æ•°ï¼Œæˆ‘å‘ç°é‡‡ç”¨è¿™ä¸ªå½•éŸ³æºè·å–åˆ°çš„å£°éŸ³æ•°æ®ï¼Œæ¯”è¾ƒæ¥è¿‘éº¦å…‹é£é‡‡é›†çš„åŸå§‹æ•°æ®ï¼Œå®ƒçš„è¯­è°±å›¾è·Ÿä¸“é—¨çš„éº¦å…‹é£é‡‡é›†çš„éŸ³é¢‘çš„è¯­è°±å›¾å¾ˆç›¸ä¼¼ã€‚è¿™é‡Œè¯´ä¸€ä¸‹è¯­è°±å›¾å’Œå£°æ³¢å›¾ï¼Œè¿™ä¸¤ç§å›¾éƒ½æ˜¯é‰´åˆ«å£°éŸ³è´¨é‡å’Œä¿¡æ¯çš„æ–¹å¼ã€‚æˆ‘çœ‹åšç®—æ³•çš„åŒäº‹ç»å¸¸å‚è€ƒè¿™ä¸¤ä¸ªå›¾ã€‚æˆ‘å¯¹è¿™ä¸¤ç§å›¾ä¹Ÿè¿˜ä¸å¤Ÿäº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡æˆ‘è‡ªå·±çš„ä¸€äº›è¯•éªŒï¼Œè¿˜æœ‰æŸ¥é˜…çš„ä¸€äº›èµ„æ–™ï¼Œæˆ‘å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šAndroidæ‰‹æœºçš„å½•éŸ³å…¶å®éƒ½åœ¨åº•å±‚ï¼ˆå¯èƒ½æ˜¯é©±åŠ¨å±‚ï¼‰åšäº†å¤„ç†ï¼Œä¾‹å¦‚å™ªå£°æŠ‘åˆ¶å’Œè‡ªåŠ¨å¢ç›Šï¼Œä¸Šå±‚æ‹¿åˆ°çš„æ•°æ®å…¶å®å·²ç»ä¸æ˜¯åŸå§‹çš„æ•°æ®äº†ã€‚ä¸ºä»€ä¹ˆè¿™æ ·åšå‘¢ï¼Œå› ä¸ºæ‰‹æœºçš„ä½¿ç”¨ç¯å¢ƒå¾ˆå¤æ‚ï¼Œå¯èƒ½ä¼šå¾ˆå˜ˆæ‚ï¼Œå¹¶ä¸”æˆ‘ä»¬è¯´è¯çš„æ—¶å€™ï¼Œæ‰‹æœºè·Ÿå˜´ä¹‹é—´è¿˜æ˜¯æœ‰ä¸€å®šçš„è·ç¦»çš„ã€‚å¦‚æœä¸åšè‡ªåŠ¨å¢ç›Šå’Œå™ªå£°æŠ‘åˆ¶çš„è¯ï¼Œé‚£å£°éŸ³å¯èƒ½å¾ˆå°ï¼Œè¿˜æœ‰å™ªå£°ï¼Œè¿™æ ·å†æ¬¡æ’­æ”¾å‡ºæ¥å°±å¬ä¸æ¸…äº†ã€‚æ‰€ä»¥åº•å±‚è‚¯å®šæœ‰åšå¤„ç†çš„ã€‚è¿™ä¸ªæˆ‘ä¸çŸ¥é“å®˜æ–¹æœ‰æ²¡æœ‰æ–‡æ¡£è¯´æ˜ï¼Œä½†æ˜¯æˆ‘è§‰å¾—äº‹å®åº”è¯¥å°±æ˜¯è¿™æ ·çš„ã€‚ç”±äºè¿™æ˜¯åšåœ¨åº•å±‚ï¼Œè€Œä¸”ä¸Šå±‚APIæ— æ³•ä¿®æ”¹ï¼Œåæ¥Android4.2ä¹‹ååŠ å…¥äº†ä¸€äº›ç±»ï¼šNoiseSuppressorï¼ŒAutomaticGainControlï¼ŒAcousticEchoCancelerã€‚å¯ä»¥æ§åˆ¶æ˜¯å¦å¼€å¯è‡ªåŠ¨å¢ç›Šï¼Œå™ªå£°æŠ‘åˆ¶ç­‰åŠŸèƒ½ã€‚å®é™…ä¸Šæµ‹è¯•ç»“æœæ˜¯ å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶éƒ½æ”¯æŒï¼Œè€Œä¸”å¼€å¯äº†ä¹‹åæ•ˆæœæœ‰ä¸€ç‚¹ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚æˆ‘å¾—å‡ºçš„ç»“è®ºå°±æ˜¯åŸæœ¬Androidåº•å±‚ï¼ˆé©±åŠ¨å±‚ï¼‰å°±å¼€å¯äº†å™ªå£°æŠ‘åˆ¶å’Œè‡ªåŠ¨å¢ç›Šçš„ï¼Œè€Œä¸”è¿™æ˜¯å¯èƒ½æ˜¯å…³ä¸äº†çš„ã€‚åœ¨4.2ä¹‹åçš„ç³»ç»Ÿé‡Œï¼Œè™½ç„¶æœ‰äº†ç›¸å…³APIæ˜¯å–å¼€å¯æˆ–è€…å…³é—­è¿™äº›åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰äº›ç¡¬ä»¶å°±æ˜¯ä¸æ”¯æŒï¼ˆæ‘Šæ‰‹ï¼‰ã€‚å°±ç®—æœ‰æ”¯æŒäº†ï¼Œä¹Ÿåªæ˜¯åœ¨åº•å±‚çš„åŸºç¡€ä¸Šï¼Œåœ¨è¿›ä¸€æ­¥çš„åŠ å¼ºè€Œå·²ã€‚åˆ°äº†Android7.0ç³»ç»Ÿï¼Œç»ˆäºåŠ äº†ä¸€ä¸ªUNPROCESSEDå®šä¹‰ï¼Œæ”¯æŒè¿™ä¸ªå®šä¹‰çš„ç¡¬ä»¶ï¼Œå°±çœŸçš„å»é™¤äº†åº•å±‚çš„è‡ªåŠ¨å¢ç›Šå’Œå™ªå£°æŠ‘åˆ¶ç­‰æ•ˆæœçš„ã€‚è¿™ä¸ªå®šä¹‰å¯¹å£°çº¹è¯†åˆ«è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚å¥ˆä½•è¿™ä¸ªæ˜¯7.0ä¹‹åæ‰æ”¯æŒï¼Œå¸‚é¢ä¸Šçš„è¿™ä¸ªç³»ç»Ÿçš„æ‰‹æœºè¿˜æ˜¯æ¯”è¾ƒå°‘ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šçš„ä¸€äº›ç»“è®ºéƒ½æ˜¯æˆ‘ä¸ªäººå¾—å‡ºçš„ï¼Œä¸ä¸€å®šæ­£ç¡®ã€‚å¦‚æœæœ‰äººæŒ‡å‡ºæˆ‘çš„ä¸å¯¹æˆ–è€…è¡¥å……ï¼Œé‚£å°†æ˜¯æ›´å¥½ã€‚æ¬¢è¿è®¨è®ºï¼ˆszhanfeng203@gmail.comï¼‰&lt;/p&gt;
&lt;h2&gt;Androidæ‰‹æœºéº¦å…‹é£å’ŒåŒMICé™å™ª&lt;/h2&gt;
&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šè½¯ä»¶çš„ä¸œè¥¿ï¼Œè¯´ä¸€ä¸‹ç¡¬ä»¶çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;Androidæ‰‹æœºè‡³å°‘æœ‰ä¸€ä¸ªéº¦å…‹é£ï¼Œä½äºæ‰‹æœºåº•éƒ¨ã€‚ä½†æ˜¯å¾ˆå¤šæ‰‹æœºåŒæ—¶ä¼šæœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„éº¦å…‹é£ï¼Œä¸€èˆ¬ä½äºæ‰‹æœºé¡¶éƒ¨æˆ–è€…èƒŒéƒ¨æ‘„åƒå¤´æ—è¾¹ã€‚ç°åœ¨å¾ˆå¤šæ‰‹æœºå‚å•†ä¼šé‡‡ç”¨åŒéº¦å…‹é£è¿›è¡Œé™å™ªã€‚åŒMICé™å™ªä¸€èˆ¬ç”¨åœ¨æ‰“ç”µè¯çš„æ—¶å€™ã€‚å› ä¸ºæ‰“ç”µè¯çš„æ—¶å€™ï¼Œä¸»éº¦å…‹é£ï¼ˆæ‰‹æœºåº•éƒ¨ï¼‰é è¿‘å£°æºï¼Œè€Œå¦å¤–ä¸€ä¸ªéº¦å…‹é£åœ¨å¬ç­’é™„è¿‘ï¼Œç¦»å£°æºæ¯”è¾ƒè¿œã€‚è¯­éŸ³åˆ°è¾¾è¿™ä¸¤ä¸ªMICçš„å¹…åº¦ç›¸å·®6ä¸ªdB,è¢«ä¿ç•™ã€‚è€Œå™ªéŸ³åˆ°è¾¾ä¸¤ä¸ªMICçš„å¹…åº¦ç›¸å½“ï¼Œè¢«è¿‡æ»¤ã€‚ç½‘ä¸Šæœ‰ä¸å°‘èµ„æ–™è¯´æ˜ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡åœ¨è½¯ä»¶å±‚é¢ï¼ŒaudioResourceæŒ‡å®šä¸ºMICæ˜¯é‡‡ç”¨ä¸»éº¦å…‹é£ï¼Œè€ŒCAMCORDERæ˜¯æ‘„åƒå¤´ä¾§çš„éº¦å…‹é£ï¼Œè²Œä¼¼æ²¡åŠæ³•æŒ‡å®šä¸¤ä¸ªéº¦å…‹é£éƒ½ç”¨ã€‚ä¼°è®¡åŒMICé™å™ªåªæœ‰åœ¨æ‰“ç”µè¯æ—¶ï¼Œç³»ç»Ÿè‡ªå·±é‡‡ç”¨çš„ã€‚ä¸çŸ¥é“æœ‰æ²¡æœ‰åšç³»ç»Ÿçš„åŒå­¦çŸ¥é“è¿™ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºAndroidæ‰‹æœºçš„å½•éŸ³ï¼Œå…¶å®æœ‰å¾ˆå¤šè¦è®¨è®ºçš„ã€‚ä¾‹å¦‚æ‰‹æœºæ˜¯å¦‚ä½•å¯¹VOICE_RECOGNITIONå’ŒVOICE_COMMUNICATIONæ”¯æŒï¼ŒNoiseSuppressorå’ŒAutomaticGainControlå„å‚å•†æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œéƒ½å€¼å¾—æ¢è®¨ï¼Œå¯æƒœè¿™æ–¹é¢çš„èµ„æ–™å¤ªå°‘ï¼Œè®¨è®ºçš„äººä¹Ÿä¸å¤šï¼Œæˆ‘ä¹Ÿæ²¡åšè¿‡Androidç³»ç»Ÿï¼Œæ‰€ä»¥å¾ˆå¤šæ˜¯æœªçŸ¥æ•°ï¼Œéœ€è¦æ›´å¤šæ˜¯è¯•éªŒã€‚æ¬¢è¿ç•™è¨€æˆ–è€…å‘é‚®ä»¶è®¨è®ºï¼ˆszhanfeng203@gmail.comï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·æ‰“èµå°é’±å–æ¯å’–å•¡^_^
&lt;img alt="æ‰“èµ" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /&gt;&lt;/p&gt;</summary><category term="å£°çº¹è¯†åˆ« äººå·¥æ™ºèƒ½ å½•éŸ³ Android"></category></entry><entry><title>é€‚é…iOS11ä¸iPhone Xéœ€è¦æ³¨æ„äº‹é¡¹</title><link href="http://szuwest.github.io/gua-pei-ios11yu-iphone-xxu-yao-zhu-yi-shi-xiang.html" rel="alternate"></link><updated>2017-09-26T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-09-26:gua-pei-ios11yu-iphone-xxu-yao-zhu-yi-shi-xiang.html</id><summary type="html">&lt;h1&gt;é€‚é…iOS11ä¸iPhone Xéœ€è¦æ³¨æ„çš„äº‹é¡¹&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘è‹¹æœå‘å¸ƒäº†iOS11å’ŒiPhone Xï¼Œæˆ‘ä¹‹å‰å¼€å‘çš„ä¸€ä¸ªåº”ç”¨ç•Œé¢å‡ºç°äº†é—®é¢˜ï¼Œç„¶åéœ€è¦é€‚é…ã€‚è®°å½•ä¸€ä¸‹éœ€è¦æ³¨æ„çš„äº‹é¡¹ã€‚&lt;/p&gt;
&lt;h2&gt;é€‚é…iOS11&lt;/h2&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯iOS11å¯¼èˆªæ æ”¹å˜äº†ã€‚é™¤äº†åŠ å…¥largeTitleè¿™ç§ç‰¹æ€§ä»¥å¤–ï¼Œè¿˜æ”¹å˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå¯ä»¥è¯´æ˜¯å®Œå…¨é‡å†™äº†å¯¼èˆªæ ã€‚æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯å¯¼èˆªæ è¿”å›æŒ‰é’®å›¾ç‰‡å˜å¾—å¾ˆå¤§ï¼Œå·¨ä¸‘æ— æ¯”ï¼Œæ‰€ä»¥å¾—çœ‹çœ‹ä»€ä¹ˆåŸå› ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘çœ‹äº†ä¸‹æˆ‘å¯¼èˆªæ çš„è®¾ç½®ä»£ç ï¼Œè¿˜åšäº†æŒºå¤šäº‹ï¼Œè€Œä¸”åšäº†å¾ˆå¤šhackã€‚ç¬¬ä¸€æ˜¯é€šè¿‡ &lt;strong&gt;[UINavigationBar appearance].backIndicatorImage&lt;/strong&gt; å’Œ &lt;strong&gt;[UINavigationBar appearance].backIndicatorTransitionMaskImage&lt;/strong&gt;è®¾ç½®äº†è¿”å›æŒ‰é’®å›¾ç‰‡ï¼Œè¿˜æœ‰ &lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;UIBarButtonItem&lt;/span&gt; &lt;span class="n"&gt;appearance&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;setBackButtonTitlePositionAdjustment&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;UIOffsetMake&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSIntegerMin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NSIntegerMin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;forBarMetrics&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;UIBarMetricsDefault&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è®¾ç½®äº†æŠŠè¿”å›æŒ‰é’®å³è¾¹çš„æ–‡å­—éšè—æ‰ã€‚è¿˜æœ‰é€šè¿‡hack æ–¹å¼æ‰¾åˆ° _UINavigationBarBackIndicatorViewæŠŠå®ƒçš„frameç»™æ”¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºiOS11çš„å¯¼èˆªæ å˜åŒ–å¾ˆå¤§ï¼Œ_UINavigationBarBackIndicatorViewè¿™ä¸ªç±»æ‰¾ä¸åˆ°äº†ï¼Œæ‰€ä»¥frameä¿®æ”¹å°±å¤±è´¥äº†ã€‚ç„¶åå› ä¸ºæˆ‘å‘ç°æˆ‘è®¾ç½®çš„è¿”å›æŒ‰é’®çš„é‚£ç§å›¾ç‰‡æœ¬æ¥æ˜¯å¾ˆå¤§ï¼Œå› ä¸ºè®¾ç½®äº†frameæŠŠå®ƒç¼©å°äº†ã€‚è€Œç°åœ¨frameå·²ç»è®¾ç½®ä¸äº†ï¼Œæ‰€ä»¥å°±æŒ‰å›¾ç‰‡åŸæœ¬çš„å¤§å°æ˜¾ç¤ºäº†ã€‚æœ€åè§£å†³åŠæ³•å°±æ˜¯æŠŠå›¾ç‰‡å¤§å°è®¾ç½®æˆç¬¦åˆå¯¼èˆªæ çš„å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡å¤§å°æ˜¯æ­£å¸¸äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰åˆ«é—®é¢˜ï¼Œå› ä¸ºè¿”å›æŒ‰é’®ä¸æ˜¯æ˜¾ç¤ºåœ¨å‚ç›´æ–¹å‘çš„ä¸­é—´ï¼Œæ˜¾ç¤ºåœ¨åä¸‹æ–¹äº†ã€‚æœ€åå‘ç°æ˜¯&lt;strong&gt;[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment&lt;/strong&gt;è¿™å¥ä»£ç å¯¼è‡´çš„ã€‚æ‰€ä»¥æˆ‘åˆ¤æ–­äº†å¦‚æœæ˜¯iOS11ç³»ç»Ÿçš„è¯ï¼Œå°±ä¸å†è°ƒç”¨è¿™å¥ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡æ­£å¸¸äº†ï¼Œæ˜¾ç¤ºä½ç½®ä¹Ÿæ­£å¸¸äº†ï¼Œä½†æ˜¯ä¸Šé¢é‚£å¥ä»£ç å»æ‰ä¹‹åï¼Œè¿”å›æŒ‰é’®å³è¾¹çš„æ–‡å­—æ˜¾ç¤ºå‡ºæ¥äº†ã€‚è¿™åˆæ˜¯ä¸ªéº»çƒ¦äº‹ã€‚
æ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°ç†æƒ³çš„æ–¹æ¡ˆã€‚æœ€ç»ˆåœ¨Stack Overflowä¸Šæ‰¾åˆ°ä¸€ç§æ–¹å¼ã€‚åœ¨æˆ‘çš„BaseViewControlleré‡ŒviewDidLoadæ–¹æ³•é‡Œï¼ŒåŠ å…¥ä¸‹é¢ä»£ç &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;navigationItem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;backBarButtonItem&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;UIBarButtonItem&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithTitle&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;UIBarButtonItemStylePlain&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt; &lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å¯ä»¥å®Œç¾å»æ‰è¿”å›æŒ‰é’®å³è¾¹çš„æ–‡å­—ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;iOS11è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„æ”¹å˜ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« è®²ã€‚æˆ‘æš‚æ—¶åªé‡åˆ°äº†å¯¼èˆªæ çš„é—®é¢˜ï¼Œå…¶ä»–çš„è¿˜å¥½ã€‚&lt;/p&gt;
&lt;h2&gt;é€‚é…iPhone X&lt;/h2&gt;
&lt;p&gt;ç”±äºiPhone Xæ˜¯å…¨é¢å±ï¼Œå¹¶ä¸”åˆ†è¾¨ç‡å˜äº†ï¼Œæ‰€æœ‰iPhone Xä¸Šå¯èƒ½ä¹Ÿéœ€è¦é€‚é…ã€‚æˆ‘çš„APPå°±æ˜¯å‡ºç°äº†ä¸€ç‚¹é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;iPhone Xçš„UIä¸Šå˜åŒ–å¾ˆå¤§çš„ä¸€ç‚¹æ˜¯çŠ¶æ€æ ï¼Œå®ƒä¸å†æ˜¯20dp,è€Œæ˜¯44dpã€‚å¦‚æœä½ çš„ç•Œé¢ä¸Šç¡¬ç¼–ç äº†è¿™ä¸ªï¼Œé‚£å°±å¾ˆæœ‰å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çš„APPä¸Šç”¨äº†ç¬¬ä¸‰æ–¹çš„ä¸€ä¸ªå«ViewPageControllerçš„ç±»ï¼Œè¿™ä¸ªç±»ä¸“é—¨æ˜¯ç”¨æ¥åštabåˆ‡æ¢çš„ã€‚ç”±äºå®ƒåœ¨ä»£ç äº†å†™frameçš„æ—¶å€™ï¼Œè®¡ç®—æ—¶å‚è€ƒçŠ¶æ€æ çš„é«˜åº¦æ˜¯20ï¼Œæ‰€æœ‰iPhone Xå°±å‡ºé—®é¢˜äº†ã€‚æš‚æ—¶æˆ‘çš„è§£å†³åŠæ³•å°±æ˜¯ï¼šåˆ¤æ–­æ˜¯iPhone Xçš„è¯ï¼Œå°±æŠŠçŠ¶æ€æ çš„é«˜åº¦å®šä¸º44.é‚£ä¹ˆå¦‚æœåˆ¤æ–­è®¾å¤‡æ˜¯iPhone Xå‘¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š
ä¸€æ˜¯é€šè¿‡å±å¹•æ¥åˆ¤æ–­&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;UI_USER_INTERFACE_IDIOM&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;UIUserInterfaceIdiomPhone&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;CGSize&lt;/span&gt; &lt;span class="n"&gt;screenSize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;UIScreen&lt;/span&gt; &lt;span class="n"&gt;mainScreen&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;bounds&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;screenSize&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;height&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mf"&gt;812.0f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;iPhone X&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;äºŒæ˜¯é€šè¿‡modelæ¥åˆ¤æ–­&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;NSString&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;modelID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[[&lt;/span&gt;&lt;span class="n"&gt;UIDevice&lt;/span&gt; &lt;span class="n"&gt;currentDevice&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;modelIdentifier&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="kt"&gt;BOOL&lt;/span&gt; &lt;span class="n"&gt;isIphoneX&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;modelID&lt;/span&gt; &lt;span class="n"&gt;isEqualToString&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;iPhone10,5&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;modelID&lt;/span&gt; &lt;span class="n"&gt;isEqualToString&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;iPhone10,6&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ç¬¬äºŒç§æ–¹å¼éœ€è¦ä»å®˜ç½‘ä¸Šç¡®è®¤ä¸€ä¸‹è¿˜æ²¡æœ‰æ²¡åˆ«çš„å‹å·ã€‚&lt;/p&gt;</summary><category term="iOS11 iPhoneX"></category></entry><entry><title>Coturnåœ¨iOSç«¯åº”ç”¨å’Œlibeventçš„ç¼–è¯‘</title><link href="http://szuwest.github.io/coturnzai-iosduan-ying-yong-he-libeventde-bian-yi.html" rel="alternate"></link><updated>2017-07-02T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-07-02:coturnzai-iosduan-ying-yong-he-libeventde-bian-yi.html</id><summary type="html">&lt;h1&gt;Coturnåœ¨iOSç«¯åº”ç”¨å’Œlibeventçš„ç¼–è¯‘&lt;/h1&gt;
&lt;p&gt;coturnæ˜¯ä¸€ä¸ªGoogleçš„å¼€æºåº“ï¼Œç”¨äºå®¢æœç«¯-æœåŠ¡å™¨-å®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹æ•°æ®é€šé“ï¼Œä¼ è¾“æ•°æ®æµã€‚ç°åœ¨ç›´æ’­æ‰€æœ‰çš„æŠ€æœ¯WebRTCå°±æ˜¯åŸºäºcoturnçš„ã€‚è¿™ä¸ªæŠ€æœ¯çœŸçš„å¾ˆç‰›ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„äº§å“ä¸ªäººç§æœ‰äº‘ï¼Œä¸€æ¬¾æ™ºèƒ½ç¡¬ä»¶ï¼Œæ¥ä¸Šä½ çš„ç¡¬ç›˜ï¼Œå°±å¯ä»¥é€šè¿‡æ‰‹æœºæ¶ˆè´¹ä½ ç¡¬ç›˜é‡Œçš„æ–‡ä»¶ï¼Œä»»åŠ¡æ—¶å€™ä»»ä½•åœ°æ–¹ï¼Œåªè¦ä½ è”ç½‘ã€‚ä»æ™ºèƒ½ç›’å­å’Œæ‰‹æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“å°±éœ€è¦coturnè¿™ç§æŠ€æœ¯ã€‚WebRTCå¾ˆå¥½ï¼Œä½†æ˜¯ä¸é€‚ç”¨äºæ™ºèƒ½ç¡¬ä»¶.&lt;/p&gt;
&lt;p&gt;Coturnä¾èµ–çš„åº“æœ‰libeventå’ŒOpenSSLã€‚OpenSSLæœ‰å¾ˆå¤šiOSçš„åº“ï¼Œä½¿ç”¨ä¹Ÿå¾ˆå¹¿æ³›ã€‚libeventä¹Ÿæ˜¯ä¸€ä¸ªä½¿ç”¨æŒºå¤šçš„Cåº“ï¼Œä½†æ˜¯åœ¨ç§»åŠ¨å¹³å°ä¸Šå¾ˆå°‘ç”¨ã€‚æˆ‘åœ¨iOSå¹³å°ä¸Šç¼–è¯‘libeventé‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚ä¸€ä¸ªæ˜¯ä¸èƒ½ç›´æ¥ç”¨åŒæ—¶ç”¨åœ¨çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ä¸Šï¼Œä¸€ä¸ªæ˜¯iOS10ä»¥ä¸‹ç³»ç»Ÿä¼šé—ªé€€ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜æ¯”è¾ƒå¥½è§£å†³ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªé—®é¢˜ä¸å¤ªå¥½è§£å†³ã€‚æˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯æˆ‘ç¼–è¯‘çš„åº“æœ‰é—®é¢˜ï¼Œåæ¥å¦ä¸€ä¸ªåŒäº‹ä»–æŠŠå´©æºƒå †æ ˆå‘ç»™æˆ‘çœ‹ï¼Œæˆ‘å‘ç°æ˜¯iOS9çš„ç³»ç»Ÿåº“ç¼ºå°‘ä¸€ä¸ªget_clocktimeçš„å‡½æ•°ã€‚ç»è¿‡æœç´¢ï¼Œå‘ç°æ˜¯libeventç¡®å®æ˜¯æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œä¹Ÿæœ‰äººé‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚å¯ä»¥é€šè¿‡ä¸€ä¸ªç¼–è¯‘å‚æ•°æ¥ç¦ç”¨æ‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯libeventçš„ç¼–è¯‘è„šæœ¬ä¸»è¦å†…å®¹&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;###########################################################################
# Choose your libevent version and your currently-installed iOS SDK version:
#
VERSION=&amp;quot;2.1.8-stable&amp;quot;
USERSDKVERSION=&amp;quot;10.3&amp;quot;
MINIOSVERSION=&amp;quot;8.0&amp;quot;
VERIFYGPG=false

###########################################################################
#
# Don&amp;#39;t change anything under this line!
#
###########################################################################

# No need to change this since xcode build will only compile in the
# necessary bits from the libraries we create
ARCHS=&amp;quot;i386 x86_64 armv7 armv7s arm64&amp;quot;

DEVELOPER=`xcode-select -print-path`
#DEVELOPER=&amp;quot;/Applications/Xcode.app/Contents/Developer&amp;quot;

# for continuous integration
# https://travis-ci.org/mtigas/iOS-OnionBrowser
if [ &amp;quot;$1&amp;quot; == &amp;quot;--noverify&amp;quot; ]; then
    VERIFYGPG=false
fi
if [ &amp;quot;$2&amp;quot; == &amp;quot;--travis&amp;quot; ]; then
    ARCHS=&amp;quot;i386 x86_64&amp;quot;
fi

if [[ ! -z &amp;quot;&lt;span class="nv"&gt;$TRAVIS&lt;/span&gt;&amp;quot; &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nv"&gt;$TRAVIS&lt;/span&gt; ]]; then
    # Travis CI highest available version
    echo &amp;quot;==================== TRAVIS CI ====================&amp;quot;
    SDKVERSION=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;USERSDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
else
    SDKVERSION=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;USERSDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
fi

cd &amp;quot;`dirname \&amp;quot;$0\&amp;quot;`&amp;quot;
REPOROOT=$(pwd)

# Where we&amp;#39;ll end up storing things in the end
OUTPUTDIR=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;REPOROOT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/dependencies&amp;quot;
mkdir -p &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/include
mkdir -p &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/lib


BUILDDIR=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;REPOROOT&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/build&amp;quot;

# where we will keep our sources and build from.
SRCDIR=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;BUILDDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/src&amp;quot;
mkdir -p &lt;span class="nv"&gt;$SRCDIR&lt;/span&gt;
# where we will store intermediary builds
INTERDIR=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;BUILDDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/built&amp;quot;
mkdir -p &lt;span class="nv"&gt;$INTERDIR&lt;/span&gt;

########################################

cd &lt;span class="nv"&gt;$SRCDIR&lt;/span&gt;

# Exit the script if an error happens
set -e

if [ ! -e &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SRCDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz&amp;quot; ]; then
    echo &amp;quot;Downloading libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz&amp;quot;
    curl -LO https://github.com/libevent/libevent/releases/download/release-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz
fi
echo &amp;quot;Using libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz&amp;quot;

# up to you to set up `gpg` and add keys to your keychain
# may have to import from link on http://www.wangafu.net/~nickm/ or http://www.citi.umich.edu/u/provos/
if &lt;span class="nv"&gt;$VERIFYGPG&lt;/span&gt;; then
    if [ ! -e &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SRCDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz.asc&amp;quot; ]; then
        curl -LO https://github.com/libevent/libevent/releases/download/release-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz.asc
    fi
    echo &amp;quot;Using libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz.asc&amp;quot;
    if out=$(gpg --status-fd 1 --verify &amp;quot;libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz.asc&amp;quot; &amp;quot;libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz&amp;quot; 2&amp;gt;/dev/null) &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    echo &amp;quot;&lt;span class="nv"&gt;$out&lt;/span&gt;&amp;quot; | grep -qs &amp;quot;^\[GNUPG:\] VALIDSIG&amp;quot;; then
        echo &amp;quot;&lt;span class="nv"&gt;$out&lt;/span&gt;&amp;quot; | egrep &amp;quot;GOODSIG|VALIDSIG&amp;quot;
        echo &amp;quot;Verified GPG signature for source...&amp;quot;
    else
        echo &amp;quot;&lt;span class="nv"&gt;$out&lt;/span&gt;&amp;quot; &amp;gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;2
        echo &amp;quot;COULD NOT VERIFY PACKAGE SIGNATURE...&amp;quot;
        exit 1
    fi
fi

tar zxf libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.tar.gz -C &lt;span class="nv"&gt;$SRCDIR&lt;/span&gt;
cd &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SRCDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;

set +e # don&amp;#39;t bail out of bash script if ccache doesn&amp;#39;t exist
CCACHE=`which ccache`
if [ $? == &amp;quot;0&amp;quot; ]; then
    echo &amp;quot;Building with ccache: &lt;span class="nv"&gt;$CCACHE&lt;/span&gt;&amp;quot;
    CCACHE=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CCACHE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; &amp;quot;
else
    echo &amp;quot;Building without ccache&amp;quot;
    CCACHE=&amp;quot;&amp;quot;
fi
set -e # back to regular &amp;quot;bail out on error&amp;quot; mode

export ORIGINALPATH=&lt;span class="nv"&gt;$PATH&lt;/span&gt;

for ARCH in &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCHS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
do
    if [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; == &amp;quot;i386&amp;quot; ] || [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; == &amp;quot;x86_64&amp;quot; ];
    then
        PLATFORM=&amp;quot;iPhoneSimulator&amp;quot;
        EXTRA_CONFIG=&amp;quot;--host=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-apple-darwin&amp;quot;
    else
        PLATFORM=&amp;quot;iPhoneOS&amp;quot;
        EXTRA_CONFIG=&amp;quot;--host=arm-apple-darwin&amp;quot;
    fi

    mkdir -p &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INTERDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;SDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sdk&amp;quot;

    export PATH=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEVELOPER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/Toolchains/XcodeDefault.xctoolchain/usr/bin/:&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEVELOPER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/Platforms/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.platform/Developer/usr/bin/:&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEVELOPER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/Toolchains/XcodeDefault.xctoolchain/usr/bin:&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEVELOPER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/usr/bin:&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ORIGINALPATH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
    export CC=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;CCACHE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;`which gcc` -arch &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; -miphoneos-version-min=&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;MINIOSVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;

    ./configure --disable-shared --enable-static --disable-debug-mode &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;EXTRA_CONFIG&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; --disable-clock-gettime \
    --prefix=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INTERDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;SDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sdk&amp;quot; \
    LDFLAGS=&amp;quot;&lt;span class="nv"&gt;$LDFLAGS&lt;/span&gt; -L&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/lib&amp;quot; \
    CFLAGS=&amp;quot;&lt;span class="nv"&gt;$CFLAGS&lt;/span&gt; -Os -I&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/include -isysroot &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEVELOPER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/Platforms/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.platform/Developer/SDKs/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;SDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sdk&amp;quot; \
    CPPFLAGS=&amp;quot;&lt;span class="nv"&gt;$CPPFLAGS&lt;/span&gt; -I&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/include -isysroot &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;DEVELOPER&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/Platforms/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.platform/Developer/SDKs/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;SDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sdk&amp;quot;

    # Build the application and install it to the fake SDK intermediary dir
    # we have set up. Make sure to clean up afterward because we will re-use
    # this source tree to cross-compile other targets.
    make -j$(sysctl hw.ncpu | awk &amp;#39;{print $2}&amp;#39;)
    make install
    make clean
done

########################################

echo &amp;quot;Build library...&amp;quot;

# These are the libs that comprise libevent. `libevent_openssl` and `libevent_pthreads`
# may not be compiled if those dependencies aren&amp;#39;t available.
OUTPUT_LIBS=&amp;quot;libevent.a libevent_core.a libevent_extra.a libevent_openssl.a libevent_pthreads.a&amp;quot;
for OUTPUT_LIB in &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUT_LIBS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;; do
    INPUT_LIBS=&amp;quot;&amp;quot;
    for ARCH in &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCHS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;; do
        if [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; == &amp;quot;i386&amp;quot; ] || [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; == &amp;quot;x86_64&amp;quot; ];
        then
            PLATFORM=&amp;quot;iPhoneSimulator&amp;quot;
        else
            PLATFORM=&amp;quot;iPhoneOS&amp;quot;
        fi
        INPUT_ARCH_LIB=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INTERDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;SDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sdk/lib/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUT_LIB&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
        if [ -e &lt;span class="nv"&gt;$INPUT_ARCH_LIB&lt;/span&gt; ]; then
            INPUT_LIBS=&amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INPUT_LIBS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INPUT_ARCH_LIB&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
        fi
    done
    # Combine the three architectures into a universal library.
    if [ -n &amp;quot;&lt;span class="nv"&gt;$INPUT_LIBS&lt;/span&gt;&amp;quot;  ]; then
        lipo -create &lt;span class="nv"&gt;$INPUT_LIBS&lt;/span&gt; \
        -output &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/lib/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUT_LIB&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
    else
        echo &amp;quot;&lt;span class="nv"&gt;$OUTPUT_LIB&lt;/span&gt; does not exist, skipping (are the dependencies installed?)&amp;quot;
    fi
done

for ARCH in &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCHS&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;; do
    if [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; == &amp;quot;i386&amp;quot; ] || [ &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot; == &amp;quot;x86_64&amp;quot; ];
    then
        PLATFORM=&amp;quot;iPhoneSimulator&amp;quot;
    else
        PLATFORM=&amp;quot;iPhoneOS&amp;quot;
    fi
    cp -R &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INTERDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;PLATFORM&lt;/span&gt;&lt;span class="cp"&gt;}${&lt;/span&gt;&lt;span class="n"&gt;SDKVERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;ARCH&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;.sdk/include/* &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;OUTPUTDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/include/
    if [ $? == &amp;quot;0&amp;quot; ]; then
        # We only need to copy the headers over once. (So break out of forloop
        # once we get first success.)
        break
    fi
done


####################

echo &amp;quot;Building done.&amp;quot;
echo &amp;quot;Cleaning up...&amp;quot;
rm -fr &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;INTERDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;
rm -fr &amp;quot;&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;SRCDIR&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/libevent-&lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;VERSION&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;&amp;quot;
echo &amp;quot;Done.&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;èµ„æ–™åœ°å€&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/coturn/coturn"&gt;Coturnåœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/szuwest/libevent_ios"&gt;libevent_iosç¼–è¯‘è„šæœ¬&lt;/a&gt;&lt;/p&gt;</summary><category term="iOS Coturn libevent"></category></entry><entry><title>2017å¹´</title><link href="http://szuwest.github.io/2017nian.html" rel="alternate"></link><updated>2017-02-04T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2017-02-04:2017nian.html</id><summary type="html">&lt;h1&gt;2017å¹´&lt;/h1&gt;
&lt;p&gt;ä¸­å›½äººä¸»è¦è¿‡å†œå†å¹´ï¼Œå†œå†å¹´è¿‡åæ‰çœŸæ­£ç®—æ–°çš„ä¸€å¹´ã€‚2017å¹´å¯¹äºæˆ‘è‡ªå·±æ¥è¯´æœ‰ç‚¹ä¸ä¸€æ ·ã€‚2017å¹´æˆ‘å‹åŠ›ä¼šå¾ˆå¤§ï¼Œä¹Ÿå¾ˆç„¦è™‘ã€‚&lt;/p&gt;
&lt;p&gt;2017å¹´æˆ‘å·¥ä½œå³å°†æ»¡7å¹´ï¼Œæƒ³ä¸åˆ°è¿™ä¹ˆå¿«å°±7å¹´äº†ã€‚è‡ªå·±ä»ç„¶æ²¡æœ‰ä»€ä¹ˆæˆå°±ï¼Œå½“ç„¶ç„¦è™‘äº†ã€‚å¹¶ä¸”å·²ç»æˆå®¶ï¼Œç”Ÿæ´»å‹åŠ›ä¼šæ›´å¤§ã€‚è¿˜æœ‰è€ƒè™‘ä»¥åå­©å­ä¹‹ç±»ï¼Œæœ‰æ—¶å€™ä¼šè§‰å¾—è‡ªå·±æ²¡æœ‰å‡†å¤‡å¥½ï¼Œå¯æ˜¯è‡ªå·±å·²ç»ä¸å¹´è½»äº†ã€‚&lt;/p&gt;
&lt;p&gt;2017å¹´æˆ‘è‡ªå·±ä¹Ÿç»™è‡ªå·±åˆ¶å®šäº†ä¸€äº›ç›®æ ‡ï¼Œç›®æ ‡ä¸å¤šã€‚ä½†æ˜¯å®ç°èµ·æ¥æ¯”è¾ƒéš¾ï¼Œä½†ä¹Ÿæ— æ³•è®©æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;2017å¹´æœ‰ä¸€ä»¶äº‹è‡ªå·±å¾ˆæƒ³åšï¼Œå°±æ˜¯è‡ªå·±åšä¸€ä¸ªäº§å“ï¼Œè¿™ä¸ªäº§å“ä¸“é—¨è§£å†³ä¸€ä¸ªäº‹æƒ…ã€‚æˆ‘å¾ˆæƒ³åšå¥½å®ƒï¼Œä»åå°ï¼Œåˆ°å®¢æˆ·ç«¯ï¼Œåˆ°äº§å“è§„åˆ’ï¼Œä¸€æ¡é¾™ã€‚ç®—æ˜¯é”»ç‚¼è‡ªå·±ã€‚&lt;/p&gt;
&lt;p&gt;2017å¹´æˆ‘å¸Œæœ›å·¥ä½œä¸Šæœ‰æ‰€çªç ´ï¼Œè™½ç„¶æœ‰å¾ˆå¤šå˜æ•°å’Œä¸ç¡®å®šæ€§ã€‚ä¸ç®¡æ€æ ·ï¼Œæˆ‘åšäº‹ä¼šæ›´åŠ åŠªåŠ›ï¼Œæˆ‘è¦å¯¹è‡ªå·±è´Ÿè´£ï¼Œå¯¹åˆ«äººè´Ÿè´£ã€‚&lt;/p&gt;
&lt;p&gt;2017å¹´ï¼Œæˆ‘è®¤è¯†åˆ°ä¹Ÿè®¸è‡ªå·±æ— æ³•è¾¾åˆ°è‡ªå·±ç†æƒ³çš„é‚£ç§é«˜åº¦ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆæƒ³çªç ´è‡ªå·±ï¼Œä¸æ„¿æ„å°±è¿™ä¹ˆè®¤å‘½ã€‚&lt;/p&gt;
&lt;p&gt;åŠ æ²¹&lt;/p&gt;</summary><category term="2017"></category></entry><entry><title>2016å¹´æ€»ç»“</title><link href="http://szuwest.github.io/2016nian-zong-jie.html" rel="alternate"></link><updated>2016-12-17T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-12-17:2016nian-zong-jie.html</id><summary type="html">&lt;h2&gt;2016å¹´æ€»ç»“&lt;/h2&gt;
&lt;h3&gt;ç”Ÿæ´»&lt;/h3&gt;
&lt;p&gt;ä»Šå¹´æœ€å¤§çš„äº‹æƒ…åº”è¯¥æ˜¯é¢†è¯ç»“å©šäº†ï¼Œè™½ç„¶æš‚æ—¶æ²¡æœ‰æ‘†é…’ï¼Œä½†æ˜¯æ‹å©šçº±ç…§ï¼Œåº¦èœœæœˆè¿™äº›éƒ½åšäº†ã€‚æˆ¿å­è¿˜æ²¡ä¹°ï¼Œä¸€ç›´çº ç»“åœ¨æ·±åœ³ä¹°è¿˜æ˜¯ä¸œèä¹°ï¼Œä½†æ˜¯æœ€å¤§çš„é—®é¢˜è¿˜æ˜¯æ²¡æœ‰é’±ã€‚æˆ¿å­æ˜¯ä¸ªå¤§é—®é¢˜ï¼Œæˆ‘ä»¬è¿™ä¸€ä»£å¾ˆå¤šäººéƒ½åŸºæœ¬è¢«æˆ¿å­ç»™ç»‘æ­»äº†ã€‚è¿™ä¹Ÿè®¸æ˜¯æˆ‘ä»¬è¿™ä»£äººçš„æ‚²å“€ã€‚&lt;/p&gt;
&lt;p&gt;äººç»“å©šä»¥åå¿ƒæ€å˜äº†å¾ˆå¤šï¼Œå¾ˆå¤šäº‹æƒ…ä¸èƒ½åªæƒ³è‡ªå·±ï¼Œä¹Ÿä¸èƒ½æƒ³çœ¼å‰ã€‚å¾ˆå¤šä¸å¥½çš„ä¹ æƒ¯ï¼ˆä¾‹å¦‚æ™šç¡ï¼‰ï¼Œä¸æˆç†Ÿçš„æƒ³æ³•éƒ½å¾—æ‘’å¼ƒã€‚è€ƒè™‘æ›´å¤šçš„æ˜¯å®¶åº­ï¼Œè€å©†ã€‚ä»Šå¹´çš„å¼€é”€ä¹Ÿå˜å¾—å¤§å¾ˆå¤šï¼ŒæŒ£é’±çš„å‹åŠ›ä¹Ÿå¤§ã€‚å©šå§»æ˜¯ä¸¤ä¸ªå®¶åº­çš„äº‹æƒ…ï¼Œä¸åªæ˜¯ä¸¤ä¸ªäººçš„äº‹æƒ…ï¼Œè¿™ä¸ªç»“å©šåå°±å¾ˆæ˜æ˜¾äº†ã€‚æˆ‘çš„å®¶åº­å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå¹¶ä¸”æˆ‘å¦ˆé‚£ä¸ªç—…æ˜¯ä¸ªè´Ÿæ‹…ï¼Œæ¯åˆ°å¹´åº•å°±ä¼šå‘ä½œï¼Œè¿™å¯¹æˆ‘å’Œæˆ‘è€å©†å½±å“å¾ˆå¤§ï¼Œå¯¹æˆ‘ä»¬æ•´ä¸ªå®¶åº­éƒ½å½±å“å¾ˆå¤§ã€‚å¯è¿™å°±æ˜¯æˆ‘çš„å®¶åº­ï¼Œå¿…é¡»å¾—é¢å¯¹ï¼Œè¿˜è¦å®‰æŠšæˆ‘è€å©†çš„æƒ…ç»ªï¼Œæˆ‘ä¹Ÿå¾—æ‹…èµ·è¿™ä¸ªè´£ä»»ã€‚è¿™å°±æ˜¯ç”Ÿæ´»ã€‚&lt;/p&gt;
&lt;h3&gt;å·¥ä½œ&lt;/h3&gt;
&lt;p&gt;è¿™ä¸€å¹´çš„å·¥ä½œå¹¶ä¸é¡ºåˆ©ï¼Œå¯ä»¥è¯´æ¯”è¾ƒå¤±è´¥ã€‚ä¸‹åŠå¹´æœ‰å°è¯•çœ‹å¤–é¢çš„ä¸€äº›æœºä¼šï¼Œä½†æ˜¯ä¸€ç›´ä¸é¡ºåˆ©ï¼Œæ²¡æœ‰æ‹¿åˆ°å¥½çš„ç»“æœã€‚è¿™ä¸€åº¦è®©æˆ‘å¾ˆç„¦è™‘ã€‚è¿™ä¹Ÿè®©æˆ‘è®¤è¯†åˆ°è‡ªå·±çš„ä¸è¶³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¹´æ¥ï¼Œé¡¹ç›®å¾ˆä¸é¡ºåˆ©ã€‚ä¸‹åŠå¹´ï¼Œæ¥äº†æ–°è€æ¿ï¼Œç„¶åæŠŠæˆ‘ä»¬è€å¤§ç»™æŒ¤èµ°äº†ï¼Œè™½ç„¶æœ€ç»ˆä»–è¿˜æ˜¯ç•™åœ¨XLï¼Œä½†æ˜¯å·²ç»è·Ÿæˆ‘ä»¬çš„é¡¹ç›®æ²¡å…³ç³»äº†ã€‚ä»–ä¸€æ‰‹æ‹‰æ‰¯å¤§çš„å­©å­è¿™æ ·å°±è¢«æ”¾æ‰‹äº†ã€‚è¿™äº›å¯¹æˆ‘ä»¬åº•å±‚çš„å‘˜å·¥æ¥è¯´ï¼Œä¹Ÿæ²¡æœ‰å¤ªå¤§å½±å“ï¼Œæˆ‘ä»¬ä¹Ÿæ”¹å˜ä¸äº†ä»»ä½•ä¸œè¥¿ã€‚ä¸è¿‡åŸæ¥çš„è€å¤§èµ°äº†å¯¹æˆ‘çš„å½±å“æ¯”è¾ƒå¤§ï¼Œå› ä¸ºä»–ç®—æ˜¯æˆ‘çš„ä¼¯ä¹ï¼Œæˆ‘ä¸ªäººä¹Ÿæ¯”è¾ƒå–œæ¬¢ä»–ï¼Œå¸Œæœ›èƒ½è·Ÿä»–ä¸€èµ·å…±äº‹ï¼Œåšä¸€ä¸ªå¥½äº§å“ã€‚ä»–èµ°åï¼Œéƒ¨é—¨æ‹›äº†å¾ˆå¤šæ–°äººï¼Œç„¶åå·¥ä½œå¾ˆç»„ç»‡å…³ç³»å¾ˆæ··ä¹±ã€‚æˆ‘ä¹Ÿæ²¡æœ‰å†è¢«æ–°é¢†å¯¼é‡è§†ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰å¤ªå¤šè¡¨ç°çš„æœºä¼šã€‚iOSçš„ä¸»ç®¡æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ··æ—¥å­çš„äººï¼Œè¿™æ ·è®©æˆ‘è‡ªå·±å¾ˆä¸çˆ½ï¼Œä½†æ˜¯æˆ‘ä¹Ÿæ²¡æœ‰åŠæ³•ï¼Œæ‰€ä»¥æœ‰æ®µæ—¶é—´æƒ³ç¦»å¼€ï¼Œä½†æ˜¯æ²¡æœ‰å¥½æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬è¦æ¬ç¦»æ¯å…¬å¸ï¼Œå»è¿›å…¥ä¸€ä¸ªå­å…¬å¸ã€‚è¿™ä¹Ÿè®¸æ˜¯ä¸ªæ–°æœºä¼šï¼Œè°çŸ¥é“ã€‚ä¸€å¼€å§‹æˆ‘è‡ªå·±å¾ˆä¸æ„¿æ„ï¼Œå› ä¸ºç¦åˆ©å·®äº†ã€‚ç°åœ¨æˆ‘æƒ³è¿™æˆ–è®¸æ˜¯ä¸ªæœºä¼šï¼Œå˜åŒ–ä¹Ÿè®¸æ˜¯å¥½çš„ï¼Œä¸èƒ½å†åƒè¿™æ ·ã€‚å¦‚æœæœ‰æœºä¼šç¦»å¼€åˆ†é…åˆ°åˆ«çš„é¡¹ç›®ä¹Ÿä¸é”™ï¼Œæ–°çš„å¼€å§‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€å¹´æŠ€æœ¯æ²¡æœ‰å¤ªå¤šé•¿è¿›ï¼Œä¸»è¦æ˜¯é¡¹ç›®ä¸€ç›´åœ¨å˜åŠ¨ï¼Œä¸‹åŠå¹´å†™ä»£ç æ²¡é‚£ä¹ˆå¤šäº†ã€‚ä¸è¿‡æˆ‘è¶å¹´åº•è¿™å‡ ä¸ªæœˆçš„ç©ºé—²æˆ‘ä¹Ÿè¡¥äº†ä¸€äº›ï¼Œè§£å†³ä»¥å‰ä¸€äº›ä»¥å‰æ²¡è§£å†³å¥½çš„éš¾é¢˜ã€‚ä¸è¿‡æˆ‘è‡ªå·±æ€æƒ³ä¹Ÿæˆç†Ÿç¨³å®šäº†ä¸€äº›ï¼Œæ‰€ä»¥æˆ‘æ¥ä¸‹æ¥åº”è¯¥è¦å¥½å¥½åšäº‹ï¼Œå¹¶ä¸”åšæŒå­¦ä¹ ä¸€äº›æ–°çŸ¥è¯†ï¼Œè¡¥è‡ªå·±çš„ä¸€äº›çŸ­æ¿ï¼Œå¥½å¥½æé«˜è‡ªå·±ã€‚&lt;/p&gt;
&lt;h3&gt;æŠ•èµ„&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;æ‘’å¼ƒçªç„¶æš´å¯Œï¼ŒæŠ•æœºå–å·§çš„å¹»æƒ³ã€‚è¸å®åªåšè‡ªå·±èƒ½åŠ›åœˆå†…çš„äº‹ï¼Œèµšè‡ªå·±èƒ½èµšçš„é’±ã€‚è¿™æ˜¯æˆ‘ä¸€å¹´çš„æ¥çš„å¿ƒå¾—ã€‚ä¸€å¹´æ¥ï¼ŒAè‚¡ä»Šå¹´ç»ˆäºæŠŠä»¥å‰çš„äºæŸæ…¢æ…¢è¡¥å›æ¥äº†ã€‚æ¸¯è‚¡è¿˜æ˜¯äºæŸçŠ¶æ€ï¼Œè€Œä¸”è¿˜ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šå¥½è½¬ã€‚ç¾è‚¡ç»ˆäºæœ‰æ‰¾åˆ°ä¸€ç‚¹ç‚¹æ„Ÿè§‰ï¼Œå¼€å§‹åˆå›åˆ°äº†èµ·è·‘çº¿ã€‚å¦å¤–å¾—ç›Šäºäººæ°‘å¸è´¬å€¼ï¼Œæ¸¯å…ƒå’Œç¾å…ƒç›¸å¯¹å‡å€¼ï¼Œæ‰€ä»¥æˆ‘çš„å¤–å¸èµ„äº§ä¹Ÿç®—å‡å°‘äºæŸã€‚&lt;/p&gt;
&lt;p&gt;æƒ³æƒ³è¿™ä¸¤å¹´ï¼Œç‚’è‚¡ä¹Ÿç®—è¾¾åˆ°æœ€åˆçš„å­¦ä¹ çš„ç›®çš„äº†ã€‚å”¯ä¸€è¿˜æ¯”è¾ƒé—æ†¾çš„æ˜¯æ¸¯è‚¡è¿˜æœ‰äºæŸã€‚æˆ‘ç®—çœŸæ­£ä½“å‘³åˆ°ä¸ºä»€ä¹ˆç‚’è‚¡å¹¶ä¸æ˜¯çœŸçš„é€‚åˆæ¯ä¸ªäººï¼Œè€Œä¸”è§‰å¤§éƒ¨åˆ†äººå¾ˆä¼šäºé’±ã€‚ä¸è¿‡ç»è¿‡è¿™äº›ç»å†ï¼Œæˆ‘æƒ³æˆ‘åº”è¯¥æ¯”è¾ƒéš¾äºé’±äº†ï¼Œè‡ªå·±è¿˜æ˜¯æœ‰ä¸€ç‚¹ä¿¡å¿ƒã€‚è¿™ä¸¤å¹´ç‚’è‚¡å¤šå¤šå°‘å°‘ç¡®å®å¯¹æˆ‘çš„å·¥ä½œè¿˜æ˜¯é€ æˆäº†ä¸€ç‚¹å½±å“ï¼Œå› ä¸ºå·¥ä½œä¸­è¿˜æ˜¯å¿ä¸ä½çœ‹ç›˜ï¼Œè¿˜æ˜¯è‚¡å¸‚æ³¢åŠ¨çš„æ—¶å€™è¿˜æ˜¯æœ‰ä¸€ç‚¹å½±å“ã€‚ä¸è¿‡ç°åœ¨å½±å“å·²ç»å¾ˆå°å¾ˆå°äº†ã€‚æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦åšä¸€ç‚¹æŠ•èµ„ï¼Œé•¿è¿œæ¥çœ‹ã€‚æŠ•èµ„ä¹Ÿå¼€é˜”äº†è‡ªå·±çš„çœ¼ç•Œï¼ŒåŸæ¥èµ„æœ¬å¸‚åœºæ˜¯è¿™æ ·çš„ï¼Œä¹Ÿåœ¨é›ªçƒä¸Šå­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œäº†è§£åˆ°ä¸€äº›ç¤¾ä¼šæŠ•èµ„ç²¾è‹±çš„ç”Ÿæ´»ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸€ç§æ”¶è·ã€‚æˆ‘åªå¸Œæœ›ä»¥åèƒ½ä¸äºæŸå’Œä¿æŒä¸€å®šçš„å¹´æ”¶ç›Šç‡å°±è¡Œäº†ã€‚æˆ‘ä¹Ÿç›¸ä¿¡è¿™ä¸ªä»¥åä¸€å®šèƒ½å®ç°ã€‚æˆ‘è‡ªå·±çš„ä¸»è¦ç²¾åŠ›è¿˜æ˜¯æ”¾åˆ°å·¥ä½œä¸Šï¼Œè¿˜æœ‰æˆ‘è‡ªå·±å¯¹å®ä¸šæ›´æ„Ÿå…´è¶£ï¼Œä»¥åä¹Ÿä¸ä¼šèµ°ä¸ŠèŒä¸šæŠ•èµ„çš„é“è·¯ã€‚&lt;/p&gt;
&lt;h3&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;å›æƒ³è¿™ä¸€å¹´ï¼Œä¸ŠåŠå¹´çš„äº‹æƒ…å·²ç»ä¸å¤ªè®°å¾—äº†ã€‚çœ‹åˆ°åˆ«çš„æœ‹å‹ä»Šå¹´éƒ½æœ‰å¾ˆå¤§è¿›æ­¥å’Œæ”¹å–„ï¼Œçœ‹çœ‹è‡ªå·±æœ€è¿‘æ—¶é—´é¢è¯•å—åˆ°çš„æŒ«æŠ˜ï¼Œæ„Ÿè§‰è‡ªå·±è·Ÿä»–ä»¬çš„å·®è·è¶Šæ¥è¶Šè¿œäº†ã€‚ä»–ä»¬çš„é“è·¯èµ°å¾—å¾ˆé¡ºï¼Œè€Œè‡ªå·±å´æ²¡æœ‰å¤šå¤§é•¿è¿›ã€‚è¿™ä¹Ÿè®¸æœ‰å¾ˆå¤šåŸå› ï¼Œäººå®¶çš„èµ·æ­¥å°±æ¯”è‡ªå·±å¥½å¾ˆå¤šï¼Œäººå®¶ä¹Ÿä»˜å‡ºäº†å¾ˆå¤šï¼Œç°åœ¨æ‰èµ°å¾—è¿™ä¹ˆå¥½ã€‚åˆ«äººå†å¥½ä¹Ÿæ˜¯åˆ«äººçš„ï¼Œä½ ä¸çŸ¥é“åˆ«äººä»˜å‡ºäº†å¤šå°‘ï¼Œç¾¡æ…•æ²¡ä»€ä¹ˆç”¨ã€‚æ‰€ä»¥æœ€é‡è¦çš„æ˜¯è‡ªå·±æ‰æ‰å®å®åšå¥½è‡ªå·±è¯¥åšçš„äº‹ã€‚æˆ‘ä¹Ÿä¸ä¼šè®¤è¾“ï¼Œäººç”Ÿå¾ˆé•¿ï¼Œæˆ‘ä»¬ä¸èƒ½é‚£ä¹ˆçŸ­è§†ã€‚å°±ç®—ä¸èƒ½æ¯”åˆ«äººå¥½ï¼Œä¹Ÿè¦åšè‡ªå·±ï¼Œæ´»å‡ºè‡ªå·±çš„ç²¾å½©ï¼Œæ´»å‡ºè‡ªå·±çš„äººç”Ÿã€‚&lt;/p&gt;</summary><category term="æ€»ç»“"></category></entry><entry><title>iOSåå°ä¸‹è½½å’Œæ–­ç‚¹ç»­ä¼ </title><link href="http://szuwest.github.io/ioshou-tai-xia-zai-he-duan-dian-xu-chuan.html" rel="alternate"></link><updated>2016-12-08T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-12-08:ioshou-tai-xia-zai-he-duan-dian-xu-chuan.html</id><summary type="html">&lt;h2&gt;iOSåå°ä¸‹è½½å’Œæ–­ç‚¹ç»­ä¼ &lt;/h2&gt;
&lt;p&gt;æœ€è¿‘åœ¨é‡æ–°æ•´ç†æˆ‘ä»¬é¡¹ç›®é‡Œçš„iOSçš„åå°ä¸‹è½½ï¼Œå› ä¸ºåŸæ¥æ–¹æ³•ï¼ˆASIHTTPRequestæ–¹å¼ï¼‰æ— æ³•åšåˆ°åå°ä¸€ç›´ä¸‹è½½ï¼Œè¿™ä¸ªé—®é¢˜è¢«æˆ‘è€å©†åæ§½äº†å¥½å‡ æ¬¡ã€‚æ‰€ä»¥æˆ‘é‡æ–°æ•´ç†ä¸€ä¸‹ï¼Œç”¨NSURLSessionæ¥ä¸‹è½½ï¼Œè¾¾åˆ°äº†æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚ç°åœ¨æ€»ç»“è‡ªå·±çš„ä¸€äº›ç»éªŒã€‚&lt;/p&gt;
&lt;h3&gt;èƒŒæ™¯&lt;/h3&gt;
&lt;p&gt;é¡¹ç›®æœ€å¼€å§‹æˆ‘ä»¬æ˜¯ç”¨äº†NSURLSessionæ¥åšåå°ä¸‹è½½çš„ã€‚ä½†æ˜¯æœ‰ä¸¤ä¸ªä¸¥é‡çš„é—®é¢˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ‰æ—¶å€™å¶ç°çš„ä¸èƒ½ä¸‹è½½ï¼Œå°±æ˜¯ä¸€å¯åŠ¨ä¸‹è½½å°±å¤±è´¥ã€‚ä¸€æ—¦å‡ºç°è¿™ç§æƒ…å†µï¼Œæ— æ³•æ¢å¤ï¼Œæ€ä¹ˆæ ·éƒ½æ— æ³•ä¸‹è½½ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½ä¸€æ ·&lt;/li&gt;
&lt;li&gt;ä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œåªæœ‰å‡ ååˆ°å‡ ç™¾KB/Sï¼Œç½‘ç»œæ­£å¸¸ï¼ŒAndroidç«¯åŒä¸€ä¸ªæ–‡ä»¶ä¸‹è½½é€Ÿåº¦é£å¿«&lt;/li&gt;
&lt;li&gt;ç¨‹åºæ€æ‰ä¹‹åæ— æ³•é‡æ–°ç»§ç»­ä¸‹è½½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æŒ‰é“ç†è¿™äº›é—®é¢˜éƒ½ä¸åº”è¯¥å‡ºç°ï¼Œå¯æ˜¯æˆ‘ä»¬çš„åº”ç”¨å°±æ˜¯å‡ºç°äº†è¿™äº›é—®é¢˜ï¼Œè€Œä¸”éš¾ä»¥è°ƒè¯•ï¼ŒåŒäº‹è°ƒè¯•äº†å¾ˆä¹…éƒ½æ²¡æœ‰ç»“æœã€‚æœ€åæˆ‘ä¹Ÿæ²¡è®¤çœŸç ”ç©¶ï¼Œä½†æ˜¯æˆ‘å‘ç°ASIHTTPRequestå¯ä»¥å¾ˆå¥½åœ°è§£å†³ä¸Šé¢çš„å‡ ä¸ªé—®é¢˜ï¼Œç„¶åæˆ‘å°±åœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ äº†ASIHTTPRequestçš„ä¸‹è½½æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;ASIHTTPRequestæ–¹å¼çš„ä¸‹è½½ä¸é”™ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œä¹Ÿèƒ½å¾ˆå¥½çš„æ–­ç‚¹ç»­ä¼ ï¼Œä½†æ˜¯è·ŸAndroidçš„è¿˜æ˜¯æ…¢äº†ä¸€ç‚¹ï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿™å¯èƒ½æ˜¯ç³»ç»Ÿä¸åŒçš„åŸå› ã€‚ASIHTTPRequestè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒè‡´å‘½çš„å¼±ç‚¹ï¼Œå°±æ˜¯ä¸èƒ½åå°ä¸‹è½½ï¼Œè¿™å¯¹äºä¸‹è½½å¤§æ–‡ä»¶æ¥è¯´æ˜¯å¿…é¡»çš„ã€‚åœ¨iOSå¹³å°è¦åšåå°ä¸‹è½½ï¼Œæœ€å¥½çš„æ–¹å¼è¿˜æ˜¯ä½¿ç”¨NSURLSessionã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘å†³å®šå¥½å¥½ç ”ç©¶ä¸€ä¸‹NSURLSessionï¼Œå¹¶ä¸”æ”¹ç”¨è¿™ç§æ–¹å¼ã€‚&lt;/p&gt;
&lt;h3&gt;NSURLSessionåå°ä¸‹è½½&lt;/h3&gt;
&lt;p&gt;å®é™…ä¸ŠNSURLSessionçš„åå°ä¸‹è½½çœŸçš„å¾ˆå¼ºå¤§ï¼Œè‹¹æœçœŸåšäº†ä»¶å¾ˆå¥½çš„äº‹ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªåå°ä¸‹è½½ä»»åŠ¡çš„æ—¶å€™ï¼Œå®é™…ä¸Šä½ å°±æŠŠè¿™ä¸ªä¸‹è½½äº¤ç»™ç³»ç»Ÿæ¥æ¥ç®¡äº†ã€‚æ‰€ä»¥å³ä½¿ä½ æŠŠAPPæ€æ‰ï¼Œä¸‹è½½ä¹Ÿä¸ä¼šåœæ­¢ï¼Œå¾ˆç‰›é€¼ã€‚è€Œä¸”å¦‚æœå‡ºç°æ‰‹æœºç½‘ç»œå˜åŒ–ä¹‹ç±»çš„ï¼Œç³»ç»Ÿä¼šåœ¨åå°å¸®ä½ é‡è¯•ï¼Œå½“ç½‘ç»œåˆæ­£å¸¸äº†å®ƒä¼šç»§ç»­ä¸‹è½½ã€‚æ‰€æœ‰ä¼°è®¡ä¸€æ—¦ä½ å¯åŠ¨äº†åå°ä¸‹è½½ä»»åŠ¡ï¼Œè¦ä¹ˆä¸‹è½½å®Œï¼Œè¦ä¹ˆä½ æ‰‹åŠ¨å–æ¶ˆï¼Œè¦ä¹ˆæœåŠ¡å™¨é‚£è¾¹å‡ºé”™ï¼Œä¸ç„¶è¿™ä¸ªä¸‹è½½ä¸ä¼šåœæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶NSURLSessioné‚£ä¹ˆå¼ºï¼Œä½†æ˜¯è¦åšä¸€ä¸ªä½“éªŒæ¯”è¾ƒå¥½çš„ä¸‹è½½å™¨è¿˜éœ€è¦æ³¨æ„å¾ˆå¤šåœ°æ–¹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å¿…é¡»æ˜¯æ”¯æŒåå°ä¸‹è½½çš„NSURLSessionConfiguration&lt;/li&gt;
&lt;li&gt;å¿…é¡»ç”¨è¿™ä¸ª (NSURLSession &lt;em&gt;)sessionWithConfiguration:(NSURLSessionConfiguration &lt;/em&gt;)configuration delegate:(nullable id &lt;NSURLSessionDelegate&gt;)delegate delegateQueue:(nullable NSOperationQueue *)queueæ¥åˆ›å»ºNSURLSessionï¼Œå¹¶ä¸”delegateä¸èƒ½ä¸ºç©ºã€‚NSURLSessionæœ€å¥½å…¨å±€å”¯ä¸€&lt;/li&gt;
&lt;li&gt;å¿…é¡»å®ç°delegateå‡ ä¸ªé‡è¦çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;æœ€å¥½å®ç° APPDelegateä¸­çš„- (void)application:(UIApplication &lt;em&gt;)application handleEventsForBackgroundURLSession:(NSString &lt;/em&gt;)identifier completionHandler:(void (^)())completionHandleræ–¹æ³•ï¼Œå¹¶ä¸”æŠŠcompletionHandlerä¿å­˜èµ·æ¥é€‚æ—¶è°ƒç”¨&lt;/li&gt;
&lt;li&gt;åœ¨æ‰‹åŠ¨æš‚åœæˆ–è€…å¤±è´¥åï¼Œè¦æŠŠresumeDataä¿å­˜èµ·æ¥ï¼Œæœ€å¥½æ˜¯ä¿å­˜çš„æœ¬åœ°ï¼Œé‡æ–°å¯åŠ¨ä¸‹è½½æ˜¯éœ€è¦è¿™ä¸ªæ¥ç»§ç»­ä¸‹è½½&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿˜æœ‰éœ€è¦æ³¨æ„çš„æ˜¯ åœ¨ - (void)URLSession:(NSURLSession &lt;em&gt;)session
      downloadTask:(NSURLSessionDownloadTask &lt;/em&gt;)downloadTask
didFinishDownloadingToURL:(NSURL *)location è¿™ä¸ªå›è°ƒæ–¹æ³•é‡Œï¼Œå¿…é¡»locationæŒ‡å‘çš„ä¸´æ—¶æ–‡ä»¶ç§»åŠ¨åˆ°ä½ çš„æ²™ç›’ç›®å½•ä¸­ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¸€æ—¦è¿”å›åï¼Œå°±ä¼šå»åˆ é™¤è¿™ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä¸Šé¢è¿™äº›ï¼Œæˆ‘è‡ªå·±åšäº†ä¸€ä¸ªä¸‹è½½ä»»åŠ¡ç®¡ç†å™¨ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªä»»åŠ¡ï¼Œå¹¶å¯ä»¥é…ç½®å¤šä¸ªä»»åŠ¡å¹¶è¡Œä¸‹è½½ã€‚å½“ä¸€ä¸ªä¸‹è½½ä»»åŠ¡å®Œæˆåä¾¿ä¼šå¯åŠ¨ä¸‹ä¸€ä¸ªç­‰å¾…ä¸­çš„ä»»åŠ¡ã€‚è¿™æ ·çš„è¯ï¼Œä½ å°±å¯ä»¥åˆ›å»ºå®Œä¸‹è½½ä»»åŠ¡åï¼Œå°±å…³é—­ç¨‹åºï¼Œè¯¥å¹²å•¥å°±å¹²å•¥å»ã€‚ä¸‹è½½å®Œäº†å®ƒä¼šå‘æœ¬åœ°é€šçŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™ä¸ªä¸‹è½½å™¨åœ¨å…¬å¸çš„é¡¹ç›®é‡Œç”¨ï¼Œç‰µæ¶‰æ¯”è¾ƒå¤šï¼Œè¿˜æ”¯æŒASIHTTPRequestä¸‹è½½ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æ³•å¼€æºã€‚ä¸è¿‡æœ‰ä¸€ä¸ªdemoåŒ…å«äº†æ ¸å¿ƒçš„æ€æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;demoåœ¨è¿™é‡Œ &lt;a href="https://github.com/szuwest/BackgroundDownloadDemo"&gt;BackgroundDownloadDemo&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;1.&lt;a href="https://onevcat.com/2013/08/ios7-background-multitask/"&gt;WWDC 2013 Sessionç¬”è®° - iOS7ä¸­çš„å¤šä»»åŠ¡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2.&lt;a href="http://www.jianshu.com/p/b4edfa0b71d8#"&gt;åŸºäºiOS 10ã€realmå°è£…çš„ä¸‹è½½å™¨ï¼ˆæ”¯æŒå­˜å‚¨è¯»å–ã€æ–­ç‚¹ç»­ä¼ ã€åå°ä¸‹è½½ã€æ€æ­»APPé‡å¯åçš„æ–­ç‚¹ç»­ä¼ ç­‰åŠŸèƒ½ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3.&lt;a href="http://www.jianshu.com/p/1211cf99dfc3"&gt;iOSä½¿ç”¨NSURLSessionè¿›è¡Œä¸‹è½½ï¼ˆåŒ…æ‹¬åå°ä¸‹è½½ï¼Œæ–­ç‚¹ä¸‹è½½ï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</summary><category term="NSURLSession ASIHTTPRequest åå°ä¸‹è½½"></category></entry><entry><title>äº‹ä»¶å¾ªç¯æœºåˆ¶ä¹‹äºAndroidçš„Looperå’ŒiOSçš„NSRunLoop</title><link href="http://szuwest.github.io/shi-jian-xun-huan-ji-zhi-zhi-yu-androidde-looperhe-iosde-nsrunloop.html" rel="alternate"></link><updated>2016-12-04T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-12-04:shi-jian-xun-huan-ji-zhi-zhi-yu-androidde-looperhe-iosde-nsrunloop.html</id><summary type="html">&lt;h2&gt;äº‹ä»¶å¾ªç¯æœºåˆ¶ä¹‹äºAndroidçš„Looperå’ŒiOSçš„NSRunLoop&lt;/h2&gt;
&lt;p&gt;Androidå’ŒiOSåŒä¸ºæ‰‹æœºæ“ä½œç³»ç»Ÿï¼Œæœ‰å¾ˆå¤šç›¸åŒä¹‹å¤„ã€‚æœ‰å¾ˆå¤šè®¾è®¡å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œç»Ÿä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¸åŒçš„å®ç°ã€‚ä¾‹å¦‚äº‹ä»¶æ¨¡å‹ï¼Œå®ƒå¤§ä½“é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;initialize&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;var&lt;/span&gt; &lt;span class="nx"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;get_next_message&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="nx"&gt;process_message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;message&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="nx"&gt;quit&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯¹äºè¿™æ ·çš„ä¸€ç§æ¨¡å¼, Androidç³»ç»Ÿå’ŒiOSç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ˜¯ä¸åŒçš„å¹³å°ä¸åŒçš„å®ç°æ–¹å¼ã€‚åº”è¯¥è¯´å¾ˆå¤šå¹³å°æˆ–è€…æ¡†æ¶éƒ½æ˜¯é‡‡ç”¨è¿™ä¸€ç§æ¨¡å¼ã€‚Androidç³»ç»Ÿå¯¹åº”çš„å°±æ˜¯Looperæœºåˆ¶ï¼ŒiOSå¯¹åº”çš„å°±æ˜¯NSRunLoopæœºåˆ¶ã€‚ä½ çœ‹åå­—éƒ½æ˜¯loopï¼Œè¿™æ˜¯å®ƒçš„æ ¸å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç§»åŠ¨å¼€å‘è€…æ¥è¯´ï¼Œç†è§£å¹³å°æ˜¯æ€ä¹ˆå®ç°è¿™ä¸ªäº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œæˆ–è€…å«æ¶ˆæ¯æœºåˆ¶ï¼Œæ˜¯å¾ˆé‡è¦çš„ã€‚å› ä¸ºåœ¨ä½ çš„å¼€å‘å·¥ä½œå½“ä¸­ï¼Œæ— æ—¶æ— åˆ»ä¸åœ¨ç”¨ç€è¿™ç§æœºåˆ¶ã€‚ä¸ç†è§£å®ƒçš„æœºåˆ¶ï¼Œå……å…¶é‡ä¹Ÿåªèƒ½ç®—ä¸ªåˆçº§ç¨‹åºå‘˜ï¼Œæ— æ³•æ·±å…¥ç†è§£ç³»ç»Ÿã€‚å¦‚æœæˆ‘ä»¬èƒ½äº†è§£ä¸åŒå¹³å°å¯¹è¿™ä¸€æœºåˆ¶çš„å®ç°ï¼Œå¯ä»¥åŠ æ·±ç†è§£ï¼Œå¯ä»¥æé«˜è‡ªå·±ã€‚æˆ‘æ—¢åšè¿‡Androidå¼€å‘ï¼Œä¹Ÿç ”ç©¶è¿‡å®ƒLooperæœºåˆ¶ã€‚ç°åœ¨åšiOSå¼€å‘éƒ½æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæœ€è¿‘å¼€ç ”ç©¶å®ƒçš„NSRunLoopæœºåˆ¶ã€‚æˆ‘å‘ç°ä»–ä»¬æ•´ä½“çš„è®¾è®¡æ€æƒ³ç¡®å®ä¸€è‡´çš„ï¼Œä½†æ˜¯ä¸åŒçš„å¹³å°å´ä¹Ÿæœ‰å¾ˆå¤šå·®å¼‚æ€§ã€‚&lt;/p&gt;
&lt;h2&gt;å…±åŒçš„è®¾è®¡ç‚¹&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆloopè·Ÿçº¿ç¨‹æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œè¿™æ˜¯åŸºç¡€ã€‚ç„¶åiOSæˆ–è€…Androidéƒ½æ˜¯ä¸€ä¸ªåº”ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼ˆå¹¶éç»å¯¹ï¼‰ï¼Œç„¶åè¿›ç¨‹é‡Œæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ã€‚ç„¶åè¿™ä¸ªä¸»çº¿ä¼šç»‘å®šä¸€ä¸ªloopã€‚è¿™å·¥ä½œæ˜¯æœ‰ç³»ç»Ÿæ¥å®Œæˆçš„ã€‚è¿™ä¸ªloopä¸€ç›´åœ¨æ¥æ”¶è€…ç³»ç»Ÿçš„ä¸€äº›äº‹ä»¶ï¼Œæˆ–è€…ç”¨æˆ·äº§ç”Ÿçš„äº‹ä»¶ã€‚å¦‚æœæ²¡æœ‰äº‹ä»¶æˆ–è€…å¤„ç†å®Œäº†äº‹ä»¶ï¼Œå®ƒå°±åœ¨ç­‰å¾…ä¸­ï¼Œç­‰å¾…åˆ«äº‹ä»¶æ¥ä¸´å”¤é†’å®ƒå¤„ç†ã€‚ä¸ç®¡Androidè¿˜æ˜¯iOSï¼Œå®ƒä»¬çš„æ›´æ–°ç•Œé¢æ“ä½œå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ç»å¸¸ä¼šå‡ºç°å°†æ¶ˆæ¯æŠ›åˆ°ä¸»çº¿ç¨‹ä¸­æ¥æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå­çº¿ç¨‹ï¼Œå®ƒé»˜è®¤æ˜¯æ²¡æœ‰loopçš„ï¼Œå½“å®ƒæ‰§è¡Œå®Œå®ƒçš„ä»»åŠ¡åï¼Œçº¿ç¨‹å°±ç»“æŸäº†ã€‚è¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬å¤§å¤šæ•°çš„åœºæ™¯ã€‚å¦‚æœæˆ‘ä»¬è¦è®©å­çº¿ç¨‹ä¹Ÿç»‘å®šä¸€ä¸ªloopå‘¢ï¼Ÿæˆ–è€…è¯´æˆ‘ä»¬ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å­çº¿ç¨‹è¿è¡Œä¸€ä¸ªloopã€‚æˆ‘ä»¬å¤§éƒ¨åˆ†æƒ…å†µå…¶å®éƒ½ä¸éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªloopï¼Œå› ä¸ºæ²¡æœ‰ç”¨åˆ°ï¼Œæ‰€ä»¥å¾ˆå¤šäººå°±ä¸å»äº†è§£ã€‚è¿™ä¹Ÿæ˜¯ä¸è¡Œçš„ã€‚å¯¹äºæœ‰å‘¨æœŸæ€§äººä»»åŠ¡çš„æƒ…å†µï¼Œç”¨loopæ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåå°çº¿ç¨‹ä¸€ç›´è¿è¡Œï¼Œç„¶åæˆ‘ä»¬ä¼šå®šæœŸæˆ–ä¸å®šæœŸç»™å®ƒå‘é€ä¸€äº›ä»»åŠ¡ï¼Œç”¨loopæ¥å®ç°æ—¶æ¯”è¾ƒå¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹é»˜è®¤æ²¡æœ‰loopï¼Œè€Œä¸”loopä¸èƒ½ç¨‹åºå‘˜è‡ªå·±æ‰‹åŠ¨è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºï¼Œéœ€è¦è°ƒç”¨ç³»ç»Ÿè·å–loopçš„æ–¹æ³•ã€‚ç³»ç»Ÿä¼šæŠŠåˆ›å»ºçš„loopè·Ÿå½“å‰çš„çº¿ç¨‹ç»‘å®šåœ¨ä¸€èµ·ï¼Œå­˜åœ¨ä¸€ä¸ªå…¨å±€çš„key-valueçš„å­—å…¸é‡Œï¼Œä¸‹æ¬¡å†è·å–å½“å‰çº¿ç¨‹çš„loopï¼Œå°±ç›´æ¥å–å‡ºæ¥ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è·å–åˆ°loopåï¼Œæˆ‘ä»¬è®©å®ƒè¿›å…¥äº‹ä»¶å¾ªç¯ï¼Œå³æ‰§è¡Œç±»ä¼¼ä¸Šé¢çš„loop()æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œé™¤éå¤–éƒ¨åœæ­¢æ‰è¿™ä¸ªå¾ªç¯ã€‚è¿™ä¸ªå¾ªç¯é‡Œé¢æœ‰ä¸€ä¸ªé‡è¦çš„ç‚¹ï¼Œå°±æ˜¯æ²¡æœ‰æ¶ˆæ¯çš„æ—¶å€™ï¼Œå®ƒæ˜¯è¿›å…¥ç¡çœ ç­‰å¾…çŠ¶æ€ï¼Œæœ‰æ¶ˆæ¯æ¥æ—¶å€™ï¼Œä¼šæŠŠå®ƒå”¤é†’å¹¶æ‰§è¡Œæ¶ˆæ¯å¤„ç†ã€‚è¿™ä¸ªæ¶ˆæ¯å¾ªç¯æœºåˆ¶Androidå’ŒiOSçš„å®ç°å·®åˆ«è¿˜æ˜¯æŒºå¤§çš„ã€‚ä¸‹é¢æˆ‘ä»¬è¯´ä¸€ä¸‹ï¼Œå¦‚ä½•å»ºç«‹ä¸€ä¸ªloopå¾ªç¯ï¼Œç„¶åå¦‚ä½•ç»™å®ƒå‘æ¶ˆæ¯å’Œä¸€äº›éœ€è¦æ³¨æ„çš„ä¸œè¥¿&lt;/p&gt;
&lt;h2&gt;iOSçš„NSRunLoop&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨iOSä¸­åˆ›å»ºä¸€ä¸ªloopå¹¶è®©å®ƒè·‘èµ·æ¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="c1"&gt;//åˆ›å»ºå¹¶å¯åŠ¨Thread&lt;/span&gt;
    &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;testThread&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSThread&lt;/span&gt; &lt;span class="n"&gt;alloc&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;initWithTarget&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;selector&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="k"&gt;@selector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;onTestRunLoop&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;object&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;testThread&lt;/span&gt; &lt;span class="n"&gt;setName&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;TestRunLoop&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;testThread&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

    &lt;span class="c1"&gt;//Threadçš„å…¥å£æ–¹æ³•&lt;/span&gt;
&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;onTestRunLoop:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;obj&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;--%@--&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSThread&lt;/span&gt; &lt;span class="n"&gt;currentThread&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
    &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSRunLoop&lt;/span&gt; &lt;span class="n"&gt;currentRunLoop&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;addPort&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSMachPort&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;forMode&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;NSDefaultRunLoopMode&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;***%@***&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,[&lt;/span&gt;&lt;span class="n"&gt;NSRunLoop&lt;/span&gt; &lt;span class="n"&gt;currentRunLoop&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
    &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSRunLoop&lt;/span&gt; &lt;span class="n"&gt;currentRunLoop&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;modeå’Œsource&lt;/h4&gt;
&lt;p&gt;ä¸Šé¢æœ€ä¸»è¦çš„ä»£ç æ˜¯&lt;strong&gt;[[NSRunLoop currentRunLoop] addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode]&lt;/strong&gt; å’Œ &lt;strong&gt;[[NSRunLoop currentRunLoop] run]&lt;/strong&gt;ï¼ŒcurrentRunLoopè¿™ä¸ªæ–¹æ³•ä¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æœ‰æ²¡æœ‰loopï¼Œæ²¡æœ‰çš„è¯ï¼Œå°±ä¼šè‡ªåŠ¨åˆ›å»ºã€‚NSMachPortæ˜¯ä¸€ä¸ªäº‹ä»¶æºsourceï¼ŒNSDefaultRunLoopModeä»£è¡¨ä¸€ä¸ªæ¨¡å¼Modeã€‚å½“æŠŠsourceå’ŒModeéƒ½è®¾ç½®ä¹‹åï¼Œå¼€å§‹è°ƒç”¨runæ–¹æ³•ï¼Œè¿›å…¥å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œmodeå’Œsourceæ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™NSRunLoopè·‘ä¸èµ·æ¥ã€‚NSRunLoopå¿…é¡»è¿è¡Œåœ¨æŸä¸€ç§modeä¸­ï¼Œmodeå¯ä»¥åˆ‡æ¢ï¼Œåˆ‡æ¢ä¹‹å‰å°±ä¼šæŠŠä¹‹å‰çš„modeåœæ‰ã€‚iOSç³»ç»Ÿå®šä¹‰äº†å¥½å‡ ç§modeï¼Œè¿™ä¸ªæ˜¯å®ƒè·ŸAndroidä¸€ä¸ªé‡è¦çš„ä¸åŒç‚¹ï¼Œå¯ä»¥è¯´è¿™ä¸ªè®¾è®¡è®©å®ƒçš„æ•ˆç‡æ¯”è¾ƒé«˜ã€‚ä¾‹å¦‚ä¸»çº¿ç¨‹ä¸­ï¼Œåˆ—è¡¨æ»‘åŠ¨çš„æ—¶å€™ï¼ŒNSRunLoopåˆ‡æ¢åˆ°TrackingRunLoopModeä¸‹ï¼Œä¹‹å‰è¿è¡Œmodeçš„sourceå°±åœæ‰ã€‚è¿™æ ·é‡Œåˆ—è¡¨æ»‘åŠ¨èµ·æ¥å°±ä¼šå¾ˆæµç•…ã€‚è‡³äºsourceï¼ŒPortåªæ˜¯å®ƒçš„ä¸€ç§ï¼Œå±äºInput Sourceï¼Œè¿˜æœ‰NSTimerä¹Ÿæ˜¯sourceï¼Œå±äºTimer Source.&lt;/p&gt;
&lt;h4&gt;observerå’Œautoreleasepool&lt;/h4&gt;
&lt;p&gt;é™¤äº†sourceï¼Œè¿˜æœ‰ä¸€ä¸ªobserveræœºåˆ¶ï¼Œè¿™æ˜¯iOSçš„ç‰¹è‰²ï¼ŒAndroidçš„loopæœºåˆ¶ä¸­æ²¡æœ‰è¿™äº›ã€‚iOSç³»ç»Ÿåœ¨loopå¾ªç¯ä¸­å®šä¹‰äº†ä¸€äº›é‡è¦çš„äº‹ä»¶ï¼Œç„¶åä½ å¯ä»¥ç›‘å¬è¿™äº›ç›¸å…³äº‹ä»¶ã€‚ä¾‹å¦‚å³å°†è¿›å…¥Loopï¼Œå³å°†å¤„ç† Sourceï¼Œå³å°†è¿›å…¥ä¼‘çœ ï¼Œåˆšä»ä¼‘çœ ä¸­å”¤é†’ è¿™äº›äº‹ä»¶éƒ½ä¼šé€šçŸ¥åˆ°ç›¸å…³çš„è§‚å¯Ÿè€…ã€‚è¿™ä¸ªæœºåˆ¶æˆ‘ä»¬å¼€å‘è€…å¾ˆå°‘ç”¨åˆ°ï¼Œä½†æ˜¯åœ¨iOSç³»ç»Ÿä¸­å´å¾ˆé‡è¦ã€‚å…¶ä¸­ä¸€ä¸ªå°±æ˜¯AutoReleasePoolæœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ç›¸ä¿¡ä¸å°‘äººåœ¨é¢è¯•æ—¶ä¼šè¢«é—®åˆ°NSRunLoopè·ŸAutoReleasePoolæœ‰ä»€ä¹ˆå…³ç³»ï¼ŒAutoReleasePoolä»€ä¹ˆæ—¶å€™é‡Šæ”¾æ± é‡Œé¢çš„å¯¹è±¡ã€‚æˆ‘ä»¬ç¬¬ä¸€ååº”å¾ˆå®¹æ˜“å°±è®¤ä¸ºæ˜¯@autoreleasepool{}æ–¹æ³•å—æ‰§è¡Œä¹‹åã€‚å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹çœ‹åˆ«çš„ã€‚æˆ‘ä»¬çŸ¥é“åœ¨iOSçš„main.mæ–‡ä»¶é‡Œä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;autoreleasepool&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;UIApplicationMain&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NSStringFromClass&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;AppDelegate&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;]));&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;AutoReleasePoolåŒ…å«äº†UIApplicationMain()æ–¹æ³•ï¼ŒUIApplicationMain()æ–¹æ³•é‡Œå»ºç«‹äº†main runloop,ç„¶åä¸€ç›´åœ¨é‚£é‡Œå¾ªç¯å¤„ç†æ¶ˆæ¯æˆ–è€…ç­‰å¾…ï¼Œå¦‚æœä½ å†è¯¥æ–¹æ³•ä¹‹åå†åŠ ä¸€äº›è¯­å¥ï¼Œæ˜¯æ²¡æœ‰åŠæ³•æ‰§è¡Œçš„ã€‚æŒ‰ç…§ä¹‹å‰çš„è¯´æ³•ï¼Œé‚£å²‚ä¸æ˜¯AutoReleasePoolä¸€ç›´ä¸ä¼šé‡Šæ”¾å®ƒé‡Œé¢çš„å¯¹è±¡ï¼Ÿæ˜¾ç„¶è¿™æ˜¯é”™çš„ã€‚ä½†æ˜¯è¦ç†è§£AutoReleasePoolä»€ä¹ˆæ—¶å€™é‡Šæ”¾å®ƒé‡Œé¢çš„å¯¹è±¡ï¼Œè¿˜æ˜¯éœ€è¦å…ˆäº†è§£ä¸€ä¸‹AutoReleasePoolçš„å®ç°æœºåˆ¶ã€‚AutoReleasePoolå®é™…ä¸Šæ˜¯æœ‰AutoReleasePageæ¥å®ç°çš„ï¼Œè€ŒAutoReleasePageæœ‰ç‚¹ç±»ä¼¼äºå †æ ˆï¼Œæœ‰ä¸€ä¸ªpushå’Œpopæ“ä½œã€‚è‹¹æœåœ¨ä¸»çº¿ç¨‹çš„runloopç›‘å¬äº†å‡ ä¸ªäº‹ä»¶ï¼Œåˆ†åˆ«æ˜¯å³å°†è¿›å…¥Loopï¼Œå‡†å¤‡è¿›å…¥ä¼‘çœ å’Œå³å°†é€€å‡ºLoopï¼Œåœ¨å³å°†è¿›å…¥Loopæ—¶è¿›è¡Œpushä¸€ä¸ªå“¨å…µå¯¹è±¡ï¼ˆæˆ–è€…å«è¾¹ç•Œå¯¹è±¡ï¼‰ï¼Œåœ¨å³å°†ä¼‘çœ æ—¶æ˜¯popå“¨å…µå¯¹è±¡æ“ä½œï¼Œç„¶åå†æ¬¡pushæ“ä½œï¼Œåœ¨å³å°†é€€å‡ºLoopæ—¶popæ“ä½œã€‚åœ¨pushå“¨å…µå¯¹è±¡ä¹‹åï¼Œç¨‹åºè¿è¡Œä¼špushå¾ˆå¯¹autoreleaseå¯¹è±¡åˆ°AutoReleasePageä¸­ï¼Œpopæ“ä½œå°±æŠŠè¿™äº›å¯¹è±¡é‡Šæ”¾ï¼Œä¸€ç›´æ‰¾åˆ°å“¨å…µå¯¹è±¡ä¹ŸæŠŠå®ƒpopæ‰ä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ¯æ¬¡runLoopè¿›å…¥ä¼‘çœ å‰AutoReleasePoolå°±é‡Šæ”¾ä¸€æ¬¡ã€‚AutoReleasePoolå †æ ˆå¼ç»“æ„è®©å®ƒå¯ä»¥åµŒå¥—ï¼Œäº’ä¸å½±å“ã€‚æ›´æ–°è¯¦ç»†çš„AutoReleasePoolèµ„æ–™å¯ä»¥æŸ¥çœ‹æœ€åçš„å‚è€ƒèµ„æ–™&lt;/p&gt;
&lt;h4&gt;ç»™RunLoopå‘æ¶ˆæ¯&lt;/h4&gt;
&lt;p&gt;å»ºç«‹äº†ä¸€ä¸ªrunloopï¼Œç»™å®ƒå‘æ¶ˆæ¯åšä»»åŠ¡æ‰æ˜¯æˆ‘ä»¬çš„ç›®çš„æ‰€åœ¨ã€‚æ€ä¹ˆåœ¨åˆ«çš„çº¿ç¨‹ç»™æˆ‘ä»¬å»ºç«‹çš„runloopå‘æ¶ˆæ¯å‘¢ï¼Ÿæœ€ç›´æ¥çš„æ–¹æ³•æ˜¯é€šè¿‡performSelector:onThread:withObject:waitUntilDone:æ–¹æ³•.è¿™ä¸ªæ˜¯NSObjectçš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹å¼éœ€è¦æŒæœ‰Threadå¯¹è±¡ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åŒRunLoopæ·»åŠ Portæˆ–è€…Timerçš„æ–¹å¼ï¼Œç„¶åæŒæœ‰Portæˆ–è€…Timerï¼Œè¿™ä¸ªç§æ–¹å¼ä¸æ˜¯é‚£ä¹ˆç›´æ¥ã€‚å¦‚æœéœ€è¦è·¨è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œåˆ™éœ€è¦Portï¼Œä½†é™¤äº†ç³»ç»Ÿé—´çš„è¿›ç¨‹ï¼Œè·¨è¿›ç¨‹é€šä¿¡å¹¶ä¸å¸¸ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç°å®çš„ç¼–ç¨‹å·¥ä½œä¸­ï¼Œæ›´å¸¸ç”¨çš„æ˜¯å¾€ä¸»çº¿ç¨‹çš„RunLoopå‘é€æ¶ˆæ¯ã€‚iOSç³»ç»Ÿæä¾›äº†å¾ˆå¤šæ–¹å¼å¾ˆæ–¹ä¾¿æˆ‘ä»¬æ“ä½œã€‚ä¾‹å¦‚NSObjectä¸­å°±æœ‰performSelectorOnMainThread:withObject:waitUntilDone:æ–¹æ³•ï¼Œå°±æ˜¯å¾€MainRunLoopé‡Œå‘æ¶ˆæ¯ã€‚è¿˜æœ‰dispatch_(a)syn(dispatch_get_main_queue(),block) GCDæ–¹æ³•ä¹Ÿæ˜¯ã€‚åŒæ—¶è¿˜æœ‰å¾ˆæ–¹ä¾¿çš„è·å–mainThreadå’ŒmainRunLoopçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h4&gt;é€€å‡ºæœºåˆ¶&lt;/h4&gt;
&lt;p&gt;runloopä»€ä¹ˆæ—¶å€™é€€å‡ºå‘¢ï¼Ÿä»APIæ–‡æ¡£æ¥çœ‹ï¼Œè‹¹æœè²Œä¼¼æ²¡æœ‰æä¾›ä¸»åŠ¨åœæ­¢runloopçš„æ¥å£ï¼Œä½†æ˜¯åœ¨runçš„æ—¶å€™å¯ä»¥æŒ‡å®šè¶…æ—¶æ—¶é—´ï¼ˆrunUntilDate: å’Œ runMode:beforeDateï¼‰ã€‚ä»åº•å±‚ä»£ç æ¥çœ‹ï¼Œå¤–éƒ¨æ˜¯å¯ä»¥ä¸»åŠ¨è°ƒç”¨åœæ­¢çš„ï¼Œç„¶åè¿˜æœ‰å°±æ˜¯æ²¡æœ‰source/timer/observerçš„è¯ï¼Œrunloopä¹Ÿä¼šé€€å‡ºã€‚&lt;/p&gt;
&lt;h4&gt;æ€»ç»“&lt;/h4&gt;
&lt;p&gt;NSRunLoopæ€»ä½“æ¥è¯´ä¸ç®€å•ï¼Œå¹¶ä¸”å¹³æ—¶ä¸å¤ªä¼šç”¨åˆ°ã€‚å¾ˆå¤šä¸œè¥¿è¿˜æ˜¯ä¸å¤ªå¥½ç†è§£ã€‚modeå¦‚ä½•åˆ‡æ¢çš„ï¼Ÿåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­é€šè¿‡performSelector:onThread:withObject:waitUntilDone:å‘å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„runloopå‘é€æ¶ˆæ¯ï¼Œæ˜¯æ€ä¹ˆå‘é€è¿‡å»çš„ï¼Ÿè¿˜æœ‰sourceé‡Œåˆåˆ†å¾ˆå¤šç§ï¼Œobserveråœ¨ç³»ç»Ÿä¸­è¿˜æœ‰é‚£äº›åº”ç”¨ç­‰ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥æŒ–æ˜ã€‚NSRunLoop æ˜¯åŸºäº CFRunLoopRef çš„å°è£…ï¼Œè€ŒCFRunLoopRefæ˜¯å¼€æºçš„ï¼Œæœ€å¥½çš„ç ”ç©¶æ–¹å¼è¿˜æ˜¯å»é˜…è¯»&lt;a href="https://opensource.apple.com/source/CF/CF-855.17/CFRunLoop.c"&gt;æºç &lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;å‚è€ƒèµ„æ–™&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="http://blog.ibireme.com/2015/05/18/runloop/"&gt;æ·±å…¥ç†è§£RunLoop&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[&lt;a href="http://www.jianshu.com/p/c0a550d2ac97"&gt;RunLoopå·²å…¥é—¨ï¼Ÿä¸æ¥åº”ç”¨ä¸€ä¸‹ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.jianshu.com/p/929d855c5a5a"&gt;iOS runloop å­¦ä¹ ç¬”è®°(äºŒ)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.sunnyxx.com/2014/10/15/behind-autorelease/"&gt;é»‘å¹•èƒŒåçš„Autorelease&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Androidçš„Looper&lt;/h2&gt;
&lt;p&gt;è·ŸiOSä¸åŒï¼ŒAndroidçš„æºç æ˜¯å¼€å‘çš„ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿çš„çœ‹åˆ°Looperçš„æºç ã€‚å®é™…ä¸Šå¤§å®¶ç ”ç©¶Looperæœºåˆ¶éƒ½æ˜¯é˜…è¯»æºç çš„ã€‚æ•´ä½“æ¥è®²ï¼Œæˆ‘è§‰å¾—Androidçš„äº‹ä»¶å¾ªç¯æœºåˆ¶æ¯”è¾ƒç®€æ´æ˜äº†ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹Androidå¦‚ä½•åˆ›å»ºä¸€ä¸ªLooperå¹¶è®©å®ƒè·‘èµ·æ¥&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;class&lt;/span&gt; &lt;span class="n"&gt;LooperThread&lt;/span&gt; &lt;span class="n"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Handler&lt;/span&gt; &lt;span class="n"&gt;mHandler&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

   &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
       &lt;span class="n"&gt;Looper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;prepare&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

       &lt;span class="n"&gt;mHandler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Handler&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;handleMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
              &lt;span class="c1"&gt;// process incoming messages here&lt;/span&gt;
           &lt;span class="p"&gt;}&lt;/span&gt;
       &lt;span class="p"&gt;};&lt;/span&gt;
       &lt;span class="n"&gt;Looper&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loop&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æœ€ä¸»è¦çš„ä»£ç æ˜¯&lt;strong&gt;Looper.prepare()&lt;/strong&gt; å’Œ &lt;strong&gt;Looper.loop()&lt;/strong&gt;ï¼Œå‰ä¸€å¥çš„æ„æ€æ˜¯åˆ›å»ºä¸€ä¸ªLooper,å¹¶ä¸”å°†è¿™ä¸ªLooperå’ŒThreadå­˜å‚¨åˆ°ä¸€ä¸ªé™æ€ThreadLocalå˜é‡ä¸­ã€‚æ³¨æ„å¦‚æœå½“å‰çº¿ç¨‹å·²æœ‰Looperå®ƒä¼šæŠ›å¼‚å¸¸ã€‚åä¸€å¥ä»£ç çš„ä½œç”¨å°±æ˜¯è¿›å…¥ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸æ–­çš„ä»MessageQueueä¸­å–å‡ºMessageï¼Œç„¶åæ‹¿åˆ°Handlerï¼Œæ‰§è¡Œå®ƒçš„dispatchMessageæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h4&gt;Looperï¼ŒMessageQueueï¼ŒHandlerï¼ŒMessage&lt;/h4&gt;
&lt;p&gt;æ¶ˆæ¯å¾ªç¯æœºåˆ¶é‡Œæœ€é‡è¦çš„æ˜¯Looperå’ŒMessageQueueã€‚çœ‹æºä»£ç å°±å¯ä»¥çŸ¥é“ï¼ŒMessageQueueæ˜¯ä½œä¸ºLooperçš„ä¸€ä¸ªæˆå‘˜å˜é‡è€Œå­˜åœ¨ï¼Œå½“Looperå®ä¾‹åŒ–çš„æ—¶å€™ï¼Œå®ƒä¹Ÿè¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”å½“å‰çš„Threadå¯¹è±¡ä¹Ÿå½“åšæˆå‘˜å˜é‡å­˜èµ·æ¥ã€‚Looper.loop()æ–¹æ³•å¾ˆç®€å•ï¼Œæ ¸å¿ƒä»£ç å°±é‚£ä¹ˆå‡ å¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;Message&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;queue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;next&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// might block&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// No message indicates that the message queue is quitting.&lt;/span&gt;
       &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;
   &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dispatchMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;......&lt;/span&gt;
   &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;recycleUnchecked&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰€ä»¥Looperåšçš„å·¥ä½œå°±æ˜¯ä¸æ–­ä»MessageQueueæ€»å–å‡ºæ¶ˆæ¯ï¼Œç„¶åè°ƒç”¨Messageçš„targetï¼Œå³Handleræ¥å¤„ç†ï¼ˆdispatchMessageï¼‰æ¶ˆæ¯ã€‚å–æ¶ˆæ¯çš„æ—¶å€™ï¼Œå³queue.next()æ–¹æ³•ï¼Œå¦‚æœå½“å‰queueé‡Œæ²¡æœ‰æ¶ˆæ¯ï¼Œå®ƒä¼šåœ¨è¿™é‡Œä¼‘çœ ç­‰å¾…ï¼ŒçŸ¥é“æœ‰æ¶ˆæ¯è¿‡æ¥ã€‚å¦‚æœæ¶ˆæ¯ä¸ºç©ºï¼Œå°±è·³å‡ºå¾ªç¯è¿”å›äº†ã€‚é‡ç‚¹åœ¨äºMessageQueueï¼Œçœ‹å®ƒå¦‚ä½•å°†æ¶ˆæ¯å‘è¿‡æ¥ï¼Œåˆå¦‚ä½•å®ç°å–æ¶ˆæ¯çš„ã€‚&lt;/p&gt;
&lt;h4&gt;ç”¨Handlerç»™Looperå‘æ¶ˆæ¯&lt;/h4&gt;
&lt;p&gt;ä¸‹é¢æ˜¯é€šè¿‡mHandlerç»™Looperå‘æ¶ˆæ¯ï¼ŒmHandleræ˜¯ä¸Šé¢å†LooperThreadçš„runæ–¹æ³•é‡Œåˆ›å»ºçš„ï¼Œå¹¶ä¸”å®ç°äº†Handlerçš„handleMessageæ–¹æ³•ã€‚æ³¨æ„mHandleræ˜¯é€šè¿‡æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œè¿™æ ·çš„è¯å®ƒä¼šè·å–å½“å‰çº¿ç¨‹çš„Looperå’ŒLooperçš„MessageQueueå½“åšæˆå‘˜å˜é‡ä¿å­˜èµ·æ¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;//å‘é€æ¶ˆæ¯&lt;/span&gt;
&lt;span class="n"&gt;mHandler&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;obtain&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="n"&gt;mHandler&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;post&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;//TODO&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
 &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å¯ä»¥ç»™Handlerå‘é€Messageæˆ–postä¸€ä¸ªRunableï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡sendMessageDelayedæ–¹æ³•å‘é€å»¶æ—¶æ¶ˆæ¯ï¼Œå³æŒ‡å®šæ¶ˆæ¯å¤šä¹…åæ‰æ‰§è¡Œã€‚æ‰€æœ‰é€šè¿‡sendMessageæˆ–è€…å®ƒçš„é‡è½½æ–¹æ³•å‘é€çš„Messageï¼Œæœ€ç»ˆéƒ½è¢«ä¼ åˆ°ä¸Šé¢çš„handleMessageä¸­æ¥å¤„ç†ã€‚è¿™æ ·è¯´æ¥ï¼ŒHandleræ—¢æ˜¯æ¶ˆæ¯çš„å‘é€è€…ï¼Œä¹Ÿæ˜¯æ¶ˆæ¯çš„å¤„ç†è€…ï¼Œè¿™æ ·çœ‹èµ·æ¥å¥½å¥‡æ€ªæ²¡æœ‰å¿…è¦çš„æ ·å­ã€‚å®é™…ä¸Šä¸å¥‡æ€ªï¼Œä½ ç°åœ¨å‘å‡ºçš„æ¶ˆæ¯ï¼Œè¦ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ‰ä¼šå¤„ç†åˆ°ï¼Œæ‰€ä»¥å®ƒçš„æ‰§è¡Œå¼‚æ­¥çš„ã€‚å¦å¤–æ¶ˆæ¯çš„æ‰§è¡Œæ˜¯åœ¨Handleræ‰€ç»‘å®šçš„é‚£ä¸ªLooperæ‰€åœ¨çš„çº¿ç¨‹ï¼Œæˆ‘ä»¬ç»å¸¸åšçš„å°±æ˜¯åœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨åœ¨ä¸»çº¿ç¨‹Handlerå‘é€æ¶ˆæ¯ï¼Œè¿™æ ·å°±åšåˆ°çš„çº¿ç¨‹åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;h4&gt;Message&lt;/h4&gt;
&lt;p&gt;å¾ˆæ—©ä¹‹å‰æˆ‘æƒ³è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šä¸ªHandlerï¼Œæ¯ä¸ªHandleréƒ½æœ‰çš„å®ƒçš„handleMessageæ–¹æ³•ï¼Œæˆ‘ä»¬æ€ä¹ˆä¿è¯æŸä¸ªhandlerå‘æ¶ˆæ¯ä¸ä¼šå‘åˆ°åˆ«çš„handlerçš„handleMessageä¸­å‘¢ã€‚çœ‹äº†æºä»£ç åå‘ç°è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼šæ¯ä¸ªMessageå‘é€å‡ºå»å‰ï¼Œä¼šå°†å‘é€å®ƒçš„é‚£ä¸ªHandlerä¿å­˜åˆ°ä¸€ä¸ªå«targetå‚æ•°ä¸­ï¼ŒLooperä¸­å°±ä½¿ç”¨è¿™ä¸ªtargetæ¥å¤„ç†æ¶ˆæ¯ã€‚ä½†æ˜¯è¿™ä¸ªtargetå‚æ•°å‘å¼€å‘è€…éšè—çš„ï¼Œæˆ‘ä»¬ä¸çœ‹æºä»£ç ä¸çŸ¥é“å®ƒçš„å­˜åœ¨ã€‚Messageç±»ä¸­è¿˜æœ‰å¥½å‡ ä¸ªè¿™æ ·çš„å‚æ•°ã€‚ä¾‹å¦‚æˆ‘ä»¬é€šè¿‡Handlerçš„postçš„Runableæœ€ç»ˆæ˜¯å°è£…åœ¨Messageçš„callbackå‚æ•°ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªwhenå‚æ•°è¡¨æ˜æ¯ä¸ªæ¶ˆæ¯çš„æ‰§è¡Œæ—¶é—´ï¼Œè¿˜æœ‰ä¸€ä¸ªBundleç±»å‹çš„dataæ•°æ®ï¼Œè¿˜æœ‰ä¸€ä¸ªnextå‚æ•°ã€‚æ²¡é”™ï¼ŒMessageå…¶å®æ˜¯ä¸€ä¸ªå•é“¾è¡¨çš„èŠ‚ç‚¹æ•°æ®ç»“æ„ï¼Œè¿™ä¸€ç‚¹çš„ä½¿ç”¨ä½“ç°MessageQueueä¸­ï¼ŒMessageQueueæœ¬èº«æ²¡æœ‰å†å®ç°é˜Ÿåˆ—ï¼Œæ˜¯å€ŸåŠ©Messageæ˜¯å®ç°çš„ã€‚è¿˜æœ‰Messageä¸­è¿˜æœ‰ä¸€ä¸ªæ¶ˆæ¯ç¼“å­˜æ± ï¼Œè¿™å°±æ˜¯å¤§å®¶éƒ½æ¨å´‡ä½¿ç”¨Message.obtain()æ¥è·å–æ¶ˆæ¯çš„åŸå› ã€‚è¿˜æœ‰Messageä¸­è¿˜æœ‰ä¸€ä¸ªMessengerç±»å‹çš„å‚æ•°replayToï¼Œè¿™ä¸ªå‚æ•°ç”¨æ¥è·¨è¿›ç¨‹é€šä¿¡çš„,åœ¨Handlerä¸­å®ç°äº†è¿™ä¸ªæœºåˆ¶ã€‚æ‰€ä»¥Messageå’ŒHandlerè¿˜çœŸæ˜¯æœ‰ä¸å°‘ä¸œè¥¿ï¼Œè¦äº†è§£æ›´å¤šè¯·çœ‹æºä»£ç æˆ–è€…åé¢çš„å‚è€ƒèµ„æ–™ã€‚&lt;/p&gt;
&lt;h4&gt;MessageQueueå’Œåƒåœ¾å›æ”¶&lt;/h4&gt;
&lt;p&gt;MessageQueueç®—æ˜¯è¿™ä¸ªæœºåˆ¶çš„æ ¸å¿ƒï¼Œå› ä¸ºæ¶ˆæ¯éƒ½æ˜¯é€šè¿‡å®ƒçš„enqueueMessageä¼ è¿›æ¥ï¼Œé€šè¿‡å®ƒçš„nextæ–¹æ³•å–æ¶ˆæ¯æˆ–è€…blockç­‰å¾…ã€‚ä»–è¿˜åŒ…å«äº†ä¸€äº›nativeæ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°±æ˜¯å¯¹åº”äº†c++å±‚çš„Looper,MessageQueueï¼Œè¿™åˆæ˜¯ä¸€ä¸ªå¾ˆæ·±çš„çŸ¥è¯†ç‚¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;enqueueMessageæ–¹æ³•ä¸ç®—å¤æ‚ï¼Œä¸»è¦æ˜¯å¯¹Messageå‚æ•°æ£€æŸ¥å’ŒåŠ å…¥é˜Ÿåˆ—ï¼Œæœ€ç»ˆè°ƒç”¨nativeWakeæ–¹æ³•ï¼Œé€šçŸ¥åº•å±‚åˆ—è¡¨æœ‰å˜åŒ–ã€‚è€Œnextæ–¹æ³•ï¼Œåˆ™æ¯”è¾ƒå¤æ‚ï¼Œå®ƒæœ‰ä¸€ä¸ªforæ­»å¾ªç¯ï¼Œå¹¶è°ƒç”¨äº†nativePollOnceæ–¹æ³•è¿›è¡Œé˜»å¡ç­‰å¾…ã€‚å½“è¢«å”¤é†’ä¹‹åï¼Œå®ƒä»é˜Ÿåˆ—é‡Œæ‰¾æ¶ˆæ¯ï¼Œæ‰¾åˆ°äº†éœ€è¦å¤„ç†çš„æ¶ˆæ¯å°±è¿”å›ï¼Œæ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œå¤„ç†IdleHandlerï¼Œå¤„ç†å®Œè¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯ã€‚è¿™é‡Œçš„IdleHandlerå¾ˆæœ‰æ„æ€ï¼Œæˆ‘å¼€å§‹ä¸çŸ¥é“æ˜¯å•¥ï¼Œåæ¥çœ‹åˆ°èµ„æ–™è¯´æˆ‘ä»¬çš„ä¸»çº¿ç¨‹ActivityThreadå°±å®ç°äº†IdleHandlerï¼Œåœ¨é‡Œé¢åšåƒåœ¾å›æ”¶å·¥ä½œã€‚è¿™æ°æ°æ˜¯è·ŸiOSçš„RunLoopé‡Œé¢çš„Observeræœºåˆ¶ä¸€æ ·ã€‚éƒ½æ˜¯åœ¨è¿›è¡Œä¸¤æ¬¡ä¼‘çœ ä¹‹å‰è¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼ŒçœŸæ˜¯å¼‚æ›²åŒå·¥å•Šï¼&lt;/p&gt;
&lt;h4&gt;æ€»ç»“&lt;/h4&gt;
&lt;p&gt;Androidçš„Looperæœºåˆ¶è¯´ç®€å•ç®€å•ï¼Œè¯´å¤æ‚å¤æ‚ï¼Œä½†æ˜¯å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰æºç ã€‚æˆ‘è¿™é‡Œåªè®¨è®ºäº†ä¸Šå±‚æˆ‘ä»¬å¸¸ç”¨çš„æ¥å£å’Œæœºåˆ¶ï¼Œå®é™…ä¸Šæœ‰å¾ˆå¤šä¸œè¥¿è¿˜å€¼å¾—æˆ‘ä»¬ç ”ç©¶ã€‚ä¾‹å¦‚MessageQueueè¿˜å¯ä»¥æ”¾Barrier, MessageQueueç›¸å…³çš„nativeæ–¹æ³•æ¶‰åŠåˆ°çš„C++å±‚çš„Looperæœºåˆ¶ï¼ŒHandlerå’ŒMessageræ˜¯å¦‚ä½•å®ç°è·¨è¿›ç¨‹é€šä¿¡çš„ï¼Œè¿™äº›éƒ½æ˜¯å¾ˆé«˜çº§çš„çŸ¥è¯†ï¼Œä»¥åæœ‰æœºä¼šç ”ç©¶ç ”ç©¶ã€‚&lt;/p&gt;
&lt;h4&gt;å‚è€ƒèµ„æ–™&lt;/h4&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href="https://my.oschina.net/youranhongcha/blog/492591"&gt;èŠä¸€èŠAndroidçš„æ¶ˆæ¯æœºåˆ¶&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.cnblogs.com/angeldevil/p/3340644.html"&gt;Androidæ¶ˆæ¯å¤„ç†æœºåˆ¶(Handlerã€Looperã€MessageQueueä¸Message)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://blog.csdn.net/lmj623565791/article/details/47017485"&gt; Android åŸºäºMessageçš„è¿›ç¨‹é—´é€šä¿¡ Messengerå®Œå…¨è§£æ&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;iOSå’ŒAndroidåŒä¸ºå½“ä»Šæœ€æµè¡Œçš„ç§»åŠ¨æ“ä½œç³»ç»Ÿï¼Œåœ¨å¾ˆå¤šç³»ç»Ÿè®¾è®¡æ–¹é¢éƒ½æ˜¯éå¸¸åƒã€‚æˆ–è®¸è¯´ä»–ä»¬å½¼æ­¤å€Ÿé‰´ï¼ŒæŠ€æœ¯æœ¬æ¥å°±æ˜¯è¿™æ ·æ ·å­ã€‚æ¶ˆæ¯å¾ªç¯æœºåˆ¶æœ¬æ¥å°±æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œåªæ˜¯Androidå’ŒiOSæ ¹æ®è‡ªå·±çš„å¹³å°åšäº†ä¸€å¥—å®ç°ã€‚é€šè¿‡å¯¹æ¯”å­¦ä¹ ï¼Œè‡ªå·±æ”¶è·å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘ä¹Ÿæ„Ÿè§‰è‡ªå·±è¿˜ä¸å¤Ÿæ·±å…¥ï¼Œç°åœ¨åªæ˜¯å­¦åˆ°ç‚¹çš®æ¯›è€Œå·²ã€‚ç»§ç»­åŠªåŠ›ã€‚&lt;/p&gt;</summary><category term="Android iOS Looper NSRunLoop"></category></entry><entry><title>iOSç›´æ¥ä¸Šä¼ ç³»ç»Ÿç…§ç‰‡å’Œè§†é¢‘ï¼ˆALAssetï¼‰</title><link href="http://szuwest.github.io/ioszhi-jie-shang-chuan-xi-tong-zhao-pian-he-shi-pin-alasset.html" rel="alternate"></link><updated>2016-12-01T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-12-01:ioszhi-jie-shang-chuan-xi-tong-zhao-pian-he-shi-pin-alasset.html</id><summary type="html">&lt;h2&gt;iOSç›´æ¥ä¸Šä¼ ç³»ç»Ÿç…§ç‰‡å’Œè§†é¢‘ï¼ˆALAssetï¼‰&lt;/h2&gt;
&lt;p&gt;æˆ‘ä¹‹å‰æœ‰ä¸€ç¯‡æ–‡ç« é‡Œè®²è¿‡ä¸Šä¼ ç³»ç»Ÿç…§ç‰‡å’Œè§†é¢‘çš„äº‹ï¼ˆ&lt;a href="http://szuwest.github.io/iosxi-tong-xiang-ce-shang-chuan-bu-de-bu-shuo-de-na-xie-shi-er.html"&gt;iOSç³»ç»Ÿç›¸å†Œä¸Šä¼ ä¸å¾—ä¸è¯´çš„é‚£äº›äº‹å„¿&lt;/a&gt;ï¼‰ï¼Œéœ€è¦å°†ALAssetä»ç³»ç»Ÿç›¸å†Œé‡Œå¯¼å‡ºåˆ°æ²™ç›’æ–‡ä»¶é‡Œï¼Œç„¶åå†å°†è¿™ä¸ªæ–‡ä»¶ä¸Šä¼ ã€‚è¿™é‡Œéœ€è¦æ— ç«¯ç«¯å†™ä¸€æ¬¡æ–‡ä»¶çš„æ—¶é—´å°±ä¸è¯´äº†ï¼Œæœ€è¦å‘½çš„æ˜¯è¿˜è¦å æ®é¢å¤–çš„ç£ç›˜ç©ºé—´ã€‚æˆ‘ä»¬çš„ç”¨æˆ·ä¸€èˆ¬è¦å¤‡ä»½ç›¸ç‰‡è§†é¢‘çš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯æ‰‹æœºç©ºé—´ä¸è¶³çš„æ—¶å€™ã€‚è¿™ä¸ªæ—¶å€™å­˜å‚¨ç©ºé—´å¾ˆç´§å¼ ï¼Œä½ å¤‡ä»½è¿˜éœ€è¦é¢å¤–çš„ç©ºé—´ã€‚å¦‚æœä¸€ä¸ªè§†é¢‘å¾ˆå¤§ï¼Œä¾‹å¦‚2Gï¼Œé‚£ä¹ˆæ‰‹æœºä¸Šéœ€è¦æœ‰ç©ºé—²çš„2Gç©ºé—´æ‰èƒ½å¯¼å‡ºè§†é¢‘ï¼Œæ‰èƒ½å¤‡ä»½ã€‚çœŸæ˜¯ç¡¬ä¼¤ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜ä¸€ç›´åœ¨æˆ‘å¿ƒå¤´ï¼Œå¡äº†æˆ‘å¾ˆä¹…ï¼Œä¹‹å‰æˆ‘æœ‰ç½‘ä¸Šæ‰¾è§£å†³æ–¹æ³•ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œå¾ˆå¤šéƒ½æ˜¯è¯´å°†ALAssetå¯¼å‡ºæ–‡ä»¶åˆ°æ²™ç›’çš„äº‹ã€‚æˆ‘è‡ªå·±ä¹Ÿæœ‰æƒ³è¿‡è¦æ€ä¹ˆè§£å†³ã€‚æˆ‘æƒ³è¿‡ä»ALAssetä¸­è¯»å–ä¸€æ®µä¸€æ®µçš„NSDataæ•°æ®ï¼Œç„¶ååˆ†åˆ«å°†è¿™äº›æ•°æ®ä¸Šä¼ ã€‚è¿™æ ·ä¹Ÿè®¸æ˜¯å¯ä»¥çš„ï¼Œä½†è²Œä¼¼éœ€è¦æœåŠ¡å™¨é‚£è¾¹èƒ½å°†è¿™äº›åŒ…ç»„åˆèµ·æ¥ã€‚å¦å¤–å®¢æˆ·ç«¯è¿™äº›åšèµ·æ¥ä¹ŸæŒºå¤æ‚ã€‚è¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯æˆ‘ä¸ä½¿ç”¨AFNåº“ï¼Œè‡ªå·±ç›´æ¥ç”¨NSURLConnectionæ¥å†™ï¼Œè·ŸæœåŠ¡å™¨å»ºç«‹è¿æ¥åä¸æ–­çš„ä»ALAssetä¸­è¯»å–æ•°æ®å†™å…¥è·ŸæœåŠ¡å™¨å»ºç«‹çš„è¿æ¥ã€‚è¿™ä¸ªæ˜¯å‚è€ƒJavaçš„å†™æ³•ã€‚å¯æ˜¯æˆ‘åˆä¸çŸ¥ä»ä½•åŠ¨æ‰‹ã€‚å¹¶ä¸”ä¹‹å‰éƒ½å¾ˆå¿™ï¼Œæ²¡æœ‰æ—¶é—´æƒ³è¿™ä¹ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘æˆ‘æ¯”è¾ƒé—²äº†ï¼Œæˆ‘æƒ³æ­£å¥½æœ‰æ—¶é—´æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ˜¯æˆ‘å¿ƒä¸­çš„ä¸€å—çŸ³å¤´ï¼Œæˆ‘è¦æŠŠå®ƒæ‹¿æ‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡æˆ‘ç›´æ¥åœ¨githubä¸Šæ‰¾ï¼Œè¯´ä¸å®šèƒ½æ‰¾åˆ°ä¸€äº›æœ‰ç”¨çš„ä»£ç ã€‚æœçœŸè®©æˆ‘æ‰¾åˆ°äº† &lt;a href="https://github.com/formal-method/FMAssetStream"&gt;FMAssetStream&lt;/a&gt;è¿™ä¸ªåº“,è¿™ä¸ªåº“çš„åšæ³•å¾ˆç®€å•ï¼Œå®šä¹‰äº†ä¸€ä¸ªå­ç±»æ¥æ‰©å±•&lt;strong&gt;NSInputStream&lt;/strong&gt;ï¼Œé‡è½½äº†ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³• :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSInteger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt; &lt;span class="n"&gt;maxLength&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSUInteger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;NSUInteger&lt;/span&gt; &lt;span class="n"&gt;bytesRead&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;assetRepresentation&lt;/span&gt; &lt;span class="n"&gt;getBytes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt; &lt;span class="n"&gt;fromOffset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;bytesRead&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;// Update stream status when it&amp;#39;s consumed&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;streamStatus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NSStreamStatusAtEnd&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;progressDelegate&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;progressDelegate&lt;/span&gt; &lt;span class="n"&gt;progressBytes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="n"&gt;totalBytes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;bytesRead&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªæ–¹æ³•åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯è¯»å–ä¸€å®šé•¿åº¦çš„æ•°æ®åˆ°bufferé‡Œã€‚è€Œè¿™ä¸ªbufferé‡Œæ•°æ®å°±æ˜¯ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™ä¸€æ¬¡è¯»å–å¹¶å†™å…¥çš„æ•°æ®ã€‚&lt;strong&gt;æˆ‘æ€ä¹ˆå°±æ²¡æœ‰æƒ³åˆ°æ‰©å±•NSInputStreamç±»è¿™ç§åšæ³•å‘¢&lt;/strong&gt;ï¼Œæˆ‘å¿ƒé‡Œå¤§éª‚è‡ªå·±ï¼Œè¿™å¾ˆè‡ªç„¶çš„ä¸€ç§åšæ³•å‘€ï¼Œç†åº”å°±è¯¥è¿™ä¹ˆåšçš„ã€‚ä¸Šä¼ æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯ç”¨æµï¼Œæ–‡ä»¶æµæ˜¯ç³»ç»Ÿæä¾›çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥æ‰©å±•å®ƒæ¥å¤„ç†ç‰¹åˆ«çš„æƒ…å†µå‘€ã€‚è€Œä¸”æˆ‘çœ‹è¿‡AFNåº“çš„æºä»£ç ï¼Œå®ƒä¹Ÿæ˜¯æ‰©å±•äº†NSInputStreamæ¥åšå¤šéƒ¨åˆ†æ•°æ®ä¸Šä¼ ã€‚&lt;/p&gt;
&lt;p&gt;çŸ¥é“äº†æ‰©å±•NSInputStreamæ¥ä»ALAssetä¸­è¯»å–æ•°æ®ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œå°±æ˜¯æ–­ç‚¹ç»­ä¼ ã€‚å…³äºæ–­ç‚¹ç»­ä¼ æˆ‘ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« &lt;a href="http://szuwest.github.io/iosshang-chuan-wen-jian-zhi-chi-duan-dian-xu-chuan.html"&gt;iOSä¸Šä¼ æ–‡ä»¶æ”¯æŒæ–­ç‚¹ç»­ä¼ &lt;/a&gt;ã€‚ç„¶è€ŒFMAssetStreamè¿™ä¸ªåº“å†™å¾—å¾ˆç®€å•ï¼Œæ²¡æœ‰æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œå®ƒä¹Ÿæ²¡æœ‰é›†æˆAFNã€‚æˆ‘æƒ³åº”è¯¥ä¹Ÿæœ‰äººåšè¿‡è¿™äº›äº‹æƒ…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£å†è‡ªå·±å†™ã€‚&lt;/p&gt;
&lt;p&gt;æœç„¶æˆ‘æ‰¾åˆ°ä¸€ä¸ªæ›´åŠ å®Œå–„çš„åº“&lt;a href="https://github.com/pavelosipov/POSInputStreamLibrary"&gt;POSInputStreamLibrary&lt;/a&gt;ï¼Œè¿™ä¸ªåº“æ—¢æ”¯æŒäº†æ–­ç‚¹ç»­ä¼ ï¼Œè€Œä¸”è¿˜å¯ä»¥å¾ˆæ–¹ä¾¿çš„è·ŸAFNä¸€èµ·ç»“åˆä½¿ç”¨ã€‚è¿™æ­£æ˜¯æˆ‘è¦æ‰¾çš„åº“ï¼Œå¹¶ä¸”è¿™ä¸ªåº“æ›´åŠ å®Œå–„å’Œå¯é…ç½®ï¼Œä»£ç ä¹Ÿå†™å¾—å¾ˆå¥½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æœ€ç»ˆä½¿ç”¨äº†è¿™ä¸ªåº“ï¼Œæ”¹å®Œç›¸å…³ä»£ç ä¹‹åï¼Œä¸Šä¼ æ–‡ä»¶èµ·æ¥é£å¿«ã€‚æ„Ÿè°¢è¿™ä¸ªåº“çš„ä½œè€…ã€‚æˆ‘å¿ƒä¸­çš„æ¨ªäº†å¾ˆä¹…çš„ä¸€å—çŸ³å¤´ç»ˆäºè½åœ°ã€‚&lt;/p&gt;</summary><category term="ä¸Šä¼  ALAsset NSInputStream"></category></entry><entry><title>iOSåº”ç”¨2017å¹´å¼ºåˆ¶åº”ç”¨HTTPSé—®é¢˜</title><link href="http://szuwest.github.io/iosying-yong-2017nian-qiang-zhi-ying-yong-httpswen-ti.html" rel="alternate"></link><updated>2016-10-18T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-10-18:iosying-yong-2017nian-qiang-zhi-ying-yong-httpswen-ti.html</id><summary type="html">&lt;h2&gt;iOSåº”ç”¨2017å¹´ä½¿ç”¨HTTPSé—®é¢˜&lt;/h2&gt;
&lt;p&gt;æ˜¨å¤©ä¸€ä¸ªæœ‹å‹å‘äº†ä¸€ç¯‡ä»‹ç»HTTPSæ–¹æ¡ˆæ–‡ç« ç»™æˆ‘çœ‹ï¼Œæ–‡ç« æåˆ°2017å¹´è‹¹æœå¼ºåˆ¶æ‰€æœ‰APPä½¿ç”¨HTTPSåè®®ï¼Œé—®æˆ‘æ˜¯ä¸æ˜¯çœŸçš„ï¼Œè¿˜æ˜¯è¯´é‚£åªæ˜¯ä¸€ç¯‡è½¯æ–‡ã€‚ä»–ä¹Ÿå¾ˆæ‹…å¿ƒï¼Œå› ä¸ºä»–çš„APPä¸æ˜¯ä½¿ç”¨HTTPSåè®®ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®åº”è¯¥è¯´æ˜¯è¿™æ ·ï¼šä»2017å¹´1æœˆ1æ—¥èµ·ï¼Œè‹¹æœå¼ºåˆ¶&lt;strong&gt;æ–°æäº¤&lt;/strong&gt;çš„APPä½¿ç”¨HTTPSåè®®ã€‚è¿™é‡Œè¦å¼ºè°ƒ&lt;strong&gt;æ–°æäº¤&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯è¯´å·²ç»ä¸Šçº¿äº†çš„APPä¸å—å½±å“ï¼Œæ–°æäº¤çš„APPæˆ–æ–°ç‰ˆæœ¬æäº¤æ‰å—å½±å“ã€‚è™½è¯´å¼ºåˆ¶ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰æ–¹æ³•ä¸ä½¿ç”¨HTTPSåè®®çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æŸ¥äº†ä¸‹ï¼Œç°åœ¨çš„èµ„æ–™æœ‰æåˆ°3ç§æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;1æ˜¯APPé‡Œæœ‰ä¸€ä¸ªé…ç½®å¼€å…³NSAllowsArbitraryLoadsï¼Œæ‰“å¼€è¿™ä¸ªå¼€å…³ï¼Œæ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½å¯ä»¥ä½¿ç”¨HTTPã€‚ç°åœ¨æ‰€æœ‰æ²¡æœ‰ç”¨HTTPSåè®®çš„éƒ½æ˜¯è¿™ä¹ˆå¹²çš„ã€‚è¿™ä¸ªå¼€å…³ç°åœ¨ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯2017å¹´åè‹¹æœå°±ä¸å¸Œæœ›ä½ è¿™ä¹ˆç”¨äº†ã€‚ä½ å†ç”¨çš„è¯ï¼Œéœ€è¦è¯´æ˜åŸå› ï¼Œè€Œä¸”ç†ç”±ä¸å……åˆ†çš„è¯è‹¹æœæœ‰å¯èƒ½æ‹’ç»é€šè¿‡ä½ çš„APPã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2æ˜¯å¢åŠ åŸŸåç™½åå•ï¼ˆNSExceptionDomainsï¼‰ï¼Œè®¿é—®ç™½åå•ä¹‹å†…çš„ç½‘ç«™è¯·æ±‚å¯ä»¥æ˜¯HTTPè¯·æ±‚ã€‚è¿™ç§åšæ³•ä¹Ÿè¦è¯´æ˜ç†ç”±ï¼Œè‹¹æœè®¤ä¸ºä½ çš„ç†ç”±ä¸å……åˆ†ä»ç„¶æœ‰å¯èƒ½æ‹’ç»é€šè¿‡ä½ çš„APP&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å½“ç„¶è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆï¼Œæ˜¯åœ¨iOS10ç³»ç»Ÿæ–°åŠ çš„å±æ€§NSAllowsArbitraryLoadsInWebContentï¼Œä¸“é—¨é’ˆå¯¹æµè§ˆå™¨è®¿é—®çš„å¼€å…³ã€‚è®¾æƒ³ä¸€ä¸ªæµè§ˆå™¨åº”ç”¨ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥ä»»åŠ¡ç½‘å€ï¼Œè¿™ä¸ªç½‘å€èƒ½ä¸èƒ½æ”¯æŒHTTPSåè®®ï¼Œæ²¡äººçŸ¥é“ã€‚æ‰€ä»¥å°±æœ‰è¿™ä¹ˆä¸€ä¸ªå¼€å…³ï¼Œæ‰“å¼€ä¹‹åï¼Œæµè§ˆå™¨çš„è®¿é—®å°±ä¸å—HTTPSé™åˆ¶ã€‚ä½†æ˜¯ä¸å¥½çš„æ¶ˆæ¯æ˜¯ï¼Œè¿™ä¸ªæµè§ˆå™¨å¿…é¡»æ˜¯WKWebViewï¼Œè€Œä¸èƒ½æ˜¯UIWebView(æˆªæ­¢2016.10.18å‰ï¼ŒæŸ¥åˆ°èµ„æ–™æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯ä¸æ’é™¤ä»¥åè‹¹æœä¼šå¯¹UIWebViewä¹Ÿå¯æ˜¯ä½¿ç”¨è¿™ä¸ªå±æ€§)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°åœ¨å¤§å®¶éƒ½æ‹…å¿ƒ2017å¹´åè¯¥æ€ä¹ˆæ”¯æŒHTTPSã€‚æˆ‘è§‰å¾—å¤§å…¬å¸çš„è¯åº”è¯¥å°½æ—©å…¨éƒ¨æ”¯æŒHTTPSï¼Œå°å…¬å¸çš„è¯å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸Šè¿°æ–¹æ¡ˆã€‚å‘æŒ¥èªæ˜æ‰æ™ºï¼Œç»™ä¸€äº›ç†ç”±ç³Šå¼„è‹¹æœè®©ä½ çš„APPä¸æ”¯æŒHTTPSã€‚æˆ‘è§‰å¾—é’ˆå¯¹ä¸­å›½çš„å›½æƒ…ï¼Œè‹¹æœæœ‰å¯èƒ½ä¼šå¯¹ä¸­å›½çš„APPé‡‡ç”¨HTTPSå®¡æ ¸å®½æ¾äº›ï¼Œä½†ä¹Ÿå¾ˆéš¾è¯´ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href="https://onevcat.com/2016/06/ios-10-ats/"&gt;å…³äº iOS 10 ä¸­ ATS çš„é—®é¢˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://swiftcafe.io/2016/09/20/ats/"&gt;iOS 10 ä¸ ATS - æ›´åŠ å®‰å…¨çš„æœºåˆ¶&lt;/a&gt;&lt;/p&gt;</summary><category term="HTTPS 2017 iOS10"></category></entry><entry><title>iOSä¸Šä¼ æ–‡ä»¶æ”¯æŒæ–­ç‚¹ç»­ä¼ </title><link href="http://szuwest.github.io/iosshang-chuan-wen-jian-zhi-chi-duan-dian-xu-chuan.html" rel="alternate"></link><updated>2016-09-30T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-09-30:iosshang-chuan-wen-jian-zhi-chi-duan-dian-xu-chuan.html</id><summary type="html">&lt;h2&gt;iOSä¸Šä¼ æ–‡ä»¶æ”¯æŒæ–­ç‚¹ç»­ä¼ &lt;/h2&gt;
&lt;p&gt;åœ¨æŒºä¹…ä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡æ–‡ç« é‡Œæåˆ°ä¸Šä¼ æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ çš„é—®é¢˜ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°å¥½çš„æ–¹æ³•ã€‚ä»¥å‰æˆ‘é‡‡ç”¨çš„æ–¹å¼æ˜¯ç”¨&lt;strong&gt;NSFileHandl&lt;/strong&gt;çš„æ–¹æ³•seekToFileOffsetï¼Œç§»åˆ°å·²ç»æ–‡ä»¶å·²ç»ä¸Šä¼ äº†çš„éƒ¨åˆ†ï¼Œç„¶åé‡‡ç”¨readDataToEndOfFileè¯»å–å‰©ä¸‹éƒ¨åˆ†åˆ°å†…å­˜ä¸­NSDataã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆé—®é¢˜æ˜¯ï¼Œå¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼Œéœ€è¯»å–çš„NSDataå¾ˆå¤§ï¼Œå†…å­˜å°±ä¼šçˆ†æ‰ã€‚æ‰€ä»¥æœ€ç»ˆæ²¡æœ‰é‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘æˆ‘ä»¬æ¥ä¸ªæ–°åŒäº‹ï¼ŒæŠ€æœ¯èƒ½åŠ›å¾ˆä¸é”™ã€‚æˆ‘è®©ä»–å»ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚å¼€å§‹ä»–æ‰¾åˆ°çš„æ–¹æ¡ˆè·Ÿæˆ‘ä¹‹å‰çš„é‚£ä¸ªæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘è¯´è¿™ä¸ªæˆ‘ä¹‹å‰æœ‰è€ƒè™‘è¿‡ï¼Œä¸èƒ½é‡‡ç”¨ã€‚ç„¶åä»–ç»§ç»­ç ”ç©¶ï¼Œåæ¥å‘ç°äº†åŸæ¥&lt;strong&gt;NSInputStream&lt;/strong&gt;æœ‰ç›¸å…³æŒ‰offsetè¯»å–æ–‡ä»¶çš„æ¥å£ã€‚ä¸ï¼Œæ­£ç¡®æ¥è¯´æ˜¯&lt;strong&gt;NSStreamçš„&lt;/strong&gt;æ¥å£ï¼Œè€Œä¸”æœ‰ç‚¹éšè”½æ€§è´¨çš„ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BOOL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;setProperty&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;property&lt;/span&gt; &lt;span class="n"&gt;forKey&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSStreamPropertyKey&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;NSStreamFileCurrentOffsetKey&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;Value&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;an&lt;/span&gt; &lt;span class="n"&gt;NSNumber&lt;/span&gt; &lt;span class="n"&gt;object&lt;/span&gt; &lt;span class="n"&gt;containing&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;current&lt;/span&gt; &lt;span class="n"&gt;absolute&lt;/span&gt; &lt;span class="n"&gt;offset&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åªè¦å¯¹NSInputStreamæŒ‡å®šå®ƒçš„NSStreamFileCurrentOffsetKeyçš„å€¼ä¸ºä½ æƒ³è¦çš„offsetï¼Œæ–‡ä»¶åœ¨è¯»å–çš„æ—¶å€™å°±ä¼šä»è¿™ä¸ªoffsetå¼€å§‹è¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸ªAPIï¼Œç”¨AFNæ¥æ”¯æŒä¸Šä¼ çš„æ–­ç‚¹ç»­ä¼ ï¼Œä¹Ÿå°±å¾ˆå®¹æ˜“äº†ã€‚ä¸è¿‡è¦æ”¯æŒè¿™ä¸ªæ—¶å€™AFNçš„progresså°±æ˜¯éœ€è¦ä¸Šä¼ éƒ¨åˆ†çš„progressã€‚è¦å±•ç¤ºæ•´ä¸ªæ–‡ä»¶çš„progressçš„è¯ï¼Œéœ€è¦å†è½¬åŒ–ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ–­ç‚¹ç»­ä¼ çš„é—®é¢˜å·²è§£å†³ï¼Œå°±è¿˜å‰©ä¸‹ çœ‹ä¸å¯¼å‡ºç³»ç»Ÿç›¸å†Œé‡Œçš„è§†é¢‘æ–‡ä»¶ï¼Œç›´æ¥è¯»å–ä¸Šä¼ è¿™ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³äº†ã€‚çœ‹çœ‹ä»€ä¹ˆæ—¶å€™èƒ½æŠŠè¿™ä¸ªé—®é¢˜ä¹Ÿè§£å†³æ‰^_^&lt;/p&gt;</summary><category term="ä¸Šä¼  æ–­ç‚¹ç»­ä¼  NSInputStream"></category></entry><entry><title>å‡çº§Xcode8åJenkinsæ‰“åŒ…é—®é¢˜</title><link href="http://szuwest.github.io/sheng-ji-xcode8hou-jenkinsda-bao-wen-ti.html" rel="alternate"></link><updated>2016-09-29T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-09-29:sheng-ji-xcode8hou-jenkinsda-bao-wen-ti.html</id><summary type="html">&lt;h2&gt;å‡çº§Xcode8åJenkinsæ‰“åŒ…é—®é¢˜&lt;/h2&gt;
&lt;p&gt;ä¸Šæ¬¡è¯´å‡çº§Xcode8ä¹‹åï¼ŒJenkinsè‡ªåŠ¨æ‰“åŒ…å°±ä¸è¡Œäº†ï¼Œä»Šå¤©ç»ˆäºå¼„å¥½äº†ã€‚å‰å‰ååè¯çš„æ—¶é—´æœ‰ä¸€å¤©çš„æ—¶é—´æ‰æå¥½ï¼Œä¸å®¹æ˜“ã€‚å°è¯•äº†30å¤šæ¬¡æ‰æˆåŠŸäº†ï¼Œè¯´å¤šäº†éƒ½æ˜¯æ³ªã€‚ã€‚ç°åœ¨è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3&gt;æˆ‘ä»¬çš„éœ€æ±‚&lt;/h3&gt;
&lt;p&gt;è¯´ä¸€ä¸‹æˆ‘ä»¬çš„éœ€æ±‚ã€‚æˆ‘ä»¬å¼€å‘äººå‘˜é‡‡ç”¨çš„æ˜¯æ­£å¼ç­¾åï¼Œæ­£å¼çš„BundleIDï¼Œä½†æ˜¯æˆ‘ä»¬Jenkinsè‡ªåŠ¨æ‰“åŒ…å‡ºæ¥çš„æ˜¯ä¼ä¸šç‰ˆï¼Œç”¨çš„æ˜¯ä¼ä¸šç‰ˆBundleIDã€‚ä»£ç æ˜¯åŒä¸€ä»½ï¼Œä½†æ˜¯Jenkinsæ‰“åŒ…ä¼ä¸šç‰ˆæ—¶æ—¶è¦å…ˆä¿®æ”¹BundleIDå’Œç›¸å…³ç‰ˆæœ¬å·ä¹‹ç±»çš„ã€‚åœ¨Xcode7æ—¶ä»£ï¼Œæˆ‘å·²ç»å°†Jenkinsé…ç½®å¥½ï¼Œå¯ä»¥æ­£å¸¸æ‰“å‡ºä¼ä¸šç‰ˆçš„å®‰è£…åŒ…ã€‚ä½†æ˜¯å‡çº§åˆ°Xcode8ä¹‹åï¼ŒJenkinsæ‰“åŒ…ä¼šæŠ¥é”™ï¼Œå³åŸæ¥çš„é…ç½®å·²ç»ä¸èƒ½æ‰“å‡ºä¼ä¸šåŒ…æ¥äº†ã€‚&lt;/p&gt;
&lt;h3&gt;è§£å†³æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;å…ˆè¯´ä¸èƒ½æ‰“åŒ…çš„åŸå› ï¼Œä¸»è¦æ˜¯ç­¾åæ–¹å¼å†²çªã€‚Jenkinsçš„é…ç½®æ˜¯æŒ‡å®šç­¾åï¼Œè€Œæˆ‘ä»¬Xcode8é‡‡ç”¨çš„æ˜¯è‡ªåŠ¨ç­¾åã€‚æˆ‘ä»¬å¼€å‘æ—¶é‡‡ç”¨è‡ªåŠ¨ç­¾åï¼Œè€Œä¸”æ‰“ä¼ä¸šç‰ˆå®‰è£…é‡‡ç”¨çš„ç­¾åæ–‡ä»¶è·Ÿæˆ‘ä»¬å¼€å‘æ—¶çš„ç­¾åæ–‡ä»¶æ—¶ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥Jenkinsæ‰“åŒ…è‚¯å®šå¾—é‡‡ç”¨æ‰‹åŠ¨ç­¾åæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æŠ¥é”™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;xxxxx&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;conflicting&lt;/span&gt; &lt;span class="n"&gt;provisioning&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; &lt;span class="n"&gt;xxxxx&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="n"&gt;automatically&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;but&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="n"&gt;signing&lt;/span&gt; &lt;span class="n"&gt;identity&lt;/span&gt; &lt;span class="n"&gt;xxxxxxxxxxxxx&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;been&lt;/span&gt; &lt;span class="n"&gt;manually&lt;/span&gt; &lt;span class="n"&gt;specified&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt; 
&lt;span class="n"&gt;Set&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="n"&gt;signing&lt;/span&gt; &lt;span class="n"&gt;identity&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;iPhone Developer&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt; &lt;span class="n"&gt;settings&lt;/span&gt; &lt;span class="n"&gt;editor&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;manual&lt;/span&gt; &lt;span class="n"&gt;signing&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;project&lt;/span&gt; &lt;span class="n"&gt;editor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;æ‰€ä»¥è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç›´æ¥ï¼Œå°±æ˜¯ä¸é‡‡ç”¨è‡ªåŠ¨ç­¾åã€‚å¯æ˜¯æˆ‘æ‰¾éäº†å›½å†…å¤–ç½‘ä¸Šèµ„æ–™ï¼Œæ²¡æœ‰äººæä¾› è‡ªåŠ¨å…³é—­ è‡ªåŠ¨ç­¾å çš„æ–¹æ³•ã€‚å€’æ˜¯æœ‰äººåœ¨è‹¹æœçš„ç½‘ç«™ä¸Šæé—®å¦‚ä½•å…³é—­è‡ªåŠ¨ç­¾åã€‚æˆ‘åœ¨å›½å†…ä¸€äº›ç½‘ç«™ä¸Šä¹Ÿæœ‰ä¸€äº›äººæåˆ°è¿™ä¸ªé—®é¢˜ï¼Œå…¶ä¸­æœ‰äººç”¨ bashsell çš„sed æ–‡æœ¬æ›¿æ¢å‘½ä»¤æ¥ä¿®æ”¹project.pbxprojé‡Œé¢çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹æˆ‘çš„æ–¹å‘å°±æ˜¯å…³é—­è‡ªåŠ¨æ‰“åŒ…ï¼Œä¿®æ”¹ä¸€äº›é…ç½®ï¼Œç„¶åè®©å®ƒå¯ä»¥æ‰“åŒ…ã€‚è¯´èµ·æ¥ç®€å•ï¼Œè‡ªåŠ¨ç­¾åæ–¹å¼æ€ä¹ˆå…³é—­ï¼Œéœ€è¦æ”¹å“ªäº›é…ç½®ï¼Œæˆ‘ä¸çŸ¥é“ï¼Œåªèƒ½æ‘¸ç´¢å’Œä¸æ–­çš„å°è¯•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹æˆ‘å°è¯•æŒ‰ç…§ç½‘ä¸Šçš„ä¸€ä¸ªåˆ—å­æ¥å…³é—­è‡ªåŠ¨ç­¾åæ–¹å¼ã€‚å®ƒæ˜¯é‡‡ç”¨ sed å‘½ä»¤ã€‚ç”±äºæˆ‘æœ¬èº«å¯¹bash shell ä¹Ÿä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œè¯•äº†å¥½å¤šæ¬¡éƒ½æ²¡æœ‰æˆåŠŸã€‚è€Œä¸”åˆ°åé¢æˆ‘å‘ç°è¦å…³é—­è‡ªåŠ¨ç­¾åï¼Œåªå°† ProvisioningStyle æ”¹ä¸º Manualæ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘è‡ªå·±æ‰‹åŠ¨çš„å»å…³é—­å’Œå¼€å¯è‡ªåŠ¨ç­¾åï¼Œçœ‹çœ‹project.pbxprojåˆ°åº•å“ªäº›å‚æ•°æ”¹å˜äº†ï¼Œç„¶åé‡‡ç”¨æˆ‘æ¯”è¾ƒç†Ÿæ‚‰çš„PlistBuddyå‘½ä»¤ï¼Œå†™äº†ä¸ªè„šæœ¬å»æ”¹å˜è¿™äº›å€¼ï¼Œæ¥è¾¾åˆ°å…³é—­è‡ªåŠ¨ç­¾åçš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæˆ‘å†™å‡ºæ¥çš„è„šæœ¬å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;#ä¿®æ”¹ProvisioningStyle 
/usr/libexec/PlistBuddy -c â€œSet :objects:574F440C1AEE5EA3003F9BB5:attributes:TargetAttributes:574F44131AEE5EA3003F9BB5:ProvisioningStyle Manualâ€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

#ä¿®æ”¹Distributionç­¾åé…ç½®
/usr/libexec/PlistBuddy -c â€œSet :objects:2B888A201AFB4C3F005E1E12:buildSettings:CODE_SIGN_IDENTITY[sdk=iphoneos*] â€˜xxxxxxxxxxxxxxâ€™â€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

/usr/libexec/PlistBuddy -c â€œSet :objects:2B888A201AFB4C3F005E1E12:buildSettings:PROVISIONING_PROFILE  &amp;#39;xxxxxxxxxxxx&amp;#39;â€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

/usr/libexec/PlistBuddy -c â€œSet :objects:2B888A201AFB4C3F005E1E12:buildSettings:PROVISIONING_PROFILE_SPECIFIER xxxxxxxxxxxxâ€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

#ä¿®æ”¹Debugç­¾åé…ç½®
/usr/libexec/PlistBuddy -c â€œSet :objects:574F443B1AEE5EA4003F9BB5:buildSettings:CODE_SIGN_IDENTITY[sdk=iphoneos*] â€˜iPhone Distributionâ€™â€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

/usr/libexec/PlistBuddy -c â€œSet :objects:574F443B1AEE5EA4003F9BB5:buildSettings:PROVISIONING_PROFILE  &amp;#39;xxxxxxxxxxxx&amp;#39;â€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

/usr/libexec/PlistBuddy -c â€œSet :objects:574F443B1AEE5EA4003F9BB5:buildSettings:PROVISIONING_PROFILE_SPECIFIER xxxxxxxxxxxxâ€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

#ä¿®æ”¹Releaseç­¾åé…ç½®
/usr/libexec/PlistBuddy -c â€œSet :objects:574F443C1AEE5EA4003F9BB5:buildSettings:CODE_SIGN_IDENTITY[sdk=iphoneos*] â€˜iPhone Distributionâ€™â€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

/usr/libexec/PlistBuddy -c â€œSet :objects:574F443C1AEE5EA4003F9BB5:buildSettings:PROVISIONING_PROFILE  &amp;#39;xxxxxxxxxxxx&amp;#39;â€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj

/usr/libexec/PlistBuddy -c â€œSet :objects:574F443C1AEE5EA4003F9BB5:buildSettings:PROVISIONING_PROFILE_SPECIFIER xxxxxxxxxxxxâ€  &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;WORKSPACE&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/xxxxx/xxxxx.xcodeproj/project.pbxproj
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å½’çº³èµ·æ¥ï¼Œå°±æ˜¯å…ˆå°†ç­¾åæ–¹å¼ProvisioningStyleæ”¹ä¸ºæ‰‹åŠ¨çš„ï¼Œç„¶åå°†Distributionï¼ŒDebug, Release ç›¸å…³çš„CODE_SIGN_IDENTITY[sdk=iphoneos*]ï¼ŒbuildSettings:PROVISIONING_PROFILEï¼ŒPROVISIONING_PROFILE_SPECIFIERçš„å€¼åšå¯¹åº”çš„ä¿®æ”¹ã€‚å¦å¤–BundleIDå’Œdevelop teamæˆ‘æ²¡æœ‰ç”¨PlistBuddyæ¥ä¿®æ”¹ï¼Œè€Œæ˜¯é€šè¿‡åœ¨Jenkinsçš„é…ç½®&lt;strong&gt;Custom xcodebuild arguments&lt;/strong&gt; åŠ å…¥å‚æ•° &lt;code&gt;DEVELOPMENT_TEAM=DLF3GQKP4Q PRODUCT_BUNDLE_IDENTIFIER=xxxxxxxxx&lt;/code&gt; æ¥æŒ‡å®šã€‚è¿™æ ·ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¿®æ”¹ç›¸å…³å€¼&lt;/p&gt;
&lt;p&gt;é…ç½®å®Œè¿™äº›ï¼ŒipaåŒ…æ˜¯èƒ½æ‰“å‡ºæ¥äº†ï¼Œä½†æ˜¯å´æœ€åå¤±è´¥äº†ï¼ŒæŠ¥é”™æ˜¯ç­¾åé—®é¢˜ï¼Œè¿˜æœ‰æ‰¾ä¸åˆ°ResourceRules.plistã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæˆ‘å‘ç°åªè¦ æŠŠJenkinsé…ç½®ä¸­çš„æŠŠ Sign IPA at build time çš„å‹¾é€‰å»æ‰ï¼Œç„¶åæ‰“åŒ…å°±æ²¡æœ‰é—®é¢˜äº†ã€‚ç„¶åæˆ‘ä¹ŸæŠŠåœ¨Jenkinsçš„é…ç½®&lt;strong&gt;Custom xcodebuild arguments&lt;/strong&gt; å‚æ•°ä¸­ï¼ŒåŸæ¥æœ‰çš„å‚æ•° &lt;code&gt;CODE_SIGN_RESOURCE_RULES_PATH=$(SDKROOT)/ResourceRules.plist&lt;/code&gt; å»æ‰ï¼Œæ‰“å‡ºæ¥çš„å®‰è£…åŒ…ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚å½“æ—¶è¿™ä¸ªå‚æ•°åœ¨Xcode7æ˜¯å¿…å¡«çš„ï¼Œç°åœ¨Xcode8å´å¯ä»¥å»æ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯æˆ‘è¢«Xcode8æŠ˜è…¾ç»éªŒæ€»ç»“ã€‚&lt;/p&gt;
&lt;h2&gt;åè®°ï¼šè¡¥å……&lt;/h2&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« å†™äº†ä¸ä¹…ï¼Œå°±æ”¶åˆ°äº†SotoåŒå­¦çš„åé¦ˆã€‚æ ¹æ®è¿™ç¯‡æ–‡ç« ä»–ä¹ŸæˆåŠŸæ‰“åŒ…äº†ï¼Œè€Œä¸”ä»–è¿˜æ€»ç»“äº†ä¸€äº›æ›´æ–¹ä¾¿çš„æ–¹æ³•ã€‚æˆ‘è¡¥å……ä¸€ä¸‹ï¼Œåç»­æœ‰åŒæ ·é—®é¢˜çš„äººå°±å¯ä»¥ä¸é‚£ä¹ˆæŠ˜è…¾äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡Jenkinsçš„é…ç½®&lt;em&gt;Custom xcodebuild arguments&lt;/em&gt; å‚æ•°æ¥ä¿®æ”¹çš„å‚æ•°æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PRODUCT_BUNDLE_IDENTIFIER&lt;/li&gt;
&lt;li&gt;DEVELOPMENT_TEAM&lt;/li&gt;
&lt;li&gt;PROVISIONING_PROFILE&lt;/li&gt;
&lt;li&gt;PROVISIONING_PROFILE_SPECIFIER&lt;/li&gt;
&lt;li&gt;CODE_SIGN_IDENTITY&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä¸­CODE_SIGN_IDENTITY[sdk=iphoneos*]è²Œä¼¼ä¸æ˜¯å¿…é¡»çš„ï¼Œåœ¨xcodebuildçš„å‚æ•°æŒ‡å®š&lt;strong&gt;CODE_SIGN_IDENTITY="iPhone Distribution"&lt;/strong&gt;å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆåªæœ‰&lt;strong&gt;ProvisioningStyle&lt;/strong&gt;è¦é€šè¿‡è„šæœ¬æ¥ä¿®æ”¹ã€‚è€Œä¸” è¿˜å¯ä»¥é€šè¿‡ sed å‘½ä»¤æ¥ä¿®æ”¹ï¼Œä¸å¿…ç”¨PlistBuddyæ¥ä¿®æ”¹ï¼ˆç”¨PlistBuddyè¦å…ˆæ‰¾åˆ°ç›¸å…³UUIDï¼Œå¾ˆéº»çƒ¦ï¼‰&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;sed&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ProvisioningStyle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Automatic&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ProvisioningStyle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Manual&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;..&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;project&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pbxproj&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SotoåŒå­¦å°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹æ³•æˆåŠŸæ‰“å‡ºäº†ä¼ä¸šç‰ˆåŒ…å’ŒAppStoreåŒ…ï¼ŒæˆåŠŸé¿è¿‡äº†è¦æŸ¥æ‰¾UUIDæ¥å®šä½ä¿®æ”¹ç›¸å…³å‚æ•°å€¼çš„éº»çƒ¦åšæ³•ã€‚è¿™æ˜¯ä¸€ç§å¥½æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™ç§æ”¹æ³•ä¸èƒ½é€‚åº”æ‰€æœ‰æƒ…å†µï¼Œæˆ‘çš„é¡¹ç›®å°±ä¸èƒ½è¿™ä¹ˆåšã€‚æˆ‘çš„é¡¹ç›®ä¾èµ–äºå¦å¤–ä¸€ä¸ªå·¥ç¨‹ç¼–è¯‘å‡ºæ¥çš„frameworkï¼Œå¦‚æœåœ¨xcodebuildå‚æ•°é‡ŒæŒ‡å®šPROVISIONING_PROFILEå’ŒPROVISIONING_PROFILE_SPECIFIERï¼Œæ˜¯ä¸è¡Œçš„ï¼Œä¼šé€ æˆç¼–è¯‘è¿™ä¸ªframeworkçš„æ—¶å€™æŠ¥é”™ã€‚è¿™ä¸ªframeworkå·¥ç¨‹çš„é…ç½®ä¹Ÿè¦æ³¨æ„ï¼Œæ˜¯è¦æŠŠè‡ªåŠ¨ç­¾åå…³é—­ï¼Œå¹¶ä¸”teamæŒ‡å®šä¸ºnoneã€‚æ‰€ä»¥æˆ‘è¿˜æ˜¯ä¿æŒæˆ‘åŸæ¥çš„åšæ³•ï¼Œè™½ç„¶å¾ˆç¬¨ï¼Œä¸çµæ´»ï¼Œä½†æ˜¯èƒ½è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè°è·Ÿæˆ‘çš„æƒ…å†µç±»ä¼¼ï¼Œç„¶åæœ‰æ›´å¥½çš„åŠæ³•ï¼Œéº»çƒ¦å‘Šè¯‰æˆ‘^_^&lt;/p&gt;
&lt;h2&gt;å‡çº§macOS Sierra åæ‰“åŒ…ç­¾åå¤±è´¥é—®é¢˜&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜æ˜¯SotoåŒå­¦é‡åˆ°çš„ï¼Œæˆ‘æ²¡é‡åˆ°ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡å‡çº§åˆ°æœ€æ–°ç³»ç»Ÿã€‚è¿™é‡Œä¹Ÿè¯´ä¸€ä¸‹ï¼Œç»™æœ‰éœ€è¦çš„äººç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ‰“åŒ…å‡ºç°ç­¾åé”™è¯¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;p&gt;Command /usr/bin/codesign failed with exit code 1, å¹¶ä¸”è¿˜ returned: -25308, unknown error -1=fffffffffff ä¹‹ç±»çš„å…³é”®å­—ï¼Œå¾ˆæœ‰å¯èƒ½å°±æ˜¯å› ä¸ºå‡çº§åˆ°äº†æœ€æ–°ç³»ç»ŸmacOS Sierraå¯¼è‡´çš„ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;æ‰“å¼€keychainï¼Œç„¶åæ‰¾åˆ°ä½ æ‰“åŒ…ç”¨åˆ°çš„é‚£ä¸ªè¯ä¹¦ï¼Œå±•å¼€è¯ä¹¦ï¼Œé€‰ä¸­é‚£ä¸ªå¯†é’¥ï¼Œå³å‡»--&amp;gt;æ˜¾ç¤ºç®€ä»‹--&amp;gt;è®¿é—®æ§åˆ¶ï¼Œç„¶åé€‰æ‹© &lt;strong&gt;å…è®¸æ‰€æœ‰åº”ç”¨ç¨‹åºè®¿é—®æ­¤é¡¹ç›®&lt;/strong&gt;,å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢SotoåŒå­¦çš„åé¦ˆ&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;ç”±äºæˆ‘çš„ç½‘ç»œç»å¸¸è¿ä¸ä¸Šè¯„è®ºç³»ç»ŸDisqusï¼Œæ‰€ä»¥æœ‰é—®é¢˜æƒ³é—®æˆ‘æˆ–è€…æƒ³è·Ÿæˆ‘äº¤æµçš„ï¼Œè¯·ç›´æ¥ç»™æˆ‘å‘é‚®ä»¶æˆ–è€…åŠ æˆ‘QQ411084057.è°¢è°¢&lt;/strong&gt;&lt;/p&gt;</summary><category term="Jenkins Xcode8 iOS10 framework"></category></entry><entry><title>å‡çº§Xcode8åéœ€è¦æ³¨æ„çš„äº‹é¡¹</title><link href="http://szuwest.github.io/sheng-ji-xcode8hou-xu-yao-zhu-yi-de-shi-xiang.html" rel="alternate"></link><updated>2016-09-24T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-09-24:sheng-ji-xcode8hou-xu-yao-zhu-yi-de-shi-xiang.html</id><summary type="html">&lt;h2&gt;å‡çº§Xcode8åéœ€è¦æ³¨æ„çš„äº‹é¡¹&lt;/h2&gt;
&lt;p&gt;éšç€iPhone7å¼€å–é€‚é…iOS10æˆäº†å¿…ä¸å¯å°‘çš„äº‹æƒ…ã€‚è¦é€‚é…iOS10ï¼Œå‡çº§Xcode8åˆæ˜¯å¿…é¡»çš„äº‹æƒ…ã€‚å¯ä»¥ä¸€æ—¦å‡çº§Xcode8ä¹‹åä¼šå‘ç°ä¸€å †å‘åœ¨é‡Œé¢ã€‚æ¯æ¬¡å‡çº§Xcodeæˆ–è€…iOSç³»ç»Ÿæˆ–è€…Macç³»ç»Ÿéƒ½æ˜¯æœ‰ä¸€å †çš„å‘ï¼Œæ¯æ¬¡éƒ½è¦æŠ˜è…¾å¾—ä½ æ­»å»æ´»æ¥ä¸ç½¢ä¼‘ã€‚è¿™æœ‰ç‚¹åƒé£è›¾æ‰‘ç«ï¼Œæ˜æ˜çŸ¥é“å‰é¢æ˜¯ç«å‘ï¼Œä¹Ÿè¦å¾€ä¸‹è·³ã€‚&lt;/p&gt;
&lt;h3&gt;å‡çº§ç¬¬ä¸€å‘ï¼Œæ³¨é‡Šä»£ç å¿«æ·é”®å¤±æ•ˆ&lt;/h3&gt;
&lt;p&gt;å½“ä½ ç»è¿‡æ¼«é•¿çš„ç­‰å¾…Xcodeä¸‹è½½å’Œå®‰è£…ä¹‹åï¼Œæ»¡å¿ƒæ¬¢å–œæ‰“å¼€Xcodeï¼Œå‘ç°å­—ä½“å˜äº†ï¼Œè²Œä¼¼çœ‹ä¸Šå»è¿˜ä¸é”™ï¼ˆæœ‰åŒäº‹è·Ÿæˆ‘è¯´è¿™å¾ˆä¸‘ï¼‰ï¼Œç„¶åå¼€å§‹å†™ä»£ç ï¼Œå‘ç°å¯ä»¥é«˜äº®æ˜¾ç¤ºå½“å‰ç¼–è¾‘è¡Œï¼Œä¸é”™å˜›ï¼Œå†™ç€å†™ç€çªç„¶æƒ³æ³¨é‡Šæ‰ä¸€è¡Œä»£ç ï¼Œå‘ç°command+/æ€ä¹ˆæŒ‰éƒ½æ²¡ååº”ï¼Œååˆ†æ¼ç«ã€‚è¿™ä»€ä¹ˆç ´ç©æ„å„¿ï¼Œè¿™ä¹ˆæ˜æ˜¾çš„bugéƒ½æœ‰ã€‚ç„¶åç½‘ä¸Šæœè§£å†³æ–¹æ¡ˆï¼Œç¡®å®æœ‰äººä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚è²Œä¼¼éœ€è¦è·‘ä¸€ä¸ªå‘½ä»¤ä»€ä¹ˆçš„ã€‚å®é™…ä¸Šä¸ç”¨é‚£ä¹ˆè´¹åŠ²ï¼Œé‡å¯ä¸€ä¸‹Xcodeå°±å¥½äº†ã€‚&lt;/p&gt;
&lt;h3&gt;å‡çº§ç¬¬äºŒå‘ï¼ŒiOSçš„å­—ä½“å˜å®½äº†&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘Runä¸€ä¸‹ç¨‹åºæƒ³çœ‹çœ‹æˆ‘ä»¬çš„ç¨‹åºåœ¨iOS10ä¸Šæœ‰æ²¡æœ‰é—®é¢˜ï¼Œå¯åŠ¨ä¹‹åæ‰“å¼€å¼•å¯¼é¡µï¼Œå‘ç°æœ€åº•ä¸‹çš„ä¸¤ä¸ªæŒ‰é’®å­—æ˜¾ç¤ºä¸å…¨äº†ï¼šæ³¨å†Œè´¦å· å˜æˆäº† æ³¨Â·Â·Â·å·ï¼Œç™»å½•è´¦å·å˜æˆäº† ç™»Â·Â·Â·å·ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿæˆ‘æ²¡æœ‰åŠ¨è¿‡è¿™å—çš„ä»»ä½•ä»£ç ï¼Œç”šè‡³è¿è¿™ä¸ªé¡µé¢çš„xibä¹Ÿæ²¡æœ‰æ‰“å¼€è¿‡ã€‚åæ¥æ‰çŸ¥é“ï¼Œè¿æ¥æ˜¯iOSçš„å­—ä½“å˜å®½äº†ï¼Œå¦‚æœä½ ä¸€ä¸ªæŒ‰é’®åœ¨iOS9åŸæ¥åˆšå¥½æ”¾ä¸‹4ä¸ªå­—ï¼Œç„¶åiOS10å®ƒå°±è£…ä¸ä¸‹äº†ã€‚ç°åœ¨çš„è§£å†³åŠæ³•æ˜¯æ‰‹åŠ¨è°ƒèŠ‚æ§ä»¶çš„å®½åº¦ï¼Œå‘ç°é—®é¢˜ä¸€ä¸ªè§£å†³ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h3&gt;å‡çº§ç¬¬ä¸‰å‘ï¼Œxibä¸å…¼å®¹Xcode7äº†&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªå‘å®åœ¨è¯•å¤ªæ— è‰¯çŸ¥äº†ï¼Œæ€ä¹ˆå¯ä»¥è¿™æ ·åšã€‚ç”±äºæˆ‘æ¯”è¾ƒæ—©å‡çº§åˆ°Xcode8ï¼Œå…¶ä»–åŒäº‹è¿˜æ²¡å‡çº§ï¼Œæˆ‘åœ¨Xcode8ä¸Šç¼–è¾‘è¿‡ä¸€ä¸ªxibæ–‡ä»¶ï¼Œæäº¤äº†ã€‚å¦å¤–ä¸€ä¸ªåŒäº‹æ›´æ–°ä»£ç åå°±ç¼–è¯‘ä¸è¿‡äº†ï¼šæç¤ºè¦ä½¿ç”¨Xcode8.è¿™ä¸æ˜¯å¼ºåˆ¶å‡çº§ä¹ˆï¼Ÿä½ ç”¨Xcode8ç¼–è¾‘xibåï¼ŒXcodeä¼šåŠ å…¥ä¸€è¡Œä»£ç è¯´æ˜ &lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;plugIn identifier="com.apple.InterfaceBuilder.IBCocoaTouchPlugin" version="11161"/&amp;gt;
        &amp;lt;capability name="documents saved in the Xcode 8 format" minToolsVersion="8.0"/&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯è¯´è¿™æ˜¯ç”¨Xcode8ä¿å­˜çš„ï¼Œä½ å¿…é¡»è¦è¦ç”¨Xcode8æ‰“å¼€ã€‚è¿™ç»™å›¢é˜Ÿåä½œå¸¦æ¥æå¤§ä¸ä¾¿ï¼Œé€¼ç€å¤§å®¶è¦å‡çº§ã€‚å½“ç„¶ä¹Ÿæœ‰è§£å†³åŠæ³•ã€‚åœ¨File Inspectoré‡Œæœ‰ä¸ªopen in Latest Xcode çš„é€‰é¡¹ï¼ŒæŠŠå®ƒæ”¹ä¸ºXcode7.xå°±ä¼šé‡æ–°ä¿ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3&gt;å‡çº§ç¬¬å››å‘ï¼Œsiginingæ–¹å¼å˜äº†&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯ä¸ªå¤§å‘ï¼Œå½“ç„¶ä½ å¯ä»¥è¯´å®ƒæ˜¯å¤§å¥½ï¼Œå¦‚æœå®ƒæ²¡æœ‰ç»™ä½ å¸¦æ¥ä¸ä¾¿åˆ©çš„è¯ã€‚Xcode8é‡Œæœ‰ä¸ªè‡ªåŠ¨ç®¡ç†ç­¾åå¼€å‘ï¼Œå³å°†ç­¾åæ”¹ä¸ºè‡ªåŠ¨ç®¡ç†ç­¾ååè€…æ‰‹åŠ¨ç®¡ç†ç­¾åã€‚å…¶å®å°±æ˜¯è¦ä½ ç™»å½•ä½ çš„å¼€å‘è´¦å·ï¼Œç„¶åé€‰æ‹©ä½ çš„develop teamã€‚å¯æ˜¯ä¸€èˆ¬å›¢é˜Ÿé‡Œå°±ä¸€ä¸ªå¼€å‘è€…è´¦å·ï¼Œä½ å°±å¿…é¡»ç»™æ¯ä¸ªäººçš„ç”µè„‘ä¸Šéƒ½ç™»å½•ä¸€ä¸‹è¿™ä¸ªå¼€å‘è€…è´¦å·ã€‚å¦‚æœèƒ½æŠŠè´¦å·å¯†ç å…¬å¼€ç»™å¤§å®¶å½“ç„¶æ²¡é—®é¢˜ï¼Œä¸èƒ½çš„è¯å°±åªæœ‰ç®¡ç†è€…å»æ¯ä¸ªäººçš„ç”µè„‘ä¸Šç™»å½•ä¸€ä¸‹è´¦å·ã€‚&lt;/p&gt;
&lt;p&gt;è¿™éƒ½è¿˜æ˜¯ç®—å¥½çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¼€å‘è€…è‡ªå·±å¼„ä¸¤ä¸‹å°±å¯ä»¥æå®šã€‚ä½†æ˜¯æœ‰ä¸ªè›‹ç–¼çš„åœ°æ–¹ï¼šæˆ‘ä»¬ç»™æµ‹è¯•åŒäº‹æ‰“åŒ…æ˜¯åœ¨æ‰“åŒ…æœºä¸Šè‡ªåŠ¨æ‰“åŒ…çš„ï¼Œé‡‡ç”¨çš„æ˜¯JenkinsæŒç»­é›†æˆç¯å¢ƒï¼Œå¹¶ä¸”æ‰“åŒ…é‡‡ç”¨çš„è¯ä¹¦æ˜¯ä¼ä¸šç‰ˆè¯ä¹¦ï¼Œæ‰“åŒ…å‡ºæ¥ä¹‹åéœ€è¦ç»™å¤§å®¶éšæ„å®‰è£…çš„ã€‚å½“å‡çº§Xcode8ä¹‹åï¼Œsigningæ–¹å¼æ”¹å˜äº†ï¼Œç„¶åæ‰“åŒ…å°±å¤±è´¥äº†ã€‚å› ä¸ºæ‰“åŒ…æœºä¸Šæˆ‘ä»¬æ˜¯å¿…é¡»é‡æ–°ä¿®æ”¹BundleIDï¼Œç„¶åæŒ‡å®šç­¾åæ–‡ä»¶ã€‚ä½†æ˜¯æˆ‘ä»¬å¹³æ—¶å¼€å‘æ˜¯Xcodeé…ç½®æ˜¯è‡ªåŠ¨ç­¾åæ–¹å¼ï¼Œæ‰“åŒ…æœºæ˜¯é€šè¿‡Jenkinsé‡æ–°é…ç½®äº†æ‰“åŒ…æ–¹å¼ï¼Œè¿™æ ·å°±å‡ºé—®é¢˜äº†ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ç°åœ¨å°è¯•å»è§£å†³è¿™ç§å†²çªï¼Œä½†æ˜¯è¿˜æ²¡æå®šã€‚develop teamè²Œä¼¼Xcode8ä¸­æ–°åŠ çš„ï¼Œä»¥å‰ä¸éœ€è¦æŒ‡å®šã€‚æˆ‘ä¹Ÿç½‘ä¸Šæ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œè²Œä¼¼æœ‰äººæƒ³ç›´æ¥æ‰“åŒ…å‰ç›´æ¥ç”¨she'llè„šæœ¬ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶é…ç½®ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ–¹å‘ã€‚æ¥ä¸‹æ¥ä¸‹å‘¨æˆ‘ä¼°è®¡è¦æŠŠè¿™ä¸ªé—®é¢˜ç ”ç©¶ä¸€ä¸‹ã€‚æ¯æ¬¡ç¯å¢ƒå˜åŠ¨ï¼ŒJenkinséƒ½è¦é‡æ–°æï¼ŒæŠ˜è…¾å¾—æˆ‘è‹¦ä¸å ªè¨€ã€‚ä»€ä¹ˆæ—¶å€™è‹¹æœæŠŠç­¾åå’Œè°ƒè¯•ä¸è¦æå¾—é‚£ä¹ˆå¤æ‚ï¼Œé€ ç¦ä¸€ä¸‹å¼€å‘è€…å°±å¥½äº†ã€‚&lt;/p&gt;</summary><category term="Jenkins Xcode8 iOS10"></category></entry><entry><title>å…³äºæŠ€æœ¯äººå‘˜åŠ ç­é—®é¢˜çš„çœ‹æ³•</title><link href="http://szuwest.github.io/guan-yu-ji-zhu-ren-yuan-jia-ban-wen-ti-de-kan-fa.html" rel="alternate"></link><updated>2016-09-04T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-09-04:guan-yu-ji-zhu-ren-yuan-jia-ban-wen-ti-de-kan-fa.html</id><summary type="html">&lt;h2&gt;å…³äºæŠ€æœ¯äººå‘˜åŠ ç­é—®é¢˜çš„çœ‹æ³•&lt;/h2&gt;
&lt;p&gt;èº«åœ¨ITè¡Œä¸šï¼ŒåŠ ç­æ˜¯æ°¸è¿œç»•ä¸å¼€çš„è¯é¢˜ã€‚äº’è”ç½‘æ˜¯ä»¥å¿«é€Ÿå˜åŒ–è‘—ç§°ï¼ŒåŠ ç­ä¼¼ä¹æ˜¯æˆäº†åæ­£è¨€é¡ºçš„ã€‚æœ€è¿‘58åŒåŸåŠ ç­996çš„é—®é¢˜ä¹Ÿå¼•èµ·äº†å¹¿æ³›å…³æ³¨ï¼Œè€Œæ°å¥½æœ€è¿‘ä¸¤ä¸ªæ˜ŸæœŸï¼Œæˆ‘ä»¬éƒ¨é—¨ä¹Ÿä¸€ç›´åœ¨åŠ ç­ã€‚æˆ‘å‡†å¤‡ä¹Ÿè°ˆè°ˆè¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h3&gt;æˆ‘ä»¬åŠ ç­çš„ç¼˜ç”±&lt;/h3&gt;
&lt;p&gt;ä¸¤ä¸ªæ˜ŸæœŸå‰ï¼Œæˆ‘ä»¬æ¥åˆ°æ¶ˆæ¯ï¼Œè¦åœ¨ä¸¤å‘¨ä¹‹ç±»ä¸Šçº¿3.0å¤§ç‰ˆæœ¬ã€‚3.0ç‰ˆæœ¬æ”¹ç‰ˆéå¸¸å¤§ï¼Œè™½ç„¶ä¸€éƒ¨åˆ†åŠŸèƒ½å·²ç»å¼€å‘äº†ï¼Œä½†æ˜¯ä¸€ç›´åœ¨æ”¹ï¼ŒåŠŸèƒ½å°±ä»æ¥æ²¡æœ‰ç¨³å®šè¿‡ã€‚è€Œä¸”æˆ‘ä»¬è¿˜æ­£åœ¨å¼€å‘2.7ç‰ˆæœ¬ï¼Œçªç„¶é—´ä¸¤å‘¨ä¹‹ç±»è¦ä¸Šçº¿3.0ç‰ˆæœ¬ï¼Œæ˜¯ä¸å¯èƒ½çš„ã€‚ä½†æ˜¯è¿™åº”è¯¥æ˜¯è€æ¿çš„å‘½ä»¤ï¼Œæˆ‘ä»¬åº”è¯¥æ²¡æœ‰è¿˜ä»·çš„å¯èƒ½ï¼Œæ‰€ä»¥åŠ ç­æ˜¯ä¸å¯é¿å…ã€‚è¿˜æœ‰ä¸€ä¸ªæ›´åŠ ä¸å¯é¿å…åŠ ç­çš„ç†ç”±ï¼šæˆ‘ä»¬çš„ä¸€ä¸ªåŒäº‹è¿™ä¸ªæ—¶å€™è¢«å€Ÿèµ°äº†ï¼Œå€Ÿå»åˆ«çš„å­å…¬å¸å¸®å¿™å¼€å‘ã€‚è¿™ä¸ªå€Ÿäººä¹Ÿä¸æ˜¯æˆ‘ä»¬å¯ä»¥å•†é‡çš„ï¼Œè¿™ä¸ªå…¬å¸è€æ¿çš„è¦æ±‚ï¼Œæ‰€ä»¥é›ªä¸ŠåŠ ç®±ã€‚&lt;/p&gt;
&lt;h3&gt;åŠ ç­å¼€å‘å’Œå®¶åº­å½±å“&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†èƒ½å°½å¯èƒ½è¾¾æˆç›®æ ‡ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½æ˜¯å·¥ä½œåˆ°10ç‚¹å¤šï¼Œæœ‰äº›åŒäº‹è¦æåˆ°å‡Œæ™¨2ç‚¹å¤šï¼Œä»äº§å“ï¼Œè®¾è®¡ï¼Œåˆ°æµ‹è¯•ï¼Œæ‰€æœ‰äººéƒ½éœ€è¦åŠ ç­ã€‚å‘¨æœ«ä¸¤å¤©ä¹Ÿéœ€è¦åŠ ç­ã€‚æˆ‘è€å©†å¯¹æˆ‘æ¯å¤©éƒ½å¾ˆæ™šå›å®¶æ„è§éå¸¸å¤§ï¼Œæ‰€ä»¥æˆ‘å°½é‡èƒ½10ç‚¹å¤šä¹‹åå°±å›å®¶ï¼Œä¸ç„¶è‚¯å®šé—¹å®¶åº­çŸ›ç›¾ã€‚å‘¨æ—¥æˆ‘ä¹Ÿä¸å¾—ä¸è¯·å‡ï¼Œç•™äº†å¦å¤–ä¸¤ä¸ªåŒäº‹åœ¨åŠ ç­å¼€å‘ã€‚å…¶å®æˆ‘ä»¬å·²ç»éå¸¸é«˜æ•ˆäº†ï¼Œæˆ‘ä»¬çš„äººåŠ›æ¯”Androidå®¢æˆ·ç«¯çš„äººåŠ›è¿˜è¦å°‘ï¼Œå¤§å®¶éƒ½è¦åŠªåŠ›åŠ ç­èµ¶è¿›åº¦ã€‚åæ¥ä¸¤ä¸ªæ˜ŸæœŸåï¼Œç»“æœå½“ç„¶æ˜¯æ–°ç‰ˆä¸Šä¸äº†çº¿çš„ï¼Œæ‰€ä»¥æ‹–åäº†å‡ å¤©ã€‚ä»–ä»¬è¿˜æƒ³æˆ‘ä»¬å®¢æˆ·ç«¯å‘¨æœ«æ¥åŠ ç­èµ¶è¿›åº¦ï¼Œå¯æ˜¯æˆ‘çœŸçš„ä¸æƒ³å†åŠ ç­äº†ï¼Œå› ä¸ºæˆ‘ä»¬çš„å›¢é˜Ÿå·²ç»è¿ç»­ä¸Šäº†12å¤©ç­äº†ï¼Œæ‰€ä»¥æˆ‘å°±æ²¡æœ‰è¦æ±‚åŠ ç­ï¼Œæˆ‘è§‰å¾—å¿…é¡»è®©å¤§å®¶åœä¸€ä¸‹ï¼Œå› ä¸ºåé¢åŠä¸ªæœˆè¿˜æœ‰æ›´è‰°å·¨çš„ä»»åŠ¡ç­‰ç€æˆ‘ä»¬ï¼Œæˆ‘ä¸æƒ³æŠŠæˆ‘ä»¬çš„é˜Ÿä¼ææ®‹ã€‚&lt;/p&gt;
&lt;h2&gt;åŠ ç­çš„ä¼¤å®³&lt;/h2&gt;
&lt;p&gt;æœ¬æ¥æˆ‘æƒ³è¯´è¯´åŠ ç­æ˜¯å¦æœ‰å¿…è¦ï¼Œä½†æ˜¯æƒ³äº†æƒ³åœ¨è¿™ä¸ªè¡Œä¸šè²Œä¼¼æœ‰æ—¶å€™åŠ ç­æ˜¯ä¸å¯é¿å…ã€‚å°±åƒæˆ‘ä»¬ç°åœ¨çš„æƒ…å†µã€‚ä½†æ˜¯é€ æˆéœ€è¦åŠ ç­æ¥å®ç°éœ€æ±‚å’Œèµ¶è¿›åº¦æ˜¯è°çš„è¿‡é”™ï¼Ÿæ˜¯æŠ€æœ¯äººå‘˜æ— èƒ½ï¼Œè¿˜æ˜¯ç®¡ç†å±‚çš„è¿‡é”™ã€‚æˆ‘å€¾å‘äºç®¡ç†å±‚çš„è¿‡é”™ã€‚ç®¡ç†å±‚å¾ˆå¤šæ—¶å€™æƒ³ä¸æ¸…æ¥šï¼Œæˆ–è€…æƒ³æ¸…æ¥šäº†è®¡åˆ’æ²¡æœ‰åšå¥½ï¼Œéœ€è¦å›¢é˜ŸåŠ ç­æ¥å¼€å‘ã€‚å¾ˆå¤šæ—¶å€™åŠ ç­æ˜¯å¯ä»¥é¿å…çš„ã€‚å°±åƒæˆ‘ä»¬ç°åœ¨çš„æƒ…å†µï¼Œå…¶å®3.0ç‰ˆæœ¬ä¸€æ—©å°±å¼€å§‹è§„åˆ’äº†ï¼Œä¸ºä»€ä¹ˆä¹‹å‰æ²¡æœ‰æƒ³å¥½ï¼Œè€Œçªç„¶ä¸€å¥è¯å°±è¯´è¦ä¸Šçº¿ï¼Ÿä¹‹å‰é‚£ä¹ˆå¤šæ—¶é—´å»å¹²å˜›äº†ï¼Ÿå°±ç®—æœ‰äº›å˜åŒ–ä¸å¯é¿å…ï¼Œä¸€å®šè¦åŠ ç­æ‰èƒ½è§£å†³ï¼Œæˆ‘å¸Œæœ›ç®¡ç†å±‚ä¹Ÿæœ‰å¿ƒé‡Œå‡†å¤‡ï¼Œé•¿æ—¶é—´åŠ ç­çš„é€ æˆä¼¤å®³æ˜¯å¾ˆå¤§ï¼Œè€Œä¸”åŠ ç­èµ¶å‡ºæ¥çš„ä¸œè¥¿ï¼Œè´¨é‡æ— æ³•ä¿è¯ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆä¸€äº›æŠ€æœ¯å€ºåŠ¡ã€‚æœ‰äº›ä¼¤å®³å¯èƒ½æ— æ³•å¼¥è¡¥çš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç»™æŠ€æœ¯äººå‘˜èº«ä½“å¥åº·é€ æˆå½±å“ã€‚æ¯å¤©åŠ ç­ç»™æŠ€æœ¯äººå‘˜é€ æˆä¼‘æ¯æ—¶é—´ä¸è¶³ï¼Œæ²¡æœ‰æ—¶é—´é”»ç‚¼ï¼Œé•¿æœŸå¤„äºäºšå¥åº·çŠ¶ä½“ï¼Œä¸€æ—¦å¾—ç—…å¯¹èº«ä½“å½±å“å¾ˆå¤§&lt;/li&gt;
&lt;li&gt;é€ æˆå®¶åº­çŸ›ç›¾ã€‚æ¯å¤©å¾ˆæ™šå›å®¶ï¼Œé™ªä¼´å®¶äººçš„æ—¶é—´å¾ˆçŸ­ã€‚å¤«å¦»å¾ˆå®¹æ˜“é—¹çŸ›ç›¾ï¼Œè¿™ä¸ªå½±å“å®¶åº­å’Œè°ï¼Œä¸¥é‡çš„è¯ä¼šå½±å“å©šå§»ã€‚&lt;/li&gt;
&lt;li&gt;äº§å“è´¨é‡æ— æ³•ä¿è¯ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆä¸€äº›æŠ€æœ¯å€ºåŠ¡ã€‚æ¯å¤©å¤§é‡çš„å·¥ä½œï¼Œäººå¾ˆå®¹æ˜“ç–²æƒ«ï¼Œå¤§å®¶ä¸ºäº†èµ¶è¿›åº¦ï¼Œä¹Ÿä¼šå¿½ç•¥è´¨é‡ã€‚è¿™æ ·å¾ˆéš¾ä¿è¯äº§å“çš„è´¨é‡æ˜¯æœ€ä¼˜çš„ï¼Œæœ‰äº›æ¶æ„ä¸å¥½çš„è¯ï¼Œä¼šé€ æˆä¸€äº›æŠ€æœ¯å€ºåŠ¡ã€‚åé¢éœ€è¦èŠ±å¤§é‡æ—¶é—´æ¥å¿è¿˜ã€‚&lt;/li&gt;
&lt;li&gt;å®¹æ˜“é€ æˆäººå‘˜æµå¤±ã€‚æˆ‘è§‰å¾—è¿™å¯èƒ½å¯¹å…¬å¸ä¼¤å®³æœ€å¤§çš„ã€‚å› ä¸ºé•¿æœŸçš„åŠ ç­å½¢æ€ä¼šé€ æˆä¸Šé¢3ä¸ªä¸å¥½çš„å½±å“ï¼Œç„¶åå‘˜å·¥å°±å¾ˆæœ‰å¯èƒ½ç¦»å¼€ã€‚å°¤å…¶æ˜¯æ—¶å€™æ²¡æœ‰åšå¥½å¼¥è¡¥çš„æƒ…å†µã€‚ä¾‹å¦‚äº§å“æœ€ç»ˆæ˜¯åšå‡ºæ¥äº†ï¼Œä½†æ˜¯æ²¡æœ‰è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œè™½ç„¶å‘˜å·¥åŠ ç­äº†ï¼Œæ²¡æœ‰åŠæ³•å¾—åˆ°ä»–ä»¬æœŸæœ›çš„è–ªé…¬æˆ–è€…å¥–åŠ±è¡¥å¿ï¼Œä»–ä»¬ä¼šå¯¹å…¬å¸å¾ˆå¤±æœ›ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å°±ä¼šé€‰æ‹©ç¦»å¼€ã€‚è¿™ä¸ªæ˜¯éå¸¸è‡ªç„¶çš„ï¼Œæˆ‘è‡ªå·±ä»¥å‰å°±ç»å†ä¸€æ¬¡ã€‚æˆ‘ä»¬åŠ ç­åŠ ç‚¹èŠ±äº†ä¸¤ä¸ªæœˆå°†äº§å“åšå‡ºæ¥äº†ï¼Œæœ€åå¾ˆå¤šäººå°±ç¦»å¼€äº†ï¼Œæˆ‘ä¹Ÿè‡ªå·±å½“æ—¶è¿˜å¹»æƒ³å…¬å¸ä¼šç»™æˆ‘åŠ è–ªæˆ–è€…ç»™çš„å¹´ç»ˆå¥–å¤šä¸€äº›ï¼Œæœ€ç»ˆçš„ç»“æœå¾ˆå¤±æœ›ï¼Œæˆ‘ä¹Ÿé€‰æ‹©äº†ç¦»å¼€ã€‚æ‰€ä»¥æˆ‘å¯¹å¤§éƒ¨åˆ†çš„åŠ ç­èµ¶äº§å“çš„å½¢å¼éƒ½æ˜¯ä¸çœ‹å¥½çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘æ˜¯åå¯¹é•¿æœŸåŠ ç­çš„ï¼Œå¯¹äºé‚£ç§996çš„ä¸Šç­æ—¶é—´ï¼Œæ›´æ˜¯ä¸çœ‹å¥½ï¼Œè¿™ç®€ç›´æ˜¯å‰¥å‰Šï¼Œè¿™æ˜¯ç®¡ç†å±‚çš„å¤±èŒã€‚å¦‚æœæ˜¯éåŠ ç­ä¸å¯ï¼Œä¸€å®šè¦åšå¥½è®¡åˆ’ï¼Œä¸èƒ½é•¿æœŸåŠ ç­ï¼Œç»™äºˆè°ƒä¼‘å’Œè¡¥å¿ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œèƒ½ä¸åŠ ç­å°±ä¸è¦åŠ ç­ï¼Œå…¶ä»–æ–¹é¢åšå¥½ï¼Œæé«˜å·¥ä½œæ•ˆç‡å’Œåä½œæ•ˆç‡ï¼Œè¿™æ‰æ˜¯æ­£é“ã€‚&lt;/p&gt;</summary><category term="åŠ ç­"></category></entry><entry><title>iOSæŒç»­é›†æˆè®°(iOS+Jenkins+Cocoapods+è’²å…¬è‹±)</title><link href="http://szuwest.github.io/ioschi-xu-ji-cheng-ji-iosjenkinscocoapodspu-gong-ying.html" rel="alternate"></link><updated>2016-07-18T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-07-18:ioschi-xu-ji-cheng-ji-iosjenkinscocoapodspu-gong-ying.html</id><summary type="html">&lt;h2&gt;iOSæŒç»­é›†æˆè®°ï¼ˆiOS+Jenkins+Cocoapods+è’²å…¬è‹±ï¼‰&lt;/h2&gt;
&lt;p&gt;åŸæ¥æˆ‘ä»¬iOSé¡¹ç›®æ˜¯æœ‰æŒç»­é›†æˆç¯å¢ƒçš„ï¼Œä½†æ˜¯æœ‰ä¸€æ¬¡å‡çº§ç³»ç»Ÿè¿˜æ˜¯å‡çº§xcodeåï¼ŒJenkinså°±æ‰“ä¸å‡ºå¯ç”¨çš„å®‰è£…åŒ…äº†ã€‚åŸæ¥è´Ÿè´£æ•´ä¸ªæ‰“åŒ…æœºçš„åŒäº‹åˆç¦»èŒäº†ï¼Œæœ‰ä¸€æ®µæ—¶é—´æˆ‘ä»¬éƒ½æ˜¯æ‰‹åŠ¨æ‰“åŒ…ç»™QAåŒäº‹å®‰è£…æµ‹è¯•ï¼Œç°åœ¨é¢†å¯¼è¦æ±‚å¿…é¡»æŠŠæŒç»­é›†æˆç¯å¢ƒå¼„å¥½ï¼Œæˆ‘ä»¬èŠ±äº†å¤§çº¦ä¸¤å‘¨æ‰åŸºæœ¬å¼„å¥½æ•´ä¸ªæŒç»­é›†æˆç¯å¢ƒï¼Œç°åœ¨æŠŠæˆ‘æ•´ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°çš„å‘è®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h2&gt;é‡è£…ç³»ç»Ÿ&lt;/h2&gt;
&lt;p&gt;æ‰“åŒ…æœºè‡ªä»æŸä¸€æ¬¡å‡çº§ç³»ç»Ÿä¹‹åå°±å˜å¾—éå¸¸æ…¢ï¼Œæ‰“ä¸ªåŒ…éœ€è¦1ä¸ªå°æ—¶å·¦å³ï¼Œç®€ç›´è¦å‘½ã€‚æ‰€ä»¥æ–°çš„ç¯å¢ƒå¿…é¡»è¦å»ºç«‹åœ¨é‡è£…åçš„ç³»ç»Ÿä¸Šã€‚å› ä¸ºè¦æ ¼å¼åŒ–ç¡¬ç›˜ï¼Œæ‰€ä»¥è¦åˆ¶ä½œç³»ç»Ÿå¯åŠ¨ç›˜ï¼Œè¿™ä¸ªç½‘ä¸Šä¹Ÿæœ‰ä¸å°‘æ•™ç¨‹ï¼Œè¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„ï¼Œä¸‹è½½macOSç³»ç»Ÿæ—¶ï¼Œä¸€å®šè¦ä»å®˜æ–¹ä¸‹è½½ã€‚æˆ‘ä¸€å¼€å§‹æ˜¯è‡ªå·±åœ¨ç™¾åº¦äº‘ä¸Šä¸‹çš„ï¼Œåˆ¶ä½œå¥½å®‰è£…ç›˜åé‡å¯ç”µè„‘ï¼Œå¹¶ä¸”å°†ç¡¬ç›˜æ ¼å¼åŒ–åå®‰è£…ç³»ç»Ÿï¼Œå‘ç°éªŒè¯ä¸é€šè¿‡ï¼Œå¥½åœ¨å¦å¤–ä¸€ä¸ªåŒäº‹åœ¨å®˜ç½‘ä¸‹äº†ä¸€ä¸ªï¼Œæˆ‘åœ¨å®ƒçš„ç”µè„‘ä¸Šé‡æ–°åˆ¶ä½œäº†ä¸€æ¬¡å®‰è£…ç›˜ã€‚å‡è®¾ä½ åªè¦ä¸€å°Macç”µè„‘ï¼Œé‡åˆ°è¿™ç§æƒ…å†µä½ å°±æ‚²å‰§äº†ã€‚&lt;/p&gt;
&lt;h2&gt;gitæ‹‰å–ä»£ç çš„å‘&lt;/h2&gt;
&lt;p&gt;ç³»ç»Ÿè£…å¥½äº†ï¼ŒJenkinsä¹Ÿè£…å¥½äº†ï¼Œç„¶åé…ç½®æ‹‰å»ä»£ç ï¼Œå¯æ˜¯ä»£ç æ­»æ´»æ‹‰ä¸ä¸‹æ¥ï¼Œä¸ºæ­¤æˆ‘çš„åŒäº‹æäº†å·®ä¸å¤šä¸€å¤©ï¼Œè¯•äº†å„ç§æ–¹æ³•ï¼Œä¹Ÿæä¸ä¸‹æ¥ä»£ç ï¼Œéƒ½æ˜¯åœ¨ä¸€åŠçš„æ—¶å€™å¤±è´¥äº†ã€‚åæ¥æˆ‘ä¹Ÿå»å¼„äº†åŠå¤©ï¼ŒåŒæ ·çš„é”™è¯¯ã€‚ä¸»è¦åŸå› å¯èƒ½æ˜¯ä»£ç é‡å¤ªå¤§äº†ï¼Œå› ä¸ºå…¶ä»–çš„å°å·¥ç¨‹å¯ä»¥git clone ä¸‹æ¥ã€‚æˆ‘çªç„¶æƒ³åˆ°æ¢ä¸€ä¸‹æ‹‰å–åè®®è¯•è¯•ï¼Œä¸é‡‡ç”¨HTTPæ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨git@host/xxxx.gitçš„æ–¹å¼æ¥æ‹‰å–ä»£ç ï¼Œæœç„¶æˆåŠŸäº†ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼åï¼Œåœ¨Jenkinsé‡Œéœ€è¦é…ç½®sshçš„RSAç§˜é’¥ï¼Œåœ¨gitlabä¸Šé¢è¦é…ç½®å…¬é’¥ï¼Œä½†æ˜¯æˆ‘åœ¨Jenkinsé‡Œé…ç½®ç§é’¥æ—¶ï¼Œæ‹·è´ç§é’¥æ—¶ï¼Œåªæ‹·è´äº†ä¸­é—´é‚£éƒ¨åˆ†ï¼Œå¯¼è‡´ä¸€ç›´éªŒè¯ä¸è¿‡ï¼Œä¹ŸæŠ˜è…¾äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´æ‰å‘ç°ï¼Œå¹¶æ”¹æ­£äº†è¿‡æ¥ã€‚&lt;/p&gt;
&lt;h2&gt;CocoaPodsçš„å‘&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é¡¹ç›®ç”¨äº†CocoaPodsï¼Œè€Œä¸”podsé‡Œè¿˜æœ‰æˆ‘ä»¬çš„ç§æœ‰åº“ã€‚è™½ç„¶git cloneä»£ç ä¸‹æ¥äº†ï¼Œä½†æ˜¯pod installæ­»æ´»ä¸æˆåŠŸã€‚å¼€å§‹ä»¥ä¸ºæ˜¯podç¯å¢ƒé—®é¢˜ï¼ŒæŸ¥äº†å¾ˆå¤šèµ„æ–™ä¹Ÿè§£å†³ä¸äº†ã€‚åæ¥æˆ‘é—®äº†ä¸€ä¸ªé‡åˆ°è¿‡è¿™ç§æƒ…å†µåŒäº‹ï¼Œä»–è¯´æ˜¯Podfileçš„sourceé—®é¢˜ï¼Œæ”¹æˆsshåè®®æ‹‰å–å°±å¯ä»¥äº†ã€‚çœ‹æ¥ä»ç„¶æ˜¯gitçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;CocoaPodsä¹Ÿèƒ½æ‹‰å–åˆ°äº†ï¼Œç»ˆäºå¯ä»¥è¿›å…¥buildæ­¥éª¤äº†ã€‚åœ¨Jenkinsé‡Œé…ç½®æœ‰ä¸€ä¸ªè¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹ï¼Œå› ä¸ºä½¿ç”¨CocoaPodsçš„å·¥ç¨‹ç¼–è¯‘çš„æ˜¯workspaceï¼Œè€Œä¸æ˜¯æ™®é€šçš„projectã€‚Jenkinsé‡Œxcodeé…ç½®éœ€è¦æŒ‡å®šworkspaceçš„åç§°ï¼Œæ‰èƒ½æ­£ç¡®ç¼–è¯‘ã€‚&lt;/p&gt;
&lt;h2&gt;ä¼ä¸šç‰ˆç¼–è¯‘å’Œä¿®æ”¹BundleID&lt;/h2&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬æ‰“å‡ºæ¥çš„åŒ…éœ€è¦æ—¶å¤–éƒ¨å¯ä»¥éšæ—¶å®‰è£…çš„ï¼Œæ‰€ä»¥éœ€è¦æ˜¯ä¼ä¸šè¯ä¹¦çš„å®‰è£…åŒ…ã€‚ç„¶è€Œä¼ä¸šåŒ…çš„BundleIDæ˜¯è·Ÿæ­£å¸¸AppStoreçš„åŒ…çš„BundleIDä¸ä¸€æ ·çš„ã€‚ä¸€èˆ¬åšæ³•æ˜¯åœ¨æ­£å¸¸çš„AppStoreåŒ…çš„BundleIDåé¢ç›´æ¥åŠ ä¸ŠEnterpriseã€‚æˆ‘ä¸€å¼€å§‹ä¿®æ”¹äº†info.pliståï¼Œå‘ç°è¿˜æ˜¯å› ä¸ºBundleIDè·Ÿè¯ä¹¦ä¸åŒ¹é…è€Œç¼–è¯‘å¤±è´¥ï¼Œå‘ç°BundleIDè¿˜æ˜¯æ²¡æœ‰å˜ã€‚æœ€ç»ˆç½‘ä¸ŠæŸ¥èµ„æ–™æ‰å‘ç°ï¼Œå…‰æ”¹äº†info.plistçš„BundleIDè¿˜ä¸å¤Ÿï¼Œè¿˜è¦ä¿®æ”¹projecté…ç½®é‡Œçš„BundleIDã€‚æˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆä¹…ä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ¯”è¾ƒå¥½çš„ä¿®æ”¹projecté‡Œå‚æ•°çš„æ–¹æ³•ã€‚ä¸è¿‡æœ€ç»ˆæˆ‘åœ¨stackoverflowä¸Šæ‰¾ä¸ªä¸€ç§æ–¹æ³•ï¼Œåœ¨xcodebuildçš„ç¼–è¯‘å‚æ•°é‡Œï¼Œå¯ä»¥åŠ å…¥ä¸€ä¸ªä¿®æ”¹BundleIDçš„å‚æ•°ï¼Œè¿™ä¸ªé—®é¢˜å°±è¿™æ ·è§£å†³äº†ã€‚&lt;br/&gt;
&lt;strong&gt;Custom xcodebuild arguments&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;CODE_SIGN_RESOURCE_RULES_PATH=$(SDKROOT)/ResourceRules.plist PRODUCT_BUNDLE_IDENTIFIER=BundleID&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;éšä¾¿æä¸€ä¸‹ï¼ŒJenkinsçš„é…ç½®é‡Œæœ‰ä¸€ä¸ªå«Change BundleIDçš„é…ç½®é¡¹ï¼Œè²Œä¼¼æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸Šä¼ å’Œå‘é‚®ä»¶&lt;/h2&gt;
&lt;p&gt;å®‰è£…åŒ…æ‰“å‡ºæ¥äº†ï¼Œè¦ä¸Šä¼ åˆ°å…±äº«æœåŠ¡å™¨å’Œå‘å¸ƒåˆ°å¤–ç½‘ç»™å¤§å®¶å®‰è£…ï¼Œè¿˜è¦å‘é‚®ä»¶é€šçŸ¥QAå’Œç›¸å…³äººå‘˜ã€‚è¿™ä¸€æ­¥ç½‘ä¸Šå¾ˆå¤šéƒ½æ˜¯é€šè¿‡ç¼–å†™Pythonè„šæœ¬æ¥å®ç°ã€‚æˆ‘è¯•è¿‡Jenkinsçš„FTPæ’ä»¶é…ç½®ï¼Œå°†å®‰è£…åŒ…ä¸Šä¼ åˆ°æˆ‘ä»¬å†…éƒ¨å…±äº«æœåŠ¡å™¨ï¼Œä½†æ˜¯å¤±è´¥äº†ï¼Œæ²¡æœ‰å¤ªå¤šæ—¶é—´ç ”ç©¶å°±æ”¾å¼ƒäº†ã€‚è½¬è€Œç ”ç©¶ä¸Šä¼ è’²å…¬è‹±ã€‚æˆ‘è¯•è¿‡ç½‘ä¸Šçš„ä¸€äº›æ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰é€šè¿‡curlæ–¹å¼ä¸Šä¼ æ‰æˆåŠŸçš„ã€‚ä½†æ˜¯æ³¨æ„curlå‘½ä»¤åçš„çš„fileå‚æ•°æœ‰ä¸ª@ã€‚ä¾‹å¦‚ curl -F "file=@path"&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¸Šä¼ ipaå’Œå‘é‚®ä»¶æˆåŠŸï¼Œæˆ‘è¿˜æŸ¥é˜…äº†ä¸å°‘Pythonçš„è¯­æ³•å’Œbash shellçš„è¯­æ³•ï¼Œæ”¶è·ä¸å°‘ã€‚æ¯ä¸€æ¬¡æŠ˜è…¾éƒ½æ˜¯è¿›æ­¥ã€‚&lt;/p&gt;</summary><category term="Jenkins Cocoapods è’²å…¬è‹±"></category></entry><entry><title>æ‰“å°æ¨è¾‰ä¸‰è§’--ç¼–ç¨‹ç®—æ³•ç³»åˆ—ä¹‹ä¸€</title><link href="http://szuwest.github.io/da-yin-yang-hui-san-jiao-bian-cheng-suan-fa-xi-lie-zhi-yi.html" rel="alternate"></link><updated>2016-07-17T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-07-17:da-yin-yang-hui-san-jiao-bian-cheng-suan-fa-xi-lie-zhi-yi.html</id><summary type="html">&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç®—æ³•æ˜¯ç¨‹åºå‘˜ä»èŒä¸šå¼€å§‹åˆ°èŒä¸šç»“æŸï¼Œä¼°è®¡éƒ½æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚æ‰€æœ‰å¤§å…¬å¸æŠ€æœ¯é¢è¯•éƒ½ä¼šè€ƒç®—æ³•é¢˜ï¼Œä¸ç®¡å›½å†…å›½å¤–ã€‚æˆ‘ä¸€ç›´æƒ³éå¾—è¿™æ ·ç®—æ³•å—ï¼Œæ²¡æœ‰åˆ«çš„æ›´å¥½çš„è€ƒå¯Ÿæ–¹å¼å—ï¼Ÿæœ‰æ²¡æœ‰ç®—æ³•ä¸è¡Œä½†æ˜¯å†™ç¨‹åºå¾ˆå‰å®³çš„äººï¼Ÿæˆ‘æ²¡æœ‰ç­”æ¡ˆã€‚ä¹Ÿè®¸ç®—æ³•ç¡®å®æ¯”è¾ƒå¥½çš„è€ƒå¯Ÿæ–¹æ³•ï¼Œå¦‚æœä½ ç¡®å®æ˜¯ä¸ªèªæ˜äººï¼Œä½ åº”è¯¥å…‹æœç®—æ³•ä¸è¡Œçš„é—®é¢˜ã€‚è¿ç”¨ç®—æ³•è§£å†³æŸäº›é—®é¢˜ï¼Œæˆ–è€…ç¼–å†™ç¨‹åºå»å®ç°æŸä¸ªç®—æ³•ï¼Œå¯¹ç¨‹åºå‘˜æ˜¯ä¸€ä¸ªé‡è¦çš„èƒ½åŠ›ã€‚æ‰€ä»¥æˆ‘è¦é”»ç‚¼è‡ªå·±æ‹¥æœ‰è¿™ä¸ªèƒ½åŠ›ã€‚æˆ‘å‡†å¤‡å°†æˆ‘ä»¥å‰é‡åˆ°çš„ä¸€äº›é¢è¯•é¢˜ç›®ï¼ŒçœŸæ­£çš„å®Œå…¨é è‡ªå·±å»å®ç°ï¼Œå¹¶è®°å½•ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;h2&gt;æ¨è¾‰ä¸‰è§’&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ å¬è¯´è¿‡æ¨è¾‰ä¸‰è§’ï¼Œä½†æ˜¯åˆä¸è®°å¾—å…·ä½“æ˜¯ä»€ä¹ˆè§„æ ¼ï¼Œé‚£ä½ è·Ÿå½“å¹´çš„æˆ‘ä¸€æ ·ã€‚å¤§æ¦‚ä¸€ä¸¤å¹´å‰ï¼ŒXå…¬å¸æŸä¸ªé¡¹ç›®æ‹›äººï¼Œä»–ä»¬çš„HRæ‰¾åˆ°æˆ‘è®©æˆ‘å»è¯•è¯•ï¼Œå½“æ—¶æˆ‘æƒ³è¯•è¯•ä¹Ÿæ— å¦¨ã€‚å‰é¢çš„ä¸€ï¼ŒäºŒæŠ€æœ¯é¢è¯•éƒ½æ²¡å¤ªå¤šé—®é¢˜ï¼Œä»–ä»¬é—®çš„éƒ½æ˜¯å·¥ä½œä¸­çš„æŠ€æœ¯ï¼Œåæ¥æœ‰ä¸€é¢åªé¢äº†æˆ‘çº¯ç®—æ³•é—®é¢˜ï¼Œå°±æ˜¯æ‰“å°æ¨è¾‰ä¸‰è§’ï¼Œæˆ‘ä¸€ä¸‹æ‡µäº†ï¼Œç»“æœæ˜¯æ­»å¾—å¾ˆéš¾çœ‹ã€‚
å…ˆçœ‹çœ‹æ¨è¾‰ä¸‰è§’çš„æ•°å­—æ’åˆ—æ˜¯æ€æ ·çš„ï¼š&lt;br/&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;ã€€&lt;/span&gt;                         &lt;span class="mi"&gt;1&lt;/span&gt;
                         &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
                       &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
                     &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;3&lt;/span&gt;   &lt;span class="mi"&gt;3&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
                   &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;4&lt;/span&gt;   &lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="mi"&gt;4&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
                 &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;5&lt;/span&gt;   &lt;span class="mi"&gt;10&lt;/span&gt;  &lt;span class="mi"&gt;10&lt;/span&gt;  &lt;span class="mi"&gt;5&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
               &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="mi"&gt;15&lt;/span&gt;  &lt;span class="mi"&gt;20&lt;/span&gt;  &lt;span class="mi"&gt;15&lt;/span&gt;  &lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
             &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;7&lt;/span&gt;   &lt;span class="mi"&gt;21&lt;/span&gt;  &lt;span class="mi"&gt;35&lt;/span&gt;  &lt;span class="mi"&gt;35&lt;/span&gt;  &lt;span class="mi"&gt;21&lt;/span&gt;  &lt;span class="mi"&gt;7&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
           &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;8&lt;/span&gt;   &lt;span class="mi"&gt;28&lt;/span&gt;  &lt;span class="mi"&gt;56&lt;/span&gt;  &lt;span class="mi"&gt;70&lt;/span&gt;  &lt;span class="mi"&gt;56&lt;/span&gt;  &lt;span class="mi"&gt;28&lt;/span&gt;  &lt;span class="mi"&gt;8&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
         &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;9&lt;/span&gt;   &lt;span class="mi"&gt;36&lt;/span&gt;  &lt;span class="mi"&gt;84&lt;/span&gt;  &lt;span class="mi"&gt;126&lt;/span&gt; &lt;span class="mi"&gt;126&lt;/span&gt; &lt;span class="mi"&gt;84&lt;/span&gt;  &lt;span class="mi"&gt;36&lt;/span&gt;  &lt;span class="mi"&gt;9&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
       &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;10&lt;/span&gt;  &lt;span class="mi"&gt;45&lt;/span&gt;  &lt;span class="mi"&gt;120&lt;/span&gt; &lt;span class="mi"&gt;210&lt;/span&gt; &lt;span class="mi"&gt;252&lt;/span&gt; &lt;span class="mi"&gt;210&lt;/span&gt; &lt;span class="mi"&gt;120&lt;/span&gt; &lt;span class="mi"&gt;45&lt;/span&gt;  &lt;span class="mi"&gt;10&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;   
     &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;11&lt;/span&gt;  &lt;span class="mi"&gt;55&lt;/span&gt;  &lt;span class="mi"&gt;165&lt;/span&gt; &lt;span class="mi"&gt;330&lt;/span&gt; &lt;span class="mi"&gt;462&lt;/span&gt; &lt;span class="mi"&gt;462&lt;/span&gt; &lt;span class="mi"&gt;330&lt;/span&gt; &lt;span class="mi"&gt;165&lt;/span&gt; &lt;span class="mi"&gt;55&lt;/span&gt;  &lt;span class="mi"&gt;11&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;    
   &lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;12&lt;/span&gt;  &lt;span class="mi"&gt;66&lt;/span&gt;  &lt;span class="mi"&gt;220&lt;/span&gt; &lt;span class="mi"&gt;495&lt;/span&gt; &lt;span class="mi"&gt;792&lt;/span&gt; &lt;span class="mi"&gt;924&lt;/span&gt; &lt;span class="mi"&gt;792&lt;/span&gt; &lt;span class="mi"&gt;495&lt;/span&gt; &lt;span class="mi"&gt;220&lt;/span&gt; &lt;span class="mi"&gt;66&lt;/span&gt;  &lt;span class="mi"&gt;12&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é¢è¯•æ—¶æˆ‘å¾ˆå®¹æ˜“ç´§å¼ ï¼Œäººåœ¨ç´§å¼ æƒ…å†µä¸‹è²Œä¼¼æ˜¯å¾ˆéš¾è½¬èµ·æ¥çš„ï¼Œè¿™æ˜¯æˆ‘çš„ä¸€å¤§å¼Šç«¯ã€‚
å½“æ—¶é¢è¯•å®˜åªåœ¨çº¸ä¸Šç”»äº†å‰5è¡Œï¼Œåªå‘Šè¯‰äº†æˆ‘æ¨è¾‰ä¸‰è§’çš„ç‰¹ç‚¹å°±æ˜¯æ¯ä¸ªæ•°å­—éƒ½æ˜¯å®ƒå·¦ä¸Šè§’çš„é‚£ä¸ªæ•°å­—å’Œå³ä¸Šè§’çš„é‚£ä¸ªæ•°å­—ç›¸åŠ å¾—æ¥ï¼Œç¬¬ä¸€ä¸ªæ•°å­—æ˜¯1ã€‚æˆ‘å½“æ—¶åªå¾—å‡ºè¿ç”¨é€’å½’ç®—æ³•æ¥è§£è¿™é“é¢˜ä¼šæ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚ä½†æ˜¯è¯¥æ€ä¹ˆå†™æˆ‘å†™ä¸å‡ºæ¥ã€‚åæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´æˆ‘å¹¶æ²¡æœ‰å¿˜è®°è¿™é“é¢˜ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰å»æŸ¥æ€ä¹ˆè§£å†³ï¼Œæˆ‘å¶å°”ä¼šæƒ³ä¸€ä¸‹è¯¥æ€ä¹ˆåšã€‚æœ€è¿‘è¿™ä¸€ä¸¤å‘¨æˆ‘å¯¹è§£å†³è¿™ä¸ªåˆ°é¢˜çš„æ¬²æœ›è¶Šæ¥è¶Šå¼ºçƒˆï¼Œæ‰€ä»¥æˆ‘å¼€å§‹åœ¨è®°äº‹æœ¬ä¸ŠåŠ¨æ‰‹å†™ä»£ç è§£å†³ã€‚åæ¥æˆ‘å‘ç°äº†æ¨è¾‰ä¸‰è§’çš„ä¸€äº›è§„å¾‹ï¼Œè¿™äº›è§„å¾‹å¸®åŠ©æˆ‘å°†ä»£ç å†™äº†å‡ºæ¥ã€‚&lt;br/&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1.æ¨è¾‰ä¸‰è§’ç¬¬nè¡Œæœ‰nä¸ªæ•°å­—&lt;/li&gt;
&lt;li&gt;2.æ¯ä¸ªæ•°å­—éƒ½æ˜¯å®ƒå·¦ä¸Šè§’çš„é‚£ä¸ªæ•°å­—å’Œå³ä¸Šè§’çš„é‚£ä¸ªæ•°å­—ç›¸åŠ å¾—æ¥ï¼Œæ›´å…·ä½“ä¸€ç‚¹è¿™ä¸ªæ•°å­—æ˜¯a(i,j),é‚£ä¹ˆå®ƒæ˜¯a(i-1,j-1)å’Œa(i-1, j)ç›¸åŠ å¾—æ¥çš„&lt;/li&gt;
&lt;li&gt;3.ç¬¬1ä¸ªæ•°å­—æ˜¯1.å¦‚æœè¿™ä¸ªæ•°å­—çš„å·¦ä¸Šè§’æˆ–å³ä¸Šè§’çš„é‚£ä¸ªæ•°å­—ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±å½“åš0&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;æˆ‘çš„åˆ†æè¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;è¯´å®è¯ï¼Œç°åœ¨çœ‹èµ·æ¥è¿™äº›è§„å¾‹æ˜¾è€Œæ˜“è§ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯åœ¨ç¼–å†™ä»£ç çš„è¿‡ç¨‹ä¸­å¸¦æ‰æ‰¾åˆ°çš„ã€‚&lt;br/&gt;
æˆ‘è¿™ä¸ªäººåœ¨é¢è¯•ä¸­çœŸçš„æ— æ³•åšåˆ°åƒå¹³æ—¶é‚£æ ·æ€è€ƒï¼Œè¿™è®©æˆ‘åœ¨é¢è¯•ä¸­æ„Ÿè§‰è‡ªå·±æ˜¯ä¸ªæ— æ€è€ƒèƒ½åŠ›çš„äººã€‚è¿˜æœ‰æˆ‘å‘ç°è‡ªå·±ä¸€å®šè¦å…ˆè¿›å…¥ç¼–ç¨‹çŠ¶æ€æ‰èƒ½è¿›è¡Œæ€è€ƒã€‚æ‰€ä»¥æˆ‘å†³å®šè¦è§£å†³è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘å°±æ‰“å¼€ä¸€æ–‡æœ¬ï¼Œå¼€å§‹å†™ä¸€äº›æˆ‘å·²ç»æƒ³åˆ°çš„ä»£ç ï¼Œç›´åˆ°ç°åœ¨ï¼Œè¿™ä¸ªæ–‡æœ¬ä¹Ÿè¿˜æ²¡æœ‰å…³é—­è¿‡ã€‚&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬3ç‚¹å¾ˆæµ…æ˜¾ï¼Œå®ƒæ˜¯åŸºç¡€ï¼Œå¦‚æœç”¨é€’å½’å®ç°çš„è¯è¿™æ˜¯é€’å½’çš„å‡ºå£ã€‚ç¬¬1ç‚¹è®©æˆ‘å†™å‡ºäº†ä¸¤ä¸ªforå¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ä½“å†…æ˜¯æ€ä¹ˆå®ç°ï¼Œæˆ‘çº ç»“äº†å¾ˆä¹…ã€‚æœ€å¼€å§‹æˆ‘æƒ³ç”¨æœ€ç®€å•çš„æ–¹æ³•ï¼ŒæŠŠå·²è®¡ç®—å‡ºçš„æ•°å­—æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åå°±æŠŠæ•°ç»„ä¸­çš„æ•°å­—ç›¸åŠ å¾—å‡ºæ‰€éœ€æ•°å­—ã€‚ä½†æ˜¯æˆ‘å‘ç°è¿™ä¸ªæ•°ç»„ä¹Ÿä¸å¤ªç”¨ï¼Œæˆ‘ä¸æƒ³ç”¨äºŒç»´æ•°ç»„ã€‚åæ¥æˆ‘æ‰æƒ³æ¸…æ¥šï¼Œç›´æ¥åœ¨å¾ªç¯ä½“å†…ç”¨ä¸€ä¸ªé€’å½’å‡½æ•°å°±è¿™ä¸ªæ•°å­—çš„å€¼ï¼Œç„¶åæŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œè¿™ä¸ªæ˜¯è¡Œå¾—é€šçš„ã€‚ç„¶åå…³é”®æ˜¯è¿™ä¸ªé€’å½’å‡½æ•°æ€ä¹ˆå®ç°ã€‚&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹æˆ‘æŠŠé€’å½’å‡½æ•°çš„å‚æ•°è®¾ä¸ºnï¼Œå‘ç°æ€ä¹ˆå®ç°éƒ½ä¸å¤ªå¯¹ï¼Œåæ¥å‘ç°å…¶å®åº”è¯¥æ˜¯æŠŠå‚æ•°è®¾ç½®ä¸ºi,jï¼Œè¿™æ ·å°±è·Ÿå¾ªç¯ä½“çš„ä¸‹æ ‡å¯¹åº”èµ·æ¥ï¼Œå°±å¾ˆå¥½è§£å†³äº†ã€‚æœ€ç»ˆè¦è§£å†³çš„å°±æ˜¯é€’å½’çš„å‡ºå£é—®é¢˜ï¼Œè¿™ä¸ªä¹Ÿä¸æ˜¯æˆ‘ä¸€å¼€å§‹æƒ³çš„é‚£ä¹ˆç®€å•ã€‚æˆ‘æŠŠä¸‹æ ‡è®¾ç½®æˆæ˜¯ä»¥1å¼€å§‹çš„ï¼Œi&amp;lt;1çš„è¯ï¼Œå®ƒçš„å€¼å°±æ˜¯0ï¼Œ1çš„è¯å°±æ˜¯1. è€Œå¯¹åº”j,ä¸º1çš„è¯ï¼Œå®ƒæ˜¯0ï¼Œè€Œä¸”jæ˜¯ä¸èƒ½å¤§äºiçš„ï¼Œå¤§äºiå®ƒçš„å€¼ä¹Ÿä¸º0ã€‚
æ‰€ä»¥ç¨‹åºçš„æœ€ç»ˆå®ç°æ˜¯ï¼š&lt;/p&gt;
&lt;h3&gt;ä»£ç å®ç°&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;\#&lt;/span&gt;&lt;span class="n"&gt;include&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;stdio&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;yangHuiTriangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;yangHuiTriangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;yangHuiTriangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;pringYangHuiTriangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;=&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;yangHuiTriangle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%d   &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å½“æˆ‘ç¬¬ä¸€æ¬¡å†™å®Œä»£ç æ—¶ï¼Œå¹¶æ²¡æœ‰å®Œå…¨å†™å¯¹ï¼Œj&amp;gt;içš„æƒ…å†µæ²¡æœ‰å¤„ç†å¥½ã€‚æˆ‘è‡ªå·±å¯¹ç…§ç€æ¨è¾‰ä¸‰è§’çš„æ•°å­—æ¥æ£€éªŒçš„æ—¶å€™ï¼Œå‘ç°äº†é—®é¢˜ï¼Œç„¶åæ”¹äº†è¿‡æ¥ï¼Œç„¶åæˆ‘å°±æŠŠä»£ç æ‹·è´åˆ°ä¸€ä¸ªå·¥ç¨‹é‡Œè¿è¡Œï¼Œç»“æœå‡ºæ¥äº†ï¼Œæ˜¯å¯¹çš„ï¼&lt;/p&gt;
&lt;h3&gt;æ‰“å°ç»“æœ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;2&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;3&lt;/span&gt;   &lt;span class="mi"&gt;3&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;4&lt;/span&gt;   &lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="mi"&gt;4&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;5&lt;/span&gt;   &lt;span class="mi"&gt;10&lt;/span&gt;   &lt;span class="mi"&gt;10&lt;/span&gt;   &lt;span class="mi"&gt;5&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="mi"&gt;15&lt;/span&gt;   &lt;span class="mi"&gt;20&lt;/span&gt;   &lt;span class="mi"&gt;15&lt;/span&gt;   &lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;7&lt;/span&gt;   &lt;span class="mi"&gt;21&lt;/span&gt;   &lt;span class="mi"&gt;35&lt;/span&gt;   &lt;span class="mi"&gt;35&lt;/span&gt;   &lt;span class="mi"&gt;21&lt;/span&gt;   &lt;span class="mi"&gt;7&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;8&lt;/span&gt;   &lt;span class="mi"&gt;28&lt;/span&gt;   &lt;span class="mi"&gt;56&lt;/span&gt;   &lt;span class="mi"&gt;70&lt;/span&gt;   &lt;span class="mi"&gt;56&lt;/span&gt;   &lt;span class="mi"&gt;28&lt;/span&gt;   &lt;span class="mi"&gt;8&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;9&lt;/span&gt;   &lt;span class="mi"&gt;36&lt;/span&gt;   &lt;span class="mi"&gt;84&lt;/span&gt;   &lt;span class="mi"&gt;126&lt;/span&gt;   &lt;span class="mi"&gt;126&lt;/span&gt;   &lt;span class="mi"&gt;84&lt;/span&gt;   &lt;span class="mi"&gt;36&lt;/span&gt;   &lt;span class="mi"&gt;9&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;10&lt;/span&gt;   &lt;span class="mi"&gt;45&lt;/span&gt;   &lt;span class="mi"&gt;120&lt;/span&gt;   &lt;span class="mi"&gt;210&lt;/span&gt;   &lt;span class="mi"&gt;252&lt;/span&gt;   &lt;span class="mi"&gt;210&lt;/span&gt;   &lt;span class="mi"&gt;120&lt;/span&gt;   &lt;span class="mi"&gt;45&lt;/span&gt;   &lt;span class="mi"&gt;10&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;11&lt;/span&gt;   &lt;span class="mi"&gt;55&lt;/span&gt;   &lt;span class="mi"&gt;165&lt;/span&gt;   &lt;span class="mi"&gt;330&lt;/span&gt;   &lt;span class="mi"&gt;462&lt;/span&gt;   &lt;span class="mi"&gt;462&lt;/span&gt;   &lt;span class="mi"&gt;330&lt;/span&gt;   &lt;span class="mi"&gt;165&lt;/span&gt;   &lt;span class="mi"&gt;55&lt;/span&gt;   &lt;span class="mi"&gt;11&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;   
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="mi"&gt;12&lt;/span&gt;   &lt;span class="mi"&gt;66&lt;/span&gt;   &lt;span class="mi"&gt;220&lt;/span&gt;   &lt;span class="mi"&gt;495&lt;/span&gt;   &lt;span class="mi"&gt;792&lt;/span&gt;   &lt;span class="mi"&gt;924&lt;/span&gt;   &lt;span class="mi"&gt;792&lt;/span&gt;   &lt;span class="mi"&gt;495&lt;/span&gt;   &lt;span class="mi"&gt;220&lt;/span&gt;   &lt;span class="mi"&gt;66&lt;/span&gt;   &lt;span class="mi"&gt;12&lt;/span&gt;   &lt;span class="mi"&gt;1&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è™½ç„¶è¿™ä¸ªæ‰“å°å‡ºæ¥çš„ç»“æœä¸æ˜¯é‡‘å­—å¡”å½¢çŠ¶ï¼Œä½†æ˜¯å®ƒçš„æ•°å­—éƒ½æ˜¯å¯¹çš„ã€‚å¯¹äºæ‰“å°æˆé‡‘å­—å¡”å½¢çŠ¶ï¼Œä»¥åå†ç ”ç©¶å§ã€‚&lt;/p&gt;</summary><category term="ç®—æ³• æ¨è¾‰ä¸‰è§’"></category></entry><entry><title>æµ…è°ˆVR</title><link href="http://szuwest.github.io/qian-tan-vr.html" rel="alternate"></link><updated>2016-06-11T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-06-11:qian-tan-vr.html</id><summary type="html">&lt;h2&gt;æµ…è°ˆVR&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘VRç«å¾—ä¸è¡Œï¼Œå°±è¿å¤®è§†è´¢ç»ä¹Ÿæœ‰æŠ¥é“è¯´â€œ4å¹´åVRå¸‚åœºè§„æ¨¡é«˜è¾¾550äº¿å…ƒï¼äººæ‰ç¼ºå£è¾¾80ä¸‡â€ã€‚ç„¶ååˆšåˆšç»“æŸçš„é«˜è€ƒï¼ŒæŸä¸€ä¸ªçœä»½çš„è¯­æ–‡ä½œæ–‡é¢˜ä¹Ÿæ˜¯è·ŸVRç›¸å…³ã€‚æ‰€ä»¥è¯´ï¼ŒVRæ˜¯ä»Šåå‡ å¹´æœ€çƒ­é—¨çš„ä¸€ä¸ªè¯é¢˜å’ŒæŠ€æœ¯ä¹‹ä¸€ï¼Œæ²¡æœ‰äººä¼šåå¯¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;VR&lt;/strong&gt;, æ˜¯Virtual Realityçš„ç¼©å†™ï¼Œå³è™šæ‹Ÿç°å®ï¼Œå®ƒå…¶å®ä¸æ˜¯æœ€è¿‘æ–°çš„æŠ€æœ¯ï¼Œå®ƒåªæ˜¯å› ä¸ºç§»åŠ¨äº’è”ç½‘çš„å…´èµ·è€Œå˜å¾—çƒ­é—¨èµ·æ¥ã€‚æˆ‘è®°å¾—çœŸæ­£è¢«å…¨ä¸–ç•Œäººè®¤è¯†å’Œè®¨è®ºçš„è§¦å‘äº‹ä»¶æ˜¯Facebookå‘é‡é‡‘æ”¶è´­äº†Oculus VRå…¬å¸ã€‚è€Œé™¤äº†VRï¼Œå®é™…ä¸Šè¿˜æœ‰å¦å¤–ä¸€ä¸ªç›¸è¿‘æŠ€æœ¯&lt;strong&gt;AR&lt;/strong&gt;. ARæ˜¯Augmented Realityç¼©å†™ï¼Œå³å¢å¼ºç°å®ã€‚ARè·ŸVRæœ‰æŒºå¤§ä¸åŒçš„ï¼Œæˆ‘ç°åœ¨ç ”ç©¶å¾—ä¹Ÿä¸å¤šï¼Œä»¥åæœ‰æœºä¼šæˆ‘ä¹Ÿæƒ³å†™ä¸€ä¸‹ARç›¸å…³çš„æ–‡å­—ã€‚&lt;/p&gt;
&lt;h2&gt;VRçš„åº”ç”¨&lt;/h2&gt;
&lt;p&gt;å‰å‡ å¤©æˆ‘é…è€å©†å»æµ·é›…ç¼¤çº·åŸé€›è¡—ï¼Œç„¶åå‘ç°é‚£é‡Œæœ‰ä¸€ä¸ªVRä½“éªŒåŒºï¼Œä¸»è¦æ˜¯VRç”µå½±å’Œæ¸¸æˆç»“åˆçš„é¡¹ç›®ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯VRè‡ªè¡Œè½¦ã€‚æˆ‘ä½“éªŒäº†ä¸€ä¸‹ä¸€ä¸ªå«ã€Šåœ°åŸæ¸¸è®°ã€‹çš„æ¸¸æˆï¼Œæ„Ÿè§‰è¿˜å¯ä»¥ã€‚å®ƒä¸»è¦æ˜¯ä½ ååœ¨ä¸€ä¸ªæœºå™¨ä¸Šï¼Œå¸¦ä¸Šå¤´ç›”ï¼Œæ‰‹å¯ä»¥æ¡ç€ä¸€ä¸ªæ†ï¼Œæ†ä¸Šæœ‰ä¸ªæŒ‰é”®ï¼Œæ¸¸æˆä¸­ä½ å¯ä»¥æŒ‰é‚£ä¸ªé”®æ¥è¿›è¡Œå°„å‡»æ€ªç‰©ã€‚ä½ ååœ¨æœºå™¨ä¸Šï¼Œæœºå™¨ä¼šæ ¹æ®æ¸¸æˆæ¥è¿›è¡Œæ™ƒåŠ¨ï¼Œä¾‹å¦‚æˆ‘ä½“éªŒçš„æ˜¯åç€è¿‡å±±è½¦ï¼Œå®ƒå°±ä¼šæ ¹æ®è¿‡å±±è½¦æ¥è¿›è¡Œæ™ƒåŠ¨ï¼Œæ¨¡æ‹Ÿä½ çœ‹åˆ°åœºæ™¯ï¼Œå°±å¥½åƒä½ çœŸçš„åœ¨åè¿‡å±±è½¦ä¸€æ ·ã€‚æ¸¸æˆä¸­ä¼šæœ‰ä¸€äº›è™è æˆ–è€…é¾™é£åœ¨ä½ å‰é¢ï¼Œç„¶åæœ‰å£°éŸ³æç¤ºä½ å°„å‡»å®ƒï¼Œä½ å°±ä¼šçŸ¥é“æŒ‰é‚£ä¸ªé”®ã€‚æ— éœ€ä»»ä½•äººæ•™ï¼Œæˆ‘çœ‹å°æœ‹å‹éƒ½ä¼šã€‚ä½“éªŒæ—¶é—´å¤§æ¦‚10åˆ†é’Ÿï¼Œæˆ‘è€å©†è¯´æˆ‘ä½“éªŒæ—¶ç¬‘å¾—å¾ˆå¼€å¿ƒï¼Œè€ŒåŒåœ¨ä¸€èµ·ä½“éªŒçš„ä¸€ä¸ªå°æœ‹å‹å¾ˆé•‡å®šï¼Œæ²¡æœ‰å¤ªå¤§ååº”ã€‚å…¶å®æˆ‘ç¬‘çš„ä¸»è¦åŸå› æ˜¯æˆ‘è§‰å¾—è¿™ä¸ªæ¸¸æˆæœ‰ç‚¹æç¬‘ï¼Œæ²¡æœ‰å¾ˆçœŸå®ã€‚ä¸€ä¸ªåŸå› æ˜¯æˆ‘çœ‹å¾—æ¨¡ç³Šä¸æ¸…ï¼Œæˆ‘æƒ³æ˜¯å¤´ç›”é‡Œçš„åˆ†è¾¨ç‡ä¸æ˜¯å¾ˆé«˜ï¼Œè¿˜æœ‰å°±æ˜¯æˆ‘è¿‘è§†ï¼Œç„¶ååˆæ²¡æœ‰å¸¦çœ¼ç›ï¼ŒåŠ å‰§äº†è¿™ç§ä¸çœŸå®æ•ˆæœã€‚è¿˜æœ‰å°±æ˜¯æ¸¸æˆä¸­çš„ç”»é¢å’Œé‚£ä¸ªæ™ƒåŠ¨åº§æ¤…ç»“åˆçš„è¿˜ä¸æ˜¯å¾ˆå¥½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚è¿™æ¬¡ä½“éªŒä»·æ˜¯30å…ƒã€‚åæ¥æˆ‘å‘ç°è¿˜æœ‰ä¸€ä¸ªVRä½“éªŒåº—åœ¨è´Ÿä¸€å±‚ï¼Œé‚£ä¸ªçœ‹ä¸Šå»æ•ˆæœæ›´å¥½ä¸€äº›ï¼Œæœ‰ææ€–ç‰‡çš„ï¼Œé¬¼ç›´æ¥æ‹¿åˆ€å»æ…ä½ çš„é‚£ç§ï¼Œè¿˜æœ‰VRè·‘è½¦ï¼Œçœ‹ä¸Šå»æ¯”æˆ‘ä¹‹å‰ä½“éªŒçš„é‚£ä¸ªè¦å¥½å¾ˆå¤šã€‚ä¸è¿‡ä»·æ ¼ä¹Ÿè´µäº›ï¼Œ50å…ƒä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ç±»ä¼¼çš„é VRä½“éªŒæ¥æ”¶è´¹èµšé’±çš„è¿˜çœŸä¸å°‘ï¼Œæˆ‘çœ‹åˆ°å‡ ä¹æ¯ä¸ªå¤§çš„å•†åœºéƒ½æœ‰ã€‚è¿™æ˜¯VRåº”ç”¨çš„ä¸€ä¸ªæ–¹å‘ã€‚ç°åœ¨VRä¸€ä½“æœºè®¾å¤‡éƒ½è¿˜æ¯”è¾ƒè´µï¼Œç”±ä¼ä¸šåšä½“éªŒæ¶ˆè´¹è¿™ç§æ¨¡å¼æ˜¯å…ˆè¡Œè€…ã€‚æˆ‘è§‚å¯Ÿäº†ä¸€ä¸‹ï¼Œç°åœ¨ä¸»è¦ä½“éªŒè€…æ˜¯å°å­©ï¼Œç°åœ¨çš„çˆ¸å¦ˆéƒ½èˆå¾—å‘é’±ï¼Œä¹Ÿæœ‰åƒæˆ‘è¿™æ ·çš„å¹´è½»äººã€‚æ‰€ä»¥æœªæ¥VRåº”ç”¨çš„ç¬¬ä¸€å¤§è¡Œä¸šåº”è¯¥æ˜¯æ¸¸æˆè¡Œä¸šã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è§‰å¾—VRç”µå½±ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦çš„æ–¹å‘ï¼Œ3Dç”µå½±çš„æµè¡Œå’Œæ™®åŠä¹Ÿå°±æ˜¯é‚£ä¹ˆå‡ å¹´ï¼Œæœªæ¥VRæŠ€æœ¯æˆç†Ÿï¼Œè‚¯å®šä¹Ÿå¾ˆå¿«æ™®åŠã€‚ç„¶åæ®è¯´VRä½“è‚²ä¹Ÿæ˜¯ä¸€ä¸ªé‡è¦æ–¹å‘ï¼Œå› ä¸ºæœ‰äº†VRï¼Œå°±å¥½åƒç°åœºçœ‹ä¸€ä¸‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªé¢ è¦†ã€‚ä¸è¿‡ä»€ä¹ˆæ—¶å€™èƒ½åˆ°æ¥ï¼Œå¾ˆéš¾è¯´ã€‚ä¸è¿‡VRç°åœ¨å·²æœ‰ä¸€ä¸ªæ–¹å‘å¾ˆç«äº†ï¼Œé‚£å°±æ˜¯æˆäººå¸‚åœºå¸‚åœºã€‚æ€§æ˜¯äººç±»æ°¸æ’çš„ä¸»é¢˜ï¼ŒVRç»™æˆäººå¸‚åœºå¸¦å…¥ä¸€ä¸ªæ–°çš„æ–¹å‘ã€‚ç¾å›½å’Œæ—¥æœ¬è¿™æ–¹é¢è‚¯å®šä¼šèµ°åœ¨æœ€å‰é¢ï¼Œç»å¸¸ä¼šçœ‹åˆ°ä¸€äº›ç¾å›½æˆ–è€…æ—¥æœ¬çš„æŠ¥é“è¯´VRæŠ€æœ¯å¦‚ä½•åº”ç”¨åˆ°æˆäººè¡Œä¸šã€‚&lt;/p&gt;
&lt;h2&gt;VRæŠ€æœ¯&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºæŠ€æœ¯äººï¼Œå¿…ç„¶äº‰å–è¦è·Ÿä¸ŠæŠ€æœ¯çš„æ½®æµã€‚ç°åœ¨å¤§å…¬å¸éƒ½å·²å¸ƒå±€å’Œåˆ¶å®šæ ‡å‡†ã€‚Facebookçš„Oculus VRï¼ŒGoogleçš„Cardboardï¼ŒVRå¹³å°Daydreamï¼Œå¾®è½¯çš„HoloLensï¼Œè¿˜æœ‰ä¸‰æ˜Ÿï¼ŒHTCï¼Œç´¢å°¼æœ‰æœ‰è‡ªå·±çš„VRäº§å“ã€‚ç°åœ¨VRæŠ€æœ¯è¿˜å¤„åœ¨åˆæœŸé˜¶æ®µï¼Œä¸è¿‡Googleå·²ç»èµ¶å…ˆå®šåˆ¶äº†ä¸€ä¸ªæ ‡å‡†ï¼Œåé¢çš„åæ­£è‚¯å®šä¹Ÿè¶Šæ¥è¶Šè§„èŒƒåŒ–å’Œæ ‡å‡†åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨åšVRå¼€å‘ï¼Œèµ„æ–™ä¹Ÿå¾ˆå°‘ï¼Œå¤§éƒ½æ˜¯é’ˆå¯¹ç‰¹å®šå¹³å°æ¥å®šåˆ¶åº”ç”¨å’Œæ¸¸æˆã€‚ä¸è¿‡è¿™ä¹Ÿæ˜¯æœºä¼šï¼Œè¶Šæ—©è¿›å…¥ï¼Œæœºä¼šè¶Šå¤šã€‚å°±åƒå½“åˆæ™ºèƒ½æ‰‹æœºçœ‹æ³•é‚£æ ·ã€‚&lt;/p&gt;
&lt;p&gt;åšVRå¼€å‘ï¼Œç°åœ¨å¤§éƒ½ç”¨Unity3Dï¼Œæˆ‘è‡ªå·±ä¹Ÿæ›¾æœ‰ä¸€æ®µæ—¶é—´æƒ³å­¦Unityå¼€å‘ï¼Œä¸è¿‡æ²¡æœ‰åšæŒä¸‹æ¥ã€‚ç°åœ¨åˆä¸å¾—ä¸é‡æ–°æ¥äº†ã€‚ä¸è¿‡ç°åœ¨æœ‰ä¸ªå¤§é—®é¢˜å°±æ˜¯æ²¡æœ‰å¥½çš„VRè®¾å¤‡ï¼Œè™½ç„¶æˆ‘æœ‰ä¸¤ä¸ªå¤§æœ‹VRçœ¼é•œï¼Œä½†æ˜¯é‚£ç®€ç›´ç©å…·éƒ½ä¸å¦‚ï¼Œæˆ‘ä¼°è®¡å›½å†…çš„å…¶ä»–ç±»ä¼¼çš„VRçœ¼é•œä¾‹å¦‚æš´é£çœ¼é•œéƒ½å·®ä¸å¤šæƒ…å†µã€‚æš‚æ—¶æ¥è¯´ä¹Ÿåªèƒ½èµ°ä¸€æ­¥ç®—ä¸€æ­¥äº†ã€‚&lt;/p&gt;</summary><category term="VR AR"></category></entry><entry><title>å…³äºH5å’Œç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘çš„æœªæ¥</title><link href="http://szuwest.github.io/guan-yu-h5he-yi-dong-ke-hu-duan-kai-fa-de-wei-lai.html" rel="alternate"></link><updated>2016-06-02T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-06-02:guan-yu-h5he-yi-dong-ke-hu-duan-kai-fa-de-wei-lai.html</id><summary type="html">&lt;h2&gt;å…³äºH5å’Œç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘çš„æœªæ¥&lt;/h2&gt;
&lt;p&gt;&lt;br/&gt;ä»å»å¹´å¼€å§‹ï¼Œæˆ‘å·²ç»å¼ºçƒˆæ„Ÿè§‰åˆ°ç§»åŠ¨ç«¯webå¼€å‘çš„æ—¶å€™å¯èƒ½å³å°†å¸¦æ¥ã€‚æˆ‘æƒ³ä¸ºäº†é¿å…ä»¥åæ‰¾ä¸åˆ°å·¥ä½œï¼Œæˆ‘ä»¬å®¢æˆ·ç«¯å¼€å‘äººå‘˜ä¸å¾—ä¸å¼€å§‹å­¦ä¹ ç§»åŠ¨ç«¯webå¼€å‘æˆ–è€…æ··åˆå¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;è¿‘ä¸€ä¸¤å¹´æ¥ï¼Œå‰ç«¯å¼€å‘çœŸçš„éå¸¸ç«ï¼Œæ‹›ä¸åˆ°äººã€‚å°±åƒå‰å‡ å¹´çš„ç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘äººæ‰å¾ˆçƒ­é—¨ä¸€æ ·ã€‚è¿™ä¸å¾—ä¸è¯´å¾—ç›Šäºç§»åŠ¨äº’è”ç½‘å¿«é€Ÿçš„å‘å±•ã€‚webç¡®å®æœ‰å®ƒä¸å¯æ›¿ä»£çš„å¥½å¤„ï¼Œå¿«é€Ÿè¿­ä»£å’Œå¼€å‘ï¼Œä¸å±€é™ä¸ç‰¹å®šå¹³å°ï¼Œè¿™æ˜¯APPæ— æ³•åšåˆ°çš„ã€‚è¿‘æ¥APPçš„å¼€å‘è¶‹è¿‘ç¨³å®šé¥±å’Œï¼Œè€Œæ‰‹æœºçš„å¤„ç†èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼Œæµè§ˆå™¨å‚å•†ä¹Ÿæ”¯æŒHTML5è¶Šæ¥è¶Šå®Œå–„ï¼Œç§»åŠ¨webå¼€å‘å¿…ç„¶å´›èµ·ã€‚ç°åœ¨H5å·²ç»æˆäº†æ‰€æœ‰æŠ€æœ¯å°ç™½äººå£«éƒ½æ‡‚çš„ä¸€ä¸ªè¯ï¼Œè¿™è¶³ä»¥è¯´æ˜ç§»åŠ¨webå¼€å‘å·²ç»åˆ°æ¥ã€‚&lt;/p&gt;
&lt;h2&gt;æˆ‘ä¸H5çš„æ•…äº‹&lt;/h2&gt;
&lt;p&gt;HTML5æŠ€æœ¯æ—©å°±å¼€å§‹äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰å®Œå…¨æ™®åŠï¼Œæœ€è¿‘ä¸¤å¹´æ‰çœŸæ­£çš„æ™®åŠèµ·æ¥ï¼ŒH5ä¹Ÿæˆäº†å®ƒçš„ç¼©å†™ä»£åè¯ã€‚æ—©åœ¨2010æˆ‘åšæ¯•ä¸šè®¾è®¡çš„æ—¶å€™ï¼Œæˆ‘å°±æœ‰ç ”ç©¶è¿‡å®ƒã€‚é‚£æ˜¯HTML5æ ‡å‡†å·²ç»åˆ¶å®šå®Œæ¯•ï¼Œæµè§ˆå™¨å‚å•†å·²ç»å¼€å§‹æ…¢æ…¢çš„æ”¯æŒã€‚æˆ‘å½“æ—¶å¼€å§‹å­¦ä¹ webå¼€å‘ï¼Œå­¦ä¹ äº†JavaScriptï¼Œå­¦ä¹ äº†HTMLï¼Œå­¦ä¹ äº†CSSã€‚æˆ‘çš„æ¯•ä¸šè®¾è®¡é¢˜ç›®æ˜¯ã€ŠåŸºäºGoogle APP Engine ç³»ç»Ÿçš„webå¼€å‘ã€‹å½“æ—¶GAEåˆšå‘å¸ƒä¸ä¹…ï¼Œç„¶åæˆ‘è¿˜é‡‡ç”¨äº†å½“æ—¶Google Web Tookitæ¡†æ¶æ¥å¼€å‘æˆ‘å°†è¦åšçš„webå³æ—¶é€šè®¯ç³»ç»Ÿã€‚å½“æ—¶Googleè¿˜æ²¡æ¨å‡ºä¸­å›½ï¼Œè°·æ­Œçš„å„ç§æœåŠ¡éƒ½è¿˜åœ¨ï¼ˆåªæœ‰ä¸€äº›äº›ä¸œè¥¿éœ€è¦ç¿»å¢™ï¼‰ã€‚æˆ‘ç”¨GWTå¼€å‘æˆ‘çš„å³æ—¶é€šè®¯ç³»ç»Ÿï¼Œç”¨Googleæœç´¢èµ„æ–™å’Œå‚ä¸Google groupè®¨è®ºå’Œå­¦ä¹ ï¼Œé‚£çœŸæ˜¯ä¸€æ®µå……å®çš„æ—¶å…‰ã€‚é‚£æ˜¯æˆ‘äº†è§£åˆ°ajaxæŠ€æœ¯ï¼Œé‡‡ç”¨ajaxè½®è¯¢åšäº†ä¸€ä¸ªç®€å•çš„å³æ—¶é€šè®¯ç½‘é¡µã€‚ç„¶åæœ‰å­¦ä¹ åˆ°cometæŠ€æœ¯ï¼Œé‡‡ç”¨cometæŠ€æœ¯å¼€å‘äº†ä¸€ä¸ªæ›´å¥½çš„å³æ—¶é€šè®¯ç³»ç»Ÿï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘çš„æ¯•ä¸šè®¾è®¡ä¸»è¦å†…å®¹ã€‚å½“æ—¶æˆ‘ä¹Ÿç ”ç©¶åˆ°äº†HTML5çš„websocketæŠ€æœ¯ï¼Œæ‰€ä»¥é¡ºå¸¦æŠŠHTML5ç ”ç©¶äº†ä¸€ä¸‹ï¼Œæ„Ÿè§‰åˆ°è¿™ä¸ªä¸œè¥¿å°±æ˜¯æœªæ¥ã€‚å½“æ—¶å¾ˆæƒ³é‡‡ç”¨websocketä¹Ÿåšä¸€ä¸ªå³æ—¶é€šä¿¡ç³»ç»Ÿï¼Œä½†æ˜¯æ—¶é—´ä¸å¤ªå¤Ÿï¼Œè€Œä¸”å½“æ—¶æµè§ˆå™¨ä¹Ÿä¸æ”¯æŒä¸å¥½ï¼Œå¾ˆä¸å¥½åšï¼Œå°±æ”¾å¼ƒäº†ã€‚å› ä¸ºè¿™æ®µç»å†ï¼Œæˆ‘äº†è§£åˆ°äº†HTML5, ä¹Ÿè‡ªå­¦äº†ä¸€ä¸‹JavaScriptè¯­è¨€ï¼Œæ¥è§¦äº†ä¸€ä¸‹å½“æ—¶åˆšåˆšå‡ºæ¥çš„jQueryåº“ã€‚ç°åœ¨è¿™äº›å¹´H5æ™®åŠèµ·æ¥äº†ï¼ŒJavaScriptåº“ä¹Ÿå‘å±•å¾ˆå¿«ï¼Œè€Œä¸”å‘å±•åˆ°äº†åç«¯å¼€å‘ï¼ŒçœŸæ˜¯æ²¡æœ‰æƒ³åˆ°ã€‚&lt;/p&gt;
&lt;h2&gt;ç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘çš„æœªæ¥&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ç§»åŠ¨å®¢æˆ·ç«¯çš„å¼€å‘å·²ç»å—åˆ°äº†webå¼€å‘çš„å½±å“ã€‚éšç€å¾®ä¿¡ï¼Œæ·˜å®è¿™ç§è¶…çº§APPçš„å‘å±•ï¼Œæˆ‘è§‰å¾—ç§»åŠ¨ç«¯çš„webå¼€å‘ä¼šè¶Šæ¥è¶Šé‡è¦ã€‚ä»¥å‰ç§»åŠ¨ç«¯nativeå¼€å‘æ˜¯ç»å¯¹ä¸»æµï¼Œå½“å¹´FacebookæŠŠå®ƒçš„åº”ç”¨å®Œå…¨é‡‡ç”¨nativeå¼€å‘å°±æ˜¯æ˜è¯ã€‚ä½†æ˜¯ç°åœ¨è¶Šæ¥è¶Šå¤šæ··åˆå¼€å‘çš„éœ€æ±‚ï¼Œå¾®ä¿¡çš„å…¬ä¼—å·å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæœªæ¥ä¼šæ›´å¤šè¿™ç§ä¾‹å­ã€‚ç°åœ¨ä¹Ÿè¶Šæ¥è¶Šå¤šæ··åˆå¼€å‘æŠ€æœ¯æˆ–è€…ç›´æ¥é‡‡ç”¨webæŠ€æœ¯æ¥å¼€å‘APPã€‚åƒæˆ‘å¬è¯´è¿‡äº†JSPatch, hybrid, é˜¿é‡Œæœ€è¿‘ä¸»æ¨çš„weex(ä½†æ„¿æ²¡å†™é”™)å’ŒFacebookä¸»å¯¼çš„react-nativeã€‚è¿™äº›æŠ€æœ¯æˆ‘çœŸæ­£æœ‰å»æ¥è§¦å’Œå­¦ä¹ çš„å°±åªæœ‰react-nativeï¼ŒåŸå› å½“ç„¶æ˜¯è¿™æ˜¯Facebookåœ¨ä¸»å¯¼çš„ï¼Œæœ‰ä¿éšœã€‚ç°åœ¨å›½å†…ç§»åŠ¨å®¢æˆ·ç«¯çš„å¼€å‘å®é™…ä¸Šè¿˜æ²¡æœ‰å—è¿™äº›æŠ€æœ¯å½±å“å¾ˆå¤§ï¼Œå¤§å®¶éƒ½è¿˜æ˜¯ä»¥nativeä¸ºä¸»ã€‚ä½†æ˜¯ç°åœ¨æŠ€æœ¯å‘å±•è¿™ä¹ˆå¿«ï¼Œæ‰€ä¸å®šåŠå¹´æˆ–è€…ä¸€å¹´åæƒ…å†µå°±å˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆç§»åŠ¨å¼€å‘çš„æœªæ¥æ˜¯æ€æ ·çš„å‘¢ï¼Œä¼šä¸ä¼šè¢«webå¼€å‘å®Œå…¨æ›¿ä»£ã€‚æˆ‘æƒ³è¿™ä¸å¤ªå¯èƒ½ã€‚æˆ‘ä»¬å¯ä»¥ç±»æ¯”PCç³»ç»Ÿï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯ä»¥æµè§ˆå™¨ä¸ºä¸»ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶ä¼šå®‰è£…ä¸€äº›å…¶ä»–å®¢æˆ·ç«¯è½¯ä»¶ï¼Œä½¿ç”¨ä¸€äº›å®¢æˆ·ç«¯è½¯ä»¶ã€‚æœªæ¥çš„ç§»åŠ¨å¼€å‘ï¼ŒAPPå¼€å‘ä¼šè¶Šæ¥è¶Šè‰°éš¾ï¼Œå…¥å£åŸºæœ¬éƒ½æ˜¯è¢«è¶…çº§APPå’Œæµè§ˆå™¨å æ®ç€ï¼Œå¹¶ä¸”è¶…çº§APPå¯èƒ½åˆ†æµäº†ä¸€éƒ¨åˆ†æµè§ˆå™¨çš„å…¥å£ã€‚æœªæ¥çš„ç§»åŠ¨å¼€å‘ä»¥è·¨å“å°çš„webå¼€å‘ä¸ºä¸»ï¼ŒæŠ€æœ¯APPå¼€å‘é‡Œé¢ï¼Œwebå¼€å‘å æ®å¾ˆå¤§æ¯”ä¾‹ã€‚APPå¼€å‘æŠ€æœ¯å¯èƒ½ä¸»è¦æ˜¯æ··åˆå¼€å‘ï¼Œæˆ–è€…çº¯é‡‡ç”¨ç±»ä¼¼react-nativeæŠ€æœ¯çš„è·¨å¹³å°å¼€å‘ã€‚çœŸæ­£æ˜¯çº¯nativeæŠ€æœ¯å¼€å‘çš„åº”ç”¨åº”è¯¥éå¸¸å°‘ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œå­¦ä¹ å‰ç«¯çŸ¥è¯†å°±æœ‰ä¸€äº›è¿«åˆ‡å’Œå¿…è¦äº†ã€‚&lt;/p&gt;</summary><category term="å‰ç«¯å¼€å‘ H5 ReactNative"></category></entry><entry><title>ç”Ÿæ´»çäº‹</title><link href="http://szuwest.github.io/sheng-huo-suo-shi.html" rel="alternate"></link><updated>2016-05-13T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-05-13:sheng-huo-suo-shi.html</id><summary type="html">&lt;h2&gt;ç”Ÿæ´»æ‚è°ˆ&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘å¥½é•¿æ—¶é—´æ²¡æœ‰å†™åšå®¢äº†ï¼Œè²Œä¼¼å·®ä¸å¤šä¸€å¹´äº†ã€‚ç«Ÿç„¶æƒ³ä¸åˆ°æ˜¯é‚£ä¹ˆä¹…æ²¡æœ‰å†™è¿‡ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;å»å¹´å¹´åº•ä¹°äº†è½¦ï¼Œç°åœ¨ä¹Ÿå·®ä¸å¤šè¦é¢†ç»“å©šè¯äº†ï¼Œæ—¶é—´çš„è„šæ­¥æ ¹æœ¬åœä¸ä¸‹æ¥ï¼Œä¸€çœ¨çœ¼è¯¥æ¥çš„åŸºæœ¬ä¸Šéƒ½è¦æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;æŠ€æœ¯ä¸Šæ²¡æœ‰å¤ªå¤§çš„é•¿è¿›ï¼Œä¹Ÿè¿˜æœ‰æ²¡å¾—åˆ°æœ‰æ•ˆçš„æ™‹å‡ï¼Œä¸è¿‡å¿ƒæ²¡æœ‰å¤ªå¤§çš„å½·å¾¨ï¼Œå› ä¸ºå·²ç»éº»æœ¨äº†å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸è¿‡æˆ‘è¿˜æ˜¯ä¸€ç›´æƒ³æå‡èƒ½åŠ›çš„ï¼Œä¸ç®¡æ˜¯æŠ€æœ¯ä¸Šçš„ï¼Œè¿˜æ˜¯å·¥ä½œä¸Šçš„ï¼Œç”Ÿæ´»ä¸Šçš„ã€‚äººçš„ç”Ÿæ´»ä¸å•å•æ˜¯å·¥ä½œå’ŒæŠ€æœ¯ï¼Œè¿˜æœ‰å¾ˆå¤šä»¥å¤–çš„ä¸œè¥¿ã€‚è¦åœ¨è¿™ä¸ªä¸–ç•Œä¸Šå¥½å¥½çš„ç”Ÿæ´»ï¼Œéœ€è¦æŒæ¡å¾ˆå¤šæ–¹é¢çš„èƒ½åŠ›ï¼Œè¦æ¥è§¦å¾ˆå¤šçš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¦æŠ±ä»¥å¼€æ”¾çš„å¿ƒæ€ æ¥å—å’Œå­¦ä¹  ç”Ÿæ´»ä¸­çš„æ–¹æ–¹é¢é¢ï¼Œå»æ‰æµ®èºï¼Œæœ€ç»ˆæ‰èƒ½æˆåŠŸã€‚
æŠ€æœ¯ä¹Ÿä¸€æ ·ã€‚&lt;/p&gt;</summary><category term="æ‚è°ˆ"></category></entry><entry><title>åŒä¸€ä¸ªåº”ç”¨çš„å®‰å“ç‰ˆæœ¬å’ŒiOSç‰ˆæœ¬å¼€å‘æ‚è°ˆ</title><link href="http://szuwest.github.io/tong-yi-ge-ying-yong-de-an-zhuo-ban-ben-he-iosban-ben-kai-fa-za-tan.html" rel="alternate"></link><updated>2016-05-13T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-05-13:tong-yi-ge-ying-yong-de-an-zhuo-ban-ben-he-iosban-ben-kai-fa-za-tan.html</id><summary type="html">&lt;h2&gt;åŒä¸€ä¸ªåº”ç”¨çš„å®‰å“ç‰ˆæœ¬å’ŒiOSç‰ˆæœ¬å¼€å‘æ‚è°ˆ&lt;/h2&gt;
&lt;p&gt;æˆ‘å‰æ®µæ—¶é—´å¸®æœ‹å‹åšäº†ä¸€ä¸ªåº”ç”¨ï¼Œå½“ç„¶è¯´çš„æ›´å®åœ¨ä¸€ç‚¹å¯ä»¥æ—¶å€™å°±æ˜¯åšå¤–åŒ…åº”ç”¨ï¼ŒåŒ…æ‹¬å®‰å“ç‰ˆæœ¬å’ŒiOSç‰ˆæœ¬ã€‚ç°åœ¨æƒ³è°ˆä¸€è°ˆæ„Ÿæƒ³å’Œæ€»ç»“ã€‚
&lt;br/&gt;&lt;br/&gt;
ä»1æœˆä»½å¼€å§‹æ­£å¼å¼€å‘ï¼Œæœ€ç»ˆåœ¨5æœˆåº•å®Œæˆæ‰€æœ‰äº¤äº’ï¼Œå‰åç®—èµ·æ¥å°±5ä¸ªæœˆçš„æ—¶é—´ï¼Œå½“ç„¶ä¸­é—´æœ‰æ–­æ–­ç»­ç»­çš„å¼€å‘å’Œæ²Ÿé€šã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ—¶é—´è¶…å‡ºäº†æˆ‘çš„é¢„æœŸï¼Œæ‰€ä»¥æ€»å¾—æ¥è¯´æˆ‘è§‰å¾—ä»·æ ¼æœ‰ç‚¹ä¸åˆé€‚ï¼Œç¨å¾®ä¾¿å®œäº†ä¸€äº›ã€‚ä½†æ˜¯å› ä¸ºè¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åšè¿™ç§äº‹æƒ…ï¼Œè€Œä¸”ä¹Ÿæ€»ä½“ä¹Ÿè¿˜åœ¨æˆ‘å¯æ¥å—çš„èŒƒå›´å†…ï¼Œæ‰€ä»¥å°±å½“åšä¸€ä¸ªç»éªŒäº†ã€‚ä¸ªäººåšå¤–åŒ…å¼€å‘ ä¸èƒ½ä½ä¼°å·¥ä½œé‡å’Œæ²Ÿé€šæ—¶é—´ã€‚è¶Šä¸æ­£å¼çš„å¤–åŒ…ï¼ˆæœ‹å‹é—´çš„ï¼‰éœ€è¦çš„æ²Ÿé€šå’Œåå¤ä¿®æ”¹çš„æƒ…å†µä¼šè¶Šå¤šã€‚åƒä¸‡ä¸è¦ä½ä¼°è¿™äº›æƒ…å†µã€‚
&lt;br/&gt;&lt;/p&gt;
&lt;h2&gt;Androidç‰ˆæœ¬å¼€å‘&lt;/h2&gt;
&lt;p&gt;æˆ‘æ˜¯å…ˆå¼€å‘å®‰å“ç‰ˆæœ¬çš„ï¼ŒåŸå› å½“ç„¶æ˜¯å®‰å“å¼€å‘è°ƒè¯•æ–¹ä¾¿ï¼Œä¿®æ”¹æ–¹ä¾¿ï¼Œè¿˜æœ‰å°±æ˜¯æˆ‘æ¯”è¾ƒç†Ÿæ‚‰Androidå¼€å‘ã€‚ä¸€å¼€å§‹æœ‹å‹æƒ³å…ˆå¼€å‘iPhoneç‰ˆæœ¬ï¼Œæˆ‘è¯´è¿™ä¸ªè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œè¯´æœä»–å…ˆå¼€å‘å®‰å“ç‰ˆæœ¬ï¼Œæˆ‘è§‰å¾—æˆ‘è¿™ä¸ªå†³ç­–æ˜¯å¯¹çš„ã€‚æˆ‘çš„å¼€å‘ä¸»è¦æ—¶é—´éƒ½æ˜¯å‘¨æœ«æˆ–è€…å¹³æ—¶çš„ç©ºé—²æ—¶é—´ã€‚äº†è§£äº†éœ€æ±‚ä¹‹åï¼Œå®‰å“çš„ç¬¬ä¸€ä¸ªåŒ…å«ä¸»è¦åŠŸèƒ½çš„åˆçº§ç‰ˆæœ¬ä¸€ä¸ªæœˆä¹‹åå°±å‡ºæ¥äº†ã€‚ç„¶åæˆ‘å°±æ‰“äº†ä¸ªåŒ…ç»™æœ‹å‹ç”¨ã€‚å½“ç„¶ä¼šæœ‰å¾ˆå¤šé—®é¢˜ï¼Œç„¶ååå¤æ²Ÿé€šå’Œä¿®æ”¹ï¼Œå‡ ä¸ªæ˜ŸæœŸä¹‹åï¼Œä¸»è¦ç‰ˆæœ¬å‡ºæ¥äº†ã€‚è¿™æ—¶å€™å·²ç»æ˜¯2æœˆå¤šäº†ï¼Œæˆ‘è®°å¾—æ˜¯åœ¨æˆ‘æ”¾æ˜¥èŠ‚å‡ä¹‹å‰æ”¹äº†æ”¹äº†ä¸€ä¸ªç‰ˆæœ¬ç»™ä»–ï¼Œè¿™ä¸ªç‰ˆæœ¬åšäº†ä¸€äº›å°ç»†èŠ‚ä¿®æ”¹å’Œbugä¿®å¤ã€‚ç”±äºæœ‹å‹ä»–æ²¡æœ‰æµ‹è¯•äººå‘˜ï¼Œåªèƒ½é ä»–è‡ªå·±æµ‹è¯•ï¼Œæˆ‘è‡ªå·±æµ‹è¯•å¾—ä¹Ÿä¸å¤šï¼Œå¼€å§‹éš¾å…ä¼šæœ‰äº›bugï¼Œä¸è¿‡ä»–ä¼šé›†ä¸­åé¦ˆï¼Œç„¶åæˆ‘é›†ä¸­ä¿®æ”¹ï¼Œå¹´åå›æ¥åˆæ”¹äº†ä¸€ä¸¤ä¸ªç‰ˆæœ¬ï¼Œ3æœˆå¤šç»ˆäºåŸºæœ¬å®Œæˆå®‰å“ç‰ˆæœ¬çš„å¼€å‘ã€‚æ€»çš„æ¥è¯´ï¼Œå®‰å“ç‰ˆæœ¬å¼€å‘æ˜¯æ–¹ä¾¿ç‰ˆæœ¬å‘å¸ƒå’Œè°ƒè¯•ã€‚ä»£ç çš„è¯ï¼Œç¨‹åºæ¶æ„æˆ‘ä¸€å¼€å§‹å°±åŸºæœ¬æƒ³å¥½ï¼Œç¨‹åºä¸å¤æ‚ï¼Œç•Œé¢å±‚å’Œmodelå±‚æˆ‘éƒ½æœ‰æ¯”è¾ƒå¥½çš„é‡ç”¨ï¼Œå¼€æºåº“ä¹Ÿä¸å°‘ï¼Œæˆ‘è‡ªå·±åˆå¯¹å®‰å“å¾ˆç†Ÿæ‚‰ï¼Œæ²¡æœ‰é‡åˆ°ç‰¹åˆ«çš„éš¾ç‚¹ï¼Œæ€»ä½“å¼€å‘æ¯”è¾ƒé¡ºåˆ©ã€‚&lt;/p&gt;
&lt;h2&gt;iPhoneç‰ˆæœ¬çš„å¼€å‘&lt;/h2&gt;
&lt;p&gt;æ˜¥èŠ‚çš„æ—¶å€™ï¼Œç”±äºæ²¡ä»€ä¹ˆç‰¹åˆ«çš„äº‹å¯åšï¼Œæˆ‘å°±åšäº†ä¸€äº›iOSç‰ˆæœ¬å‡†å¤‡å¼€å‘å¼€å‘å·¥ä½œå’ŒåŸºæœ¬æ¶æ„æ­å»ºã€‚ç”±äºæœ‰äº†Androidç‰ˆæœ¬çš„ç»éªŒï¼ŒiOSçš„åŸºæœ¬æ¶æ„å°±æ˜¯å¯¹Androidç‰ˆæœ¬çš„åŸºæœ¬æ¶æ„çš„è¿ç§»ã€‚ç‰¹åˆ«æ˜¯modelå±‚ï¼Œå‡ ä¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ä½†æ˜¯iOSç‰ˆæœ¬çš„ç•Œé¢ç¼ºä¸æ˜¯é‚£ä¹ˆå¥½åšã€‚å› ä¸ºè¿™ä¸ªåº”ç”¨çš„éœ€æ±‚æœ‰äº›éƒ¨åˆ†æ¯”è¾ƒå¤æ€ªï¼Œæˆ‘è§‰å¾—åœ¨iOSç•Œé¢ä¸Šä¸å¤ªå¥½åšã€‚å½“ç„¶ï¼Œä¸»è¦åŸå› è¿˜æ˜¯æˆ‘å¯¹iOSå¼€å‘ä¸ç®—æ˜¯ç‰¹åˆ«ç²¾é€šï¼Œç‰¹åˆ«æ˜¯UIå±‚ï¼Œç»éªŒä¸ç®—å¾ˆä¸°å¯Œã€‚ä¾‹å¦‚è¯´æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯è¿™æ ·çš„ï¼šä¸»é¡µé¢è¦æ ¹æ®ä¸Šä¸‹æ»‘åŠ¨åˆ—è¡¨æœ‰å°†å¯¼èˆªæ¡æ”¶èµ·å’Œå±•å¼€ï¼Œè¿˜æœ‰å‡ ä¸ªtabé¡µé¢è¿˜å¯ä»¥æ»‘åŠ¨åˆ‡æ¢ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½åˆ†å¼€åšéƒ½ä¸éš¾ï¼Œä½†æ˜¯é›†ä¸­åœ¨ä¸€ä¸ªé¡µé¢éƒ½è¦æ”¯æŒè¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œå°±ä¸å¥½åšäº†ã€‚æœ€ç»ˆæˆ‘æš‚æ—¶åªåšäº†æ»‘åŠ¨åˆ‡æ¢tabã€‚æœ‰äº†Androidå¼€å‘çš„ç»éªŒï¼ŒiOSå¼€å‘åšèµ·æ¥æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯iOSå’ŒAndroidç•Œé¢å¼€å‘å·®å¼‚è¿˜æ˜¯æ¯”è¾ƒå¤§ï¼Œç„¶åiOSç•Œé¢å¼€å‘ä»£ç é‡è¦æ¯”Androidçš„è¦å°‘ï¼Œå¹¶ä¸”æ›´å®¹æ˜“é‡ç”¨ã€‚ä¾‹å¦‚iOSçš„ViewControllerå¾ˆå®¹æ˜“é‡ç”¨ï¼Œä½†æ˜¯Androidçš„Activityå°±æ¯”è¾ƒéš¾é‡ç”¨ï¼Œæ‰€ä»¥Androidå¼€å‘çš„é‡å¤ä»£ç è¦å¤šä¸€äº›ï¼Œæˆ‘è§‰å¾—è¿™åªè¦æ˜¯ç”±äºActivityçš„æœºåˆ¶é€ æˆçš„ã€‚
&lt;br/&gt;&lt;br/&gt;
iOSçš„å¼€å‘æ˜¯æ¯”è¾ƒé¡ºç•…ï¼Œä½†æ˜¯è°ƒè¯•å°±éº»çƒ¦å¤šäº†ã€‚ç”±äºæœ‹å‹æ²¡æœ‰å¼€å‘è´¦å·ï¼Œæˆ‘å¸®ä»–ç”³è¯·äº†ä¸€ä¸ªï¼Œç„¶åæˆ‘åšäº†å¼€å‘ï¼Œæ€ä¹ˆç»™ä»–å®‰è£…ä½¿ç”¨æ˜¯ä¸ªå¤§é—®é¢˜ã€‚æˆ‘åœ¨æˆ‘ä»¬å…¬å¸æœ‰ä¼ä¸šç‰ˆè¯ä¹¦ï¼Œå®‰è£…è°ƒè¯•å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯æ²¡æœ‰ä¼ä¸šç‰ˆå¼€å‘è¯ä¹¦å°±ç›¸å½“éº»çƒ¦äº†ã€‚ä½ è¯´æŠŠä»–çš„æ‰‹æœºåºåˆ—å·åŠ å…¥å¼€å‘è¯ä¹¦ï¼Œç„¶åç»™ä»–å®‰è£…ï¼Œæˆ‘è§‰å¾—è¿™ä¹Ÿå¾ˆéº»çƒ¦ã€‚æ‰€ä»¥æˆ‘æœ€ç»ˆé‡‡ç”¨çš„æ˜¯ï¼šæ‰“åŒ…åº”ç”¨ä¸Šä¼ åˆ°iTunesconnectï¼Œç„¶åé€šè¿‡å†…éƒ¨æµ‹è¯•ï¼ˆTestflightï¼‰å‘ç»™ä»–å®‰è£…ã€‚ä¹‹å‰æ²¡æ€ä¹ˆåšè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘èŠ±äº†å¾ˆå¤šæ—¶é—´æ‰æœ€ç»ˆèµ°é€šæ•´ä¸ªæµç¨‹ã€‚æœ€å¤§çš„ä¸€ä¸ªå‘æ˜¯ï¼Œæˆ‘ä¸Šä¼ äº†ipaåŒ…åˆ°iTunesconnectï¼Œä½†æ˜¯å®ƒæ­»æ´»ä¸å†å†…éƒ¨æµ‹è¯•å“ªé‡Œæ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘å¼€å§‹ä»¥ä¸ºåŒ…è¿˜åœ¨å¤„ç†ä¸­ï¼Œç­‰äº†ä¸¤å¤©è¿˜ä¸è¡Œï¼Œæˆ‘åˆä¸Šä¼ äº†ä¸€ä¸ªï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œä½†æ˜¯è¿™æ¬¡æœ‰æç¤ºç¼ºå°‘å‡ºå£è§„æ ¼è¯æ˜ï¼Œç„¶åæ™šä¸Šæ‰¾äº†ä¸å°‘èµ„æ–™ï¼Œæ‰çŸ¥é“è¦åœ¨info.plistæ–‡ä»¶é‡ŒåŠ ä¸€ä¸ªå­—æ®µï¼Œè¯´æ˜æ²¡æœ‰ä½¿ç”¨åŠ å¯†åŠŸèƒ½ã€‚æœ€ç»ˆæ‰èµ°é€šæ•´ä¸ªæµç¨‹ï¼Œè¿™é‡Œè€—è´¹æˆ‘å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›ï¼Œå°±ç®—æ˜¯ä¸€ä¸ªç»éªŒå§ã€‚&lt;/p&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å°†ä¸€ä¸ªåº”ç”¨çš„å®‰å“ç‰ˆæœ¬å’ŒiOSç‰ˆæœ¬å®Œæ•´çš„åšäº†ä¸€éï¼Œè™½ç„¶æˆ‘ä»¥å‰ä¹Ÿåšè¿‡åŒä¸€ä¸ªåº”ç”¨çš„å®‰å“ç‰ˆå’ŒiOSç‰ˆï¼Œä½†æ˜¯ä¸æ˜¯å®Œæˆä»å¤´åˆ°å°¾å‚ä¸ã€‚è¿˜æœ‰æ—©åœ¨2011å¹´æˆ‘å°±ä»ä¸€ä¸ªå®‰å“åº”ç”¨çš„ä»£ç å¼€å‘ï¼Œåˆ°åº”ç”¨ä¸Šæ¶å•†åº—ï¼Œä¸€æ¡é¾™ä¸‹æ¥æˆ‘éƒ½å®Œæ•´ç»å†è¿‡ï¼Œä½†æ˜¯iOSåº”ç”¨çš„å®Œæ•´ä¸€æ¡é¾™è¿™æ˜¯ç¬¬ä¸€æ¬¡ã€‚ä»ä»£ç å¼€å‘ï¼Œæ³¨å†Œå¼€å‘è€…è´¦å·ï¼Œä¸‹è½½è¯ä¹¦ï¼Œæ‰“åŒ…ä¸Šä¼ ï¼Œåº”ç”¨æµ‹è¯•ï¼Œä¸Šæ¶åº”ç”¨ï¼ŒçœŸçš„æ˜¯æ¯ä¸€ä¸ªç¯èŠ‚éƒ½æ˜¯è‡ªå·±äº²èº«ç»å†çš„ï¼Œæ‰€ä»¥æ”¶è·ä¸å°‘ã€‚æ€»ç»“å¦‚ä¸‹ï¼š
&lt;br/&gt;&lt;br/&gt;
&lt;strong&gt;å¼€å‘æµç¨‹ä¸Š&lt;/strong&gt;ï¼ŒAndroidå¼€å‘è¦å®ŒèƒœiOSå¼€å‘ã€‚Androidå¼€å‘æ˜¯ç”¨Javaè¯­è¨€å¼€å‘ï¼Œç„¶åAndroidæ˜¯å¼€æºçš„ï¼ŒJavaä¹Ÿæ˜¯è·¨å¹³å°çš„ï¼Œéƒ½æœ‰å¾ˆå¤šå¼€æºåº“æ”¯æŒï¼Œå¾ˆå¤šåŠŸèƒ½å¯èƒ½Androidæœ¬èº«ä¸æ”¯æŒï¼Œä½†æ˜¯hackèµ·æ¥æ¯”è¾ƒå®¹æ˜“ã€‚Javaåšæ¶æ„ä¹Ÿæ¯”è¾ƒå®¹æ˜“ï¼Œæœ‰å¾ˆå¤šå¼€æºåº“æ”¯æŒï¼Œç°åœ¨Androidæ–¹é¢çš„å¼€æºåº“ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œè´¨é‡ä¹Ÿè¶Šæ¥è¶Šå¥½ã€‚å¯¹äºåˆä½œå¼€å‘æˆ–è€…å¤–åŒ…ï¼ŒAndroidå¼€å‘æœ‰å¾ˆå¤§ä¼˜åŠ¿ï¼Œå› ä¸ºå› ä¸ºåˆ†å‘å¾ˆå®¹æ˜“ï¼Œéšæ„å°±å¯ä»¥æ‰“åŒ…ï¼Œå®‰è£…ï¼Œæ—¥å¿—è·Ÿè¸ªä¸æ”¶é›†éå¸¸æ–¹ä¾¿ã€‚è¿™ç‚¹çœŸçš„å¾ˆèµã€‚åè§‚iOSï¼ŒObjective-CåŸºæœ¬ä¸Šæ˜¯åªèƒ½é™åˆ¶äºMac OSçš„å¹³å°ï¼ŒiOSä¹Ÿæ˜¯é—­æºçš„ã€‚è¦ç»™åˆ«äººå®‰è£…è°ƒè¯•é‚£çœŸæ˜¯æ¯”è¾ƒéš¾ï¼šè¦å…ˆæœ‰å¼€å‘è€…è¯ä¹¦ï¼Œè¦å…ˆæŠŠå¯¹æ–¹çš„è®¾å¤‡çš„åºåˆ—å·ç™»è®°å…¥è¯ä¹¦ä¸­ã€‚æ€»ä¹‹å„ç§éº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»£ç é‡ç”¨ä¸Š&lt;/strong&gt;ï¼ŒiOSæ›´èƒœä¸€ç­¹ã€‚iOSçš„ç•Œé¢å¼€å‘æŒºä¸é”™çš„ï¼Œè€Œä¸”iOSåº”ç”¨æ•´ä½“æ€§èƒ½è¦æ¯”Androidè¦å¥½ï¼Œæ•´ä½“æµç•…æ€§æ¯”è¾ƒå¥½ï¼ˆè¿™æ˜¯æˆ‘æœ‹å‹çš„ç›´è§‚æ„Ÿå—ï¼‰ã€‚æˆ‘çœ‹æ•´ä½“ä»£ç ï¼ŒiOSç«¯ç¡®å®æ¯”Androidç«¯ä»£ç é‡ç”¨æ¯”è¾ƒå®¹æ˜“ï¼Œç‰¹åˆ«æ˜¯ç•Œé¢æ¨¡å—çš„ä»£ç ï¼ŒiOSçš„ç•Œé¢ä»£ç å…·æœ‰å¾ˆå¤šçš„å¯é‡ç”¨æ€§ï¼ŒAndroidåˆ™ä¸å¤ªè¡Œã€‚ä¸è¿‡é‰´äºAndroidç«¯ç•Œé¢å¼€å‘æ”¯æŒé€‚é…æ›´å¤šçš„è®¾å¤‡ï¼ŒæŸäº›æ—¶å€™Androidçš„ç•Œé¢å¼€å‘è¦æ¯”iOSçš„ç•Œé¢å¼€å‘ä¾¿æ·å¾ˆå¤šã€‚å¦å¤–Androidç«¯çš„åŠ¨ç”»å¼€å‘ç°åœ¨ä¹Ÿè¶Šæ¥è¶Šæ–¹ä¾¿ï¼Œè¶Šæ¥è¶Šæ¥è¿‘iOSçš„åŠ¨ç”»å¼€å‘äº†ã€‚&lt;/p&gt;</summary><category term="Androidå¼€å‘ iOSå¼€å‘ å¤–åŒ…"></category></entry><entry><title>iOSç³»ç»Ÿç›¸å†Œä¸Šä¼ ä¸å¾—ä¸è¯´çš„é‚£äº›äº‹å„¿</title><link href="http://szuwest.github.io/iosxi-tong-xiang-ce-shang-chuan-bu-de-bu-shuo-de-na-xie-shi-er.html" rel="alternate"></link><updated>2016-05-02T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2016-05-02:iosxi-tong-xiang-ce-shang-chuan-bu-de-bu-shuo-de-na-xie-shi-er.html</id><summary type="html">&lt;p&gt;æœ€è¿‘åœ¨å¼€å‘æ‰‹æœºç›¸å†Œè‡ªåŠ¨å¤‡ä»½çš„åŠŸèƒ½ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°ä¸Šä¼ æ–‡ä»¶çš„åŠŸèƒ½ã€‚
å…¶å®æˆ‘ä¸€å¹´å‰ä¹Ÿåšè¿‡åŒæ ·çš„åŠŸèƒ½ï¼Œå½“æ—¶ä¹Ÿåšå¾—ä¸ç®—å¾ˆå¥½ã€‚è¿™æ¬¡æ˜¯åˆ«äººåšäº†ï¼Œç„¶åé‚£äººç¦»èŒäº†ã€‚æˆ‘æ¥æ¥å—è¿™å—ï¼Œç„¶åå‘ç°æœ‰é—®é¢˜ï¼Œç„¶åå‡†å¤‡è®¤çœŸçš„ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œé¡ºä¾¿å­¦ä¹ æ›´å¤šçš„iOSå¼€å‘çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;h2&gt;ç³»ç»Ÿç›¸å†Œæ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆè¯´ä¸€ä¸‹iOSç›¸å†Œçš„é—®é¢˜ã€‚iOSçš„ç›¸ç‰‡éƒ½æ˜¯å­˜æ”¾åœ¨ç³»ç»Ÿåº“ALAssetLibraryä¸­ï¼Œå¼€å‘è€…ä»è¿™ä¸ªåº“ä¸­è¯»å–åˆ°çš„æ˜¯ä¸€ä¸ªä¸ªALAssetå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„Fileæ–‡ä»¶ã€‚å½“ç„¶iOS8ç³»ç»Ÿæ–°å¢äº†Photo Framework,ä½†æ˜¯åªæ˜¯å¢å¼ºäº†ç›¸å…³åŠŸèƒ½ï¼Œè¿˜æ˜¯ä¸èƒ½ç›´æ¥å–åˆ°Fileã€‚ è¿™ä¸ªAndroidå¹³å°æˆ–è€…PCå¹³å°å¾ˆä¸ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ä¸€èˆ¬çš„ä¸Šä¼ æ–‡ä»¶æµç¨‹å°±æ˜¯ï¼Œå°†æœ¬åœ°çš„æ–‡ä»¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®æˆ–æµï¼Œé€šè¿‡HTTPåè®®æˆ–è€…socketåè®®ï¼Œæœ¬åœ°å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œæœ¬åœ°å°†æµå†™å…¥è¿™ä¸ªè¿æ¥ï¼ŒæœåŠ¡å™¨é‚£è¾¹æ¥æ”¶è¿™ä¸ªæµï¼Œå¹¶å°†æ¥æ”¶åˆ°çš„æµå†™å…¥æ–‡ä»¶ï¼Œç›´æ¥å®¢æˆ·ç«¯é‚£è¾¹å°†æ•´ä¸ªæ–‡ä»¶ä¼ å®Œï¼Œä¼ è¾“å°±ç»“æŸäº†ã€‚ä¸Šä¼ æ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹ä¸€èˆ¬ä¼šè¢«å°è£…åº“ï¼Œä½¿ç”¨è€…åªéœ€ä¼ å…¥å¿…è¦çš„å‚æ•°å°±å¯ä»¥äº†ã€‚æˆ‘ä»¥å‰åšè‡ªåŠ¨å¤‡ä»½ç›¸å†Œçš„æ—¶å€™ï¼Œå°±æ˜¯ä½¿ç”¨äº†åˆ«äººæä¾›çš„é™æ€åº“ï¼Œå®ƒä¸Šä¼ æ–‡ä»¶APIå°±æ˜¯éœ€è¦ä¼ ä¸€ä¸ªæ–‡ä»¶çš„æœ¬åœ°è·¯å¾„ã€‚è¿™å°±éº»çƒ¦äº†ï¼Œå› ä¸ºæˆ‘ä»¬çš„åº”ç”¨ä»iOSç³»ç»Ÿåº“è¯»å–åˆ°çš„å¯¹è±¡æ˜¯ALAsset, æ‰€ä»¥æˆ‘éœ€è¦å…ˆå°†ALAssetä»ç³»ç»Ÿä¸­å¯¼å‡ºï¼Œå†™å…¥æˆ‘ä»¬åº”ç”¨çš„æ²™ç›’ä¸­ï¼Œç„¶åå†æŠŠå®ƒåœ¨æ²™ç›’ä¸­è·¯å¾„ä¼ ç»™ä¸Šä¼ åº“è¿›è¡Œä¸Šä¼ ã€‚&lt;/p&gt;
&lt;h2&gt;å¯¼å‡ºALAsset&lt;/h2&gt;
&lt;p&gt;æ®æˆ‘æ‰€çŸ¥ï¼ŒiOSç³»ç»Ÿcocoaå±‚ç½‘ç»œä¼ è¾“åŸºæœ¬ä¸Šåªæœ‰&lt;strong&gt;NSURLConnection&lt;/strong&gt;å’ŒåŸºäº&lt;strong&gt;NSURLSession&lt;/strong&gt;ä¸€å¥—APIã€‚å®ƒä»¬æä¾›çš„æ¥å£åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºNSDataï¼Œæˆ–è€…æ–‡ä»¶è·¯å¾„æˆ–è€…NSInputStreamã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šåº“æˆ–è€…æ¡†æ¶éƒ½æ˜¯åŸºäºè¿™ä¸¤å¥—APIæ¥åšä¸Šä¼ ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¡†æ¶æ¥å‡å°‘å·¥ä½œé‡ã€‚è¿™é‡Œæœ€æœ‰åçš„å½“ç„¶å°±æ˜¯AFNetWorkingã€‚AFNetWorkingåº“æä¾›ç»™ä½¿ç”¨çš„æ¥å£å°±æ˜¯æœ‰NSDataæ¥å£ï¼Œæ–‡ä»¶è·¯å¾„æ¥å£ï¼Œç”±äºæˆ‘ä»¬ä¸Šä¼ çš„ç…§ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨NSDataçš„æ¥å£ï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨æ–‡ä»¶æ¥å£ã€‚é‚£ä¹ˆå°±å¾—è€ƒè™‘å¦‚ä½•å°†ALAssetå¯¼å‡ºä¸ºä¸€ä¸ªæ–‡ä»¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;å°†ALAssetä»ç³»ç»Ÿä¸­å¯¼å‡ºçš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;BOOL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;exportAsset:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ALAsset&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;asset&lt;/span&gt; &lt;span class="nf"&gt;toFilePath:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;path&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSFileManager&lt;/span&gt; &lt;span class="n"&gt;defaultManager&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;createFileAtPath&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt; &lt;span class="n"&gt;attributes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;NSFileHandle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;handle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSFileHandle&lt;/span&gt; &lt;span class="n"&gt;fileHandleForWritingToURL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fileUrl&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;handle&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;NO&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;ALAssetRepresentation&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;rep&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;asset&lt;/span&gt; &lt;span class="n"&gt;defaultRepresentation&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;calloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BufferSize&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;NSUInteger&lt;/span&gt; &lt;span class="n"&gt;offset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bytesRead&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;@try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;bytesRead&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;rep&lt;/span&gt; &lt;span class="n"&gt;getBytes&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt; &lt;span class="n"&gt;fromOffset&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;offset&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;BufferSize&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;handle&lt;/span&gt; &lt;span class="n"&gt;writeData&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSData&lt;/span&gt; &lt;span class="n"&gt;dataWithBytesNoCopy&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;bytesRead&lt;/span&gt; &lt;span class="n"&gt;freeWhenDone&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;NO&lt;/span&gt;&lt;span class="p"&gt;]];&lt;/span&gt;
            &lt;span class="n"&gt;offset&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;bytesRead&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;@catch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSException&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;exception&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;NO&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bytesRead&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;buffer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;YES&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªåœ°æ–¹æ˜¯ç‰¹åˆ«è¦è¯´æ˜çš„ï¼Œå°±æ˜¯å°†ALAssetä»ç³»ç»Ÿåº“ä¸­è¯»å‡ºæ¥ä¸æ˜¯ä¸€ä¸‹å­è¯»åˆ°å†…å­˜ä¸­çš„ï¼Œè€Œæ˜¯æ¯æ¬¡è¯»ä¸€ä¸ªbufferå¤§å°çš„æ•°æ®ï¼Œç„¶åå°†è¿™ä¸ªbufferä¸­çš„æ•°æ®å†™å…¥æ–‡ä»¶ä¸­ï¼Œä¸æ–­è¯»å–å’Œå†™å…¥ï¼Œç›´åˆ°è¯»å®Œã€‚è¿™ä¸»è¦æ˜¯é¿å…ä¸€ä¸ªæ–‡ä»¶ï¼ˆå¦‚è§†é¢‘ï¼‰ä¸€ä¸‹å­è¯»åˆ°å†…å­˜ä¸­å¯¼è‡´å†…å­˜é—®é¢˜ã€‚
ç›¸å†Œé‡Œå¤§éƒ¨åˆ†éƒ½æ˜¯å›¾ç‰‡ï¼Œè€Œå›¾ç‰‡å¤§éƒ¨åˆ†ä¹Ÿå°±æ˜¯å‡ MB, ä¸€èˆ¬å°±ç®—ä¸€æ¬¡æ€§ç›´æ¥è¯»å–äºŒè¿›åˆ¶æ•°æ®åˆ°å†…å­˜ï¼Œä¸æ‹·è´æ–‡ä»¶å‡ºæ¥ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿå†…å­˜é—®é¢˜ã€‚å¯æ˜¯è§†é¢‘å°±ä¸è¡Œäº†ï¼Œå› ä¸ºä¸€èˆ¬è§†é¢‘éƒ½æ¯”è¾ƒå¤§ï¼Œå‡ ç™¾MBç”šè‡³å‡ ä¸ªGBã€‚æ‰€ä»¥ä¸Šé¢è¿™ä¸ªå¯¼å‡ºæ–¹æ³•ååˆ†é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å¯æ˜¯è¿™ä¸ªæ–¹æ³•ä¹Ÿæœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œå°±æ˜¯å¿…é¡»è¦æœ‰è¶³å¤Ÿçš„å‰©ä½™ç©ºé—´ç»™ä½ æ‹·è´ä¸€ä»½ç›¸ç‰‡æˆ–è€…è§†é¢‘å‡ºæ¥ã€‚ç‰¹åˆ«æ˜¯è§†é¢‘ã€‚ç©ºé—´é—®é¢˜æ˜¯ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºæ­£æ˜¯å› ä¸ºç”¨æˆ·çš„æ‰‹æœºå‰©ä½™ç©ºé—´ä¸è¶³äº†ï¼Œæ‰æƒ³è¦å¤‡ä»½ï¼Œè€Œå¤‡ä»½åˆéœ€è¦é¢å¤–çš„æ‹·è´ç©ºé—´ã€‚è®¾æƒ³ä¸€ä¸ªç”¨æˆ·æ‹äº†ä¸€ä¸ª3GBçš„è§†é¢‘ï¼Œä»–è¦å¤‡ä»½è¿™ä¸ªè§†é¢‘ï¼Œè‡³å°‘è¦é¢„ç•™3GBä»¥ä¸Šçš„å‰©ä½™ç©ºé—´æ‰èƒ½å¤‡ä»½ï¼Œè¿™æ˜¾ç„¶å¾ˆä¸åˆç†ã€‚é‚£æœ‰æ²¡æœ‰åˆ«çš„ä¸å¯¼å‡ºALAssetç›´æ¥ä¸Šä¼ çš„æ–¹æ³•å‘¢ã€‚æˆ‘ä¹Ÿä¸€ç›´åœ¨æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚æˆ‘èƒ½æƒ³åˆ°çš„æ˜¯ï¼šä¸€ç§æ˜¯è¾¹è¯»å–è¾¹ä¸Šä¼ ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ALAssetRepresentationçš„"getBytes:fromOffset:error"æ–¹æ³•è¯»å–å‡ºæ¥å°±ä¸Šä¼ ã€‚è¿™æ ·çš„è¯éœ€è¦è‡ªå·±å…ˆå»ºç«‹è¿æ¥ï¼Œä¼ è¾“HTTPheaderç›¸å…³å‡†å¤‡æ•°æ®ï¼ˆboundaryï¼‰ï¼Œç„¶åå°±ä¼ è¾“ä»ALAssetRepresentationè¯»å–çš„æ•°æ®ï¼Œè¯»å®Œä¹‹åå†è‡ªå·±åšä¸€äº›ç»“å°¾çš„å·¥ä½œã€‚è¿™ä¸€ç³»åˆ—çš„æ“ä½œéƒ½æ˜¯è‡ªå·±æ¥å®ç°ã€‚è²Œä¼¼è¿™æ ·çš„å·¥ä½œé‡ä¹ŸæŒºå¤§çš„ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯æˆ‘æ²¡æƒ³å¥½è¿™ä¸€æ•´ä½“è¿‡ç¨‹å®ç°èµ·æ¥æ˜¯æ€æ ·çš„ã€‚è¿˜æœ‰ä¸€ç§å°±ä»¥chuckæ–¹å¼ä¸Šä¼ ï¼Œå³ä¸€æ®µä¸€æ®µçš„ä¸Šä¼ ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é‚£è¾¹æ”¶åˆ°ä¹‹åè‡ªå·±ç»„è£…æˆä¸€ä¸ªå®Œæˆçš„æ–‡ä»¶ã€‚è¿™æ ·å®¢æˆ·ç«¯è¿™è¾¹ä¼ è¾“å¯ä»¥åˆ©ç”¨å·²æœ‰çš„APIï¼Œä½†æ˜¯æœåŠ¡å™¨é‚£è¾¹éœ€è¦é¢å¤–çš„æ”¯æŒã€‚æˆ‘ä»¬çš„æœåŠ¡å™¨è¿™è¾¹æ¯”è¾ƒå¼±ï¼Œä¸èƒ½æ”¯æŒè¿™ç§æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘æœ€ç»ˆè¿˜æ˜¯é€‰æ‹©äº†å¯¼å‡ºALAssetçš„æ–¹å¼ï¼Œå¼€å‘ç›¸å¯¹æ¥è¯´å®¹æ˜“ä¸€äº›ã€‚ä¸è¿‡è¿™ç§æ–¹å¼è¢«å…¶ä»–äººåæ§½å’Œè€»ç¬‘ã€‚ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸Šä¼ çš„å‘&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é¡¹ç›®é‡Œç”¨çš„æ˜¯&lt;strong&gt;AFNetWorking&lt;/strong&gt;åº“ï¼Œæ‰€ä»¥æˆ‘ç”¨å®ƒæ¥ä¸Šä¼ ã€‚ä¸€å¼€å§‹æˆ‘ä»¬ç”¨çš„æ˜¯2.0ç‰ˆæœ¬ï¼Œå®ƒæœ‰åŸºäºNSURLConnectionçš„APIï¼Œä¹Ÿæœ‰åŸºäºNSURLSessionä¸€å¥—APIã€‚é»˜è®¤éƒ½æ˜¯ç”¨NSURLConnectionçš„APIã€‚ä½†æ˜¯iOS9ä¸æ˜¯ä¸å†æ¨èä½¿ç”¨NSURLConnectionäº†å—ï¼Œæ‰€ä»¥AFN3.0ç‰ˆæœ¬ç›´æ¥å°±æŠŠNSURLConnectionçš„ç›¸å…³APIå»æ‰äº†ï¼Œå…¨éƒ¨éƒ½ä½¿ç”¨åŸºäºNSURLSessionçš„APIã€‚æœ¬æ¥æˆ‘ä»¬ç”¨2.0ç‰ˆæœ¬å¥½å¥½çš„ï¼Œä½†æ˜¯æ›´æ–°åˆ°3.0ç‰ˆæœ¬åå°±å‡ºé—®é¢˜äº†ã€‚åœ¨iOS7.0ç³»ç»Ÿä¸Šä¸Šä¼ å¤±è´¥ã€‚ç»è¿‡å’ŒæœåŠ¡å™¨è°ƒè¯•ï¼Œå‘ç°å®¢æˆ·ç«¯çš„ç½‘ç»œè¯·æ±‚headeré‡Œé¢æ²¡æœ‰contentLengthï¼Œæ‰€ä»¥æœåŠ¡å™¨é‚£è¾¹å¤±è´¥äº†ã€‚å°±ç®—ä½ è‡ªå·±ç»™å®ƒè®¾ç½®è¿™ä¸ªcontentLengthï¼Œå®ƒè¿˜æ˜¯ä¼šä¸¢å¼ƒæ‰ï¼Œå› ä¸ºè¿™æ˜¯è‹¹æœAPIåº•å±‚åšçš„äº‹ï¼è¿™å®åœ¨æ˜¯å¤ªè›‹ç–¼äº†ï¼Œæƒ³æ”¹è¿˜æ”¹ä¸äº†ã€‚æ‰€ä»¥æˆ‘åªèƒ½å¯»æ±‚åˆ«çš„æ–¹æ³•ã€‚æœ€ç»ˆæˆ‘ç”¨äº†ASIHTTPRequeståº“ï¼Œä¸ºä»€ä¹ˆæˆ‘æ²¡æœ‰é‡‡ç”¨æ—§çš„NSURLConnectionAPIå‘¢ã€‚å› ä¸ºè¿™ä¸ªAPIä¹Ÿæœ‰å®ƒçš„ç¼ºé™·ï¼Œå¦åˆ™è‹¹æœä¹Ÿä¸ä¼šå†æœ€æ–°çš„ç³»ç»ŸæŠŠå®ƒåºŸå¼ƒæ‰ã€‚æˆ‘è‡ªå·±åœ¨é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜æ˜¯å®ƒæ”¹å˜ä¸äº†HTTP headerä¸­connectionè¿æ¥æ–¹å¼ï¼Œé»˜è®¤çš„æ˜¯keep-aliveæ–¹å¼ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰ä¸€ç§æƒ…å†µæ˜¯éœ€è¦æœåŠ¡å™¨ä¸­è½¬HTTPè¯·æ±‚ï¼Œå¦‚æœæ˜¯keep-aliveæ–¹å¼çš„è¯å¾ˆå®¹æ˜“å‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯è®¾ä¸ºcloseæ–¹å¼ã€‚è›‹ç–¼çš„é—®é¢˜æ¥äº†ï¼Œä½ æ”¹å˜ä¸äº†ï¼ä½ åœ¨HTTP requestå¤´ä¸­è®¾ç½®äº†ï¼Œåˆ°åº•å±‚è¿˜æ˜¯è¢«ç³»ç»Ÿè¦†ç›–æ‰ï¼Œè‹¹æœå®åœ¨æ˜¯å¤ªéœ¸é“äº†ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ASIHTTPRequest&lt;/strong&gt;åº“æ˜¯åŸºäºCFNetworkæ¡†æ¶å®ç°çš„ï¼Œå®ƒå¾ˆåº•å±‚ï¼Œä½ å¯ä»¥æ§åˆ¶å„ç§ä¸œè¥¿ï¼Œæ‰€ä»¥æˆ‘å°±é‡‡ç”¨äº†å®ƒï¼Œè€Œä¸”å®ƒä¹ŸæŒºé«˜æ•ˆã€‚å”¯ä¸€ä¸è¶³çš„å°±æ˜¯è¿™ä¸ªåº“å·²ç»æ—©å°±ä¸ç»´æŠ¤äº†ã€‚åªèƒ½è‡ªå·±ç»´æŠ¤ã€‚æ‰€ä»¥æˆ‘æœ€ç»ˆçš„æ–¹å¼æ˜¯ï¼Œå¦‚æœæ˜¯iOS8ä»¥ä¸‹ç³»ç»Ÿï¼Œå°±é‡‡ç”¨ASIæ–¹å¼ä¸Šä¼ ï¼Œå¦åˆ™å°±é‡‡ç”¨AFNetWorkingæ–¹å¼ä¸Šä¼ ã€‚è¿™é‡Œé¡ºè¡¨ASIçš„å¦ä¸€ä¸ªä¼˜ç‚¹ï¼Œå®ƒå¯ä»¥åšåˆ°çœŸæ­£çš„æ–­ç‚¹ç»­ä¼ ä¸‹è½½ï¼ŒiOSç³»ç»Ÿæä¾›NSURLSessionTaskçš„æ–­æ‰ç»­ä¼ ä¸æ˜¯çœŸçš„æ–­æ‰ç»­ä¼ ï¼Œå› ä¸ºå¼ºé€€åº”ç”¨ä¹‹åNSURLSessionTaskä¼šé‡æ–°ä»å¤´å¼€å§‹ä¸‹è½½ï¼Œå®ƒåªèƒ½åšåˆ°åº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…çš„æ–­æ‰ç»­ä¼ ã€‚è€ŒASIæ˜¯çœŸä¸ªä¸‹è½½è¿‡ç¨‹ä½ å¯ä»¥å¹²æ¶‰ï¼Œå¹¶ä¸”å®ƒæœ¬æ¥å·²ç»æŠŠä½ ä¿å­˜å¥½æ–‡ä»¶å¹¶ä¸”å¼ºé€€åé‡å¯ä¹Ÿå¯ä»¥è¿˜åŸã€‚è™½ç„¶è¿™ä¸ªåŸç†ä¸€ç‚¹éƒ½ä¸å¤æ‚ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºå•¥NSURLSessionTaskå°±æ˜¯ä¸è¿™æ ·åšï¼Œä¼°è®¡æ˜¯å¤–å›½äººçš„ä½¿ç”¨ä¹ æƒ¯å’Œæ€ç»´å’Œæˆ‘ä»¬ä¸åŒï¼Œäººå®¶ä¸å±‘äºå®ç°è¿™ä¸ªï¼Ÿ&lt;/p&gt;
&lt;h2&gt;åå°ä¸Šä¼ &lt;/h2&gt;
&lt;p&gt;ç”±äºç³»ç»Ÿç›¸å†Œé‡Œæœ‰å¯èƒ½å¾ˆå¤šå›¾ç‰‡ï¼Œä¸Šä¼ åˆæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ…¢çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶å°±æƒ³åˆ°è¦åšåå°ä¸Šä¼ ã€‚è¦åšåå°ä»»åŠ¡ï¼ŒiOS7ä»¥åå½“ç„¶æ˜¯ç”¨åŸºäºNSURLSessionçš„NSURLSessionTaskï¼Œè¿™ä¹Ÿæ˜¯è‹¹æœä¸€ç›´åŠ›æ¨ä½¿ç”¨NSURLSession APIçš„åŸå› å§ã€‚å¯æ˜¯NSURLSessionç›¸å…³APIçš„å‘ä¹Ÿå¾ˆå¤šã€‚
ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦ç”Ÿæˆä¸€ä¸ªå…·æœ‰åå°ä»»åŠ¡é…ç½®çš„NSURLSessionï¼Œç„¶åç”±å®ƒæ¥åˆ›å»ºNSURLSessionUploadTaskï¼Œç„¶ååŸºäºè¿™ä¸ªtaskæ¥ä¸Šä¼ å°±å¯ä»¥åšåˆ°åå°ä¹Ÿèƒ½ä¸Šä¼ ã€‚å®é™…çš„ä»£ç è¿è¡Œä¸­å´©æºƒäº†ã€‚
åœ¨ç½‘ä¸Šæœäº†å¾ˆå¤šèµ„æ–™ï¼Œæœ€ç»ˆå‘ç°è¯´iOSçš„åå°ä¸Šä¼ ä»»åŠ¡ä¸æ”¯æŒNSDataæ–¹å¼ä¸Šä¼ ï¼Œå®ƒåªæ”¯æŒfileçš„æ–¹å¼ä¸Šä¼ ã€‚æˆ‘ä»¬æ˜¯åŸºäºAFNçš„mutiPartæ–¹å¼æ¥ä¸Šä¼ ï¼Œå³ä½ è®¾ç½®å¥½ç›¸å…³çš„ä¿¡æ¯å’Œæ–‡ä»¶åœ°å€ï¼Œç„¶åAFNä¼šè½¬æ¢ä¸ºè¾“å…¥æµæ¥ä¸Šä¼ ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æ˜¯åå°ä¸Šä¼ ä¸äº†çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶åå°åªèƒ½æ”¯æŒæ–‡ä»¶æ–¹å¼ä¸Šä¼ ï¼Œé‚£å°±åªèƒ½å°†æ‰€æœ‰çš„ä¿¡æ¯å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œæœ€åå°†è¿™ä¸ªæ–‡ä»¶æ¥ä¸Šä¼ ï¼ŒAFNç¡®å®ä¹Ÿæä¾›äº†è¿™æ ·ä¸€ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ”¯æŒåå°ä¸Šä¼ çš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;-&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nf"&gt;uploadFile3:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;filePath&lt;/span&gt; &lt;span class="nf"&gt;withURL:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;urlString&lt;/span&gt; &lt;span class="nf"&gt;withSaveName:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;saveName&lt;/span&gt; &lt;span class="nf"&gt;andFileItem:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FileItem&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="nv"&gt;fileItem&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;NSString&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;finalFile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSTemporaryDirectory&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="n"&gt;stringByAppendingPathComponent&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;fileItem&lt;/span&gt; &lt;span class="n"&gt;getFileName&lt;/span&gt;&lt;span class="p"&gt;]];&lt;/span&gt;
    &lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;fileType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;fileItem&lt;/span&gt; &lt;span class="n"&gt;contentType&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

    &lt;span class="c1"&gt;// Prepare a temporary file to store the multipart request prior to sending it to the server due to an alleged&lt;/span&gt;
    &lt;span class="c1"&gt;// bug in NSURLSessionTask.&lt;/span&gt;
    &lt;span class="c1"&gt;// Create a multipart form request.&lt;/span&gt;
    &lt;span class="n"&gt;AFHTTPRequestSerializer&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;requestSerizlizer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;AFHTTPRequestSerializer&lt;/span&gt; &lt;span class="n"&gt;serializer&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;NSMutableURLRequest&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;multipartRequest&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;requestSerizlizer&lt;/span&gt; &lt;span class="n"&gt;multipartFormRequestWithMethod&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;POST&amp;quot;&lt;/span&gt;
                                                                                    &lt;span class="nl"&gt;URLString:&lt;/span&gt;&lt;span class="n"&gt;urlString&lt;/span&gt;
                                                                                   &lt;span class="nl"&gt;parameters:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;
                                                                    &lt;span class="nl"&gt;constructingBodyWithBlock:&lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;id&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;AFMultipartFormData&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;formData&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                                             &lt;span class="p"&gt;{&lt;/span&gt;
                                                 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;formData&lt;/span&gt; &lt;span class="n"&gt;appendPartWithFileURL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSURL&lt;/span&gt; &lt;span class="n"&gt;fileURLWithPath&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;filePath&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;saveName&lt;/span&gt; &lt;span class="n"&gt;fileName&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;saveName&lt;/span&gt; &lt;span class="n"&gt;mimeType&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fileType&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                             &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;multipartRequest&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timeoutInterval&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="c1"&gt;// Dump multipart request into the temporary file.&lt;/span&gt;
    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;requestSerizlizer&lt;/span&gt; &lt;span class="n"&gt;requestWithMultipartFormRequest&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;multipartRequest&lt;/span&gt;
                                              &lt;span class="nl"&gt;writingStreamContentsToFile:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSURL&lt;/span&gt; &lt;span class="n"&gt;fileURLWithPath&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;finalFile&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
                                                        &lt;span class="nl"&gt;completionHandler:&lt;/span&gt;&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSError&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                                            &lt;span class="c1"&gt;// Once the multipart form is serialized into a temporary file, we can initialize&lt;/span&gt;
                                                            &lt;span class="c1"&gt;// the actual HTTP request using session manager.&lt;/span&gt;
                                                            &lt;span class="n"&gt;_currentTask&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;_manager&lt;/span&gt; &lt;span class="n"&gt;uploadTaskWithRequest&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;multipartRequest&lt;/span&gt; &lt;span class="n"&gt;fromFile&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSURL&lt;/span&gt; &lt;span class="n"&gt;fileURLWithPath&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;finalFile&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;progress&lt;/span&gt;&lt;span class="o"&gt;:^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSProgress&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;_Nonnull&lt;/span&gt; &lt;span class="n"&gt;uploadProgress&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                                                &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;progress = %f&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uploadProgress&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fractionCompleted&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                                                                &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileItem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uploadedSize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fileItem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fileSize&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;uploadProgress&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fractionCompleted&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                                                                &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;notifyStateChanged&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                                            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;completionHandler&lt;/span&gt;&lt;span class="o"&gt;:^&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NSURLResponse&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;_Nonnull&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;id&lt;/span&gt;  &lt;span class="n"&gt;_Nullable&lt;/span&gt; &lt;span class="n"&gt;responseObject&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NSError&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;_Nullable&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                                                &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSFileManager&lt;/span&gt; &lt;span class="n"&gt;defaultManager&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;removeItemAtURL&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSURL&lt;/span&gt; &lt;span class="n"&gt;fileURLWithPath&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;finalFile&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                                                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                                                    &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;Upload image failure......&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;%@&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,[&lt;/span&gt;&lt;span class="n"&gt;error&lt;/span&gt; &lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;span class="c1"&gt;//                                                                    [[NSFileManager defaultManager] removeItemAtPath:filePath error:nil];//ä¸Šä¼ å¤±è´¥ä¿ç•™æ–‡ä»¶ä¸‹æ¬¡ä¸Šä¼ &lt;/span&gt;
                                                                    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;onUploadFailure&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fileItem&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                                                &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                                                                    &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;Upload image Success......&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;%@&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,[[&lt;/span&gt;&lt;span class="n"&gt;_currentTask&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;description&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
                                                                    &lt;span class="n"&gt;NSLog&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;Response Data:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;%@&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,[&lt;/span&gt;&lt;span class="n"&gt;NSString&lt;/span&gt; &lt;span class="n"&gt;stringWithData&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;responseObject&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="s"&gt;@&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;&lt;span class="c1"&gt;//è¿”å›æ˜¯ç©º&lt;/span&gt;
                                                                    &lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="n"&gt;NSFileManager&lt;/span&gt; &lt;span class="n"&gt;defaultManager&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;removeItemAtPath&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;filePath&lt;/span&gt; &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="nb"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                                                    &lt;span class="n"&gt;Partition&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;partition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;backupPartition&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                                                    &lt;span class="n"&gt;partition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;usedSize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NSNumber&lt;/span&gt; &lt;span class="n"&gt;numberWithLongLong&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;partition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;usedSize&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;longLongValue&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;fileItem&lt;/span&gt; &lt;span class="n"&gt;getAsset&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;defaultRepresentation&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;)];&lt;/span&gt;
                                                                    &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="n"&gt;onUploadSuccess&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;fileItem&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                                                                &lt;span class="p"&gt;}&lt;/span&gt;
                                                            &lt;span class="p"&gt;}];&lt;/span&gt;
                                                            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;_currentTask&lt;/span&gt; &lt;span class="n"&gt;resume&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

                                                        &lt;span class="p"&gt;}];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªæ–¹å¼åœ¨iOS7åŠä»¥ä¸Šçš„ç³»ç»Ÿéƒ½æœ‰æ•ˆï¼Œä½†æ˜¯åœ¨iOS7ç³»ç»Ÿè¿˜æ˜¯æœ‰ç‚¹å°é—®é¢˜ï¼šä¸Šä¼ è¿›åº¦ä¸å›è°ƒã€‚è¿™ã€‚ã€‚è¿™ã€‚ã€‚æˆ‘æ— è¯å¯è¯´äº†ï¼Œæ‰€ä»¥æˆ‘é¡¹ç›®ä¸­iOS7è¿˜æ˜¯åªèƒ½ç”¨ASIæ¥ä¸Šä¼ ã€‚&lt;/p&gt;
&lt;p&gt;åå°ä¸Šä¼ å¯ä»¥äº†ï¼Œä½†æ˜¯å®é™…æµ‹è¯•ä¸­è²Œä¼¼ä¸Šä¼ æ•ˆç‡ä¹Ÿä¸é«˜ï¼Œæœ€ä¸»è¦è¿˜æ˜¯è¦å°†æ‰€æœ‰æ•°æ®å†å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ç¡¬ä¼¤ã€‚å› ä¸ºå‰é¢å¯¼å‡ºASAssetçš„æ—¶å€™å·²ç»ä¸´æ—¶ç”Ÿæˆäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨AFNåå°ä¸Šä¼ çš„æ—¶å€™å†ä¸€æ¬¡å†™å¤šä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œè¿™æ ·ä¸€æ¬¡ä¸Šä¼ å°±ç”Ÿæˆäº†ä¸¤ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸ªå¾ˆå¤§çš„è§†é¢‘ï¼Œé‚£å¿…ç„¶å¾ˆå®¹æ˜“å¯¼è‡´ç£ç›˜ç©ºé—´ä¸è¶³è€Œå¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œåå°ä¸Šä¼ çœ‹ä¸Šå»å¾ˆç¾å¥½çš„äº‹æƒ…ï¼Œå®é™…è¿‡ç¨‹ä¸­å´æ˜¯é‚£ä¹ˆæ®‹é…·çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/AFNetworking/AFNetworking/issues/1398"&gt;AFN issue&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://stackoverflow.com/questions/27154006/how-to-upload-task-in-background-using-afnetworking"&gt;StackOverflowç›¸å…³é—®é¢˜&lt;/a&gt;&lt;/p&gt;</summary><category term="iOSç½‘ç»œç¼–ç¨‹ ç³»ç»Ÿç›¸å†Œä¸Šä¼  å¯¼å‡ºè§†é¢‘ NSURLConnection NSURLSession å¤§æ–‡ä»¶ä¸Šä¼  åå°ä¸Šä¼ "></category></entry><entry><title>Androidä¸‹è½½å™¨å¼€å‘</title><link href="http://szuwest.github.io/androidxia-zai-qi-kai-fa.html" rel="alternate"></link><updated>2015-07-18T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2015-07-18:androidxia-zai-qi-kai-fa.html</id><summary type="html">&lt;h1&gt;Androidä¸‹è½½å™¨å¼€å‘&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘å› ä¸ºé¡¹ç›®éœ€è¦ï¼Œæˆ‘å¼€å‘äº†ä¸€ä¸ªAndroidä¸‹è½½ç®¡ç†å™¨ï¼Œæˆ‘è§‰å¾—å¾ˆæœ‰å¿…è¦è®°å½•ä¸€ä¸‹ï¼Œè°ˆè°ˆæˆ‘æ˜¯æ€ä¹ˆå¼€å‘çš„ï¼Œé‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ä»¥åŠå¦‚ä½•è§£å†³çš„ã€‚ç®—æ˜¯ä¸€ä¸ªæ€»ç»“å§ã€‚&lt;/p&gt;
&lt;h2&gt;éœ€æ±‚åˆ†æ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é¡¹ç›®åŒ…å«äº†ä¸€ä¸ªåŠŸèƒ½ï¼šå°†æ–‡ä»¶ä¸‹è½½æ‰‹æœºä¸Šï¼Œå¹¶ä¸”è¦æ”¯æŒæ–­ç‚¹ä¸‹è½½ï¼Œå› ä¸ºæˆ‘ä»¬ä¸‹è½½çš„æ–‡ä»¶ä¸»è¦æ˜¯å›¾ç‰‡å’Œè§†é¢‘ï¼Œå…¶ä¸­è§†é¢‘åŸºæœ¬ä¸Šéƒ½æ˜¯å¤§æ–‡ä»¶ï¼Œç„¶åä¸‹è½½å¯èƒ½éšæ—¶ä¼šè¢«ä¸­æ–­ï¼Œæ‰€ä»¥é¦–è¦ä¸€ç‚¹å°±æ˜¯è¦æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œç„¶åè¦æ”¯æŒä»»åŠ¡ç®¡ç†ï¼Œä¾‹å¦‚æš‚åœä¸‹è½½å’Œç»§ç»­ä¸‹è½½ï¼Œå†ç„¶åå°±æ˜¯è¦ä¸‹è½½é€Ÿåº¦å°½é‡å¿«ã€‚ä¸è¿‡è¿™æœ€åä¸€ç‚¹ä¼°è®¡æ‰€æœ‰äººéƒ½ä¼šè¿™æ ·è¦æ±‚ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸ºä»€ä¹ˆè¦è‡ªå·±å¼€å‘&lt;/h2&gt;
&lt;p&gt;éœ€æ±‚å·²ç»è¾ƒæ¸…æ¥šäº†ï¼Œç„¶åå†çœ‹æ€ä¹ˆå®ç°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåƒä¸‹è½½è¿™ä¹ˆé€šç”¨çš„åŠŸèƒ½ï¼Œå› ä¸ºå¾ˆå¤šå¼€æºåº“å¯ç”¨æ‰å¯¹ã€‚ä¸è¿‡åœ¨å¼€å§‹ä¹‹å‰æˆ‘è¦è¯´æ˜ä¸€ä¸‹ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸€å¼€å§‹ä¸æ˜¯æˆ‘åšçš„ï¼Œæ˜¯å¦å¤–ä¸€ä¸ªåŒäº‹è´Ÿè´£çš„ï¼Œä½†æ˜¯ä»–ç¦»èŒäº†ï¼Œæˆ‘æ¥æ¥æ‰‹ã€‚é—®é¢˜åœ¨äºä»–ç¦»èŒä¹‹å‰è¿™ä¸ªåŠŸèƒ½ç®—æ˜¯å®ç°äº†ï¼Œä½†æ˜¯å¾ˆå¤šé—®é¢˜ï¼Œä¾‹å¦‚æ–­ç‚¹ç»­ä¼ æœ‰é—®é¢˜ï¼Œä»»åŠ¡ç®¡ç†æœ‰é—®é¢˜ï¼Œä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ã€‚æˆ‘æ¥æ‰‹ä¹‹åï¼Œæˆ‘ç‰¹æ„å»ç½‘ä¸ŠæŸ¥æ‰¾äº†æœ‰æ²¡æœ‰å¯ç”¨çš„è¾ƒå¥½çš„å¼€æºåº“ã€‚ç»è¿‡ä¸€è½®æœç´¢ä¹‹åï¼Œæˆ‘å‘ç°ï¼Œå¾ˆå¤šåšå®¢ä¸Šä»‹ç»çš„ä¸‹è½½éƒ½æ˜¯åŒä¸€ä¸‹è½½ï¼Œå°±æ˜¯é»æ´»æ˜è€å¸ˆçš„ä¸‹è½½ï¼Œä¼°è®¡è¿™ä¸ªä¸‹è½½æ˜¯ä»–è®²è¯¾çš„æ¡ˆä¾‹ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯å¤šçº¿ç¨‹æ–­ç‚¹ä¸‹è½½ã€‚è€Œæˆ‘ä»¬ä¹‹å‰é‚£ä¸ªåŒäº‹çš„å®ç°å°±æ˜¯æŠŠç½‘ä¸Šçš„ä¾‹å­å¼„æ¥çš„ã€‚ä»–è¿™ä¸ªä¸‹è½½ç¡®å®è¿˜å¯ä»¥ï¼Œæ”¯æŒæ–­ç‚¹ä¸‹è½½ï¼Œè¿˜æ”¯æŒå¤šçº¿ç¨‹åˆ†ç‰‡ä¸‹è½½æ¥æé«˜ä¸‹è½½é€Ÿåº¦ã€‚ä¸è¶³ä¹‹å¤„å°±æ˜¯ä¸æ”¯æŒä»»åŠ¡ç®¡ç†ï¼Œè¿˜æœ‰æ•°æ®åº“å¾ˆå®¹æ˜“å‡ºç°å¤šçº¿ç¨‹é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´æ ¸å¿ƒçš„ä¸œè¥¿å®ƒæœ‰äº†ã€‚å¦‚æœä½ è¦åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ç”¨å®ƒï¼Œç„¶åè¿˜æœ‰é€šè¿‡æµ‹è¯•åŒäº‹çš„å„ç§æµ‹è¯•ï¼Œé‚£æ˜¯ä¸è¡Œçš„ã€‚è¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚&lt;/p&gt;
&lt;p&gt;å†è¯´è¯´æˆ‘æ‰¾åº“çš„é—®é¢˜ï¼Œä¸‹è½½åº“åˆ°æ˜¯æ‰¾åˆ°äº†å‡ ä¸ªï¼Œä½†æ˜¯å‘ç°éƒ½æœ‰ç‚¹å°é—®é¢˜ã€‚ä¾‹å¦‚æœ‰ä¸€ä¸ªè²Œä¼¼æ˜¯é˜¿é‡Œå·´å·´çš„æŠ€æœ¯äººå‘˜å†™çš„ï¼Œæ”¯æŒæ–­ç‚¹ä¸‹è½½å’Œä»»åŠ¡ç®¡ç†ï¼Œä½†æ˜¯ä¸æ”¯æŒå¤šçº¿ç¨‹åˆ†å—ä¸‹è½½ã€‚ç„¶åæˆ‘å‘ç°å¾ˆå°‘å¤–å›½äººæœ‰å†™ä¸‹è½½åº“ï¼Œæˆ‘çš„æƒ³æ³•æ˜¯ æ˜¯ä¸æ˜¯å› ä¸ºä»–ä»¬çš„ç½‘é€Ÿæ¯”è¾ƒå¥½ï¼Œä¸‹è½½æ–‡ä»¶éƒ½æ¯”è¾ƒå¿«ï¼Œåƒæ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹åˆ†å—ä¸‹è½½ï¼Œä»»åŠ¡ç®¡ç†éœ€æ±‚ä¹Ÿæ¯”è¾ƒå°‘ï¼ˆä¹Ÿæ¯”è¾ƒå°‘ä¸‹å¤§æ–‡ä»¶ï¼Œå› ä¸ºä»–ä»¬ä¸èƒ½ä¸‹è½½è§†é¢‘ï¼‰ã€‚æ‰€ä»¥æˆ‘æœ€ç»ˆå†³å®šè‡ªå·±æ¥å®ç°ä¸€ä¸ªä¸‹è½½å™¨ã€‚&lt;/p&gt;
&lt;h1&gt;å®ç°&lt;/h1&gt;
&lt;h3&gt;1æ–­ç‚¹ç»­ä¼ &lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªè¦ç‚¹æ˜¯æ–­ç‚¹ç»­ä¼ ã€‚è¿™ä¸ªä¸éš¾ï¼Œå› ä¸ºè¿™æ˜¯HTTPåè®®æ”¯æŒï¼Œé€šè¿‡rangeè¿™ä¸ªheaderå­—æ®µã€‚è¿™ä¸ªå­—æ®µå¯ä»¥æŒ‡å®šè¦ä»æ–‡ä»¶çš„å“ªä¸ªåœ°æ–¹å¼€å§‹ä¼ ï¼Œåˆ°å“ªé‡Œç»“æŸã€‚ä¸‹è½½çš„éƒ¨åˆ†è¦å†™å…¥æ–‡ä»¶ï¼Œè¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªJavaç±»ï¼šRandomAccessFileã€‚è¿™ä¸ªç±»ä½ å¯ä»¥æŒ‡å®šåˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„æ–‡ä»¶ï¼Œç„¶åéšæœºè¯»å†™ä»»ä½•éƒ¨åˆ†ã€‚æ–­ç‚¹ä¸‹è½½ä¸€ä¸ªè¦ç‚¹å°±æ˜¯ï¼Œåœ¨ä¸‹è½½ä¹‹å‰ï¼Œæˆ‘ä»¬è¦å…ˆåˆ›å»ºä¸€ä¸ªæŒ‡å®šå¤§å°çš„RandomAccessFileæ–‡ä»¶ï¼Œç„¶åå†æŠŠä¸‹è½½ä¸‹æ¥çš„éƒ¨åˆ†å†™å…¥è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚å·²ä¸‹è½½çš„éƒ¨åˆ†è¦è®°å½•åˆ°é…ç½®æ–‡ä»¶æˆ–è€…æ•°æ®åº“ä¸­ï¼Œä¸‹è½½è¦ä»å“ªé‡Œä¸‹è½½å°±ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ã€‚è¿™é‡Œè¦æ³¨æ„çš„å°±æ˜¯æ¯æ¬¡å°†ä¸‹è½½éƒ¨åˆ†å†™å…¥æ–‡ä»¶çš„æ—¶å€™ï¼ŒåŒæ—¶ä¹Ÿè¦ä¿å­˜å·²ä¸‹è½½åˆ°å“ªé‡Œçš„ä¿¡æ¯ã€‚è¿™é‡Œçš„é¢å¤–çš„ä¿å­˜æ“ä½œä¼šæ‹–æ…¢ä¸€ç‚¹ä¸‹è½½é€Ÿåº¦ï¼Œä½†æ˜¯ä¸ºäº†é¿å…ç¨‹åºè¢«å¼ºæ€æˆ–è€…çªç„¶å´©æºƒå¯¼è‡´å·²ä¸‹è½½éƒ¨åˆ†ä¸¢å¤±ï¼Œä¹Ÿåªèƒ½è¿™ä¹ˆåšã€‚å¦‚æœä¸ºäº†è¿½æ±‚é€Ÿåº¦ï¼Œå¯ä»¥å®¹æ˜“è¿™ç§å¼‚å¸¸æƒ…å†µçš„ä¸¢å¤±ï¼Œè¿™é‡Œæ˜¯å¯ä»¥æ”¹è¿›çš„ã€‚&lt;/p&gt;
&lt;h3&gt;å¤šçº¿ç¨‹åˆ†å—ä¸‹è½½&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†åŠ å¿«é€Ÿåº¦ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ†æˆå‡ å—ï¼Œæ¯å—åˆ†é…ä¸€ä¸ªçº¿ç¨‹æ¥ä¸‹è½½ï¼Œè¿™æ ·é€Ÿåº¦å°±ç¿»å€äº†ã€‚è¿™é‡Œå°±æœ‰ä¸€ä¸ªè¦ç‚¹ï¼šæˆ‘ä»¬å°†æ–‡ä»¶åˆ†æˆNå—ï¼Œç„¶åè¿™æ¯ä¸€å—éƒ½æŒ‰ç…§æ–­ç‚¹ç»­ä¼ æ¥å®ç°ã€‚æ‰€ä»¥åŸºæœ¬çš„ä¸‹è½½æµç¨‹æ˜¯è¿™æ ·çš„ï¼šé¦–å…ˆè·å–æ–‡ä»¶çš„å¤§å°ï¼Œç„¶ååœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªè¯¥å¤§å°RandomAccessFileæ–‡ä»¶ï¼Œç„¶ååˆ†æˆNå—æ¥ä¸‹è½½ï¼Œè®¾ç½®å¥½æ¯ä¸€å—çš„ä¸‹è½½èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œåˆ†é…ä¸€ä¸ªçº¿ç¨‹æ¥ä¸‹è½½ï¼Œè€Œä¸”æ¯ä¸€å—çš„ä¸‹è½½éƒ½è¦å‡ å¥½ä¸‹è½½åˆ°å“ªé‡Œï¼Œä»¥ä¾¿ä»¥åæ”¯æŒç»§ç»­ä¸‹è½½ã€‚è¦åˆ¤æ–­æ–‡ä»¶æ˜¯ä¸æ˜¯ä¸‹è½½å®Œæˆäº†ï¼Œåªè¦æ£€æŸ¥æ¯å—æ˜¯ä¸æ˜¯å·²ç»æ­£å¸¸ä¸‹è½½å®Œæˆæˆ–è€…å·²ä¸‹è½½çš„éƒ¨åˆ†å°±æ˜¯ç­‰äºæ–‡ä»¶å¤§å°ï¼Œå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;h3&gt;ä»»åŠ¡ç®¡ç†&lt;/h3&gt;
&lt;p&gt;ä»»åŠ¡ç®¡ç†å°±æ˜¯ä½ å¯ä»¥éšæ—¶ä¸­æ–­ä¸‹è½½ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªä»»åŠ¡ï¼ŒåŒæ—¶å¯èƒ½åªæ”¯æŒXä¸ªæ–‡ä»¶è¿›è¡Œä¸‹è½½ï¼Œå…¶ä»–çš„ä»»åŠ¡ç­‰å¾…ã€‚ç„¶åå¤±è´¥çš„ä»»åŠ¡å¯ä»¥é‡å¯ï¼Œä¹Ÿå¯ä»¥å¯¹ä»»åŠ¡è¿›è¡Œåˆ é™¤ã€‚è¿™ä¸ªå€’ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯å¦‚æœè¦åŠ å…¥ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œä¼šå¤æ‚å¾ˆå¤šã€‚ç°åœ¨æˆ‘çš„å®ç°æ˜¯æ²¡æœ‰ä¼˜å…ˆçº§çš„ï¼Œå…ˆè¿›å…ˆå‡ºæœºåˆ¶ã€‚ä¸è¿‡æˆ‘å·²é¢„è§ˆè¿™ä¸ªè®¾è®¡ï¼Œè¦æ‰©å±•èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚ä»»åŠ¡ç®¡ç†å®ç°èµ·æ¥ä¸éš¾ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªçº¿ç¨‹æ± æ¥ä¸‹è½½ï¼Œä¸‹è½½ä¸­å’Œç­‰å¾…ä¸­çš„ä»»åŠ¡åŠ å…¥çº¿ç¨‹æ± ï¼Œå½“ä»»åŠ¡è¢«æš‚åœæ—¶ï¼Œå¦‚æœæ˜¯æ­£åœ¨ä¸‹è½½ï¼Œå°±cancelæ‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ç­‰å¾…ä¸­ï¼Œå°±è®¾ç½®cancelæ ‡è®°ã€‚åˆ é™¤å’Œæš‚åœå·®ä¸å¤šï¼Œåªæ˜¯è¦å¯¹æ•°æ®åº“è¿›è¡Œåˆ é™¤æ“ä½œã€‚è¿™é‡Œå¯¹æ­£åœ¨ä¸‹è½½çš„ä»»åŠ¡åœæ­¢æœ‰ä¸€ä¸ªè¦ç‚¹ã€‚æœ‰å¾ˆå¤šäººå¯¹åœæ­¢çº¿ç¨‹æŒæ¡çš„ä¸å¥½ã€‚å¤§éƒ¨åˆ†äººéƒ½çŸ¥é“è®¾ç½®ä¸€ä¸ªå¸ƒå°”æ ‡è®°ï¼Œå½“è¿™ä¸ªæ ‡å¿—ä¸ºtrueæ—¶å°±ä¸åšä»»åŠ¡äº†ï¼Œè¿™æ ·çº¿ç¨‹çš„runæ–¹æ³•å¯ä»¥ç»“æŸäº†ã€‚é—®é¢˜æ˜¯å¾ˆå¤šäººä¸çŸ¥é“è¿™ä¸ªå¸ƒå°”å˜é‡æ˜¯æœ‰è¦æ±‚çš„ã€‚æˆ‘ä¹‹å‰çš„é‚£ä¸ªåŒäº‹å°±çŠ¯äº†ä¸ªé”™è¯¯ã€‚ä»–å‘ç°æŠŠé‚£ä¸ªæ ‡è®°è®¾ç½®ä¸ºtrueæ—¶ï¼Œçº¿ç¨‹ä¸èƒ½ç«‹å³ç»“æŸã€‚ä»–å°±åœ¨çº¿ç¨‹é‡ŒåŠ äº†ä¸ªsleepæ–¹æ³•ï¼Œç„¶åè¿›å…¥åˆ¤æ–­è¿™ä¸ªæ ‡ç¤ºçš„é€»è¾‘ã€‚è¿™æ ·åšå¯ä»¥èµ·åˆ°ä¸€ç‚¹çš„ä½œç”¨ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸èƒ½è§£å†³æ ¹æœ¬é—®é¢˜ï¼Œè€Œä¸”ä¼šå¯¼è‡´æ— éœ€çš„ç¨‹åºç¡çœ æ—¶é—´ï¼Œå¯¼è‡´ä¸‹è½½é€Ÿåº¦å˜æ…¢ã€‚è§£æ–¹æ³•å¾ˆç®€å•ï¼Œå¯¹è¿™ä¸ªå¸ƒå°”å€¼å˜é‡å£°æ˜æ—¶ç”¨volatileä¿®é¥°å°±å¯ä»¥äº†ï¼Œè€Œä¸”ä¸ç”¨åœ¨çº¿ç¨‹é‡Œsleepã€‚&lt;/p&gt;
&lt;h3&gt;é‡åˆ°çš„é—®é¢˜&lt;/h3&gt;
&lt;p&gt;å‰é¢è¯´äº†å‰åŒäº‹çš„å®ç°æœ‰é—®é¢˜ï¼Œæ–­ç‚¹ä¸‹è½½æœ‰é—®é¢˜ï¼Œæˆ‘æ£€æŸ¥ä»£ç æ—¶å‘ç°æ˜¯å› ä¸ºå®ƒçš„æ•°æ®åº“æœ‰é—®é¢˜ï¼Œä¸‹è½½çš„æ—¶å€™æ²¡æœ‰æŠŠå·²ä¸‹è½½çš„è¿›åº¦å†™åˆ°æ•°æ®åº“ã€‚ä»–é‡‡ç”¨çš„ä¸€ä¸ªæ•°æ®åº“æ¡†æ¶å«litepalã€‚è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡å‹æ•°æ®åº“ï¼Œæˆ‘å¹¶ä¸åå¯¹ç”¨æ¡†æ¶ï¼Œå°±æ²¿ç”¨äº†ä»–çš„åšæ³•ï¼Œä¿®æ”¹äº†ä»–çš„bugã€‚ç„¶åä¿®æ”¹äº†ä»–åœæ­¢çº¿ç¨‹çš„bugï¼ŒåŸºæœ¬ä¸Šå°±èƒ½å®ç°æ–­ç‚¹ç»­ä¼ çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å› ä¸ºçº¿ç¨‹å°‘äº†sleepæ–¹æ³•ï¼Œé€Ÿåº¦æœ‰äº†æ˜æ˜¾æå‡ã€‚&lt;/p&gt;
&lt;h4&gt;å¯¹é€Ÿåº¦æå‡çš„ä¼˜åŒ–&lt;/h4&gt;
&lt;p&gt;ç»æˆ‘çš„ç ”ç©¶ï¼Œä¸‹è½½é€Ÿåº¦ä¸»è¦å—é™äºç½‘ç»œï¼Œè¿˜æœ‰ä¸‹è½½ä½ è®¾ç½®çš„ç¼“å†²åŒºbufferçš„å¤§å°ã€‚å½“ç„¶ç½‘ç»œæ˜¯å‰æï¼Œç½‘ç»œä¸å¥½ï¼Œä½ è®¾ç½®çš„ä¸‹è½½bufferå†å¤§ä¹Ÿæ²¡æœ‰ç”¨ã€‚ä½†æ˜¯æˆ‘ä»¬çš„åº”ç”¨å› ä¸ºæ˜¯å±€åŸŸç½‘å†…ï¼Œç½‘ç»œä¸æ˜¯é—®é¢˜ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™bufferçš„å¤§å°å°±èµ·ä½œç”¨äº†ã€‚å½“åˆæˆ‘çœ‹å¾ˆå¤šçš„ä¸‹è½½ä¾‹å­ä»–ä»¬è®¾ç½®çš„bufferæ˜¯8KB,æˆ‘è·Ÿå…¶ä»–è®¨è®ºä¹‹åï¼Œè®¾ç½®512KBçš„å¤§å°ï¼Œé€Ÿåº¦æœç„¶æå‡ä¸å°ã€‚ç„¶åæˆ‘ä»¬é…ç½®äº†æ¯ä¸ªæ–‡ä»¶åˆ†ä¸¤å—è¿›è¡Œä¸‹è½½ï¼Œæ€»é€Ÿåº¦å¯è¾¾10MBæ¯ç§’ã€‚å¦‚æœè¿˜æœ‰æå‡çš„è¯ï¼Œå¯ä»¥å†åŠ å¤§è¿™ä¸ªbufferï¼Œè¿˜å¯ä»¥ä»ä¼˜åŒ–æ¯ä¸ªçº¿ç¨‹ä¸‹è½½æ—¶å†™æ–‡ä»¶ä¹‹åæ›´æ–°æ•°æ®åº“é‚£ä¸ªæ“ä½œã€‚&lt;/p&gt;
&lt;h4&gt;HTTPåè®®content-lengthé—®é¢˜&lt;/h4&gt;
&lt;p&gt;æµ‹è¯•åŒäº‹å‘ç°ä¸‹è½½å¤§æ–‡ä»¶æœ‰é—®é¢˜ã€‚æˆ‘ä¸€çœ‹é‚£ä¸ªå¤±è´¥çš„æ–‡ä»¶æ˜¯è¶…è¿‡2GBã€‚ç¬¬ä¸€ååº”æ˜¯æ˜¯ä¸æ˜¯æ•´æ•°æº¢å‡ºã€‚å› ä¸ºJavaä¸­intç±»å‹æ˜¯ä¸è¶…è¿‡2GBçš„ï¼ˆJavaçš„éƒ½æ˜¯æœ‰ç¬¦å·æ•°ï¼‰ã€‚æˆ‘ä¸€çœ‹åœ¨è·å–æ–‡ä»¶å¤§å°çš„æ—¶å€™ï¼Œåè®®è¿”å›çš„ç«Ÿç„¶æ˜¯0ï¼Œç„¶åå‘ç°Androidçš„HTTPåè®®getContentLengthè¿”å›çš„æ˜¯ä¸€ä¸ªintç±»å‹ï¼ã€‚æˆ‘é€šè¿‡æ–­ç‚¹è°ƒè¯•å‘ç°æœåŠ¡å™¨è¿”å›çš„åè®®çš„æ–‡ä»¶å¤§å°æ˜¯æ­£ç¡®çš„ï¼Œåªæ˜¯åœ¨ç»è¿‡getContentLengthè·å–çš„å€¼å°±å˜äº†ï¼Œå› ä¸ºæº¢å‡ºäº†ã€‚æ‰€ä»¥æˆ‘æ”¹æˆè‡ªå·±å»ä»headeré‡Œè§£æè¿™ä¸ªcontentLengthã€‚è¿™ä¸‹è·å–çš„æ–‡ä»¶å¤§å°å°±æ­£å¸¸äº†ã€‚&lt;/p&gt;
&lt;h4&gt;Android4.4ç³»ç»Ÿå†™å¤§æ–‡ä»¶bug&lt;/h4&gt;
&lt;p&gt;æ”¹æ­£äº†getContentLengthçš„é—®é¢˜åï¼Œä¸‹è½½è¿˜æ˜¯å¤±è´¥ï¼Œæˆ‘å°±çº³é—·äº†ã€‚ç„¶åè·Ÿè¸ªå‘ç°å¼‚å¸¸å‘ç”Ÿåœ¨RandomAccessFileçš„setLengthæ–¹æ³•ã€‚æˆ‘å°±åˆ°ç½‘ä¸Šæœè¿™ä¸ªå¼‚å¸¸ï¼Œæ‰¾äº†å¾ˆå¤šç»ˆäºåœ¨Google groudå‘ç°æœ‰äººä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¯´äº‹Android4.4ç³»ç»Ÿçš„ä¸€ä¸ªbugã€‚Googleçš„äººä¹Ÿå›åº”äº†ï¼Œæ˜¯åœ¨SDå¡ç›¸å…³çš„ç±»ä¸­çš„ä¸€ä¸ªbugï¼Œæ²¡æœ‰ç”¨çš„æ˜¯32ä½çš„æ–¹æ³•ï¼Œä»–ä»¬å·²ä¿®å¤è¿™ä¸ªbugã€‚æäº†åŠå¤©ï¼ŒåŸæ¥æ˜¯ç³»ç»Ÿçš„bugï¼Œç„¶åæˆ‘ç„¶æµ‹è¯•åŒäº‹æµ‹è¯•äº†æ›¿ä»–ç³»ç»Ÿï¼Œéƒ½æ²¡æœ‰é—®é¢˜ï¼Œç¡®å®åªæœ‰4.4æ‰æœ‰ã€‚è€Œä¸”å‘ç°äº†æ›´å¥‡æ€ªçš„é—®é¢˜ï¼Œä¸‹è½½4GBçš„æ–‡ä»¶ç«Ÿç„¶å¯ä»¥ï¼æˆ‘è‡³ä»Šè¿˜æ²¡ææ¸…æ¥šè¿™æ˜¯å•¥åŸå› ã€‚çŸ¥é“æ˜¯ç³»ç»Ÿé—®é¢˜åï¼Œå°†è¿™ä¸ªé—®é¢˜å…ˆæ˜¯æ”¾äº†ä¸€æ®µæ—¶é—´ï¼Œåæ¥æˆ‘æƒ³ä¸èƒ½ä¸‹è½½å¯¹ç”¨æˆ·æ¥è¯´ç¡®å®ä¸å¥½ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç»•è¿‡è¿™ä¸ªbugã€‚æ‰€ä»¥æˆ‘é’ˆå¯¹è¿™ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œé‡‡ç”¨å¦å¤–ä¸€ç§å†™æ–‡ä»¶çš„æ–¹å¼ï¼Œç”¨FileChannelæ¥å»ºç«‹ä¸€ä¸ªæŒ‡å®šå¤§å°çš„æ–‡ä»¶ï¼Œè¿™ç§æ–¹æ³•æ¯”RandomAccessFileçš„setContentLenæ–¹æ³•æ•ˆç‡ä½å¾ˆå¤šï¼Œä½†æ˜¯æ€»æ¯”ä¸èƒ½ç”¨å¥½å§ã€‚è‡³æ­¤è¿™ä¸ªbugå‘Šä¸€æ®µè½ã€‚&lt;/p&gt;
&lt;h4&gt;å…¶ä»–é—®é¢˜&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä¸‹è½½æ–‡ä»¶ä¹‹å‰æ˜¯å…ˆè¦åœ¨ç£ç›˜åˆ›å»ºä¸€ä¸ªåŒæ ·å¤§å°çš„æ–‡ä»¶ï¼Œç„¶åä¸‹è½½æ—¶å°±æ˜¯å†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚å¦‚æœä½ è¦ä¸‹è½½A.MOVæ–‡ä»¶ï¼Œç½‘ä¸Šçš„å¾ˆå¤šä¸‹è½½ä¾‹å­éƒ½æ˜¯ç›´æ¥å»ºç«‹ä¸€ä¸ªA.MOVæ–‡ä»¶ã€‚è¿™æ ·æ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºå¦‚æœç”¨æˆ·ç”¨åˆ«çš„æ–‡ä»¶ç®¡ç†åº”ç”¨å»æŸ¥çœ‹æ–‡ä»¶çš„æ—¶å€™ï¼Œçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶å°±æƒ³æ¶ˆè´¹ï¼Œå¯å®é™…ä¸Šè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ ¹æœ¬æ²¡æœ‰ä¸‹è½½å®Œï¼Œæ˜¯æ¶ˆè´¹ä¸äº†çš„ã€‚æ‰€ä»¥é€šå¸¸çš„åšæ³•å°±æ˜¯å¼€å§‹åˆ›å»ºçš„æ˜¯A.MOV.TMPæ–‡ä»¶ï¼Œç­‰çœŸæ­£ä¸‹è½½å®Œä¹‹åå†é‡å‘½åä¸ºA.MOVã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œæµ‹è¯•åŒå­¦å¾ˆå–œæ¬¢åšå‹åŠ›æµ‹è¯•ï¼Œä»–ä»¬ä¼šç–¯ç‹‚ä¸‹è½½æ–‡ä»¶ï¼Œæœ€ç»ˆç£ç›˜æ»¡äº†ï¼Œå°±å‡ºç°é—®é¢˜äº†ã€‚è™½ç„¶æˆ‘ä¸€æ—©å°±åšäº†é”™è¯¯æç¤ºï¼Œä¹Ÿå®šä¹‰å„ç§å¯èƒ½å‡ºç°çš„é”™è¯¯æç¤ºã€‚ä½†æ˜¯æœ‰äº›ç³»ç»Ÿåœ¨SDå¡æ»¡äº†ä¹‹åä¼šå¡æ­»ï¼Œç‰¹åˆ«æ˜¯å°ç±³çš„ç³»ç»Ÿã€‚æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯æˆ‘çš„ç¨‹åºé—®é¢˜é€ æˆç³»ç»Ÿå¡æ­»ï¼Œç»è¿‡ç ”ç©¶ä¹‹åæˆ‘å‘ç°æ˜¯ç³»ç»Ÿé—®é¢˜ï¼Œè€Œä¸”ä¸åŒçš„ç³»ç»Ÿä¸åŒååº”ã€‚æˆ‘æµ‹è¯•å‘ç°ä¸€èˆ¬ç•™è¶³20MBç©ºé—´å°±ä¸ä¼šæœ‰å¤ªå¤§çš„é—®é¢˜ã€‚æ‰€ä»¥åœ¨æ¯æ¬¡é—®ä¸‹ä¸‹è½½ä¹‹å‰ï¼Œæˆ‘éƒ½æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´å¯ä»¥ä¸‹è½½ï¼Œè¿™é‡Œé¢„ç•™äº†é¢å¤–çš„20MBç©ºé—´ã€‚&lt;/p&gt;
&lt;h1&gt;æ€»ç»“&lt;/h1&gt;
&lt;p&gt;è¿™ä¸€æ¬¡å†™ä¸‹è½½å™¨ç»™æˆ‘çš„æ”¶è·å¾ˆå¤šã€‚ä»å‰åŒäº‹çš„ä¸€å †çƒ‚æ‘Šå­å¼€å§‹ï¼Œbugæ— æ•°ï¼Œåˆ°æˆ‘æ¥æ‰‹ä¹‹ååŠŸèƒ½å®Œå–„ï¼Œå„ç§bugè§£å†³ï¼Œæˆ‘è‡ªå·±è¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ã€‚æˆ‘è§‰å¾—ä½ åšäº‹çš„æ€åº¦å†³å®šäº†ä½ èƒ½æŠŠäº‹æƒ…åšæˆæ€æ ·ã€‚ä¸è¿‡è¿™ä¸ªåº“ä¹Ÿè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œä¾‹å¦‚è¿˜æ²¡æœ‰ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œé€Ÿåº¦åº”è¯¥è¿˜å¯ä»¥æå‡ã€‚ç°åœ¨æš‚æ—¶å¤Ÿç”¨ï¼Œå°±å‘Šä¸€æ®µè½äº†ã€‚æˆ‘å·²ç»å°†è¿™å—ç‹¬ç«‹æˆä¸€ä¸ªåº“ï¼Œæ”¾åˆ°äº†githubä¸Šé¢ã€‚å¸Œæœ›æœ‰éœ€è¦çš„äººå¯ä»¥ç”¨å®ƒï¼Œå¹¶ä¸”æ”¹å–„å®ƒã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯githubåœ°å€ï¼Œæ¬¢è¿ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/szuwest/DownloadLib"&gt;Android Downlaoder&lt;/a&gt;&lt;/p&gt;</summary><category term="Android Download"></category></entry><entry><title>å†è°ˆiOSå¼€å‘å’ŒAndroidå¼€å‘ä¹‹é—´çš„åˆ‡æ¢</title><link href="http://szuwest.github.io/zai-tan-ioskai-fa-he-androidkai-fa-zhi-jian-de-qie-huan.html" rel="alternate"></link><updated>2015-07-18T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2015-07-18:zai-tan-ioskai-fa-he-androidkai-fa-zhi-jian-de-qie-huan.html</id><summary type="html">&lt;h1&gt;å†è°ˆiOSå¼€å‘å’ŒAndroidå¼€å‘ä¹‹é—´çš„åˆ‡æ¢&lt;/h1&gt;
&lt;p&gt;ç”±äºé¡¹ç›®å˜åŒ–çš„åŸå› ï¼ŒAndroidå¼€å‘å¢åŠ äº†å¾ˆå¤šäººæ‰‹ï¼Œè€ŒiOSå¼€å‘å›¢é˜Ÿåˆè¢«è°ƒèµ°ï¼Œåªç•™ä¸‹äº†ä¸¤ä¸ªäººã€‚æ‰€ä»¥iOSå¼€å‘è´Ÿè´£äººæ‰¾æˆ‘è°ˆè¯å¸Œæœ›æˆ‘è¿‡å»å¸®å¿™åšiOSã€‚å‡ºäºå¯¹é¡¹ç›®æ•´ä½“è¿›åº¦è€Œè¨€ï¼Œæˆ‘å»å¸®å¿™iOSå¼€å‘æ˜¯æœ€å¥½çš„ã€‚æˆ‘å¯ä»¥åœ¨iOSå’ŒAndroidå¼€å‘ä¹‹é—´éšæ„åˆ‡æ¢ï¼Œè€ŒAndroidå¼€å‘ç¡®å®æœ‰ç‚¹å¤šäººï¼ŒiOSäººæ‰‹ä¸¥é‡ä¸è¶³ï¼Œæ‹›äººå¾ˆéš¾ï¼Œå…¶ä»–äººè½¬iOSå¼€å‘ä¹Ÿéœ€è¦æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘å°±ç­”åº”äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¯´èµ·æˆ‘çš„Androidå’Œå¼€å‘ç»å†ï¼ŒçœŸæ˜¯å¾ˆå¤šæ„Ÿæ¦‚ã€‚ä»æˆ‘å†³å®šç¦»å¼€ç¬¬ä¸€å®¶åšèŠ¯ç‰‡çš„å…¬å¸å¼€å§‹ï¼Œæˆ‘å°±æƒ³è¿›å…¥iOSå¼€å‘æˆ–è€…Androidå¼€å‘ã€‚å…¶å®æˆ‘æœ€å¼€å§‹æ˜¯æƒ³åšiOSå¼€å‘çš„ï¼Œä½†æ˜¯å½“æ—¶å¾ˆéš¾æ‰¾ï¼Œæˆ‘ä¸ä½†æ²¡æœ‰ç»éªŒï¼Œè¿˜æ˜¯ä»ä¸€å®¶èŠ¯ç‰‡å…¬å¸åˆšè·³å‡ºæ¥ï¼ˆè™½ç„¶æˆ‘æ˜¯è½¯ä»¶å·¥ç¨‹ä¸“ä¸šå‡ºèº«ï¼Œä½†æ˜¯ä¸€å¼€å§‹å´è¿›å…¥äº†èŠ¯ç‰‡è¡Œä¸šï¼Œè¯´å¤šäº†éƒ½æ˜¯æ³ªï¼‰ã€‚æœ€ç»ˆä¸€å®¶å°å…¬å¸æ¥å—äº†æˆ‘åšAndroidå¼€å‘ï¼Œé‚£æ—¶å€™æ˜¯2011å¹´åˆã€‚ä½†æ˜¯åšäº†å¤§åŠå¹´å¤šçš„Androidå¼€å‘ä¹‹åï¼Œå…¬å¸å‘ç°Androidå¾ˆéš¾èµšé’±ï¼Œå°±æƒ³è½¬åšiOSå¼€å‘ï¼Œå› ä¸ºå®ƒçš„ç”Ÿæ€ç¯å¢ƒå¥½ã€‚å¼€å§‹æ˜¯æˆ‘ä»¬è€å¤§å»åšï¼Œä½†æ˜¯ä»–æäº†åŠå¤©è¿˜æ²¡æå‡ºä¸ªhelloworldåˆ—å­ï¼Œæ‰€ä»¥å°±è®©æˆ‘å»åšäº†ã€‚ç”±äºæˆ‘å¤§å­¦çš„æ—¶å€™å°±å­¦è¿‡Object-Cï¼Œä¹Ÿæ¥è§¦Object-Cå¼€å‘ï¼Œæ‰€ä»¥å¾ˆå¿«å°±ä¸Šæ‰‹äº†ã€‚å†åæ¥ï¼Œè‹¦äºå°å…¬å¸æŠ€æœ¯è¿›æ­¥æ…¢ï¼Œå°±è·³æ§½æ¥äº†ç°åœ¨çš„Xå…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ˜¯ä»¥AndroidæŠ€æœ¯é¢è¿›å…¥Xå…¬å¸çš„ï¼Œä½†æ˜¯è¿›æ¥ä¹‹åï¼Œæˆ‘çš„è€å¤§è·Ÿæˆ‘è¯´ï¼Œä½ æƒ³åšAndroidè¿˜æ˜¯iOSå¼€å‘ï¼Œå› ä¸ºæˆ‘æœ¬èº«ä¹Ÿåœ¨åšiOSå¼€å‘ï¼Œä¹Ÿåƒå¾€è¿™ä¸ªæ–¹å‘ï¼Œå°±é€‰äº†iOSå¼€å‘ã€‚é‚£ä¸ªæ—¶å€™ï¼Œé¡¹ç›®é‡‡ç”¨çš„æ–¹å¼å…¨ç¼–ç æ–¹å¼ï¼Œæ²¡æœ‰ç”¨xibï¼Œç„¶åé‚£ä¸ªæ—¶å€™è¿˜æ˜¯MRCã€‚æƒ³æƒ³é‚£ä¸ªæ—¶å€™é‚£ç§æ–¹å¼è¿˜çœŸæ˜¯å­¦åˆ°äº†ä¸å°‘ä¸œè¥¿ã€‚ä½†æ˜¯åˆæ˜¯åšäº†å¤§åŠå¹´ä¹‹åï¼ŒiOSé¡¹ç›®æ²¡æœ‰äº†ï¼ŒAndroidçš„é¡¹ç›®åè€Œå¾ˆç´§å¼ ï¼Œæˆ‘ä»¬æ•´ä¸ªå›¢é˜Ÿå°±è½¬å»åšAndroidå¼€å‘äº†ã€‚ã€‚ã€‚å½“æ—¶æ•´ä¸ªå›¢é˜Ÿåªæœ‰æˆ‘æ‡‚Androidå¼€å‘ã€‚Xå…¬å¸çš„åŸºå› å°±æ˜¯è¿™æ ·å­ï¼Œéšæ„åˆ‡æ¢å’Œè°ƒåŠ¨å›¢é˜Ÿçš„å¼€å‘æ–¹å‘å’Œé¡¹ç›®ã€‚è¿™ä¹ˆå¤šå¹´äº†ï¼Œæˆ‘ç®—ç»å†äº†å‡ æ¬¡è¿™ç§è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;è½¬åšAndroidå¼€å‘ä¹‹åæ²¡æœ‰å¤šä¹…ï¼Œæˆ‘å°±å‡ºæ¥åŠ å…¥äº†ä¸€ä¸ªåˆ›ä¸šå…¬å¸ï¼Œåœ¨åˆ›ä¸šå…¬å¸è´Ÿè´£Androidé¡¹ç›®çš„é‡æ„ä¸å¼€å‘ã€‚è¿™æ¬¡é‡æ„ä¸å¼€å‘ç”±æˆ‘ç‹¬è‡ªä¸€äººæ“åˆ€ï¼Œæ‰€ä»¥æ”¶è·è¿˜æ˜¯æŒºå¤§çš„ã€‚ä¸è¿‡ä¸€å¹´ä¹‹åï¼Œæˆ‘æœ€ç»ˆè¿˜æ˜¯ç¦»å¼€äº†é‚£ä¸ªåˆ›ä¸šå…¬å¸ï¼Œæˆ‘ç•™ä¸‹çš„æ¡†æ¶æˆ‘è§‰å¾—å¤Ÿä»–ä»¬è¿­ä»£ä¸¤ä¸ªå¤§ç‰ˆæœ¬äº†ã€‚å‰æ®µæ—¶é—´æˆ‘çœ‹äº†ä»–ä»¬æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæ•´ä½“æ¶æ„è¿˜æ˜¯æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œæˆ‘è§‰å¾—æˆ‘é‚£ä¸ªæ¶æ„è¿˜åœ¨æ”¯æ’‘ä»–ä»¬ã€‚ç¦»å¼€åˆ›ä¸šå…¬å¸ä¹‹åï¼Œæˆ‘åˆå›åˆ°äº†Xå…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°Xå…¬å¸ï¼Œæˆ‘ä¹Ÿå¯ä»¥é€‰æ‹©æ–¹å‘ã€‚å› ä¸ºå½“æ—¶çš„é¡¹ç›®æ˜¯å°†å…¬å¸çš„é€šç”¨çš„å…¬å…±ä¸šåŠ¡å°è£…æˆSDKæ¥ç»™å„ä¸ªé¡¹ç›®ç”¨ã€‚Androidçš„SDKå·²ç»æœ‰å›¢é˜Ÿåœ¨åšå¹¶ä¸”åšå¾—å·®ä¸å¤šäº†ã€‚è€ŒiOSçš„å› ä¸ºæˆ‘ä»¬æƒ³åšè·¨å¹³å°çš„ï¼Œæ‰€ä»¥ç”¨c++æ¥åšSDKï¼Œç„¶åå†å°è£…ä¸€ä¸ªObjectâ€”Cçš„æ¥å£ç»™iOSç”¨ã€‚è€Œc++è¿™è¾¹å¾ˆç¼ºäººï¼Œæˆ‘å°±åŠ å…¥äº†ã€‚å› ä¸ºæˆ‘å¾ˆæ„¿æ„å†™C++ï¼Œæƒ³æŒ‘æˆ˜ä¸€ä¸‹è‡ªå·±ã€‚å¤§æ¦‚å†™äº†ä¸€ä¸ªå¤šæœˆçš„C++ï¼Œä¹Ÿå°è£…äº†Object-Cæ¥å£ï¼Œæˆ‘ä»¬å†™çš„SDKé©¬ä¸Šç”¨åˆ°äº†é¡¹ç›®ä¸­ã€‚å› ä¸ºæœ‰ä¸€ä¸ªiOSé¡¹ç›®åŠŸèƒ½å¾ˆåºå¤§ï¼Œä»–ä»¬è¦ç”¨æˆ‘ä»¬çš„SDKï¼Œå¹¶ä¸”æˆ‘åŠ å…¥äº†ä»–ä»¬é¡¹ç›®ï¼Œæˆ‘åˆè½¬å…¥äº†iOSå¼€å‘ã€‚æˆ‘è‡ªå·±å†™c++SDKï¼Œç„¶åå†™Object-Cæ¥å£è½¬æ¥ï¼Œç„¶åç›´æ¥ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œä¸€æ¡é¾™æˆ‘éƒ½åšäº†ã€‚å®é™…ä¸Šï¼Œæˆ‘å¾ˆå–œæ¬¢å†™c++é‚£ä¸€ä¸ªå¤šæœˆï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œå¯¹c++æœ‰äº†è¿›ä¸€æ­¥çš„äº†è§£å’Œæœ‰äº†c++å’ŒObject-Cæ··åˆç¼–ç¨‹ç»éªŒã€‚&lt;/p&gt;
&lt;p&gt;ç„¶ååˆåšäº†å¤§åŠå¹´iOSçš„é¡¹ç›®ï¼Œè¿™ä¸ªé¡¹ç›®çªç„¶è§£æ•£äº†ï¼Œå¤±è´¥äº†ã€‚å¤§éƒ¨åˆ†çš„äººå‘˜ç¦»èŒï¼ŒåŸæ¥çš„é¡¹ç›®ç»ç†é‡ç»„é¡¹ç›®ï¼Œå¸å–ç»éªŒæ•™è®­ï¼Œå°å›¢é˜Ÿä½œæˆ˜ã€‚ä»–çš„æƒ³æ³•æ˜¯ç»„ç»‡å°éƒ¨åˆ†äººæ¥é‡åšé¡¹ç›®ï¼Œå¼€å§‹åªåšAndroidç«¯ã€‚è€Œå½“æ—¶ç•™ä¸‹æ¥çš„äººä¸å¤šï¼Œè€Œä¸”é¡¹ç›®ç»ç†åªæƒ³è¦ç²¾è‹±ã€‚ä»–ä»¬æ‰¾åˆ°äº†æˆ‘ã€‚è¯´å®è¯ï¼Œä¸å¤§ä¸å°çš„Xå…¬å¸ï¼Œæˆ‘è¿˜çœŸæ²¡å‘ç°æœ‰å‡ ä¸ªAndroidå¼€å‘ç»éªŒä¸°å¯Œå’ŒæŠ€æœ¯çœŸçš„å¾ˆå¥½çš„ã€‚ä»¥å‰æˆ‘åˆšæ¥Xå…¬å¸çš„æ—¶å€™çš„é‚£ä¸ªå›¢é˜Ÿï¼Œå·²ç»åŸºæœ¬éƒ½ç¦»å¼€äº†ï¼Œä»–ä»¬éƒ½å»å¤§å…¬å¸æˆ–åˆ›ä¸šã€‚æˆ‘ç»å¯¹æ˜¯å›¢é˜Ÿäº†çš„Androidç»éªŒæœ€ä¸°å¯Œå’ŒæŠ€æœ¯æ¯”è¾ƒå¥½çš„äººã€‚åˆšæ­»æ‰çš„é¡¹ç›®çš„Androidç«¯çƒ‚å¾—æˆ‘éƒ½ä¸å¿å¿ƒçœ‹ã€‚æ–°é¡¹ç›®æˆ‘åŠ å…¥äº†Androidå¼€å‘ã€‚&lt;/p&gt;
&lt;p&gt;æ–°é¡¹ç›®çš„Androidå¼€å‘æ•´ä¸ªæ¡†æ¶ï¼Œæœ‰å¤§éƒ¨åˆ†æ˜¯æˆ‘æ­å»ºçš„ï¼ŒUIéƒ¨åˆ†ä¼°è®¡æœ‰90%æ˜¯æˆ‘å†™çš„ã€‚ä½¿ç”¨èµ·æ¥ä½“éªŒè¿˜ä¸é”™ï¼Œä¹Ÿå¾—åˆ°äº†ä¸€äº›äººçš„è®¤å¯å’Œèµèµã€‚ä½†æ˜¯æ•´ä¸ªé¡¹ç›®æœ‰äº›åœ°æ–¹æˆ‘è¿˜æ˜¯ä¸å¤ªæ»¡æ„ï¼Œç‰¹åˆ«æ˜¯é¡¹ç›®packageçš„å‘½åå’Œåˆ’åˆ†ï¼Œå› ä¸ºè¿™ä¸ªæœ€å¼€å§‹ä¸æ˜¯æˆ‘åšçš„ã€‚æˆ‘åˆä¸èƒ½è¿›è¡Œå¤§æ”¹åŠ¨ï¼Œåªå¥½å¿äº†ã€‚è¿™ç•™ä¸‹äº†éšæ‚£ã€‚&lt;/p&gt;
&lt;p&gt;åˆåšäº†å¤§åŠå¹´ï¼Œå…¬å¸å†³å®šå°†è¿™ä¸ªé¡¹ç›®å‡çº§ï¼Œè·Ÿå¦å¤–ä¸€ä¸ªå…¬å¸æˆ˜ç•¥äº§å“åˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°é¡¹ç›®ã€‚ä¹Ÿå°±æ˜¯ç°åœ¨è¿™ä¸ªé¡¹ç›®ã€‚æˆ‘åˆè½¬å…¥äº†iOSå¼€å‘ï¼Œåˆ°ä»Šå¤©ä¸ºæ­¢ï¼Œä¹Ÿæœ‰åŠä¸ªæœˆäº†ã€‚å®é™…ä¸Šï¼Œåœ¨é¡¹ç›®åˆå¹¶ä¹‹å‰ï¼Œè€é¡¹ç›®çš„iOSæœ¬çš„é¡¹ç›®å·¥ç¨‹å’ŒåŸºç¡€æ¶æ„æ˜¯æˆ‘å»ºçš„ã€‚æˆ‘å½“æ—¶æ˜¯å‚è€ƒäº†Androidçš„æ¡†æ¶å¹¶æ”¹è‰¯äº†æ¥åšçš„ã€‚æ­å¥½æ¡†æ¶ä¹‹åï¼Œå› ä¸ºæœ‰æ–°çš„å›¢é˜Ÿè¿›æ¥æ¥æ‰‹ï¼Œæˆ‘å°±è½¬äº¤ç»™ä»–ä»¬äº†ã€‚å¯æ˜¯ç°åœ¨æˆ‘ä¸€çœ‹ï¼ŒåŸæ¥çš„æ¡†æ¶åªç•™ä¸‹äº†ä¸€ç‚¹ï¼Œå¾ˆå¤šéƒ½è¢«å¹²æ‰äº†ã€‚æˆ‘å½“æ—¶æ­å»ºæ¡†æ¶ç¡®å®æœ‰ç‚¹å¤§ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘è€ƒè™‘åˆ°äº†ä¹‹åçš„ä¸šåŠ¡å’ŒåŠŸèƒ½æ¥åšçš„ã€‚ä½†æ˜¯æˆ‘ä¼°è®¡æ˜¯å› ä¸ºiOSè´Ÿè´£äººä¸äº†è§£æˆ‘ä»¬é¡¹ç›®çš„æ•´ä½“è§„åˆ’ï¼Œçœ‹ç€æˆ‘æ­æ¡†æ¶å±‚æ¬¡æœ‰ç‚¹å¤šï¼Œå°±ç®€åŒ–äº†ã€‚è¿™ä¸€ç®€åŒ–å°±ä½¿å¾—æ¡†æ¶çš„å¯æ‰©å±•è¡Œå¤§å¤§é™ä½ï¼Œç°åœ¨è¦åšæ–°ä¸šåŠ¡äº†ï¼Œæˆ‘è§‰å¾—å†è¿™ä¸ªè¢«é˜‰æ‰çš„æ¡†æ¶ä¸Šä¸å¥½åšã€‚ã€‚è€Œä¸”æˆ‘è¿˜å‘ç°è¿™é‡Œé¢ä»£ç å¾ˆå¤šé‡å¤çš„ï¼ŒåŒä¸€ä¸ªåè®®ç«Ÿç„¶åœ¨ä¸åŒçš„æ¨¡å—éƒ½å®ç°äº†ï¼Œè€Œä¸”æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦çš„é‚£ç§ã€‚è¿™è¯´æ˜å¼€å‘äººå‘˜ä¹‹é—´æ²Ÿé€šä¸å¤šï¼Œéƒ½æ˜¯å„å¹²å„çš„ã€‚å¦å¤–ä¸€ä¸ªå°±æ˜¯è¿™ä¸ªé¡¹ç›®æ¡†æ¶æœ‰é—®é¢˜ï¼Œåè®®çš„æ—¶å€™ç«Ÿç„¶ä¸æ˜¯ä¸“é—¨é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¤§å®¶å„è‡ªå®ç°ï¼Œé‡å¤äº†ä¹Ÿä¸çŸ¥é“ã€‚å¦‚æœé¡¹ç›®ç»“æ„åˆ’åˆ†å¾—å¥½è¯ï¼Œæœ‰ä¸“é—¨çš„groud,æœ‰ä»€ä¹ˆåè®®å·²å®ç°äº†ä¸€ç›®äº†ç„¶ã€‚é¡¹ç›®è´Ÿè´£äººä¸ä½œä¸ºä¹Ÿè„±ä¸äº†å¹²ç³»ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºé¡¹ç›®é—®é¢˜ï¼Œæˆ‘å¶å°”è¿˜ä¼šæ‰“å¼€Androidçš„é¡¹ç›®æ¥åšå‚è€ƒã€‚æˆ‘å‘ç°æ–°åŠ å…¥å¼€å‘è€…åï¼Œé¡¹ç›®è¢«æå¾—é¢ç›®å…¨éã€‚æ¯ä¸ªæ–°äººå¯èƒ½è§‰å¾—è€é¡¹ç›®æœ‰äº›åœ°æ–¹çœ‹ç€ä¸çˆ½ï¼Œéƒ½æƒ³è‡ªå·±é‡æ–°å®ç°ä¸€éã€‚æ”¹çš„æœ€ææ€–çš„æ˜¯åè®®å±‚ï¼Œè¿™ä¸ªå¼€å§‹ç”±åˆ«äººæ­å»ºçš„ã€‚UIå±‚å˜åŠ¨å¾—è¿˜å¥½ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯å®Œå…¨æ˜¯æˆ‘æ­å»ºçš„ï¼Œæ¨¡å—åˆ’åˆ†å¤±è´¥æ¸…æ¥šï¼Œå‘½åä¹Ÿè¿˜å¥½ï¼Œå¤§å®¶éƒ½éµå¾ªã€‚åè®®å±‚å¼€å§‹æˆ‘ä»¬éƒ½æ˜¯è‡ªå·±å†™å¾—æ¡†æ¶ï¼Œæ–°äººä¸€æ¥ï¼Œä»–ä»¬éå¸¸ä¸çˆ½ã€‚åœ¨æœ€åˆé¡¹ç›®å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæœ‰ç‚¹ä¸çˆ½åè®®å±‚çš„è¿™ç§å®ç°ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºæ¢æˆåˆ«çš„æ¡†æ¶ä¹Ÿä¸è§å¾—æœ‰å¤šå¥½ï¼Œå¹¶ä¸”åšé¡¹ç›®è¦è€ƒè™‘æ—¶é—´æˆæœ¬å’Œå…¶ä»–çš„å­¦ä¹ æˆæœ¬ã€‚æˆ‘å°±ä¿ç•™äº†ã€‚ä½†æ˜¯æ–°åŠ å…¥çš„å…¶ä»–åŒäº‹ä»–ä»¬è§‰å¾—ä¸çˆ½ï¼Œå°±æƒ³æ¢æˆVolleyï¼Œç„¶åè¿˜æœ‰äººè¯´è¦ç”¨Retrofitï¼Œè¿˜è¦ç”¨EventBusã€‚åŸæ¥çš„é¡¹ç›®æ•°æ®åº“ç”¨å¾—å°‘ï¼Œä»–ä»¬åˆåŠ å…¥äº†GreenDaoä¹‹ç±»çš„ï¼Œæœ‰äººè¦ç”¨æ³¨è§£ã€‚å…¶å®ç”¨è¿™äº›æ–°æ¡†æ¶æ–°æŠ€æœ¯æˆ‘å¹¶ä¸åå¯¹ï¼Œæˆ‘æ²¡æƒ³åˆ°ä»–ä»¬ä¼šè¿™ä¹ˆçƒ­è¡·ç”¨ã€‚æœ‰äº›ç”¨äº†æ¡†æ¶ç¡®å®çœäº†äº‹ï¼Œå¯æ˜¯æˆ‘çœ‹åˆ°æœ‰äº›ç”¨äº†æ¡†æ¶ä¹‹åä»£ç ç»“æ„ä¸€å›¢ç³Ÿï¼Œæˆ‘æœ‰ç‚¹å—ä¸äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ‰åŠä¸ªå¤šæœˆï¼Œæˆ‘å°±å·²ç»ä¸å¤ªèƒ½è®¤å‡ºè¿™ä¸ªé¡¹ç›®çš„æ¡†æ¶äº†ã€‚ã€‚æˆ‘å‘ç°æŠ€æœ¯äººå‘˜éƒ½æ˜¯å¾ˆè‡ªæˆ‘ï¼Œçœ‹åˆ°ä¸çˆ½çš„åŠŸèƒ½æ¯ä¸ªäººéƒ½æƒ³è‡ªå·±æ¥å®ç°ä¸€æŠŠã€‚æˆ‘è§‰å¾—æˆç†ŸæˆæŠ€æœ¯äººå’Œæ™®é€šæŠ€æœ¯äººå‘˜çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ï¼šå½“åŠ å…¥ä¸€ä¸ªæ–°é¡¹ç›®çš„æ—¶å€™ï¼Œä»–è¦å®ç°ä¸€ä¸ªåŠŸèƒ½æˆ–è€…æ–¹æ³•ï¼Œä»–ä»¬å»è¯¥é¡¹ç›®ä¸­æ˜¯ä¸æ˜¯å·²ç»æœ‰å®ç°ï¼Œæœ‰çš„è¯å°±ç›´æ¥æ‹¿æ¥ç”¨ï¼Œæˆ–è€…æ‰©å±•å®ƒã€‚è¿˜æœ‰ä»–ä¼šå°½é‡å»é€‚åº”æ–°é¡¹ç›®çš„ä»£ç é£æ ¼ï¼Œä¸æ˜¯ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å°±ç”¨è‡ªå·±çš„é£æ ¼ã€‚æˆ‘è§‰å¾—æ¯ä¸ªäººéƒ½èƒ½è¿™ä¹ˆæƒ³è¿™ä¹ˆåšçš„è¯ï¼Œä»£ç ç®¡ç†ä¼šå˜å¾—å®¹æ˜“å¾ˆå¤šã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;æœ¬æ¥æˆ‘æ˜¯æƒ³å†™iOSå’ŒAndroidå¼€å‘çš„æŠ€æœ¯å¿ƒå¾—ï¼Œå†™ç€å°±å˜æˆäº†åæ§½ã€‚ã€‚ã€‚æˆ‘æƒ³è¯´çš„æ˜¯ç»å†è¿™å¤šiOSå¼€å‘å’ŒAndroidå¼€å‘åˆ‡æ¢ä¹‹åï¼Œæˆ‘å¯¹Androidå¼€å‘å’ŒiOSå¼€å‘æœ‰äº†è¾ƒå¤§çš„æå‡ï¼Œä»¥å‰æˆ‘åŸºæœ¬ä¸Šæ¯”è¾ƒçœ‹å¥½iOSå¼€å‘çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘è§‰å¾—è¿™ä¸¤è€…å¹¶æ²¡æœ‰æœ¬è´¨çš„å´åˆ«ï¼ŒiOSå¼€å‘æ˜¯ç”Ÿæ€ç¯å¢ƒæ¯”è¾ƒå¥½ï¼Œä½†æ˜¯Androidå¼€å‘ä¹Ÿæœ‰å¾ˆå¤šå¥½å¤„ã€‚IDEçš„è¯Android studioä¹Ÿè¶Šæ¥è¶Šå¥½ã€‚è‡³äºJavaå’ŒObject-Cè¯­è¨€ï¼Œå„æœ‰ä¼˜åŠ£ã€‚Javaçš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒå¾ˆå¥½åšæ¡†æ¶ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¼€æºåº“æ”¯æŒã€‚Object-Cçš„ç¼ºç‚¹æ˜¯å®ƒæ²¡æœ‰å‘½åç©ºé—´å’Œæ²¡æœ‰æ³›å‹ï¼Œè¿™å¯¼è‡´ä¸€ä¸ªä¸å¥½å°±æ˜¯æ–‡ä»¶åå’Œæ–¹æ³•åå¾ˆé•¿ã€‚å½“ç„¶Object-Cä¹Ÿæœ‰å¾ˆå¤šå¥½å¤„ã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®çš„æ¶æ„å…¶å®å¾ˆé‡è¦ï¼Œä¸€ä¸ªå¥½çš„æ¶æ„å¯ä»¥è®©å‚ä¸å…¶ä¸­çš„å¼€å‘äººå‘˜å¾ˆä¹æ„æŒ‰ç…§å…¶ä¸­çš„è§„åˆ™åŠäº‹ï¼Œåä¹‹å°±ä¼šå¾ˆä¹±ï¼Œå¯èƒ½æœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œåé¢çš„é¡¹ç›®å˜å¤§ä¹‹åæ‰©å±•å¾ˆå›°éš¾ã€‚ &lt;/p&gt;</summary><category term="Android iOS"></category></entry><entry><title>Androidå›¾ç‰‡ç¼“å­˜å’Œç›¸å…³å¼€æºé¡¹ç›®</title><link href="http://szuwest.github.io/androidtu-pian-huan-cun-he-xiang-guan-kai-yuan-xiang-mu.html" rel="alternate"></link><updated>2015-05-16T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2015-05-16:androidtu-pian-huan-cun-he-xiang-guan-kai-yuan-xiang-mu.html</id><summary type="html">&lt;h1&gt;Androidå›¾ç‰‡ç¼“å­˜å’Œç›¸å…³å¼€æºé¡¹ç›®&lt;/h1&gt;
&lt;p&gt;ç°åœ¨å‡ ä¹æ‰€æœ‰å¤§ä¸€ç‚¹çš„Androidé¡¹ç›®éƒ½ä¼šç”¨åˆ°å›¾ç‰‡ç¼“å­˜ã€‚è€ŒAndroidåº”ç”¨çš„å†…å­˜å ç”¨å¤§æˆ·å°±æ˜¯å›¾ç‰‡ï¼Œå‡ ä¹æ‰€æœ‰å†…å­˜é—®é¢˜éƒ½ä¼šæ¶‰åŠåˆ°å›¾ç‰‡é—®é¢˜ï¼Œè€Œå·²å›¾ç‰‡ä¸ºä¸»çš„åº”ç”¨ä¹Ÿä¼šæ¶‰åŠåˆ°æ€§èƒ½é—®é¢˜ã€‚æˆ‘è§‰å¾—æ¯ä¸€ä¸ªèµ„æ·±çš„Androidå·¥ç¨‹å¸ˆéƒ½è¦å¯¹å›¾ç‰‡ç¼“å­˜æŠ€æœ¯æœ‰æ‰€äº†è§£ï¼Œå¹¶ä¸”æœ‰è‡ªå·±æƒ³æ³•ã€‚å›¾ç‰‡ç¼“å­˜æ˜¯åœ¨é¢è¯•åˆ«äººæ—¶å¿…é—®çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡ç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤ç‚¹ï¼šå†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜ï¼Œå½“ç„¶è¿˜æœ‰å¿…ç„¶è¦æ¶‰åŠçš„å›¾ç‰‡è§£ç ï¼Œå›¾ç‰‡ä¸‹è½½ï¼Œè¿™é‡Œä¸»è¦è®²è®²å†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜ï¼Œé™„å¸¦è¯´ä¸€ä¸‹å›¾ç‰‡è§£ç å’Œä¸‹è½½ã€‚&lt;/p&gt;
&lt;h2&gt;å†…å­˜ç¼“å­˜&lt;/h2&gt;
&lt;p&gt;ç”±äºä¸€å¼ å›¾ç‰‡åŸºæœ¬ä¸Šä¼šè¢«é‡ç”¨æˆ–è€…åœ¨å¤šä¸ªç•Œé¢æ˜¾ç¤ºï¼Œè€Œå›¾ç‰‡çš„ä¸‹è½½å’Œè§£ç éƒ½æ˜¯æ¯”è¾ƒè€—æ—¶çš„åŠ¨ä½œï¼Œè¦ç»™ç”¨æˆ·æ¯”è¾ƒå¥½çš„ä½“éªŒï¼Œå°†ä¸€å¼ å›¾ç‰‡ç¼“å­˜åœ¨å†…å­˜ä¸­å°±å°¤ä¸ºå¿…è¦ã€‚å¦‚æœä¸€ä¸ªåº”ç”¨å›¾ç‰‡æ¯”è¾ƒå¤šï¼Œè¦å°†æ‰€æœ‰å›¾ç‰‡éƒ½ç¼“å­˜åœ¨å†…å­˜ä¸­æ˜¾ç„¶ä¸ç°å®ï¼Œç‰¹åˆ«æ˜¯æ¯”è¾ƒä½ç«¯çš„æœºå™¨ä¸Šï¼Œå†…å­˜éå¸¸æœ‰é™ã€‚æ‰€ä»¥è¿™ä¸ªå†…å­˜ç¼“å­˜å¿…ç„¶æœ‰æ‰€é™åˆ¶ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç¼“å­˜æ± è®¾ç½®å¤šå¤§ï¼Œå¹¶ä¸”æ»¡äº†ä¹‹åæ€ä¹ˆå¤„ç†æˆäº†è¦ç‚¹ã€‚æˆ‘ä»¬çŸ¥é“Androidç³»ç»Ÿä¸­ç»™æ¯ä¸ªåº”ç”¨è®¾ç½®äº†æœ€å¤§å †ï¼Œè¶…å‡ºäº†è¿™ä¸ªæœ€å¤§å †é™åˆ¶å°±ä¼šæŠ¥OutOfMemoryé”™è¯¯ã€‚æ‰€ä»¥ä¸€èˆ¬å°±æ˜¯æ ¹æ®è¿™ä¸ªæœ€å¤§å †æ¥è®¾ç½®å›¾ç‰‡ç¼“å­˜æ± çš„å¤§å°ï¼Œä¸šå†…æ™®éåšæ³•æ˜¯å–æœ€å¤§å †å†…å­˜çš„8åˆ†ä¹‹ä¸€ï¼Œè¿™ä¸ªç»éªŒå€¼ï¼Œæˆ‘è§‰å¾—å¯ä»¥åº”ç”¨æƒ…å†µåšè°ƒæ•´ã€‚è€Œç¼“å­˜æ± æ»¡äº†ä¹‹åè¯¥åˆè¦åŠ å…¥æ–°çš„å›¾ç‰‡ï¼Œæ€ä¹ˆå¯¹å·²åœ¨æ± ä¸­çš„å›¾ç‰‡ç§»é™¤ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ã€‚æœ€å¸¸ç”¨çš„æ˜¯LRUï¼ˆleast recently usedï¼‰ç®—æ³•ã€‚æˆ‘ä¸€èˆ¬ä¼šé—®é¢è¯•è€…è¿™ä¸ªç®—æ³•æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œçœ‹è¿‡ä»£ç çš„äººæˆ–è€…ç®—æ³•å­¦å¾—æ¯”è¾ƒå¥½çš„äººå°±èƒ½ç­”å‡ºã€‚è¿˜æœ‰ç”¨çš„æ¯”è¾ƒå¤šå¤§ç®—æ³•æ˜¯ä½¿ç”¨é¢‘ç‡ç®—æ³•ï¼Œç§»é™¤æœ€å¤§å›¾ç‰‡ç®—æ³•ç­‰ã€‚ç„¶è€Œæˆ‘è®¤ä¸ºæ¯”è¾ƒå¥½çš„å†…å­˜ç¼“å­˜æŠ€æœ¯è¿˜åº”ç»“åˆå¼±å¼•ç”¨æ¥ç”¨ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä»€ä¹ˆäº‹å¼ºå¼•ç”¨ï¼Œè½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ä¹Ÿæ˜¯æˆ‘å¿…è€ƒé¡¹ã€‚ä¸ºä»€ä¹ˆè¿˜è¦ç»“åˆå¼±å¼•ç”¨æ¥ä½¿ç”¨æ¯”è¾ƒå¥½å‘¢ï¼Ÿå¦‚æœä¸€ä¸ªåº”ç”¨è¦æ˜¾ç¤ºçš„å›¾ç‰‡æ¯”è¾ƒå¤šï¼Œè€Œå¼ºå¼•ç”¨æ± åˆæ¯”è¾ƒå°ï¼Œé‚£ä¹ˆå¼ºåº”ç”¨æ± ä¸­çš„å›¾ç‰‡å¯èƒ½å¾ˆå¿«è¢«ç§»é™¤ï¼Œä½†æ˜¯è¿™æ—¶è¿™å¼ å›¾ç‰‡åˆè¿˜åœ¨æŸä¸ªç•Œé¢ä¸­æ˜¾ç¤ºç€ï¼Œç„¶ååœ¨ä¸€ä¸ªæ–°çš„ç•Œé¢ä¸­åˆè¦æ˜¾ç¤ºåŒä¸€å¼ å›¾ç‰‡ï¼Œè¿™æ—¶å¼ºå¼•ç”¨æ± ä¸­å·²è¢«ç§»é™¤ï¼Œå®ƒå°±ä¼šé‡æ–°å»ç£ç›˜æˆ–ç½‘ç»œä¸­åŠ è½½ã€‚è€Œæœ‰å¼±å¼•ç”¨æ± çš„è¯å°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å†…å­˜ç¼“å­˜è¿˜æœ‰ä¸€ä¸ªè¦æ³¨æ„çš„é—®é¢˜å°±æ˜¯å›¾ç‰‡çš„è§£ç å’Œé‡ç”¨ã€‚ä¾‹å¦‚è¯´ä¸€å¼ è¶…å¤§å›¾ç‰‡çš„è¯è§£ç æ˜¯ä¸èƒ½ç›´æ¥è§£ç åˆ°å†…å­˜ä¸­çš„ï¼Œè¿˜æœ‰å¯èƒ½è¦æ ¹æ®å›¾ç‰‡æœ€ç»ˆåœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºçš„å¤§å°æ¥è¿›è¡Œè§£ç ï¼Œè¿˜æœ‰å°±æ˜¯é’ˆå¯¹ä¸éœ€è¦alphaå€¼çš„å›¾ç‰‡é‡‡ç”¨RGB_565æ¥è§£ç ï¼Œå¯¹ä¸€å¼ å·²è§£ç çš„ä¸å†éœ€è¦å›¾ç‰‡å†…å­˜é‡å¤åˆ©ç”¨èµ·æ¥ï¼Œä¸ç”¨é‡æ–°å¼€è¾Ÿå†…å­˜ï¼Œè¿™äº›å°±æ˜¯éå¸¸ç»†ä½†æ˜¯å¾ˆé‡è¦çš„ç‚¹ã€‚&lt;/p&gt;
&lt;h2&gt;ç£ç›˜ç¼“å­˜&lt;/h2&gt;
&lt;p&gt;ç£ç›˜ç¼“å­˜ä¸»è¦æ˜¯é’ˆå¯¹ç½‘ç»œå›¾ç‰‡ï¼Œå› ä¸ºç½‘ç»œä¸‹è½½æ˜¯æ¯”è¾ƒè€—æ—¶ï¼Œå¯¹äºå·²ç»ä¸‹è½½çš„å›¾ç‰‡æ²¡æœ‰å¿…è¦å†ä¸‹è½½ä¸€æ¬¡ã€‚ç£ç›˜ç¼“å­˜ä¸»è¦æ¶‰åŠå›¾ç‰‡ä¿å­˜å’Œç£ç›˜ç¼“å­˜ç©ºé—´å¤§å°é—®é¢˜ã€‚å›¾ç‰‡ä»ç½‘ç»œä¸‹è½½ä¸‹æ¥æ—¶ï¼Œä»¥ä»€ä¹ˆæ–‡ä»¶ä¿å­˜ï¼Œè¿˜æœ‰è¦ä¸è¦å¯¹å›¾ç‰‡è´¨é‡è¿›è¡Œå‹ç¼©ä¹Ÿæ˜¯è®²ç©¶çš„ã€‚æ™®éåšæ³•æ˜¯å°†å›¾ç‰‡çš„URLè¿›è¡Œä¸€æ¬¡hashï¼Œå°†è¿™ä¸ªhashå­—ç¬¦ä¸²ä½œä¸ºæ–‡ä»¶åä¿å­˜èµ·æ¥ã€‚ä¸‹æ¬¡åªè¦å¯¹æŸä¸ªå›¾ç‰‡URLè®¡ç®—å‡ºå®ƒçš„hashå­—ç¬¦ä¸²ï¼Œçœ‹çœ‹å¯¹åº”çš„æ–‡ä»¶å­˜ä¸å­˜åœ¨ï¼Œå°±çŸ¥é“å›¾ç‰‡æ˜¯å¦å·²å­˜åœ¨ç£ç›˜ç¼“å­˜é‡Œã€‚ç”±äºç”¨æˆ·çš„ç£ç›˜ä¹Ÿä¸æ˜¯æ— é™çš„ï¼Œå¯¹äºå·²å›¾ç‰‡ä¸ºä¸ºä¸»çš„åº”ç”¨ï¼Œæ˜¯è¦è€ƒè™‘å¯¹è¿™ä¸ªç£ç›˜ç¼“å­˜ç©ºé—´åšé™åˆ¶çš„ã€‚è¿™é‡ŒåŒæ ·ä¹Ÿæœ‰LRUç®—æ³•ç­‰ã€‚&lt;/p&gt;
&lt;h2&gt;å¤šçº¿ç¨‹é—®é¢˜&lt;/h2&gt;
&lt;p&gt;å¯¹äºå¤šå›¾ç‰‡çš„åº”ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ListViewæˆ–GridViewä¸­æ˜¾ç¤ºå›¾ç‰‡çš„åº”ç”¨æ¥è¯´ï¼Œå¤šçº¿ç¨‹åŠ è½½å›¾ç‰‡æ˜¯å¿…ç„¶æ¶‰åŠçš„ã€‚å› ä¸ºå›¾ç‰‡ä¸èƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è§£ç ï¼Œå¦è€…åœ¨æ»‘åŠ¨åˆ—è¡¨çš„ä¼šè¢«å¡æ­»ã€‚è§£ç å›¾ç‰‡å’Œä¸‹è½½å›¾ç‰‡éƒ½æ˜¯å¾ˆè€—æ—¶çš„åŠ¨ä½œï¼Œå¿…é¡»æ”¾åœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œã€‚å¦‚ä½•åšä¸€ä¸ªæ»‘åŠ¨èµ·æ¥å¾ˆæµç•…çš„å›¾ç‰‡åˆ—è¡¨ï¼Œä¹Ÿæ˜¯æˆ‘å¿…é—®çš„é—®é¢˜ã€‚è¿™é‡Œå¯ä»¥æ¶‰åŠå¾ˆå¤šçŸ¥è¯†å°±ä¸è®²äº†ã€‚ä½†æ˜¯åœ¨å›¾ç‰‡åŠ è½½ç¯èŠ‚ï¼Œå¿…ç„¶è¦è€ƒè™‘é‡‡ç”¨ä¸€ä¸ªçº¿ç¨‹æ± æ¥åŠ è½½å’Œè§£ç å›¾ç‰‡ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;å›¾ç‰‡çš„åŠ è½½å’Œç¼“å­˜æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„é—®é¢˜ï¼Œå¦‚æœè¿™äº›éƒ½è¦è‡ªå·±å†™ï¼Œè¦è€ƒè™‘ä¸œè¥¿å¾ˆå¤šï¼Œè¦åšå¾—å¥½ç›¸å½“ä¸å®¹æ˜“ã€‚æƒ³èµ·åœ¨&lt;/span&gt;&lt;span class="mi"&gt;2012&lt;/span&gt;&lt;span class="err"&gt;å¹´çš„æ—¶å€™ï¼Œé‚£ä¸ªæ—¶å€™å¼€æºé¡¹ç›®è¿˜æ²¡æœ‰ç°åœ¨é‚£ä¹ˆå¤šï¼Œæˆ‘ä»¬å°±æ˜¯è‡ªå·±å†™çš„ã€‚ä½†æ˜¯ç°åœ¨åŸºæœ¬ä¸Šä¸è‡ªå·±å†™äº†ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç›¸å…³çš„ä¼˜ç§€çš„å¼€æºé¡¹ç›®å¯ä»¥é‡‡ç”¨ã€‚æˆ‘åªè¦é€‰ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼ŒåŠ ä¸€äº›é…ç½®ï¼Œæˆ–è€…æ ¹æ®è‡ªå·±é¡¹ç›®çš„éœ€è¦è¿›è¡Œæ”¹å†™æˆ–è€…æ”¹é€ å°±è¡Œäº†ã€‚è¿™é‡Œæœ€å—æ¬¢è¿çš„å¼€æºé¡¹ç›®åº”è¯¥æ˜¯&lt;/span&gt;&lt;span class="n"&gt;Universal&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;Loader&lt;/span&gt;&lt;span class="err"&gt;äº†ï¼Œå…¶ä»–ç”¨å¾—æ¯”è¾ƒå¤šçš„è¿˜æœ‰&lt;/span&gt;&lt;span class="n"&gt;glide&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IoUtils&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Volley&lt;/span&gt;&lt;span class="err"&gt;ç­‰ï¼Œè¿˜æœ‰&lt;/span&gt;&lt;span class="n"&gt;Facebook&lt;/span&gt;&lt;span class="err"&gt;æœ€è¿‘å¼€æºçš„&lt;/span&gt;&lt;span class="n"&gt;Fresco&lt;/span&gt;&lt;span class="err"&gt;ã€‚&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Universal-Image-Loader&lt;/h2&gt;
&lt;p&gt;UIL&lt;a href="https://github.com/nostra13/Android-Universal-Image-Loader"&gt;githubåœ°å€&lt;/a&gt;æ˜¯æˆ‘æ­£åœ¨ç”¨çš„å›¾ç‰‡ç¼“å­˜å¼€æºé¡¹ç›®ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆä¼˜ç§€çš„é¡¹ç›®ï¼Œä»£ç ç»“æ„å¾ˆå¥½ï¼Œé…ç½®æ€§éå¸¸é«˜ï¼Œéå¸¸çµæ´»ï¼Œä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ã€‚è¿™ä¹Ÿè®¸å°±æ˜¯å®ƒæµè¡Œçš„åŸå› ã€‚æ¥çœ‹çœ‹å®ƒçš„ç»å…¸ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt="æ¡†æ¶å›¾" src="https://github.com/nostra13/Android-Universal-Image-Loader/raw/master/wiki/UIL_Flow.png" /&gt;&lt;/p&gt;
&lt;p&gt;æœ‰äººå°†è¿™ç§ç»“æ„ç§°ä¸ºä¸‰çº§ç¼“å­˜ï¼ˆå†…å­˜ç¼“å­˜ï¼Œç£ç›˜ç¼“å­˜ï¼Œç½‘ç»œç¼“å­˜ï¼Ÿï¼‰ï¼ŒUILçš„ç»“æ„å¾ˆæ¸…æ™°ï¼Œä¹Ÿå¾ˆç»å…¸ã€‚æˆ‘è§‰å¾—å…¶ä»–å›¾ç‰‡ç¼“å­˜æ¡†æ¶ä¹Ÿæ˜¯å¤§åŒå°å¼‚ã€‚æˆ‘å·²åœ¨è‡³å°‘ä¸¤ä¸ªé¡¹ç›®ç”¨è¿™ä¸ªæ¡†æ¶äº†ï¼Œä¸è¿‡æˆ‘éƒ½æœ‰ä¿®æ”¹ã€‚ç¬¬ä¸€é¡¹ç›®ä¸­å› ä¸ºæˆ‘ä»¬çš„å›¾ç‰‡ä¸‹è½½æ˜¯è¦ç»è¿‡å®‰å…¨æ ¡éªŒçš„ï¼Œæ‰€ä»¥æˆ‘åœ¨UILçš„download engineé‡ŒåŠ å…¥äº†ä¸€ä¸ªå›è°ƒï¼Œé€šè¿‡å›è°ƒè·å–æ ¡éªŒçš„å‚æ•°ï¼Œç„¶åè®¾ç½®åˆ°cookieä¸­ï¼ŒImageLoaderä¸ç”¨å…³å¿ƒæ ¡éªŒæ–¹æ³•ã€‚ç°åœ¨è¿™ä¸ªé¡¹ç›®ä¹Ÿåœ¨ç”¨UILï¼Œç”±äºæˆ‘ä»¬é¡¹ç›®çš„ç‰¹æ®Šæ€§ï¼Œå¯¹UILåšäº†æ›´å¤šæ”¹åŠ¨ã€‚ä¸è¿‡UILæ¡†æ¶å¾ˆçµæ´»ï¼Œå¾ˆå¥½æ”¹åŠ¨ã€‚è¿™å°±æ˜¯å¼€æºé¡¹ç›®å¥½å¤„ï¼Œæˆ‘ä»¬ç«™åœ¨å·¨äººä»¬çš„è‚©è†€ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¥½å¤„å¤šå¤šï¼Œä½†æ˜¯æˆ‘å‘ç°UILä¹Ÿæœ‰ä¸è¶³ä¹‹å¤„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¡†æ¶å¤ªè¿‡çµæ´»ï¼Œç›¸å¯¹çš„æ€§èƒ½é™ä½äº†ã€‚&lt;/li&gt;
&lt;li&gt;ä¸æ”¯æŒgifå›¾ç‰‡è§£ç &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªç®—ä¸ä¸Šå¤ªå¤§é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºè¿½æ±‚é«˜æ•ˆç‡çš„åº”ç”¨æ¥è¯´ï¼Œç‰¹åˆ«æ˜¯GridViewä¸­ï¼Œç”¨UILä¼šæœ‰æ€§èƒ½å½±å“ã€‚å› ä¸ºUILçš„æ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºå¾ˆå¤šå¯¹è±¡ï¼Œæœ‰äº›å¯¹è±¡å› ä¸ºæœ€æ±‚æ¡†æ¶çµæ´»å¼•å…¥çš„ï¼Œå®é™…æ˜¯å¯ä»¥å‡å°‘çš„ã€‚ç¬¬äºŒä¸ªæ˜¯ç¡¬ä¼¤ï¼Œä¸è¿‡ç°åœ¨æ”¯æŒæ¡†å¾ˆå°‘ã€‚è²Œä¼¼åªæœ‰Facebookæ–°å¼€æºçš„Frescoã€‚&lt;/p&gt;
&lt;h2&gt;Fresco&lt;/h2&gt;
&lt;p&gt;Frescoæ˜¯Facebookåˆšå¼€æºä¸å°±çš„é¡¹ç›®ï¼Œæˆ‘çœ‹äº†å®ƒçš„ä»‹ç»éå¸¸å…´å¥‹ã€‚é¦–å…ˆå®ƒè§£å†³UILä¸æ”¯æŒgifå›¾ç‰‡è§£ç çš„é—®é¢˜ã€‚ç„¶åå®ƒå¯¹å›¾ç‰‡è¿›è¡Œé‡ç”¨ï¼Œè¿˜æœ‰å®ƒçš„è§£ç æ˜¯åœ¨nativeä¸­çš„ï¼Œå†…å­˜æ•ˆç‡éå¸¸é«˜ã€‚æˆ‘æœ€è¿‘éå¸¸æƒ³è¯•è¯•è¿™ä¸ªæ–°æ¡†æ¶ã€‚ä¸è¿‡å®åœ¨å¤ªå¿™æ²¡æœ‰æ—¶é—´ã€‚æˆ‘æ‰“ç®—æ‰¾ä¸ªæ—¶é—´ç ”ç©¶ä¸€ä¸‹å®ƒï¼Œå¹¶ç”¨å®ƒæ›¿æ¢æ‰UILã€‚&lt;/p&gt;
&lt;p&gt;å…ˆè¯´åˆ°è¿™å§ï¼Œæˆ‘ä¹Ÿç¿»è¯‘è¿™ä¸ªé¡¹ç›®å®˜æ–¹ä»‹ç»çš„é‚£ç¯‡åšå®¢ï¼Œå†è¯´ã€‚&lt;/p&gt;</summary><category term="Androidæºç å­¦ä¹  å›¾ç‰‡ç¼“å­˜ ImageLoader Fresco"></category></entry><entry><title>Androidå¼€å‘ä¸­ä½•æ—¶ä½¿ç”¨å¤šè¿›ç¨‹ï¼Ÿ</title><link href="http://szuwest.github.io/androidkai-fa-zhong-he-shi-shi-yong-duo-jin-cheng.html" rel="alternate"></link><updated>2015-03-10T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2015-03-10:androidkai-fa-zhong-he-shi-shi-yong-duo-jin-cheng.html</id><summary type="html">&lt;h1&gt;é—®ç­”-Androidå¼€å‘ä¸­ä½•æ—¶ä½¿ç”¨å¤šè¿›ç¨‹ï¼Ÿ&lt;/h1&gt;
&lt;p&gt;æˆ‘åœ¨githubä¸Šå›ç­”äº†ä¸€ä¸ªé—®é¢˜ï¼š
&lt;code&gt;Androidå¼€å‘ä¸­ä½•æ—¶ä½¿ç”¨å¤šè¿›ç¨‹ï¼Ÿ&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="mf"&gt;1.&lt;/span&gt;&lt;span class="err"&gt;è¦æƒ³çŸ¥é“å¦‚ä½•ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œå…ˆè¦çŸ¥é“&lt;/span&gt;&lt;span class="n"&gt;Android&lt;/span&gt;&lt;span class="err"&gt;é‡Œçš„å¤šè¿›ç¨‹æ¦‚å¿µã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹åç§°å°±æ˜¯åº”ç”¨ç¨‹åºåŒ…åã€‚æˆ‘ä»¬çŸ¥é“è¿›ç¨‹æ˜¯ç³»ç»Ÿåˆ†é…èµ„æºå’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ‰€ä»¥æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„èµ„æºå’Œå†…å­˜ç©ºé—´ï¼Œåˆ«çš„è¿›ç¨‹æ˜¯ä¸èƒ½ä»»æ„è®¿é—®å…¶ä»–è¿›ç¨‹çš„å†…å­˜å’Œèµ„æºçš„ã€‚é‚£å¦‚ä½•è®©è‡ªå·±çš„åº”ç”¨æ‹¥æœ‰å¤šä¸ªè¿›ç¨‹ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬çš„å››å¤§ç»„ä»¶åœ¨&lt;/span&gt;&lt;span class="n"&gt;AndroidManifest&lt;/span&gt;&lt;span class="err"&gt;æ–‡ä»¶ä¸­æ³¨å†Œçš„æ—¶å€™ï¼Œæœ‰ä¸ªå±æ€§æ˜¯&lt;/span&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="err"&gt;ï¼Œè¿™é‡Œå¯ä»¥æŒ‡å®šç»„ä»¶çš„æ‰€å¤„çš„è¿›ç¨‹ã€‚é»˜è®¤å°±æ˜¯åº”ç”¨çš„ä¸»è¿›ç¨‹ã€‚æŒ‡å®šä¸ºåˆ«çš„è¿›ç¨‹ä¹‹åï¼Œç³»ç»Ÿåœ¨å¯åŠ¨è¿™ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå°±å…ˆåˆ›å»ºï¼ˆå¦‚æœè¿˜æ²¡åˆ›å»ºçš„è¯ï¼‰è¿™ä¸ªè¿›ç¨‹ï¼Œç„¶åå†åˆ›å»ºè¯¥ç»„ä»¶ã€‚ä½ å¯ä»¥é‡è½½&lt;/span&gt;&lt;span class="n"&gt;Application&lt;/span&gt;&lt;span class="err"&gt;ç±»çš„&lt;/span&gt;&lt;span class="n"&gt;onCreate&lt;/span&gt;&lt;span class="err"&gt;æ–¹æ³•ï¼Œæ‰“å°å‡ºå®ƒçš„è¿›ç¨‹åç§°ï¼Œå°±å¯ä»¥æ¸…æ¥šçš„çœ‹è§äº†ã€‚å†è®¾ç½®&lt;/span&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="err"&gt;å±æ€§æ—¶å€™ï¼Œæœ‰ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼šå¦‚æœæ˜¯&lt;/span&gt;&lt;span class="n"&gt;android&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;:deamon&amp;quot;&lt;/span&gt;&lt;span class="err"&gt;ï¼Œä»¥&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="err"&gt;å¼€å¤´çš„åå­—ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ç§æœ‰è¿›ç¨‹ï¼Œå¦åˆ™å®ƒæ˜¯ä¸€ä¸ªå…¨å±€è¿›ç¨‹ã€‚ç§æœ‰è¿›ç¨‹çš„è¿›ç¨‹åç§°æ˜¯ä¼šåœ¨å†’å·å‰è‡ªåŠ¨åŠ ä¸ŠåŒ…åï¼Œè€Œå…¨å±€è¿›ç¨‹åˆ™ä¸ä¼šã€‚ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯æœ‰ç§æœ‰è¿›ç¨‹ï¼Œå¾ˆå°‘ä½¿ç”¨å…¨å±€è¿›ç¨‹ã€‚ä»–ä»¬çš„å…·ä½“åŒºåˆ«ä¸çŸ¥é“æœ‰æ²¡æœ‰è°èƒ½è¡¥å……ä¸€ä¸‹ã€‚&lt;/span&gt;

&lt;span class="mf"&gt;2.&lt;/span&gt;&lt;span class="err"&gt;ä½¿ç”¨å¤šè¿›ç¨‹æ˜¾è€Œæ˜“è§çš„å¥½å¤„å°±æ˜¯åˆ†æ‹…ä¸»è¿›ç¨‹çš„å†…å­˜å‹åŠ›ã€‚æˆ‘ä»¬çš„åº”ç”¨è¶Šåšè¶Šå¤§ï¼Œå†…å­˜è¶Šæ¥è¶Šå¤šï¼Œå°†ä¸€äº›ç‹¬ç«‹çš„ç»„ä»¶æ”¾åˆ°ä¸åŒçš„è¿›ç¨‹ï¼Œå®ƒå°±ä¸å ç”¨ä¸»è¿›ç¨‹çš„å†…å­˜ç©ºé—´äº†ã€‚å½“ç„¶è¿˜æœ‰å…¶ä»–å¥½å¤„ï¼Œæœ‰å¿ƒäººä¼šå‘ç°&lt;/span&gt;&lt;span class="n"&gt;Android&lt;/span&gt;&lt;span class="err"&gt;åå°è¿›ç¨‹é‡Œæœ‰å¾ˆå¤šåº”ç”¨æ˜¯å¤šä¸ªè¿›ç¨‹çš„ï¼Œå› ä¸ºå®ƒä»¬è¦å¸¸é©»åå°ï¼Œç‰¹åˆ«æ˜¯å³æ—¶é€šè®¯æˆ–è€…ç¤¾äº¤åº”ç”¨ï¼Œä¸è¿‡ç°åœ¨å¤šè¿›ç¨‹å·²ç»è¢«ç”¨çƒ‚äº†ã€‚å…¸å‹ç”¨æ³•æ˜¯åœ¨å¯åŠ¨ä¸€ä¸ªä¸å¯è§çš„è½»é‡çº§ç§æœ‰è¿›ç¨‹ï¼Œåœ¨åå°æ”¶å‘æ¶ˆæ¯ï¼Œæˆ–è€…åšä¸€äº›è€—æ—¶çš„äº‹æƒ…ï¼Œæˆ–è€…å¼€æœºå¯åŠ¨è¿™ä¸ªè¿›ç¨‹ï¼Œç„¶ååšç›‘å¬ç­‰ã€‚è¿˜æœ‰å°±æ˜¯é˜²æ­¢ä¸»è¿›ç¨‹è¢«æ€å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ˆæŠ¤è¿›ç¨‹å’Œä¸»è¿›ç¨‹ä¹‹é—´ç›¸äº’ç›‘è§†ï¼Œæœ‰ä¸€æ–¹è¢«æ€å°±é‡æ–°å¯åŠ¨å®ƒã€‚åº”è¯¥è¿˜æœ‰è¿˜æœ‰å…¶ä»–å¥½å¤„ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚&lt;/span&gt;

&lt;span class="mf"&gt;3.&lt;/span&gt;&lt;span class="err"&gt;åå¤„çš„è¯ï¼Œå¤šå ç”¨äº†ç³»ç»Ÿçš„ç©ºé—´ï¼Œå¤§å®¶éƒ½è¿™ä¹ˆç”¨çš„è¯ç³»ç»Ÿå†…å­˜å¾ˆå®¹æ˜“å æ»¡è€Œå¯¼è‡´å¡é¡¿ã€‚æ¶ˆè€—ç”¨æˆ·çš„ç”µé‡ã€‚åº”ç”¨ç¨‹åºæ¶æ„ä¼šå˜å¤æ‚ï¼Œåº”ä¸ºè¦å¤„ç†å¤šè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚è¿™é‡Œåˆæ˜¯å¦å¤–ä¸€ä¸ªé—®é¢˜äº†ã€‚&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¯¦è§ï¼š&lt;a href="https://github.com/android-cn/interview-questions/issues/7"&gt;é—®ç­”-Androidå¼€å‘ä¸­ä½•æ—¶ä½¿ç”¨å¤šè¿›ç¨‹ï¼Ÿ&lt;/a&gt;&lt;/p&gt;</summary><category term="æŠ€æœ¯é—®ç­” github è¿›ç¨‹"></category></entry><entry><title>Androidæºç å­¦ä¹ ä¹‹ViewGroup</title><link href="http://szuwest.github.io/androidyuan-ma-xue-xi-zhi-viewgroup.html" rel="alternate"></link><updated>2015-02-02T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2015-02-02:androidyuan-ma-xue-xi-zhi-viewgroup.html</id><summary type="html">&lt;h1&gt;Androidæºç å­¦ä¹ ä¹‹ViewGroup&lt;/h1&gt;
&lt;p&gt;androidç»§æ‰¿äºViewï¼ŒåŒæ—¶å®ƒåŒ…å«äº†ä¸€ä¸ªViewæ•°ç»„å­˜å‚¨å®ƒçš„å­Viewï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯ä¸€ä¸ªå®¹å™¨ã€‚è¿™å°±æ˜¯ç»å…¸çš„è®¾è®¡æ¨¡å¼ä¸­çš„ç»„åˆæ¨¡å¼ã€‚åœ¨Androidçš„è§†å›¾ç»“æ„ä¸­ï¼Œå®¹å™¨ä¸€å®šæ˜¯ViewGroupï¼Œåªæœ‰ViewGroupæ‰èƒ½åŒ…å«å…¶ä»–è§†å›¾ï¼ŒåƒTextViewï¼ŒImageViewè¿™äº›Viewæ˜¯ä¸èƒ½åŒ…å«å­è§†å›¾çš„ï¼Œå®ƒä»¬æ˜¯å•ä¸€æ§ä»¶ã€‚è¿™ä¸€ç‚¹è·ŸiOSçš„è§†å›¾ç»“æ„å¾ˆä¸ä¸€æ ·çš„ã€‚åœ¨iOSä¸­æ‰€æœ‰çš„è§†å›¾éƒ½æ˜¯ç»§æ‰¿äºUIViewï¼ŒåŒæ—¶UIViewä¹Ÿæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œèƒ½åŒ…å«å…¶ä»–UIViewã€‚ä»è¿™ä¸€ç‚¹æ¥è¯´iOSçš„è§†å›¾ç»“æ„æ›´ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä»€ä¹ˆä½¿å¾—ViewGroupå…·æœ‰äº†å®¹æ˜“åŠŸèƒ½å‘¢ï¼ŸViewGroupé™¤äº†ç»§æ‰¿Viewå¤–ï¼Œè¿˜æ˜¯å®ç°äº†ä¸¤ä¸ªæ¥å£ï¼š&lt;code&gt;ViewManager&lt;/code&gt;å’Œ&lt;code&gt;ViewParent&lt;/code&gt;ã€‚ViewManagerä¸»è¦å®šä¹‰äº†addViewå’ŒremoveViewçš„æ–¹æ³•ï¼ŒViewParentä¸»è¦å®šä¹‰äº†åˆ·æ–°å®¹å™¨çš„æ¥å£requestLayoutå’Œå…¶ä»–ä¸€äº›ç„¦ç‚¹äº‹ä»¶çš„å¤„ç†ç­‰æ¥å£ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼ŒViewGroupæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æˆ‘ä»¬çŸ¥é“Viewå¹¶ä¸æ˜¯æŠ½è±¡ç±»ï¼Œä¸ºä»€ä¹ˆViewGroupç»§æ‰¿äº†Viewåè€Œæˆäº†æŠ½è±¡ç±»å‘¢ï¼Œæ˜¯å¢åŠ äº†ä»€ä¹ˆæ–°çš„æŠ½è±¡æ–¹æ³•å—ï¼Ÿä¸æ˜¯ï¼ŒViewGroupä¸­çš„æŠ½è±¡æ–¹æ³•æ˜¯ç»§æ‰¿äºViewçš„onLayoutæ–¹æ³•ã€‚onLayoutæ–¹æ³•åœ¨Viewä¸­å¹¶ä¸æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œåªæ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œä½†æ˜¯åœ¨ViewGroupä¸­å®ƒè¢«å®šä¹‰ä¸ºäº†æŠ½è±¡æ–¹æ³•ã€‚æˆ‘ç¬¬ä¸€æ¬¡å‘ç°åŸæ¥è¿˜å¯ä»¥è¿™æ ·åšã€‚onLayoutçš„ä¸»è¦ä½œç”¨æ˜¯æ”¾ç½®å­Viewçš„ä½ç½®ï¼Œè€Œä¸åŒçš„å¸ƒå±€æ–¹å¼ç®—æ³•ä¸ä¸€æ ·ï¼Œæ‰€æœ‰ç•™ç»™å­ç±»å®ç°æ¯”è¾ƒåˆç†ã€‚&lt;/p&gt;
&lt;p&gt;ViewGroupä¸­å¹¶æ²¡æœ‰è¦†ç›–onMeasureæ–¹æ³•ï¼Œä½†æ˜¯å¢åŠ äº†ä¸€äº›è®¡ç®—å­Viewå¤§å°çš„æ–¹æ³•ï¼šmeasureChildrenæ–¹æ³•å°±æ˜¯å°†æ‰€æœ‰çš„å­Viewéƒ½éå†ä¸€éï¼Œå¹¶è°ƒç”¨ä»–ä»¬çš„measureæ–¹æ³•ã€‚ViewGroupä¸­åŒæ ·æ²¡æœ‰è¦†ç›–onDrawæ–¹æ³•ï¼Œä½†æ˜¯è¦†ç›–äº†dispatchDrawæ–¹æ³•ã€‚dispatchDrawæ–¹æ³•ä¸»è¦ä½œç”¨æ˜¯è°ƒç”¨æ¯ä¸ªå­Viewçš„drawæ–¹æ³•ã€‚çœ‹æ¥onXXXæ–¹æ³•åœ¨ViewGroupä¸­å¹¶ä¸é‡è¦ï¼Œå®ƒæ›´å¤šçš„åœ¨è°ƒç”¨å­Viewçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2&gt;LayoutParams&lt;/h2&gt;
&lt;p&gt;å¸ƒå±€å‚æ•°LayoutParamsæ˜¯ViewGroupçš„ä¸€ä¸ªé‡è¦å†…éƒ¨ç±»ã€‚æˆ‘ä»¬åœ¨åšå¸ƒå±€æ—¶å¿…ä¸å¯å°‘çš„ä¸¤ä¸ªå±æ€§å°±æ˜¯è¿™ä¸ªç±»çš„å±æ€§ï¼šwidthå’Œheightã€‚ç¨‹åºè¿è¡Œæ—¶ä»»ä½•ä¸€ä¸ªæ§ä»¶éƒ½æœ‰è¿™ä¸¤ä¸ªå€¼ï¼Œå½“ç„¶å°±æ˜¯å¿…ä¸å¯å°‘ã€‚LayoutParamsè¿™ä¸ªç±»éå¸¸ç®€å•ï¼Œå¤„ç†widthå’Œheightï¼Œè¿˜æœ‰ä¸€ä¸ªLayoutAnimationController.AnimationParameters å±æ€§ï¼Œç”¨äºå¸ƒå±€åŠ¨ç”»çš„ã€‚å‡ ä¹æ‰€æœ‰çš„ViewGroupç±»çš„å­ç±»éƒ½æœ‰è‡ªå·±çš„å†…éƒ¨ç±»LayoutParamï¼Œä½†æ˜¯ä»–ä»¬éƒ½ä¸æ˜¯ç›´æ¥ç»§æ‰¿äºLayoutParamsï¼Œè€Œæ˜¯MarginLayoutParamsï¼ŒMarginLayoutParamsåŒæ ·æ˜¯ViewGroupçš„å†…éƒ¨ç±»ã€‚MarginLayoutParamsæ— éå°±æ˜¯åŠ å…¥äº†å„ä¸ªæ–¹å‘çš„marginï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬å¸ƒå±€æ—¶éƒ½æ˜¯å¸¦marginçš„ã€‚åˆå­¦è€…å¼€å§‹æä¸æ‡‚marginå’Œpaddingçš„åŒºåˆ«ã€‚å…¶å®åªè¦è®°ä½marginæ˜¯ä¸å±äºViewçš„ç©ºé—´çš„ï¼Œå®ƒæ˜¯ç”¨äºæ¯ä¸ªViewä¸çˆ¶Viewæˆ–è€…å…„å¼ŸViewä¹‹å‰çš„é—´è·ï¼Œè€Œpaddingæ˜¯å±äºViewå†…éƒ¨ç©ºé—´çš„ï¼Œæ˜¯Viewè‡ªå·±çš„å†…å®¹è·ŸViewè¾¹æ¡†ä¹‹é—´çš„é—´è·ã€‚ä»ä»£ç è§’åº¦æ¥çœ‹ï¼Œpaddingæ˜¯Viewçš„å±æ€§ï¼ŒLayoutParamsæ˜¯ViewGroupçš„å±æ€§ã€‚&lt;/p&gt;
&lt;h2&gt;dispatchTouchEventè§¦æ‘¸äº‹ä»¶çš„åˆ†å‘&lt;/h2&gt;
&lt;p&gt;åŸºæœ¬ä¸Šæˆ‘æ¯æ¬¡é¢è¯•åˆ«äººï¼Œäº‹ä»¶çš„åˆ†å‘æ˜¯æˆ‘å¿…é—®çš„é—®é¢˜ã€‚è¿™ä¸ªå…¶å®æ²¡ä»€ä¹ˆéš¾çš„ï¼Œç½‘ä¸Šå¾ˆå¤šèµ„æ–™è¯´è¿™ä¸ªï¼Œä½†æ˜¯çœ‹æ²¡çœ‹è¿‡æºä»£ç çš„äººçœ‹ä»–çš„å›ç­”åŸºæœ¬å°±èƒ½çŸ¥é“ã€‚Androidçš„è§¦æ‘¸äº‹ä»¶åˆ†å‘æ˜¯è‡ªä¸Šè€Œä¸‹çš„ï¼Œæ˜¯é€šè¿‡dispatchTouchEventæ¥åˆ†å‘çš„ã€‚ViewGroupçš„dispatchTouchEventæ–¹æ³•è¿˜æ˜¯æŒºå¤æ‚çš„ã€‚ViewGroupåœ¨åˆ†å‘äº‹ä»¶ç»™å­Viewå‰ï¼Œä¼šå…ˆè°ƒç”¨è‡ªèº«çš„onInterceptTouchEventæ–¹æ³•æ¥åˆ¤æ–­è‡ªå·±æ˜¯å¦è¦æ‹¦æˆªæ‰äº‹ä»¶ï¼Œå¦‚æœæ‹¦æˆªäº†åˆ™ä¸ä¼šå†åˆ†å‘ç»™å­Viewäº†ã€‚æ²¡æœ‰æ‹¦æˆªçš„è¯å°±ä¼šåœ¨è‡ªå·±çš„å­Viewä¸­å¯»æ‰¾äº‹ä»¶æ¥æ”¶è€…ï¼Œå¹¶ä¸”ç»„æˆä¸€ä¸ªTouchTargeté“¾è¡¨ï¼Œå°†äº‹ä»¶ä¼ ç»™ä»–ä»¬å¤„ç†ï¼ˆdispatchTransformedTouchEventï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒViewGroupåœ¨åˆ†å‘è§¦æ‘¸äº‹ä»¶ä¹‹å‰ä¼šå…ˆçœ‹è‡ªå·±æ˜¯å¦è¦æ‹¦æˆªè¯¥äº‹ä»¶ï¼Œä¸æ‹¦æˆªçš„è¯åœ¨å­Viewä¸­å¯»æ‰¾æ²¡æœ‰éšè—å¹¶ä¸”åœ¨è§¦æ‘¸ç‚¹èŒƒå›´å†…çš„å­Viewï¼Œå°†èƒ½å¤„ç†è¿™ä¸ªäº‹ä»¶çš„åŠ å…¥TouchTargeté“¾è¡¨ï¼Œåˆ†å‘äº‹ä»¶ç»™ä»–ä»¬å¤„ç†ã€‚æˆ‘ä¸€èˆ¬é¢è¯•ä¼šé—®è§¦æ‘¸äº‹ä»¶ä¼šæ¶‰åŠå“ªäº›æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•å¤§æ¦‚åšäº†ä»€ä¹ˆï¼Œå“ªäº›æ˜¯ViewGroupçš„æ–¹æ³•ï¼Œå“ªäº›æ˜¯Viewçš„æ–¹æ³•ã€‚åªè¦èƒ½ç­”å‡ºæœ‰dispatchTouchEventï¼Œ onInterceptTouchEventï¼ŒonTouchEventæ–¹æ³•ï¼ŒonInterceptTouchEventæ˜¯ViewGroupç‹¬æœ‰çš„æ–¹æ³•ï¼Œå…¶ä»–ä¸¤ä¸ªæ˜¯Viewçš„æ–¹æ³• å°±è¿‡å…³ã€‚èƒ½è¯´æ˜å¦‚æœä¸€ä¸ªViewè®¾ç½®äº†OnTouchEventListenerï¼Œå°±å…ˆè°ƒç”¨OnTouchEventListenerçš„å›è°ƒæ›´å¥½ã€‚&lt;/p&gt;
&lt;h2&gt;è‡ªå®šä¹‰ViewGroup&lt;/h2&gt;
&lt;p&gt;è‡ªå®šä¹‰ViewGroupçš„éœ€æ±‚æ¯”è¾ƒå°‘ã€‚ä¸€èˆ¬å°†å·²æœ‰çš„ViewGroupå­ç±»åšç»„åˆåŸºæœ¬è¶³å¤Ÿã€‚ä¸è¿‡çœŸè¦è‡ªå®šä¹‰çš„è¯ï¼Œè‡³å°‘çŸ¥é“è¯¥æ€ä¹ˆåšã€‚å¿…é¡»é‡å†™çš„æ–¹æ³•æ˜¯onLayoutæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯å¯¹å­Viewå¸ƒå±€ï¼Œå³æ”¾åœ¨å“ªé‡Œã€‚è¿˜æœ‰ä¸€ä¸ªä¸€èˆ¬éƒ½è¦é‡å†™çš„æ–¹æ³•æ˜¯onMeasureæ–¹æ³•ã€‚Viewçš„onMeasureæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯è¦å¸ƒå±€ç±»çš„è¯ï¼Œéœ€è¦è‡ªä¸Šè€Œä¸‹æ¥è®¡ç®—å­Viewçš„å¤§å°ï¼Œç„¶åæ‰èƒ½åœ¨onLayoutä¸­æ ¹æ®å­Viewçš„å¤§å°æ”¾ç½®ã€‚è¿˜æœ‰å¯èƒ½è¦é‡å†™çš„æ˜¯dispatchDrawå’ŒdrawChildæ–¹æ³•ã€‚å½“ç„¶è·Ÿæ ¹æ®éœ€æ±‚å¯èƒ½å¯¹dispatchTouchEventé‡å†™ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºViewGroupå°±å…ˆå†™åˆ°è¿™å§ã€‚&lt;/p&gt;</summary><category term="Androidæºç å­¦ä¹  ViewGroup"></category></entry><entry><title>è‚¡ç¥¨æŠ•èµ„æ€»ç»“</title><link href="http://szuwest.github.io/gu-piao-tou-zi-zong-jie.html" rel="alternate"></link><updated>2015-02-01T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2015-02-01:gu-piao-tou-zi-zong-jie.html</id><summary type="html">&lt;h1&gt;è‚¡ç¥¨æŠ•èµ„æ€»ç»“&lt;/h1&gt;
&lt;p&gt;è‡ªä»  å»å¹´ä»8æœˆä»½å¼€å§‹å…¥å¸‚ç¾è‚¡ï¼Œ11æœˆä¸­å…¥å¸‚Aè‚¡ï¼Œåæ¥å…¥å¸‚æ¸¯è‚¡ï¼ŒçœŸæ˜¯è®¤è¯†åˆ°è‚¡å¸‚çš„é’±çœŸä¸æ˜¯é‚£ä¹ˆå®¹æ˜“èµšçš„ã€‚ä¸ºä»€ä¹ˆå¾ˆå¤šäººåŠè¯´ä¸è¦è¸å…¥è‚¡å¸‚ï¼Œä¸ºä»€ä¹ˆè‚¡å¸‚æ˜¯ä¸€èµ¢äºŒå¹³ä¸ƒè¾“ï¼Œéƒ½æ˜¯å¾ˆæœ‰é“ç†çš„ã€‚è¦æƒ³é€šè¿‡è‚¡å¸‚ä¸€å¤œæš´å¯Œä¹Ÿæ˜¯åŸºæœ¬ä¸å¯èƒ½ã€‚ä¸è¿‡ä¸ç®¡æ€æ ·ï¼Œå­¦ä¸€ä¸‹ç†è´¢å’ŒæŠ•èµ„ï¼Œè¿˜æ˜¯ä¸é”™çš„ã€‚è¿™ä¹Ÿç®—æ˜¯ä¸ºä»¥åé“ºè·¯ã€‚&lt;/p&gt;</summary><category term="ç”Ÿæ´» æŠ•èµ„"></category></entry><entry><title>Androidæºç å­¦ä¹ ç³»åˆ—å¼€ç¯‡</title><link href="http://szuwest.github.io/androidyuan-ma-xue-xi-xi-lie-kai-pian.html" rel="alternate"></link><updated>2014-12-20T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-12-20:androidyuan-ma-xue-xi-xi-lie-kai-pian.html</id><summary type="html">&lt;h1&gt;Androidæºç å­¦ä¹ å¼€ç¯‡&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘ä¸€ç›´è§‰å¾—è‡ªå·±ååŠ²ä¸è¶³ï¼Œå¾ˆå¤šæƒ³åšçš„æ•ˆæœéƒ½è§‰å¾—å¾ˆè‰°éš¾ï¼Œä¸çŸ¥é“æ€ä¹ˆä¸‹æ‰‹ã€‚ä»å¾ˆæ—©çš„æ—¶å€™æˆ‘å°±æƒ³å­¦ä¹ Androidæºä»£ç ã€‚ç¬¬ä¸€æ¬¡ä¸‹è½½Androidçš„æºä»£ç æ˜¯2011å¹´å››å­£åº¦çš„æ—¶å€™ï¼Œé‚£æ—¶å€™åœ¨å…¬å¸çš„ç”µè„‘ä¸Šå®‰è£…äº†Linuxç³»ç»Ÿï¼Œä¹ŸæŠŠæºç ä¸‹è½½ä¸‹æ¥äº†ã€‚ä½†æ˜¯åæ¥ä¸€æ®µæ—¶é—´åï¼Œæˆ‘ç¦»å¼€é‚£ä¸ªå…¬å¸ã€‚åæ¥å‡ å¹´æ—¶é—´éƒ½æ²¡æœ‰ä¸‹è¿‡Androidæºç ï¼Œå› ä¸ºä¸€ç›´åœ¨Androidå’ŒiOSç›´æ¥åˆ‡æ¢å¼€å‘ã€‚ä¸è¿‡æˆ‘ç¡®å®ä¸‹è½½äº†Android SDKæºç ã€‚å…¶å®ä¸€èˆ¬çš„åº”ç”¨å¼€å‘åªè¦äº†è§£Android SDKå¼€å‘å°±å¤Ÿã€‚è¿™äº›å¹´æ–­æ–­ç»­ç»­çœ‹è¿‡ä¸€äº›SDKçš„æºç ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ®µæ—¶é—´ï¼Œæˆ‘ç»ˆäºä¸‹å®šå†³å¿ƒè¦å¥½å¥½å­¦ä¹ ä¸€ä¸‹Androidæºç ï¼ŒåŸå› ä¹‹ä¸€æ˜¯æˆ‘æ‹¥æœ‰äº†ä¸€éƒ¨è‡ªå·±çš„MacBook Proï¼Œä¸å†ä¸ºç”µè„‘è€Œçƒ¦æ¼ã€‚ä¸ºäº†ä¸‹è½½Androidæºä»£ç ï¼Œæˆ‘è¯•äº†å¾ˆå¤šæ–¹æ³•ä¸‹è½½ï¼Œäººç”Ÿç¬¬ä¸€æ¬¡ä¸ºè½¯ä»¶ä»˜è´¹ï¼Œä¹°äº†ä¸€ä¸ªVPNã€‚ä½†æ˜¯æˆ‘ç”µè„‘ç¡¬ç›˜æ¯”è¾ƒå°ï¼Œæºç å¾ˆå¤§ï¼Œæˆ‘ä¸‹è½½äº†å¥½å‡ æ¬¡è¦ä¹ˆä¸‹è½½åˆ°ä¸€éƒ¨åˆ†å°±ä¸­æ–­äº†æ²¡æ³•ç»§ç»­ä¸‹è½½ï¼Œè¦ä¹ˆæ˜¯æˆ‘çš„ç”µè„‘ç£ç›˜è£…ä¸ä¸‹ã€‚ã€‚æœ€åæˆ‘è¿˜æ˜¯åœ¨ç™¾åº¦ç½‘ç›˜ä¸‹è½½äº†ä¸€ä¸ªåˆ«äººå·²ç»ä¸‹è½½å¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶æˆ‘çš„å­¦ä¹ è¿˜æ˜¯ä»¥frameworkçš„æºç ä¸ºä¸»ï¼Œç„¶åé€æ¸å¾€åº•å±‚å­¦ä¹ ã€‚è¦å­¦ä¹ frameworkæ ¹æœ¬ä¸å¿…ä¸‹è½½Androidæºç ï¼Œç›´æ¥ä¸‹è½½Android SDKçš„æºç å°±è¡Œï¼ŒGoogleæä¾›çš„SDK Managerå°±æœ‰ä¸‹è½½æºç åŠŸèƒ½ï¼Œç„¶ååœ¨Eclipseæˆ–è€…Android Studioå…³è”å³å¯ã€‚ä¸ºäº†é­ç­–è‡ªå·±å­¦ä¹ ï¼Œæˆ‘å†³å®šå†™ä¸€ä¸ªè‡ªå·±Androidæºç å­¦ä¹ ç³»åˆ—æ–‡ç« ï¼Œè®°å½•è‡ªå·±çš„å­¦ä¹ å¿ƒå¾—ã€‚å¦å¤–æœ€è¿‘ä½œä¸ºé¢è¯•å®˜ï¼Œé¢äº†ä¸€äº›Androidçš„æ±‚èŒè€…ï¼Œæ„Ÿè§‰å¾ˆå¤šäººéƒ½æ˜¯æ»¡è¶³å®ç°åŠŸèƒ½ï¼Œä¸èƒ½è‡ªå·±å»æ¢ç©¶å®ç°åŸç†ã€‚æƒ³å½“å¹´è‡ªå·±ä¹Ÿæ˜¯è¿™æ ·ã€‚è¶Šæ—©æ‘†è„±è¿™ç§æƒ…å†µï¼Œè¶Šæœ‰ä¼˜åŠ¿ã€‚&lt;/p&gt;</summary><category term="Androidæºç å­¦ä¹ "></category></entry><entry><title>Androidæºç å­¦ä¹ ä¹‹View</title><link href="http://szuwest.github.io/androidyuan-ma-xue-xi-zhi-view.html" rel="alternate"></link><updated>2014-12-20T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-12-20:androidyuan-ma-xue-xi-zhi-view.html</id><summary type="html">&lt;h1&gt;Androidæºç å­¦ä¹ ä¹‹View&lt;/h1&gt;
&lt;p&gt;åœ¨Androidä¸­ï¼ŒViewæ˜¯æ‰€æœ‰è§†å›¾æ§ä»¶çš„åŸºç±»ã€‚Androidçš„è§†å›¾æ§ä»¶çš„è®¾è®¡é‡‡ç”¨äº†ç»å…¸çš„è®¾è®¡æ¨¡å¼--ç»„åˆæ¨¡å¼ã€‚Viewæ˜¯åŸºç¡€æ§ä»¶ï¼Œè€ŒViewGroupæ˜¯å¯ä»¥åŒ…å«å­Viewå’Œç®¡ç†å­Viewçš„ç©ºé—´ï¼ŒViewGroupåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªViewã€‚è¿™è·ŸiOSçš„è§†å›¾ç©ºé—´è®¾è®¡æœ‰å¾ˆå¤§ä¸åŒã€‚åœ¨iOSçš„è§†å›¾æ¡†æ¶ä¸­ï¼Œæ‰€æœ‰è§†å›¾éƒ½æ˜¯ç»§æ‰¿UIView,è€ŒUIViewæœ¬èº«æ˜¯å¯ä»¥åŒ…å«å’Œç®¡ç†å­UIViewçš„ã€‚æˆ‘ä¸çŸ¥é“è¿™ä¸¤ç§è®¾è®¡æœ‰ä»€ä¹ˆä¼˜åŠ£ï¼Œæ„Ÿè§‰iOSçš„è®¾è®¡æ›´ç®€å•ç›´æ¥ã€‚&lt;/p&gt;
&lt;p&gt;Viewçš„æºä»£ç è¶…è¿‡2ä¸‡è¡Œï¼Œå½“ç„¶åŒ…æ‹¬äº†å¾ˆå¤šæ³¨é‡Šã€‚è¿™é‡Œé¢å®šä¹‰äº†å¾ˆå¤šåŸºæœ¬çš„æ–¹æ³•ï¼Œä¸»è¦æ˜¯è§†å›¾æ¸²æŸ“çš„ç›¸å…³æ–¹æ³•å’Œäº‹ä»¶çš„ç›¸å…³æ–¹æ³•ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹æˆ‘ä¸æ˜¯å¾ˆæ˜ç™½çš„å°±æ˜¯é‡Œé¢æœ‰ä¸å°‘æ˜¯æ ¹scrollbarç›¸å…³çš„æ–¹æ³•ã€‚æˆ‘ä»¬å®é™…åº”ç”¨ä¸­è²Œä¼¼æœ‰scrollbarçš„æ§ä»¶è²Œä¼¼åªæœ‰AdapterViewçš„å­æ§ä»¶ï¼ŒScrollViewå’ŒTextViewï¼Œscrollbarçš„ç‰¹æ€§ä¸ºä»€ä¹ˆä¸ç›´æ¥æ”¾åˆ°è¿™äº›ç±»ä¸­ï¼Œæˆ–è€…ä¸“é—¨ä¸ºè¿™äº›ç±»ä¸“é—¨å»ºç«‹ä¸€ä¸ªçˆ¶ç±»æ¥å¤„ç†scrollbarã€‚Viewä¸­çš„scrollbarç‰¹æ€§åº”è¯¥å¤§éƒ¨åˆ†è§†å›¾æ§ä»¶éƒ½ä¸éœ€è¦å§ã€‚å½“ç„¶è¿™äº›åªæ˜¯æˆ‘çš„ç–‘é—®ç½¢äº†ï¼ŒGoogleè¿™æ ·è®¾è®¡ä¹Ÿè®¸æœ‰ä»–çš„é“ç†ã€‚&lt;/p&gt;
&lt;h2&gt;é‡è¦æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªViewè¦æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼Œæœ‰å‡ ä¸ªé‡è¦çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;onMeasureç³»æ–¹æ³•&lt;/li&gt;
&lt;li&gt;onLayoutç³»æ–¹æ³•&lt;/li&gt;
&lt;li&gt;onDrawç³»æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3&gt;onMeasureç³»æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;æ¯ä¸€ä¸ªonXXXæ–¹æ³•åˆæœ‰è‹¥å¹²ä¸ªç›¸å…³XXXæ–¹æ³•ã€‚ä¾‹å¦‚onMeasureæ–¹æ³•ï¼Œç›¸å…³çš„æ–¹æ³•æ˜¯measure(int widthMeasureSpec, int heightMeasureSpec)æ–¹æ³•ï¼ŒsetMeasuredDimension(int measuredWidth, int measuredHeight)æ–¹æ³•ï¼ŒMeasureSpecå†…éƒ¨ç±»ã€‚å…¶ä¸­measure(int widthMeasureSpec, int heightMeasureSpec)æ˜¯finalæ–¹æ³•ï¼Œç”±ç³»ç»Ÿè°ƒç”¨ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨onMeasureæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦å­ç±»è¦†ç›–å®ç°æ¥è®¡ç®—æœ¬èº«çš„å¤§å°ï¼Œè€Œä¸”è¦†ç›–è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™å¿…é¡»è°ƒç”¨setMeasuredDimensionæ–¹æ³•ã€‚è¿™é‡Œè·Ÿè®¡ç®—å¤§å°ç›¸å…³å¯†åˆ‡çš„æ˜¯MeasureSpecå†…éƒ¨ç±»ï¼Œè¿™é‡Œè¦ç»“åˆViewGroupç±»è®²è§£æ‰æ¯”è¾ƒæ¸…æ¥šã€‚Viewä¸­è¿™ä¸ªç›¸å…³æ–¹æ³•çš„å®ç°æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæ›´å¤šå®šä¹‰ä¸€ä¸ªæ¡†æ¶ï¼Œéœ€è¦å­ç±»è‡ªå·±å®šåˆ¶å®ç°ã€‚æˆ‘ä¹‹å‰æ€»æ˜¯æä¸å¤ªæ¸…è¿™äº›æ–¹æ³•çš„å…³ç³»ï¼Œçœ‹è¿™ç¯‡ &lt;a href="http://blog.csdn.net/a396901990/article/details/36475213"&gt;ANDROIDè‡ªå®šä¹‰è§†å›¾â€”â€”onMeasureï¼ŒMeasureSpecæºç  æµç¨‹ æ€è·¯è¯¦è§£&lt;/a&gt;æ‰æ¯”è¾ƒæ¸…æ¥šã€‚è¿™ä¸ªæˆ‘åœ¨ViewGroupå­¦ä¹ ä¸­å†è®²ã€‚ç®€å•æ¥è®²Viewé€šè¿‡onMeasureæ¥ç¡®å®šè‡ªå·±çš„å¤§å°ã€‚&lt;/p&gt;
&lt;h3&gt;onLayoutç³»æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;onLayout(boolean changed, int left, int top, int right, int bottom)æ–¹æ³•åœ¨Viewä¸­æ˜¯ä¸€ä¸ªç©ºå®ç°ï¼Œå­ç±»éœ€è¦è‡ªå·±è¦†ç›–ã€‚è·Ÿè¿™ä¸ªç±»å¯†åˆ‡ç›¸å…³çš„æ–¹æ³•æ˜¯layout(int l, int t, int r, int b)æ–¹æ³•ï¼Œè¿™ä¸ªç»™å¤–éƒ¨è°ƒç”¨çš„ï¼Œä¸€èˆ¬æ˜¯çˆ¶æ§ä»¶æ¥ç»™å®ƒè®¾å®šä½ç½®ã€‚è¿˜æœ‰setFrame(int left, int top, int right, int bottom) å’Œ onSizeChanged(int w, int h, int oldw, int oldh)æ–¹æ³•ã€‚onSizeChanged(int w, int h, int oldw, int oldhï¼‰æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ã€‚onLayoutæ–¹æ³•æˆ‘ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä¸€èˆ¬è²Œä¼¼åœ¨éœ€è¦åŠ¨æ€æ»šåŠ¨è§†å›¾æ—¶ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå¤šã€‚ä»¥ååŠ æ·±å­¦ä¹ è¿™ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3&gt;onDrawç³»æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;onDrawæ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªç©ºå®ç°ã€‚ä¸€èˆ¬æ¥è¯´è¿™ä¸ªæ–¹æ³•ç”¨å¾—æ¯”è¾ƒå¤šï¼Œå¤§å®¶éƒ½çŸ¥é“è¦è‡ªå®šä¹‰Viewå°±éœ€è¦é‡è½½è¿™ä¸ªæ–¹æ³•ã€‚ä¸€å¼€å§‹æˆ‘å¾ˆå¥‡æ€ªï¼Œæ—¢ç„¶Viewçš„onDrawæ–¹æ³•æ˜¯ç©ºå®ç°ï¼Œè€Œæˆ‘ç»å¸¸ç”¨Viewæ¥åšä¸€äº›çº¿æ§ä»¶ï¼Œå³ç»™Viewè®¾ç½®ä¸€ä¸ªèƒŒæ™¯é¢œè‰²ï¼Œå®½æˆ–è€…é«˜è®¾ç½®ä¸º1åƒç´ ã€‚é‚£å®ƒçš„èƒŒæ™¯æ˜¯æ€ä¹ˆç”»ä¸Šå»çš„ï¼Ÿç­”æ¡ˆæ˜¯åœ¨draw(Canvas canvas)æ–¹æ³•ä¸­ç”»çš„ã€‚onDrawç³»æ–¹æ³•è¿˜æœ‰draw(Canvas canvas, ViewGroup parent, long drawingTime)æ–¹æ³•ï¼ŒdispatchDraw(Canvas canvas)æ–¹æ³•ã€‚dispatchDraw(Canvas canvas)æ–¹å¼æ˜¯ç©ºå®ç°ï¼Œè€Œdraw(Canvas canvas, ViewGroup parent, long drawingTime)çš„å®ç°ç›¸å½“å¤æ‚ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ç”±ViewGroupæ¥è°ƒç”¨çš„ã€‚çœŸæ­£çš„é‡å¤´æˆåœ¨draw(Canvas canvas)æ–¹æ³•ä¸­ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Manually render this view (and all of its children) to the   given Canvas.&lt;/span&gt;
&lt;span class="cm"&gt; * The view must have already done a full layout before this function is&lt;/span&gt;
&lt;span class="cm"&gt; * called.  When implementing a view, implement&lt;/span&gt;
&lt;span class="cm"&gt; * {@link #onDraw(android.graphics.Canvas)} instead of overriding this method.&lt;/span&gt;
&lt;span class="cm"&gt; * If you do need to override this method, call the superclass version.&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; * @param canvas The Canvas to which the View is rendered.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;

&lt;span class="kr"&gt;public&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="nx"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;Canvas&lt;/span&gt; &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;privateFlags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mPrivateFlags&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;dirtyOpaque&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;privateFlags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;PFLAG_DIRTY_MASK&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="nx"&gt;PFLAG_DIRTY_OPAQUE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
            &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mAttachInfo&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;mAttachInfo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;mIgnoreDirtyState&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="nx"&gt;mPrivateFlags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;privateFlags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="nx"&gt;PFLAG_DIRTY_MASK&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;PFLAG_DRAWN&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;     * Draw traversal performs several drawing steps which must be executed&lt;/span&gt;
&lt;span class="cm"&gt;     * in the appropriate order:&lt;/span&gt;
&lt;span class="cm"&gt;     *&lt;/span&gt;
&lt;span class="cm"&gt;     *      1. Draw the background&lt;/span&gt;
&lt;span class="cm"&gt;     *      2. If necessary, save the canvas&amp;#39; layers to prepare for fading&lt;/span&gt;
&lt;span class="cm"&gt;     *      3. Draw view&amp;#39;s content&lt;/span&gt;
&lt;span class="cm"&gt;     *      4. Draw children&lt;/span&gt;
&lt;span class="cm"&gt;     *      5. If necessary, draw the fading edges and restore layers&lt;/span&gt;
&lt;span class="cm"&gt;     *      6. Draw decorations (scrollbars for instance)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="c1"&gt;// Step 1, draw the background, if needed&lt;/span&gt;
    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;saveCount&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;dirtyOpaque&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;drawBackground&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// skip step 2 &amp;amp; 5 if possible (common case)&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;viewFlags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mViewFlags&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;horizontalEdges&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;viewFlags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;FADING_EDGE_HORIZONTAL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;verticalEdges&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;viewFlags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nx"&gt;FADING_EDGE_VERTICAL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;verticalEdges&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;horizontalEdges&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// Step 3, draw the content&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;dirtyOpaque&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;onDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// Step 4, draw the children&lt;/span&gt;
        &lt;span class="nx"&gt;dispatchDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// Step 6, draw decorations (scrollbars)&lt;/span&gt;
        &lt;span class="nx"&gt;onDrawScrollBars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mOverlay&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;mOverlay&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;isEmpty&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;mOverlay&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getOverlayView&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;dispatchDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="c1"&gt;// we&amp;#39;re done...&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;     * Here we do the full fledged routine...&lt;/span&gt;
&lt;span class="cm"&gt;     * (this is an uncommon case where speed matters less,&lt;/span&gt;
&lt;span class="cm"&gt;     * this is why we repeat some of the tests that have been&lt;/span&gt;
&lt;span class="cm"&gt;     * done above)&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;

    &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;drawTop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;drawBottom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;drawLeft&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;drawRight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kr"&gt;float&lt;/span&gt; &lt;span class="nx"&gt;topFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;float&lt;/span&gt; &lt;span class="nx"&gt;bottomFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;float&lt;/span&gt; &lt;span class="nx"&gt;leftFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;float&lt;/span&gt; &lt;span class="nx"&gt;rightFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;// Step 2, save the canvas&amp;#39; layers&lt;/span&gt;
    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;paddingLeft&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mPaddingLeft&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="kr"&gt;boolean&lt;/span&gt; &lt;span class="nx"&gt;offsetRequired&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;isPaddingOffsetRequired&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;offsetRequired&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;paddingLeft&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="nx"&gt;getLeftPaddingOffset&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;left&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mScrollX&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;paddingLeft&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;left&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;mRight&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;mLeft&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;mPaddingRight&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;paddingLeft&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mScrollY&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;getFadeTop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;offsetRequired&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;getFadeHeight&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;offsetRequired&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;offsetRequired&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;right&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="nx"&gt;getRightPaddingOffset&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="nx"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="nx"&gt;getBottomPaddingOffset&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="nx"&gt;ScrollabilityCache&lt;/span&gt; &lt;span class="nx"&gt;scrollabilityCache&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;mScrollCache&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="kr"&gt;float&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;scrollabilityCache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;fadingEdgeLength&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="c1"&gt;// clip the fade length if top and bottom fades overlap&lt;/span&gt;
    &lt;span class="c1"&gt;// overlapping fades produce odd-looking artifacts&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;verticalEdges&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;top&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// also clip horizontal fades if necessary&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;horizontalEdges&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;right&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;verticalEdges&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;topFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;getTopFadingEdgeStrength&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;
        &lt;span class="nx"&gt;drawTop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;topFadeStrength&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="nx"&gt;bottomFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;getBottomFadingEdgeStrength&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;
        &lt;span class="nx"&gt;drawBottom&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;bottomFadeStrength&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;horizontalEdges&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;leftFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;getLeftFadingEdgeStrength&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;
        &lt;span class="nx"&gt;drawLeft&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;leftFadeStrength&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="nx"&gt;rightFadeStrength&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;getRightFadingEdgeStrength&lt;/span&gt;&lt;span class="p"&gt;()));&lt;/span&gt;
        &lt;span class="nx"&gt;drawRight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;rightFadeStrength&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mf"&gt;1.0f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nx"&gt;saveCount&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getSaveCount&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;solidColor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;getSolidColor&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;solidColor&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="kr"&gt;int&lt;/span&gt; &lt;span class="nx"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;HAS_ALPHA_LAYER_SAVE_FLAG&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawTop&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;saveLayer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawBottom&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;saveLayer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawLeft&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;saveLayer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;left&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawRight&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;saveLayer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;right&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;scrollabilityCache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setFadeColor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;solidColor&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// Step 3, draw the content&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;dirtyOpaque&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nx"&gt;onDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// Step 4, draw the children&lt;/span&gt;
    &lt;span class="nx"&gt;dispatchDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// Step 5, draw the fade effect and restore layers&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="nx"&gt;Paint&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;scrollabilityCache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;paint&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="nx"&gt;Matrix&lt;/span&gt; &lt;span class="nx"&gt;matrix&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;scrollabilityCache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kr"&gt;final&lt;/span&gt; &lt;span class="nx"&gt;Shader&lt;/span&gt; &lt;span class="nx"&gt;fade&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;scrollabilityCache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;shader&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawTop&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setScale&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;topFadeStrength&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postTranslate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setLocalMatrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setShader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drawRect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawBottom&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setScale&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;bottomFadeStrength&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postRotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postTranslate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setLocalMatrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setShader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drawRect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawLeft&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setScale&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;leftFadeStrength&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postRotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postTranslate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setLocalMatrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setShader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drawRect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;left&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;drawRight&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setScale&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;fadeHeight&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nx"&gt;rightFadeStrength&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postRotate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;postTranslate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setLocalMatrix&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;matrix&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setShader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;fade&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;drawRect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;right&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;top&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;bottom&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;restoreToCount&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;saveCount&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// Step 6, draw decorations (scrollbars)&lt;/span&gt;
    &lt;span class="nx"&gt;onDrawScrollBars&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;mOverlay&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nx"&gt;mOverlay&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;isEmpty&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nx"&gt;mOverlay&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getOverlayView&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="nx"&gt;dispatchDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™ä¸ªæ–¹æ³•ä¸­è¯´å¾—å¾ˆæ¸…æ¥šï¼ŒViewçš„æ¸²æŸ“åˆ†6æ­¥ï¼Œä¹Ÿå¯ä»¥çœç•¥ç¬¬2å’Œç¬¬5æ­¥ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;ç¬¬ä¸€æ­¥ï¼Œç”»èƒŒæ™¯&lt;/span&gt;
&lt;span class="err"&gt;ç¬¬äºŒæ­¥ï¼Œå¯èƒ½çš„è¯ï¼ˆä¸€èˆ¬æ˜¯è¦åšåŠ¨ç”»ï¼‰ï¼ŒæŠŠ&lt;/span&gt;&lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="err"&gt;ä¿å­˜èµ·æ¥&lt;/span&gt;
&lt;span class="err"&gt;ç¬¬ä¸‰æ­¥ï¼Œç”»å†…å®¹&lt;/span&gt;
&lt;span class="err"&gt;ç¬¬å››æ­¥ï¼Œç”»å­æ§ä»¶&lt;/span&gt;
&lt;span class="err"&gt;ç¬¬äº”æ­¥ï¼Œè¿˜åŸç¬¬äºŒéƒ¨ä¿å­˜çš„&lt;/span&gt;&lt;span class="n"&gt;canvas&lt;/span&gt;
&lt;span class="err"&gt;ç¬¬å…­æ­¥ï¼Œç”»è£…é¥°ï¼ˆ&lt;/span&gt;&lt;span class="n"&gt;scrollbar&lt;/span&gt;&lt;span class="err"&gt;ï¼‰&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ ·å°±æŠŠæ•´ä¸ªè§†å›¾ç”»å‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;h2&gt;Touchäº‹ä»¶&lt;/h2&gt;
&lt;p&gt;åœ¨Viewä¸­æœ‰å¾ˆå¤§éƒ¨åˆ†æ˜¯å¤„ç†äº‹ä»¶ï¼ŒåŒ…æ‹¬æŒ‰é”®äº‹ä»¶ï¼Œæ»šåŠ¨çƒäº‹ä»¶ï¼Œè§¦æ‘¸äº‹ä»¶ã€‚è¿™é‡Œä¸»è¦è®²è§¦æ‘¸äº‹ä»¶ï¼Œå› ä¸ºè¿™ä¸ªç”¨å¾—æœ€å¤šã€‚
è¿™é‡Œä¸»è¦æœ‰onTouchæ–¹æ³•ï¼ŒdispatchTouchæ–¹æ³•ã€‚dispatchTouchæ˜¯ä¸ªé‡è¦çš„æ–¹æ³•ï¼Œæˆ‘ä»¬çš„è§¦æ‘¸äº‹ä»¶éƒ½æ˜¯ç»è¿‡dispatchTouchåˆ†å‘ä¸‹å»çš„ï¼Œä½†æ˜¯Viewæ˜¯å­æ§ä»¶å®ƒçš„åˆ†å‘å…¶å®å°±æ˜¯å‘é€ç»™è‡ªå·±ã€‚æˆ‘çœ‹åˆ°æºç é‡Œæœ‰è¿™ä¹ˆä¸€æ®µï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;onFilterTouchEventForSecurity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;//noinspection SimplifiableIfStatement&lt;/span&gt;
        &lt;span class="n"&gt;ListenerInfo&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mListenerInfo&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;li&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mOnTouchListener&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt;
                &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mViewFlags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;ENABLED_MASK&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;ENABLED&lt;/span&gt;
                &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;li&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mOnTouchListener&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;onTouch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;onTouchEvent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œè¯´æ˜å¦‚æœä½ é‡è½½äº†ä¸€ä¸ªViewçš„onTouchæ–¹æ³•ï¼Œå¹¶ä¸”è®¾ç½®äº†å®ƒçš„OnTouchListenerï¼Œé‚£ä¹ˆå®ƒå°†è°ƒç”¨OnTouchListenerçš„æ–¹æ³•ï¼Œè€Œä¸ä¼šè°ƒç”¨æœ¬èº«çš„onTouchæ–¹æ³•ã€‚
è€ŒonTouchçš„å®ç°ï¼Œä¸»è¦æ˜¯ç„¦ç‚¹å¤„ç†ï¼Œç‚¹å‡»å’Œå®‰è£…äº‹ä»¶çš„å¤„ç†ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šç‰¹åˆ«çš„ä¸œè¥¿ã€‚æˆ‘ä¸€èˆ¬è€ƒé¢è¯•è€…Viewçš„touchäº‹ä»¶å“ªäº›ï¼Œä»å±å¹•ä¸­ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œäº‹ä»¶æ˜¯æ€ä¹ˆä¼ é€’çš„ï¼Œç›¸å…³çš„æ–¹æ³•æœ‰å“ªäº›ã€‚è¿™é‡ŒViewGroupæœ‰ä¸€ä¸ªæ‹¦æˆªäº‹ä»¶æ–¹æ³•ï¼ˆå¿˜äº†å•è¯æ€ä¹ˆæ‰“ï¼‰ï¼Œæ˜¯Viewé‡Œæ²¡æœ‰çš„ï¼Œåˆæ˜¯æ€ä¹ˆå·¥ä½œã€‚è¿™é‡Œå¾ˆè€ƒé¢è¯•è€…å¯¹è§¦æ‘¸äº‹ä»¶çš„ç†è§£ï¼Œåç»­æˆ‘ä¼šè¯´ã€‚&lt;/p&gt;
&lt;p&gt;Viewè¿˜æœ‰ä¸€äº›é‡è¦çš„æ–¹æ³•ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œè€Œä¸”Viewçš„æ–¹æ³•è¦ç»“åˆViewGroupçš„å®ç°ç†è§£ï¼Œä¸‹æ¬¡å†™ViewGroup.&lt;/p&gt;</summary><category term="Androidæºç å­¦ä¹  View"></category></entry><entry><title>å½“åšäº†ä¸€æ®µæ—¶é—´çš„Androidçš„å›°æƒ‘</title><link href="http://szuwest.github.io/dang-zuo-liao-yi-duan-shi-jian-de-androidde-kun-huo.html" rel="alternate"></link><updated>2014-12-14T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-12-14:dang-zuo-liao-yi-duan-shi-jian-de-androidde-kun-huo.html</id><summary type="html">&lt;h1&gt;å½“åšäº†ä¸€æ®µæ—¶é—´çš„Androidçš„å›°æƒ‘&lt;/h1&gt;
&lt;p&gt;å½“åšä¸€é—¨æŠ€æœ¯åˆ°è¾¾ä¸€å®šçš„æ—¶é—´ä¹‹åï¼Œå°±ä¼šé™·å…¥ä¸€ä¸ªå›°å¢ƒã€‚ä¸çŸ¥é“å¦‚ä½•æé«˜ã€‚ä»»ä½•ä¸€é—¨æŠ€æœ¯ï¼Œéƒ½æ˜¯åˆšå¼€å§‹çš„æ—¶å€™ï¼Œè¿›æ­¥éå¸¸å¿«ï¼Œç„¶åæ”¶è·éå¸¸å¤šï¼Œä½†æ˜¯è¶Šå¾€åè¶Šéš¾æœ‰è¿›æ­¥ã€‚å› ä¸ºå› ä¸ºä»»ä½•ä¸€é—¨æŠ€æœ¯éƒ½æœ‰ä¸€å®šçš„ç“¶é¢ˆï¼Œå¦‚ä½•æ‰“ç ´è¿™ä¸ªç“¶é¢ˆï¼Œæ˜¯å¾ˆé‡è¦çš„ã€‚ä¸€æ—¦æ‰“ç ´è¿™ä¸ªç“¶é¢ˆï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€ä¸ªå¹³å°ï¼Œä¸‹ä¸€ä¸ªçº§åˆ«ã€‚ç„¶è€Œç¬¬äºŒä¸ªçº§åˆ«ä¹Ÿè¿˜æ˜¯ä¼šé‡å¤ç¬¬ä¸€ä¸ªçº§åˆ«çš„æ­¥éª¤ã€‚å¦‚æ­¤é‡å¤ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¤§å¤šæ•°äººéƒ½æ˜¯ä¼šåœ¨ç¬¬ä¸€ä¸ªç¬¬äºŒä¸ªçº§åˆ«ä¸ŠæŒ£æ‰å‰è¿›ï¼Œæ— æ³•çªç ´ã€‚æˆ‘ä¸çŸ¥é“è‡ªå·±çš„AndroidæŠ€æœ¯ç°åœ¨æ—¶å¤„åœ¨ç¬¬ä¸€è¿˜æ˜¯ç¬¬äºŒä¸ªçº§åˆ«ï¼Œä½†æ˜¯æˆ‘ç°åœ¨ç¡®å®é‡åˆ°äº†ç“¶é¢ˆï¼Œæ„Ÿè§‰çªç ´å¾ˆè‰°éš¾ã€‚æœ€è¿‘äº§å“ä¸Šåˆæœ‰äº›éœ€æ±‚æ¯”è¾ƒéš¾åšï¼Œè‡ªå·±æ„Ÿè§‰å¯ä»¥å®ç°ï¼Œä½†æ˜¯çœŸè¦åšå‡ºæ¥ï¼Œéœ€è¦èŠ±å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›ï¼Œè¿˜ä¸èƒ½ç¡®å®šå®Œå…¨å®ç°äº§å“æ‰€éœ€æ•ˆæœã€‚è€Œé¡¹ç›®æœ¬èº«æ˜¯æ¯”è¾ƒç´§æ€¥çš„ï¼Œå¦‚æœæ—¢è¦å®ç°æ•ˆæœåˆè¦ä¿è¯è¿›åº¦ï¼Œä¼°è®¡æˆ‘è¦ä¸åƒé¥­ä¸ç¡è§‰æ‰å¯ä»¥å®ç°ï¼Œè¿™çœŸæ˜¯ä¸å¯èƒ½çš„ã€‚å…¶å®è¿™æ€»ç»“åˆ°ä¸€å¥è¯å°±æ˜¯è‡ªå·±çš„å®åŠ›è¿˜æ²¡è¾¾åˆ°éšå¿ƒæ‰€ç”¨çš„åœ°æ­¥ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›éœ€è¦å®šåˆ¶çš„åŠ¨ç”»äº¤äº’æ–¹é¢çš„ã€‚è¿™äº›æ•ˆæœåˆ«äººéƒ½éƒ½èƒ½åšå‡ºæ¥äº†ï¼Œä½†æ˜¯è‡ªå·±è¦åšåŒæ ·çš„æ•ˆæœï¼Œéœ€è¦ç»å°½è„‘æ±ã€‚&lt;/p&gt;
&lt;p&gt;é¸Ÿå‚çš„Androidäººæ‰çœŸçš„å¾ˆå°‘ï¼Œæœ‰AndroidæŠ€æœ¯ä¸‰å¹´ä»¥ä¸Šçš„äººå…¨å…¬å¸ä¼°è®¡å°‘ä¹‹åˆå°‘ã€‚é¸Ÿå‚å…¶å®äººæ‰ä¸å°‘ï¼Œä½†æ˜¯ç•™ä¸ä½ï¼Œå¾ˆå¤šäººå‘†äº†ä¸€å¹´å°±ç¦»å¼€ï¼ŒçœŸæ˜¯ä»¶ä»¤äººæ‚²ä¼¤çš„äº‹ï¼Œå¯æ˜¯äº’è”ç½‘è¡Œä¸šè¿˜çœŸæ˜¯å¤§éƒ¨åˆ†å…¬å¸éƒ½æ˜¯è¿™æ ·å­ã€‚æœ‰æ—¶å€™äººçœŸéœ€è¦æ²Ÿé€šäº¤äº’æ‰å¯ä»¥è¿›æ­¥ æ›´å¿«ã€‚æˆ‘å·²ç»å¾ˆä¹…æ²¡æœ‰è¯•è¿‡è¿™ä¸ªæ„Ÿè§‰äº†ã€‚é‚£ç§è¿›æ­¥å¾ˆå¿«ï¼Œè·Ÿå¤§å®¶äº¤æµç¢°å‡ºç«èŠ±çš„æƒ…å½¢å°‘ä¹‹åˆå°‘ï¼Œè¿˜æ˜¯ä¸¤å¹´å‰åˆšæ¥é¸Ÿå‚çš„æ—¶å€™æœ‰è¿™ä¸ªæ„Ÿè§‰ã€‚æœ‰æ—¶å€™è§‰å¾—æŒºå­¤ç‹¬çš„ã€‚æŠ€æœ¯é‚£æ—¶å€™çš„å…„å¼Ÿéƒ½ç¦»å¼€äº†ã€‚é¡¹ç›®æœ€è¿‘ä¸¤ä¸ªæœˆä¸‰ä¸ªæ°´å¹³ç›¸å½“çš„å…„å¼Ÿç¦»å¼€äº†ï¼Œè¿™è®©æˆ‘æ„Ÿè§‰åˆ°å¾ˆå¯‚å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸äººå‰è¿›çš„æ—¶å€™æ˜¯æ³¨å®šæ˜¯å­¤ç‹¬çš„ã€‚&lt;/p&gt;</summary><category term="å›°æƒ‘ï¼ŒAndroid"></category></entry><entry><title>å…³äºPelicanä¸ŠDisqusæ— æ³•åŠ è½½çš„é—®é¢˜</title><link href="http://szuwest.github.io/guan-yu-pelicanshang-disquswu-fa-jia-zai-de-wen-ti.html" rel="alternate"></link><updated>2014-12-01T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-12-01:guan-yu-pelicanshang-disquswu-fa-jia-zai-de-wen-ti.html</id><summary type="html">&lt;p&gt;æœ€è¿‘å‘ç°æˆ‘çš„åšå®¢DisqusåŠ è½½ä¸å‡ºæ¥ï¼Œä»¥å‰æ˜¯å¥½å¥½çš„ã€‚åæ¥æ ¹æ®å®ƒçš„æç¤ºå»æ‰¾é—®é¢˜ï¼Œæ‰¾äº†åŠå¤©ä¹Ÿæ‰¾ä¸å‡ºé—®é¢˜æ‰€åœ¨ã€‚ç„¶åç½‘ä¸Šsearchï¼Œå‘ç°äº†ä¸€ç¯‡è·Ÿæˆ‘ç±»ä¼¼çš„é—®é¢˜æ–‡ç« &lt;a href="http://whilgeek.github.io/posts/2014/07/we-were-unable-to-load-disqus/"&gt;è¿™é‡Œ&lt;/a&gt;ã€‚æˆ‘çš„é…ç½®æ–‡ä»¶é‡Œç¡®å®æœ‰ &lt;code&gt;RELATIVE_URLS = True&lt;/code&gt;,æŠŠå®ƒè®¾ç½®ä¸ºFalseä¹Ÿæ²¡ç”¨ã€‚æ£€æŸ¥äº†Néshortnameï¼Œåˆ°Disqusè®¾ç½®é‡Œå„ç§è¯•å„ç§æ£€æŸ¥ï¼Œéƒ½è¿˜æ˜¯æ²¡æœ‰è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰åŠæ³•ï¼Œæˆ‘åªå¥½åœ¨Disqusä¸Šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„siteï¼Œç„¶åå›æ¥é…ç½®ç›¸åº”çš„æ”¹äº†ã€‚runèµ·æ¥äº†ï¼Œå¯ä»¥äº†ã€‚ç¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ç»è¿‡è¿™ä¸€æ¬¡çš„æŠ˜è…¾ï¼Œæˆ‘è¿˜å­¦åˆ°ä¸å°‘åˆ«çš„ä¸œè¥¿ã€‚å‰æ®µä¸å¤ªæ‡‚çš„äººï¼ŒçœŸæ˜¯æ‚²å‰§ã€‚ä»¥ååœ¨è¿™æ–¹é¢å¥½å¥½è¡¥è¡¥&lt;/p&gt;</summary></entry><entry><title>å¿«é€Ÿæ»šåŠ¨æ¡(FastScroll)çš„å®šåˆ¶</title><link href="http://szuwest.github.io/kuai-su-gun-dong-tiao-fastscrollde-ding-zhi.html" rel="alternate"></link><updated>2014-11-27T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-11-27:kuai-su-gun-dong-tiao-fastscrollde-ding-zhi.html</id><summary type="html">&lt;p&gt;æœ€è¿‘é¡¹ç›®ä¸­å› ä¸ºè¦åšå®šåˆ¶å¿«é€Ÿæ»šåŠ¨æ¡åŠŸèƒ½è€Œç ”ç©¶è¿™å—ï¼Œå‘ç°è¿˜ä¸æ˜¯é‚£ä¹ˆå¥½åšã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘é¦–å…ˆæ‰¾äº†ç½‘ä¸Šæœ‰ç±»å‹åŠŸèƒ½åº”ç”¨ï¼Œæš‚æ—¶åªå‘ç°å°ç±³è‡ªåŠ¨ç›¸å†Œå’Œè…¾è®¯çš„ç›¸å†Œç®¡å®¶åšäº†è¿™ä¸ªåŠŸèƒ½ã€‚ç„¶åç½‘ä¸Šæ‰¾å¿«é€Ÿæ»šåŠ¨æ¡çš„å®šåˆ¶çš„ç›¸å…³èµ„æ–™ã€‚æœ€åå‘ç°åªèƒ½é€šè¿‡styleæˆ–è€…åå°„æœºåˆ¶å»æ”¹å˜å¿«é€Ÿæ»šåŠ¨æ¡ï¼Œè€Œä¸”èƒ½æ”¹çš„ä¸œè¥¿éå¸¸æœ‰é™----åªèƒ½æ›¿æ¢å›¾ç‰‡ã€‚ä½†æ˜¯å°ç±³å’Œè…¾è®¯ä¸ºä»€ä¹ˆèƒ½å®šåˆ¶çš„é‚£ä¹ˆå¥½å‘¢ï¼Ÿå°ç±³å¯èƒ½æ˜¯ç³»ç»Ÿå±‚é¢ä¸Šæ”¹çš„ï¼Œé‚£è…¾è®¯çš„æ€»ä¸èƒ½ä¹Ÿæ˜¯å§ã€‚æˆ‘åªèƒ½å»ä¸‹è½½ç›¸å†Œç®¡å®¶çš„åŒ…æ¥åç¼–è¯‘äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡æˆ‘åå¤çœ‹ä»–ä»¬çš„ä»£ç å’Œèµ„æºæ–‡ä»¶ï¼Œç»ˆäºæ‰¾åˆ°äº†ç›¸å…³çš„ç±»--ExpandableListViewï¼Œè¿™ä¸ªè·Ÿç³»ç»Ÿçš„ExpandableListViewä¸æ˜¯åŒä¸€ä¸ªï¼Œåªæ˜¯å•çº¯çš„åå­—ç›¸åŒè€Œå·²ã€‚å› ä¸ºä»£ç æ··æ·†è¿‡äº†ï¼Œæˆ‘èŠ±äº†å¾ˆå¤§åŠ›æ°”è™½ç„¶çœ‹æ‡‚äº†ä¸ªå¤§æ¦‚ï¼Œå´æ˜¯ï¼Œæ²¡åŠæ³•å®Œå…¨ææ¸…ä¸€äº›ç»†èŠ‚æ€§çš„ä¸œè¥¿ã€‚åŸç†å¤§è‡´æ˜¯è¿™æ ·ï¼šä»–ä»¬å¹¶æ²¡æœ‰å»å®šåˆ¶FastScrollï¼Œè€Œæ˜¯è‡ªå·±ç”Ÿæˆäº†ä¸€ä¸ªå«ScrollPanelçš„Viewï¼Œç„¶åæŠŠè¿™ä¸ªViewç”»ä¸Šå»ï¼Œå¹¶ä¸”å¯¹è¿™ä¸ªViewè®¾ç½®äº†OnTouchListenerï¼Œå¯¹ç”¨æˆ·çš„è§¦æ‘¸äº‹ä»¶å¤„ç†ï¼Œæ‹–åŠ¨çš„æ—¶å€™ä¸æ–­å»æ»šåŠ¨ListViewï¼Œå®ç°ç±»å‹FastScrollçš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå®ƒä»¬çš„æºä»£ç æ··æ·†äº†å¾ˆå¤šç»†èŠ‚çœ‹ä¸äº†ï¼Œæˆ‘åªå¥½å»å‚è€ƒç³»ç»Ÿçš„FastScrollæºä»£ç ã€‚è™½ç„¶å¤§è‡´çœ‹æ‡‚äº†ï¼Œä½†æ˜¯è‡ªå·±å»å®ç°çš„æ—¶å€™ï¼Œè¿˜æ˜¯è¾¾ä¸åˆ°æƒ³è¦çš„æ•ˆæœã€‚å› ä¸ºæ—¶é—´å’Œç²¾åŠ›é—®é¢˜ï¼Œæˆ‘ç°åœ¨åªèƒ½æš‚æ—¶æ”¾ä¸€æ”¾ï¼Œä¹‹åæœ‰æ—¶é—´å†ç ”ç©¶ï¼Œå®åœ¨ä¸è¡Œæˆ‘å¿ƒé‡Œä¹Ÿæœ‰å…¶ä»–æ›²çº¿æ•‘å›½çš„æ–¹æ¡ˆå¯ä»¥è¯•è¯•ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©å‘ç°äº†ä¸€ä¸ªç±»å‹åŠŸèƒ½çš„åº“ï¼Œå¾ˆä¸é”™ã€‚è®°å½•ä¸€ä¸‹.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/szuwest/quickscroll"&gt;QuickScroll&lt;/a&gt;&lt;/p&gt;</summary><category term="Android View Scroll"></category></entry><entry><title>è‡ªå®šä¹‰DateViewæ§ä»¶</title><link href="http://szuwest.github.io/zi-ding-yi-dateviewkong-jian.html" rel="alternate"></link><updated>2014-11-21T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-11-21:zi-ding-yi-dateviewkong-jian.html</id><summary type="html">&lt;p&gt;æœ€è¿‘å› ä¸ºé¡¹ç›®éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªæ—¥æœŸæ§ä»¶ï¼Œæˆ‘èŠ±äº†ä¸€ä¸ªå¤šå°æ—¶å†™äº†è¿™ä¸ªæ§ä»¶ã€‚è™½ç„¶è·Ÿè®¾è®¡æ•ˆæœå›¾è¿˜æœ‰ç‚¹ç»†å¾®å·®åˆ«ï¼Œä½†æ˜¯è¿™ä¸ªå¯ä»¥æ…¢æ…¢ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt="æ•ˆæœå›¾1" src="http://image16-c.poco.cn/mypoco/myphoto/20141128/01/17538075320141128010028044.png" /&gt; &lt;img alt="æ•ˆæœå›¾1" src="http://image16-c.poco.cn/mypoco/myphoto/20141128/01/17538075320141128010051063.png" /&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="n"&gt;class&lt;/span&gt; &lt;span class="n"&gt;DateView&lt;/span&gt; &lt;span class="n"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;DAY_TEXT_SIZE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;MONTH_TEXT_SIZE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mDay&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mMonth&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;mYear&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextPaint&lt;/span&gt; &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="n"&gt;TextPaint&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;DateView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;initView&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;DateView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;AttributeSet&lt;/span&gt; &lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;initView&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;DateView&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;AttributeSet&lt;/span&gt; &lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;defStyleAttr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;super&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;attrs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;defStyleAttr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;initView&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;initView&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mDayPaint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TextPaint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TextPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ANTI_ALIAS_FLAG&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setColor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff333333&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mMonthPaint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TextPaint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTextSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;DAY_TEXT_SIZE&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="c1"&gt;//        setBackgroundColor(Color.TRANSPARENT);&lt;/span&gt;
        &lt;span class="n"&gt;setDate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Calendar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInstance&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;getTimeInMillis&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;setMinimumWidth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;setMinimumHeight&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * æ˜¾ç¤ºå¹´æœˆæ—¥&lt;/span&gt;
&lt;span class="cm"&gt;     * @param timeInSeconds ä»¥ç§’ä¸ºå•ä½&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setDate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;timeInSeconds&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Calendar&lt;/span&gt; &lt;span class="n"&gt;ca&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Calendar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInstance&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTimeInMillis&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeInSeconds&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mMonth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Calendar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;MONTH&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;mYear&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Calendar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;YEAR&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mDay&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ca&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Calendar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DAY_OF_MONTH&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTextSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;MONTH_TEXT_SIZE&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;invalidate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt;     * è®¾ç½®æ—¶é—´ï¼Œå½“yearä¸º0æ—¶ï¼Œè¡¨ç¤ºä¸éœ€è¦æ˜¾ç¤ºå¹´ï¼Œåªæ˜¾ç¤ºæœˆæ—¥&lt;/span&gt;
&lt;span class="cm"&gt;     * @param day 1-31&lt;/span&gt;
&lt;span class="cm"&gt;     * @param month 1-12&lt;/span&gt;
&lt;span class="cm"&gt;     * @param year &amp;gt;= 0ï¼Œ0è¡¨ç¤ºä¸æ˜¾ç¤ºå¹´&lt;/span&gt;
&lt;span class="cm"&gt;     */&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setDate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mDay&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;mMonth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;month&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mMonth&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;mMonth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;mYear&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;year&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mYear&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTextSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;MONTH_TEXT_SIZE&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTextSize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getContext&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;MONTH_TEXT_SIZE&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;invalidate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;dip2px&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Context&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;dpValue&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;scale&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getResources&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;getDisplayMetrics&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;density&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dpValue&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;scale&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mf"&gt;0.5f&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setTextColor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setColor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setColor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;color&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;invalidate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
    &lt;span class="n"&gt;protected&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;onDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Canvas&lt;/span&gt; &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;onDraw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;dayText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;valueOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%02d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mDay&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;dayTextLen&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;measureText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dayText&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;canvasWith&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getWidth&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getHeight&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

        &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawLine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;canvasWith&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;0.75f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;0.25f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasWith&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;0.25f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;0.75f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dayText&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasWith&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dayTextLen&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getFontMetrics&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;descent&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mDayPaint&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;


        &lt;span class="n"&gt;Paint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FontMetrics&lt;/span&gt; &lt;span class="n"&gt;fontMetrics&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getFontMetrics&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;


        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;monthText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;valueOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mMonth&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;æœˆ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="c1"&gt;//        int monthTextLen = (int)mMonthPaint.measureText(monthText);&lt;/span&gt;
        &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;textHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fontMetrics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ascent&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;abs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fontMetrics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;descent&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;fontMetrics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;leading&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mYear&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;yearText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;valueOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mYear&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;yearText&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasWith&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getTextSize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;0.5f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getTextSize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;1.5f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monthText&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasWith&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getTextSize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getTextSize&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mf"&gt;0.5f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;canvas&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;drawText&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monthText&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasWith&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;canvasHeight&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getTextSize&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;mMonthPaint&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æœ€ä¸å¥½åšçš„å°±æ˜¯ç®—å­—çš„ä½ç½®ï¼Œæ–‡å­—çš„æ¸²æŸ“æ˜¯åŸºäºbaselineçš„ï¼Œæˆ‘çš„ç†è§£æ˜¯Rectçš„å·¦ä¸‹è§’ã€‚å…³äºcanvasçš„drawè¿˜æœ‰å¾ˆå¤šä¸æ‡‚ï¼Œå¥½å¥½å­¦ä¹ &lt;/p&gt;</summary><category term="Android è‡ªå®šä¹‰æ§ä»¶ æ—¥æœŸæ§ä»¶"></category></entry><entry><title>ActivityåŠ¨ç”»ï¼ˆäºŒï¼‰</title><link href="http://szuwest.github.io/activitydong-hua-er.html" rel="alternate"></link><updated>2014-11-12T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-11-12:activitydong-hua-er.html</id><summary type="html">&lt;h1&gt;ActivityåŠ¨ç”»ï¼ˆäºŒï¼‰&lt;/h1&gt;
&lt;p&gt;å¦‚æœè¦ç»Ÿä¸€æ‰€æœ‰çš„Activityçš„æ‰“å¼€å¯å…³é—­åŠ¨ç”»ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªå¾ˆç®€ä¾¿çš„æ–¹æ³•ï¼šå°±æ˜¯è®¾ç½®Applicationçš„themeã€‚åœ¨Applicationçš„themeé‡Œæœ‰ä¸€ä¸ªAndroid:windowAnimationStyleçš„å±æ€§ï¼Œå¯ä»¥å®šä¹‰äº†ä¸€ä¸ªActivityçš„æ‰“å¼€å’Œå…³é—­åŠ¨ç”»ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­å°±è‡ªå®šä¹‰äº†ä¸€ä¸ªthemeã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;````
&lt;style name="ThemeLightNoTitle" mce_bogus="1" parent="@android:style/Theme.Light.NoTitleBar"&gt;
        &lt;item name="android:windowAnimationStyle"&gt;@style/AnimationActivity&lt;/item&gt;
    &lt;/style&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;style&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;AnimationActivity&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;mce_bogus=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;parent=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;@android:style/Animation.Activity&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:activityOpenEnterAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_right_in&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:activityOpenExitAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_left_out&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:activityCloseEnterAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_left_in&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:activityCloseExitAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_right_out&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:taskOpenEnterAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_right_in&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:taskOpenExitAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_left_out&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:taskCloseEnterAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_left_in&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:taskCloseExitAnimation&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@anim/translate_between_interface_right_out&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;````&lt;/p&gt;
&lt;p&gt;å°†è¿™ä¸ªthemeè¿ç”¨åˆ°Applicationçš„themeé‡Œï¼Œæ‰€ä»¥çš„Activityå°±ä¼šæŒ‰ç…§ä½ å®šä¹‰çš„åŠ¨ç”»æ¥äº¤äº’äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œç°å®çš„éœ€æ±‚å¾€å¾€æ˜¯æ›´å¤æ‚çš„åŠ¨ç”»æˆ–è€…äº¤äº’ï¼Œä¸å¯èƒ½æ‰€æœ‰çš„ç•Œé¢çš„äº¤äº’åŠ¨ç”»éƒ½ä¸€è‡´çš„ã€‚æœ‰äº›é¡µé¢éœ€è¦ç‰¹åˆ«å®šåˆ¶ï¼Œè€Œä¸”å¯èƒ½å¾ˆå¤æ‚ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦å®ç°ç±»ä¼¼äºiOSçš„NavigationViewControllerçš„é¡µé¢å³æ»‘å…³é—­é¡µé¢çš„äº¤äº’åŠ¨ç”»ï¼Œæˆ–è€…è¦å®ç°ç‚¹å‡»ä¸€å¼ å›¾ç‰‡ç¼©ç•¥å›¾ï¼Œç„¶åå®ƒæ¸æ¸æ”¾å¤§ï¼Œç‚¹å‡»å…³é—­å®ƒåˆæ…¢æ…¢ç¼©å›åŸå¤„çš„åŠ¨ç”»ï¼ŒæŒ‰ç…§ä¹‹å‰ä»‹ç»çš„æ–¹æ³•ï¼Œéƒ½æ— æ³•å®ç°ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;åœ¨iOSè‡ªå¸¦ç›¸å†ŒAPPé‡Œï¼Œç‚¹å‡»ä¸€ä¸ªç¼©ç•¥å›¾ï¼Œç¼©ç•¥å›¾æ¸æ¸æ”¾å¤§è¿›å…¥å¤§å›¾æŸ¥çœ‹ã€‚è¿™ä¸ªäº¤äº’åŸºæœ¬æˆäº†ä¸€ä¸ªç›¸å†Œå¿…å¤‡çš„æ ‡å‡†äº¤äº’ã€‚Androidä¸Šçš„ç›¸å†Œå¾ˆå¤šä¹Ÿç”¨äº†è¿™ç§åŠ¨ç”»äº¤äº’ã€‚å¦‚æœç¼©ç•¥å›¾çš„æŸ¥çœ‹å’Œå¤§å›¾æŸ¥çœ‹éƒ½æ˜¯åœ¨åŒä¸€ä¸ªActivityä¸­å®Œæˆçš„è¯ï¼Œè¿˜æ˜¯å¯ä»¥æ¯”è¾ƒå®¹æ˜“å®ç°çš„ã€‚ä½†æ˜¯å¦‚æœç¼©ç•¥çš„æŸ¥çœ‹å’Œå¤§å›¾çš„æŸ¥çœ‹åˆ†å¤„åœ¨ä¸åŒçš„Activityä¸­çš„è¯ï¼Œé‚£è¿™å°±ä¸æ˜¯å¾ˆå¥½å®ç°äº†ã€‚è¿™é‡Œæˆ‘å‡†å¤‡è®²è®²å¯ä»¥æ€ä¹ˆå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚è€Œä¸”è¿™ä¸ªæ–¹æ³•å¯ä»¥æ¨å¹¿å‡ºå»ï¼Œå¾ˆå¤šç±»å‹çš„Activityåˆ‡æ¢åŠ¨ç”»éƒ½å¯ä»¥æŒ‰ç…§è¿™ç§æ–¹å¼å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨å‡è®¾æŸ¥çœ‹ç¼©ç•¥å›¾çš„Activityæ˜¯Aï¼ŒæŸ¥çœ‹å¤§å›¾çš„Activityæ˜¯Bã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ è®¾ç½®Bçš„çš„themeä¸ºé€æ˜çš„transparentã€‚&lt;/li&gt;
&lt;li&gt;äºŒ åœ¨Aä¸­ï¼Œå¯åŠ¨Bå‰ï¼ŒæŠŠä¸€äº›å¿…è¦çš„ä¿¡æ¯æ‰“åŒ…æˆBundleä¼ ç»™Bï¼Œå¯åŠ¨BåæŠŠé»˜è®¤çš„å¯åŠ¨åŠ¨ç”»è¦†ç›–,overridePendingTransition(0, 0)ã€‚ä¾‹å¦‚æŠŠè¢«ç‚¹å‡»çš„ImageViewçš„åœ¨å±å¹•ä¸­çš„åæ ‡ï¼Œè¿˜æœ‰è¯¥ImageViewçš„widthå’Œheightï¼Œè¿˜æœ‰è¯¥ImageViewæ‰€æ˜¾ç¤ºçš„å›¾ç‰‡èµ„æºidï¼Œæˆ–è€…URLï¼Œéƒ½å­˜å…¥Bundleä¸­ï¼Œè®²è¯¥Bundleæ”¾å…¥Intentä¸­ï¼Œå¯åŠ¨Bæ—¶ä¼ ç»™Bã€‚&lt;/li&gt;
&lt;li&gt;ä¸‰ åœ¨Bçš„onCreateæ–¹æ³•ä¸­ï¼ŒæŠŠBundleä¸­çš„ä¿¡æ¯å–å‡ºæ¥ï¼Œå¹¶ä¸”å¯¹ä½ æƒ³è¦åšåŠ¨ç”»çš„ImageViewä¸­ï¼Œè·å–ViewTreeObserverå®ä¾‹ï¼ŒåŠ å…¥ä¸€ä¸ªOnPreDrawListenerï¼Œåœ¨OnPreDrawListenerçš„onPreDrawæ–¹æ³•ä¸­ï¼Œå¯¹ImageViewåšæ”¾å¤§åŠ¨ç”»ï¼Œåˆå§‹ä½ç½®å°±æ˜¯ä»Bundleä¸­è·å–ï¼Œæœ€ç»ˆä½ç½®æ ¹æ®è¦æ˜¾ç¤ºçš„å›¾ç‰‡çš„å¤§å°æ¥å®šã€‚&lt;/li&gt;
&lt;li&gt;å›› å…³é—­B Activityæ—¶ï¼Œå¯¹ImageViewåšä¸€ä¸ªç¼©å°çš„åŠ¨ç”»ï¼Œåˆå§‹ä½ç½®å°±æ˜¯å®ƒç°åœ¨çš„ä½ç½®ï¼Œæœ€ç»ˆä½ç½®æ˜¯æœ€å¼€å§‹ä»Bundleä¸­è·å–çš„é‚£ä¸ªä½ç½®ã€‚è¦†ç›–Activityçš„finishæ–¹æ³•ï¼ŒåŒæ ·è¦å°†Activityçš„é»˜è®¤åŠ¨ç”»è¦†ç›–æ‰overridePendingTransition(0, 0)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹ä¸€ä¸‹å…·ä½“æ€ä¹ˆå®ç°ï¼Œæœ‰ä»€ä¹ˆè¦æ³¨æ„çš„ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€Â· è®¾ç½®Bçš„çš„themeä¸ºé€æ˜çš„transparent&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;style&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Transparent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:windowNoTitle&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;true&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:windowIsTranslucent&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;true&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;item&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;android:windowBackground&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;@android:color/transparent&lt;span class="nt"&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;activity&lt;/span&gt; &lt;span class="na"&gt;android:name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;com.example.android.activityanim.PictureDetailsActivity&amp;quot;&lt;/span&gt;
            &lt;span class="na"&gt;android:label=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;@string/subactivity_name&amp;quot;&lt;/span&gt;
            &lt;span class="na"&gt;android:theme=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;@style/Transparent&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/activity&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œä¸»è¦æ˜¯å°†B Activityçš„windowå’Œå®ƒçš„èƒŒæ™¯è®¾ç½®æˆé€æ˜çš„ã€‚æ‰€æœ‰çš„Activityéƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„æ ·å¼ï¼Œé»˜è®¤æ ·å¼ä¸æ˜¯é€æ˜çš„ã€‚è®¾ç½®æˆé€æ˜çš„è¯ï¼Œåœ¨å¯åŠ¨B Activityæ—¶å®ƒçš„èƒŒæ™¯æ˜¯é€æ˜çš„ï¼Œå¹¶ä¸”è°ƒç”¨overridePendingTransition(0, 0)è¦†ç›–æ‰é»˜è®¤åŠ¨ç”»ï¼Œä½ ä¸ä¼šè§‰å¯Ÿåˆ°å·²ç»ä»Aè¿›å…¥åˆ°Bç•Œé¢ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;äºŒ. åœ¨Aä¸­ï¼Œå¯åŠ¨Bå‰ï¼ŒæŠŠä¸€äº›å¿…è¦çš„ä¿¡æ¯æ‰“åŒ…æˆBundleä¼ ç»™Bï¼Œå¯åŠ¨BåæŠŠé»˜è®¤çš„å¯åŠ¨åŠ¨ç”»è¦†ç›–,overridePendingTransition(0, 0)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// Interesting data to pass across are the thumbnail size/location, the&lt;/span&gt;
        &lt;span class="c1"&gt;// resourceId of the source bitmap, the picture description, and the&lt;/span&gt;
        &lt;span class="c1"&gt;// orientation (to avoid returning back to an obsolete configuration if&lt;/span&gt;
        &lt;span class="c1"&gt;// the device rotates again in the meantime)&lt;/span&gt;
        &lt;span class="k"&gt;int&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;screenLocation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getLocationOnScreen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;screenLocation&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;PictureData&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mPicturesData&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Intent&lt;/span&gt; &lt;span class="n"&gt;subActivity&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Intent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ActivityAnimations&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;PictureDetailsActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="n"&gt;orientation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;getResources&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;getConfiguration&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;orientation&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;subActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
                &lt;span class="n"&gt;putExtra&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.orientation&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;orientation&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
                &lt;span class="n"&gt;putExtra&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.resourceId&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;resourceId&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
                &lt;span class="n"&gt;putExtra&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.left&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;screenLocation&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;
                &lt;span class="n"&gt;putExtra&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.top&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;screenLocation&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;
                &lt;span class="n"&gt;putExtra&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.width&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getWidth&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;
                &lt;span class="n"&gt;putExtra&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.height&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getHeight&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;

        &lt;span class="n"&gt;startActivity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subActivity&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// Override transitions: we don&amp;#39;t want the normal window animation in addition&lt;/span&gt;
        &lt;span class="c1"&gt;// to our custom one&lt;/span&gt;
        &lt;span class="n"&gt;overridePendingTransition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™é‡Œæœ‰ä¸ªå…³é”®ç‚¹ï¼Œè·å–è¢«ç‚¹å‡»çš„Viewçš„åœ¨å±å¹•ä¸Šçš„ä½ç½®æ˜¯é€šè¿‡getLocationOnScreen()æ–¹æ³•ã€‚è¿™ä¸ªä½ç½®åœ¨Bä¸­å¾ˆé‡è¦ã€‚å¦å¤–è¿˜æœ‰å®½é«˜ä¹Ÿæ˜¯å¿…é¡»ä¿¡æ¯ï¼Œè¢«ç‚¹å‡»çš„å›¾ç‰‡resIdæˆ–è€…URLç­‰å…¶ä»–ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;äºŒ. åœ¨Bçš„onCreateæ–¹æ³•ä¸­ï¼ŒæŠŠBundleä¸­çš„ä¿¡æ¯å–å‡ºæ¥ï¼Œå¹¶ä¸”å¯¹ä½ æƒ³è¦åšåŠ¨ç”»çš„ImageViewä¸­ï¼Œè·å–ViewTreeObserverå®ä¾‹ï¼ŒåŠ å…¥ä¸€ä¸ªOnPreDrawListenerï¼Œåœ¨OnPreDrawListenerçš„onPreDrawæ–¹æ³•ä¸­ï¼Œå¯¹ImageViewåšæ”¾å¤§åŠ¨ç”»ï¼Œåˆå§‹ä½ç½®å°±æ˜¯ä»Bundleä¸­è·å–ï¼Œæœ€ç»ˆä½ç½®æ ¹æ®è¦æ˜¾ç¤ºçš„å›¾ç‰‡çš„å¤§å°æ¥å®šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› ä¸ºç¬¬ä¸€æ­¥ï¼Œåœ¨ç”¨æˆ·è§‰å¯Ÿä¸åˆ°çš„æƒ…å†µä¸‹å·²è¿›å…¥Activity B,æ¥ä¸‹æ¥åªè¦åœ¨Bçš„è§†å›¾å‡ºç°çš„æ—¶å€™ï¼Œä»¥ä¸€ä¸ªç¼©ç•¥å›¾æ”¾å¤§çš„åŠ¨ç”»æ•ˆæœå‡ºç°å°±è¡Œäº†ã€‚ç”¨æˆ·çœ‹åˆ°çš„æ•ˆæœæ˜¯ç‚¹å‡»äº†Açš„ä¸€ä¸ªç¼©ç•¥å›¾ï¼Œç¼©ç•¥å›¾é€æ¸æ”¾å¤§çš„è¿‡ç¨‹ï¼Œç”¨æˆ·å¾ˆå®¹æ˜“è®¤ä¸ºè¿™æ˜¯åœ¨Aä¸­å®Œæˆçš„ï¼Œå®é™…ä¸Šè¿™æ‰€æœ‰çš„åŠ¨ç”»éƒ½æ˜¯åœ¨Bä¸­å®Œæˆçš„ã€‚çœ‹çœ‹Bä¸­ç›¸å…³çš„ä»£ç :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// Retrieve the data we need for the picture/description to display and&lt;/span&gt;
    &lt;span class="c1"&gt;// the thumbnail to animate it from&lt;/span&gt;
    &lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;getIntent&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;getExtras&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;Bitmap&lt;/span&gt; &lt;span class="n"&gt;bitmap&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;BitmapUtils&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getBitmap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getResources&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
            &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.resourceId&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;description&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.description&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="n"&gt;thumbnailTop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.top&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="n"&gt;thumbnailLeft&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.left&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="n"&gt;thumbnailWidth&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.width&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;final&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt; &lt;span class="n"&gt;thumbnailHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.height&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mOriginalOrientation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bundle&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getInt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="no"&gt;PACKAGE_NAME&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;.orientation&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;mBitmapDrawable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;BitmapDrawable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;getResources&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;bitmap&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setImageDrawable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mBitmapDrawable&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;ViewTreeObserver&lt;/span&gt; &lt;span class="n"&gt;observer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getViewTreeObserver&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;observer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addOnPreDrawListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ViewTreeObserver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OnPreDrawListener&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

            &lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
            &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="n"&gt;boolean&lt;/span&gt; &lt;span class="n"&gt;onPreDraw&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getViewTreeObserver&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;removeOnPreDrawListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

                &lt;span class="c1"&gt;// Figure out where the thumbnail and full size versions are, relative&lt;/span&gt;
                &lt;span class="c1"&gt;// to the screen and each other&lt;/span&gt;
                &lt;span class="k"&gt;int&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;screenLocation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="k"&gt;int&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getLocationOnScreen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;screenLocation&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;mLeftDelta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;thumbnailLeft&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;screenLocation&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
                &lt;span class="n"&gt;mTopDelta&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;thumbnailTop&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;screenLocation&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mh"&gt;1&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

                &lt;span class="c1"&gt;// Scale factors to make the large version the same size as the thumbnail&lt;/span&gt;
                &lt;span class="n"&gt;mWidthScale&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;float&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;thumbnailWidth&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getWidth&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;mHeightScale&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;float&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;thumbnailHeight&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getHeight&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

                &lt;span class="n"&gt;runEnterAnimation&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ViewTreeObserveræ˜¯Viewæ ‘ç›‘å¬ç±»ï¼Œå¯ä»¥ç›‘å¬Viewçš„ä¸€äº›å˜åŒ–ã€‚å…¶ä¸­ViewTreeObserver.OnPreDrawListenerå†…éƒ¨ç±»ï¼Œæ˜¯å½“è§†å›¾è¦è¢«ç»˜åˆ¶æ—¶ä¼šè¢«å›è°ƒçš„ç±»ã€‚æˆ‘ä»¬åªè¦åœ¨åˆ›å»ºä¸€ä¸ªViewTreeObserver.OnPreDrawListenerå®ä¾‹ï¼Œä¼ ç»™ViewTreeObserverï¼Œå°±å¯ä»¥åœ¨Viewè¢«ç»˜åˆ¶æ—¶å›è°ƒonPreDrawæ–¹æ³•ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¼€å§‹åŠ¨ç”»ã€‚è¿™é‡Œæ³¨æ„åœ¨åŠ¨ç”»å¼€å§‹å‰å·²ç»æŠŠè¦æ˜¾ç¤ºçš„å›¾ç‰‡è®¾ç½®ä¸Šå»äº†ã€‚
runEnterAnimationæ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// Set starting values for properties we&amp;#39;re going to animate. These&lt;/span&gt;
    &lt;span class="c1"&gt;// values scale and position the full size version down to the thumbnail&lt;/span&gt;
    &lt;span class="c1"&gt;// size/location, from which we&amp;#39;ll animate it back up&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setPivotX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setPivotY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setScaleX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mWidthScale&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setScaleY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mHeightScale&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTranslationX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mLeftDelta&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setTranslationY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mTopDelta&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// Animate scale and translation to go from thumbnail to full size&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;animate&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;setDuration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
            &lt;span class="n"&gt;scaleX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;1&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;scaleY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;1&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
            &lt;span class="n"&gt;translationX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;translationY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
            &lt;span class="n"&gt;setInterpolator&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sDecelerator&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;è¿™æ®µä»£ç å…ˆå°†ImageViewä»å¤§å›¾ç¼©å°åˆ°æˆ‘ä»¬ç‚¹å‡»çš„é‚£ä¸ªç¼©ç•¥å›¾çš„å¤§å°å’Œä½ç½®ï¼Œç„¶åå¼€å§‹æ”¾å¤§åŠ¨ç”»åˆ°å®ƒå¤§å›¾æ˜¾ç¤ºçš„æ ·å­ã€‚è¿™æ ·å°±å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„ç‚¹å‡»ç¼©ç•¥å›¾æ”¾å¤§åˆ°å¤§å›¾çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;å…³é—­B Activityæ—¶ï¼Œå¯¹ImageViewåšä¸€ä¸ªç¼©å°çš„åŠ¨ç”»ï¼Œåˆå§‹ä½ç½®å°±æ˜¯å®ƒç°åœ¨çš„ä½ç½®ï¼Œæœ€ç»ˆä½ç½®æ˜¯æœ€å¼€å§‹ä»Bundleä¸­è·å–çš„é‚£ä¸ªä½ç½®ã€‚è¦†ç›–Activityçš„finishæ–¹æ³•ï¼ŒåŒæ ·è¦å°†Activityçš„é»˜è®¤åŠ¨ç”»è¦†ç›–æ‰overridePendingTransition(0, 0)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;super&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="c1"&gt;// override transitions to skip the standard window animations&lt;/span&gt;
    &lt;span class="n"&gt;overridePendingTransition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/**&lt;/span&gt;
&lt;span class="cm"&gt; * Overriding this method allows us to run our exit animation first, then exiting&lt;/span&gt;
&lt;span class="cm"&gt; * the activity when it is complete.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
&lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;onBackPressed&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;runExitAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Runnable&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="c1"&gt;// *Now* go ahead and exit the activity&lt;/span&gt;
            &lt;span class="n"&gt;finish&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;});&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;runExitAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Runnable&lt;/span&gt; &lt;span class="n"&gt;endAction&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// Animate image back to thumbnail size/location&lt;/span&gt;
    &lt;span class="n"&gt;mImageView&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;animate&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;setDuration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;duration&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
               &lt;span class="n"&gt;scaleX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mWidthScale&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;scaleY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mHeightScale&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
               &lt;span class="n"&gt;translationX&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mLeftDelta&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;translationY&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mTopDelta&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
                            &lt;span class="n"&gt;withEndAction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;endAction&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;å½“ç”¨æˆ·å…³é—­ç•Œé¢çš„æ—¶å€™ï¼Œå…ˆæ‰§è¡ŒImageViewçš„ç¼©å°åŠ¨ç”»ï¼Œç¼©å°åˆ°åŸæ¥ç¼©ç•¥å›¾çš„ä½ç½®ã€‚å½“åŠ¨ç”»ç»“æŸåï¼Œfinishæ‰Activityå¹¶è¦†ç›–æ‰é»˜è®¤çš„ActivityåŠ¨ç”»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼šç¬¬ä¸€æ­¥å…ˆè¦æŠŠActivityçš„themeå˜æˆé€æ˜ã€‚ç¬¬è¦†ç›–æ‰Activityçš„å¯åŠ¨æˆ–è€…å…³é—­çš„é»˜è®¤åŠ¨ç”»æ•ˆæœã€‚ç¬¬ä¸‰æ­¥å¦‚æœè¦åšè¿›å…¥åŠ¨ç”»ï¼Œåˆ™å¯ä»¥å®ç°ViewTreeObserver.OnPreDrawListeneræ¥å£ï¼Œåœ¨onPreDrawæ–¹æ³•ä¸­åšåŠ¨ç”»ã€‚å¦‚æœæ˜¯åšé€€å‡ºåŠ¨ç”»ï¼Œå¯ä»¥å…ˆå¯¹è§†å›¾åšåŠ¨ç”»ï¼Œåœ¨åŠ¨ç”»ç»“æŸçš„æ—¶å€™è°ƒç”¨finishæ–¹æ³•ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/szuwest/ActivityAnimations"&gt;demoä»£ç &lt;/a&gt;.è¯¥demoæ˜¯dev-bytesä¸Šçš„demoä»£ç ã€‚&lt;/p&gt;
&lt;h2&gt;æ‰©å±•&lt;/h2&gt;
&lt;p&gt;å¦‚æœBè¦æ”¯æŒå·¦å³æ»‘åŠ¨æŸ¥çœ‹å¤§å›¾ï¼Œç„¶ååœ¨æŸ¥çœ‹æŸå·²å›¾ç‰‡æ—¶ç‚¹å‡»è¿”å›é”®ï¼Œå›¾ç‰‡è¦ç¼©å°è‡³è¯¥å›¾ç¼©ç•¥å›¾çš„ä½ç½®ä¸Šï¼Œè¿™è¯¥æ€ä¹ˆåšï¼Ÿ
è¿™ç§éœ€æ±‚æ”¹å˜å¯¹Aå˜åŒ–ä¸å¤§ï¼Œä½†æ˜¯å¯¹Bçš„æ”¹å˜è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œé¦–å…ˆBè¦æ”¯æŒæ»‘å±ï¼Œä¸€èˆ¬æ¥è¯´è¦ç”¨åˆ°ViewPageæˆ–ç±»ä¼¼çš„æ§ä»¶ã€‚å¦å¤–è¿˜æœ‰æ»‘åŠ¨æ—¶Bå¦‚ä½•è·å–æ•°æ®ï¼Œè¿”å›æ—¶å¦‚ä½•è·å–å½“å‰å¤§å›¾å¯¹åº”çš„ç¼©ç•¥å›¾åœ¨Aä¸­çš„ä½ç½®ã€‚æˆ‘æƒ³å®ç°æ–¹æ³•åº”è¯¥æœ‰å¤šç§ï¼Œæˆ‘èƒ½æƒ³åˆ°çš„ä¸€ç§æ¯”è¾ƒä¸‘é™‹ä½†æ˜¯åˆæ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå£°æ˜äº†ä¸€äº›è·å–æ•°æ®å’Œç¼©ç•¥å›¾ä½ç½®ç­‰æ–¹æ³•ã€‚ç„¶åAå®ç°è¿™ä¸ªæ¥å£ï¼Œä¼ ç»™Bä½œä¸ºä¸€ä¸ªé™æ€å˜é‡ä¿å­˜èµ·æ¥ï¼Œè¿™æ ·Aä¸Bå°±å¯ä»¥é€šä¿¡äº†ã€‚è¿™æ ·åªè¦Bå·¦å³æ»‘åŠ¨çš„æ—¶å€™ï¼ŒAä¹Ÿä¿æŒä¸€è‡´çš„ä¸Šä¸‹æ»‘åŠ¨ï¼Œåœ¨Bè¦å…³é—­çš„æ—¶å€™ï¼Œå…ˆè·å–åˆ°ç›¸åº”ç¼©ç•¥å›¾çš„é—®é¢˜ï¼Œå°±èƒ½åšåŠ¨ç”»äº†ã€‚&lt;/p&gt;</summary><category term="Android æŠ€æœ¯ åŠ¨ç”»"></category></entry><entry><title>Android ActivityåŠ¨ç”»</title><link href="http://szuwest.github.io/android-activitydong-hua.html" rel="alternate"></link><updated>2014-11-03T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-11-03:android-activitydong-hua.html</id><summary type="html">&lt;h1&gt;Android åŠ¨ç”»(ä¸€)&lt;/h1&gt;
&lt;h2&gt;3.0ä¹‹å‰çš„åŠ¨ç”»&lt;/h2&gt;
&lt;p&gt;AndroidåŠ¨ç”»ä¸€ç›´æ˜¯Androidçš„ç—›ç‚¹ã€‚Androidçš„åŠ¨ç”»ç³»ç»Ÿè·ŸiOSç³»ç»Ÿçš„åŠ¨ç”»ç³»ç»Ÿæ¯”èµ·æ¥çœŸå¿ƒå·®å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯2.3ä¹‹å‰ã€‚åœ¨2.3ä¹‹å‰ï¼ŒAndroidçš„åŠ¨ç”»åˆ†ä¸¤ç§ï¼Œå¸§åŠ¨ç”»å’Œé€æ¸åŠ¨ç”»ï¼ˆTweenï¼‰.TweenåŠ¨ç”»åŒ…æ‹¬alphaåŠ¨ç”»ï¼ŒtranslateåŠ¨ç”»ï¼ŒscaleåŠ¨ç”»ï¼ŒrotateåŠ¨ç”»ã€‚è¿™å‡ ç§åŠ¨ç”»å¯ä»¥éšæ„ç»„åˆï¼Œäº§ç”Ÿæ›´å¤æ‚çš„åŠ¨ç”»ã€‚ä½†æ˜¯æˆ‘ä»¬æƒ³è¦åšiOSçš„frameé‚£æ ·ç®€å•çš„åŠ¨ç”»ï¼Œå´æ˜¯æ²¡æœ‰ç›´æ¥çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;3.0ä¹‹åçš„åŠ¨ç”»&lt;/h2&gt;
&lt;p&gt;åœ¨Android3.0ç‰ˆæœ¬ï¼Œç»ˆäºåŠ å…¥äº†æ›´å¤šçš„åŠ¨ç”»æ”¯æŒï¼ŒAPIä¹Ÿæ›´åŠ å‹å¥½ã€‚åŠ å…¥æˆ‘propertyåŠ¨ç”»å’ŒvalueåŠ¨ç”»ï¼Œå¤§å¤§å¢åŠ äº†åŠ¨ç”»çš„çµæ´»æ€§å’Œå¯å®šåˆ¶æ€§ã€‚å¯ä»¥é€šè¿‡ObjectAnimatorå¾ˆæ–¹ä¾¿çš„å†™å‡ºåŠ¨ç”»ä»£ç ã€‚åƒiOSçš„frameåŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡valueåŠ¨ç”»æ¥å®ç°ã€‚è¿˜æœ‰å› ä¸ºpropertyç‰¹æ€§ï¼Œå¯ä»¥å®ç°ä¸€äº›ç‰¹åˆ«çš„åŠ¨ç”»ï¼Œå¹¶ä¸”ä¸å±€é™ä¸viewï¼Œç†è®ºä¸Šä»»ä½•objectéƒ½å¯ä»¥å®ç°propertyåŠ¨ç”»ã€‚&lt;/p&gt;
&lt;h4&gt;nineOldAnimation&lt;/h4&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯å‘ä¸‹å…¼å®¹çš„AndroidåŠ¨ç”»åº“ï¼Œä½¿å¾—åœ¨3.0ä¹‹å‰çš„ç³»ç»Ÿä¹Ÿå¯ä»¥å®ç°propertyå’ŒvalueåŠ¨ç”»ã€‚ä¸è¿‡è¿™ä¸ªåº“æ—©å·²ä¸ç»´æŠ¤äº†ï¼Œæˆ‘ä¹‹å‰ä½¿ç”¨å‘ç°äº†ä¸€äº›bugï¼Œä¸è¿‡è¿™å½±å“ä¸å¤§ã€‚å¦‚æœè¦å…¼å®¹2.3å’Œä¸€ä¸‹ç³»ç»Ÿï¼Œè¿™ä¸ªæ˜¯å¾ˆä¸é”™çš„åº“ã€‚&lt;/p&gt;
&lt;h4&gt;Android4.4å’Œ5.0&lt;/h4&gt;
&lt;p&gt;Android4.0ä¹‹åé™†é™†ç»­ç»­åŠ äº†ä¸€äº›åŠ¨ç”»æ”¯æŒï¼Œä¾‹å¦‚4.1åŠ äº†å¯¹activityçš„åŠ¨ç”»æ”¯æŒï¼Œ4.4åŠ äº†ä¸€äº›è¿‡åº¦åŠ¨ç”»æ”¯æŒï¼Œè€Œæœ€æ–°çš„5.0åŠ äº†ä¸€ä¸ªvectorDrawableï¼Œå¯ä»¥å®ç°ä¸€äº›é«˜çº§çš„å‘é‡åŠ¨ç”»ã€‚ç”±äºè¿™äº›APIéœ€è¦è¾ƒé«˜ç‰ˆæœ¬æ”¯æŒï¼Œæˆ‘ä»¬å¼€å‘è¿˜ä¸èƒ½å®Œå…¨ç”¨åˆ°ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿåœ¨ç ”ç©¶å½“ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘è¦è®¨è®ºçš„æ—¶ActivityåŠ¨ç”»ï¼Œè¿™ä¸ªåœ¨æˆ‘ä»¬å¼€å‘ä¸­ç”¨å¾—æ¯”è¾ƒå¤šï¼Œå¹¶ä¸”åšå¾—å¥½çš„è¯ï¼Œå¯ä»¥ä¸ºåº”ç”¨å¢æ·»ä¸å°‘åˆ†ã€‚&lt;/p&gt;
&lt;hr /&gt;
&lt;h1&gt;ActivityåŠ¨ç”»&lt;/h1&gt;
&lt;p&gt;åœ¨Android2.0ä¹‹åï¼ŒActivityä¸­åŠ å…¥äº†ä¸€ä¸ªé‡è¦çš„API  &lt;code&gt;overridePendingTransition&lt;/code&gt;ã€‚è¿™ä¸ªæ–¹æ³•åœ¨&lt;code&gt;startActivity&lt;/code&gt;æ–¹æ³•ä¹‹åè°ƒç”¨çš„è¯ï¼Œå¯ä»¥å®šä¹‰æ–°æ‰“å¼€çš„activityè¿›å…¥åŠ¨ç”»ã€‚ä¾‹å¦‚ä½ æƒ³å®ç°åƒiOSçš„navigationControllerçš„ä»å³å¾€å·¦çš„pushåŠ¨ç”»ï¼Œæˆ–è€…ModelViewControllerçš„ä»ä¸‹å¾€ä¸Šå¼¹å‡ºé¡µé¢çš„åŠ¨ç”»ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;Intent&lt;/span&gt; &lt;span class="n"&gt;intent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Intent&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;                                   &lt;span class="n"&gt;intent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setAction&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BuyDiamondsActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DIAMONDLISTACTION&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;intent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setClass&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PhotoAlbumActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;BuyDiamondsActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;startActivity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;intent&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;overridePendingTransition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;anim&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push_left_in&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;anim&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;push_left_out&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;push_left_in.xml    &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;set&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;translate&lt;/span&gt; &lt;span class="na"&gt;android:fromXDelta=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;100%p&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:toXDelta=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:duration=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;300&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;alpha&lt;/span&gt; &lt;span class="na"&gt;android:fromAlpha=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:toAlpha=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:duration=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;300&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/set&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;push_left_out.xml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;set&lt;/span&gt; &lt;span class="na"&gt;xmlns:android=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://schemas.android.com/apk/res/android&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;translate&lt;/span&gt; &lt;span class="na"&gt;android:fromXDelta=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:toXDelta=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;-40%p&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:duration=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;300&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;alpha&lt;/span&gt; &lt;span class="na"&gt;android:fromAlpha=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1.0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:toAlpha=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0.6&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;android:duration=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;300&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/set&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨Activityçš„finishæ–¹æ³•ä¹‹åï¼Œè°ƒç”¨&lt;code&gt;overridePendingTransition&lt;/code&gt;æ¥è‡ªå®šä¹‰Activityé€€å‡ºåŠ¨ç”»ã€‚è¿™é‡Œè¿˜æœ‰ä¸ªå°tips,å¦‚æœä½ è¦å®ç°Aè·³è½¬åˆ°Bï¼Œä½ åˆæ²¡åŠæ³•æ”¹å˜æˆ–å®šåˆ¶Aå¦‚ä½•è·³è½¬åˆ°Bï¼Œä½ å¯ä»¥åœ¨Bçš„onCreateæ–¹æ³•é‡Œï¼Œè°ƒç”¨çˆ¶ç±»çš„onCreateæ–¹æ³•ä¹‹å‰è°ƒç”¨&lt;code&gt;overridePendingTransition&lt;/code&gt;ä¹Ÿæ˜¯æœ‰æ•ˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;overridePendingTransition&lt;/code&gt;æ–¹æ³•æœ‰ä¸ªç¼ºé™·ï¼Œå®ƒåªæ”¯æŒXMLæ–‡ä»¶å£°æ˜çš„åŠ¨ç”»ï¼Œåœ¨Android4.1ä¹‹å‰ï¼ˆAPI16ï¼‰æˆ‘æš‚æ—¶è¿˜æ²¡æœ‰å‘ç°æœ‰åˆ«çš„æ–¹æ³•å¯ä»¥ç”¨ä»£ç å®šä¹‰Activityè·³è½¬åŠ¨ç”»ã€‚&lt;/p&gt;
&lt;h2&gt;ActivityOptions&lt;/h2&gt;
&lt;p&gt;ä¼°è®¡ä¸ºäº†å¼¥è¡¥&lt;code&gt;overridePendingTransition&lt;/code&gt;æ–¹æ³•çš„ä¸è¶³ï¼ŒGoogleåœ¨Android4.1ä¸­åŠ å…¥ä¸€ä¸ªæ–°ç±»ActivityOptionså’Œä¸€ä¸ªæ–°startActivity(Intent intent, Bundle options)æ–¹æ³•ã€‚æ–°çš„startActivityæ–¹æ³•å¯ä»¥ä¼ å…¥ä¸€ä¸ªBundleå‚æ•°ï¼Œè¿™ä¸ªBundleå¯ä»¥åŒ…å«äº†ä¸€äº›Activityçš„åŠ¨ç”»ã€‚è¿™ä¸ªBundleæ•°æ®ä»ä½•è€Œæ¥ï¼Œæ€ä¹ˆåˆ›å»ºï¼Œéœ€è¦åŒ…å«é‚£äº›ä¿¡æ¯ï¼Œè¿™ä¸ªä½ å¯ä»¥ä¸ç”¨å¤ªè¿‡å…³å¿ƒï¼ŒActivityOptionså°±æ˜¯ä¸ºäº§ç”Ÿè¿™ä¸ªBundleè€Œç”Ÿçš„ã€‚æ¥çœ‹çœ‹å‡ ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// Custom animations allow us to do things like slide the next activity in as we&lt;/span&gt;
&lt;span class="c1"&gt;// slide this activity out&lt;/span&gt;
&lt;span class="n"&gt;translateButton&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setOnClickListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OnClickListener&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="n"&gt;onClick&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// Using the AnimatedSubActivity also allows us to animate exiting that&lt;/span&gt;
        &lt;span class="c1"&gt;// activity - see that activity for details&lt;/span&gt;
        &lt;span class="n"&gt;Intent&lt;/span&gt; &lt;span class="n"&gt;subActivity&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Intent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WindowAnimations&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;AnimatedSubActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
         &lt;span class="c1"&gt;// The enter/exit animations for the two activities are specified by xml resources&lt;/span&gt;
        &lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;translateBundle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
                &lt;span class="n"&gt;ActivityOptions&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makeCustomAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WindowAnimations&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                &lt;span class="no"&gt;R&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;anim&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;slide_in_left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="no"&gt;R&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;anim&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;slide_out_left&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;toBundle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;startActivity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subActivity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;translateBundle&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;é€šè¿‡ActivityOptions.makeCustomAnimationçš„é™æ€æ–¹æ³•å¯ä»¥äº§ç”ŸActivityOptionså¯¹è±¡ï¼ŒActivityOptionsæœ‰ä¸ªtoBundleçš„å®ä¾‹æ–¹æ³•æ–¹ä¾¿çš„å°†ä½ å®šä¹‰çš„XMLåŠ¨ç”»è½¬åŒ–ä¸ºBundleæ•°æ®ã€‚&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c1"&gt;// Starting in Jellybean, you can also provide an animation that scales up the new&lt;/span&gt;
&lt;span class="c1"&gt;// activity from a given bitmap, cross-fading between the starting and ending&lt;/span&gt;
&lt;span class="c1"&gt;// representations. Here, we scale up from a thumbnail image of the final sub-activity&lt;/span&gt;
&lt;span class="n"&gt;thumbnail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setOnClickListener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;View&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OnClickListener&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="n"&gt;Override&lt;/span&gt;
    &lt;span class="n"&gt;public&lt;/span&gt; &lt;span class="k"&gt;void&lt;/span&gt; &lt;span class="n"&gt;onClick&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;View&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;BitmapDrawable&lt;/span&gt; &lt;span class="n"&gt;drawable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BitmapDrawable&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;thumbnail&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getDrawable&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Bitmap&lt;/span&gt; &lt;span class="n"&gt;bm&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;drawable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getBitmap&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;Intent&lt;/span&gt; &lt;span class="n"&gt;subActivity&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Intent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WindowAnimations&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;AnimatedSubActivity&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Bundle&lt;/span&gt; &lt;span class="n"&gt;scaleBundle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ActivityOptions&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makeThumbnailScaleUpAnimation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="n"&gt;thumbnail&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;bm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;toBundle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;startActivity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subActivity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;scaleBundle&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ActivityOptions.makeThumbnailScaleUpAnimationæä¾›äº†æ›´é«˜çº§çš„åŠŸèƒ½ï¼šå°†ä¸€ä¸ªç¼©ç•¥å›¾æ–¹æ³•çš„ActivityåŠ¨ç”»ã€‚è¿™ä¸ªæœ‰æ—¶å€™æŒºæœ‰ç”¨çš„ã€‚ActivityOptionsè¿˜æä¾›äº†å…¶ä»–çš„ä¸€äº›æ–¹æ³•ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å‚è€ƒå®ƒçš„APIã€‚
æ›´å¤šè¯·å‚è€ƒ&lt;a href="http://developer.android.com/reference/android/app/ActivityOptions.html"&gt;ActivityOptions API&lt;/a&gt; å’Œ &lt;a href="https://developer.android.com/training/material/animations.html"&gt;Googleå®˜æ–¹æ•™ç¨‹:Defining Custom Animations&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€èŠ‚æˆ‘ä¼šè®²æ›´é«˜çº§æ›´å¤æ‚çš„ä¸€äº›è‡ªå®šä¹‰ActivityåŠ¨ç”»ã€‚&lt;/p&gt;</summary><category term="åŠ¨ç”»"></category></entry><entry><title>æŠ€æœ¯ï¼Œç¤¾äº¤ï¼Œç”Ÿæ´»</title><link href="http://szuwest.github.io/ji-zhu-she-jiao-sheng-huo.html" rel="alternate"></link><updated>2014-10-23T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-10-23:ji-zhu-she-jiao-sheng-huo.html</id><summary type="html">&lt;h3&gt;æŠ€æœ¯ä¸èƒ½åœ&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;æœ€è¿‘çœ‹äº†å¾ˆå¤šå…¶ä»–æŠ€æœ¯äººå‘˜çš„æ–‡ç« ï¼Œç„¶åæˆ‘åˆä»iOSè½¬æˆ˜Androidï¼Œæ„Ÿè§‰è‡ªå·±å¼±çˆ†äº†ï¼Œè‡ªå·±çš„æŠ€æœ¯è·Ÿé‚£äº›å‰å®³çš„äººæ ¹æœ¬æ²¡å¾—æ¯”ã€‚æœ‰å¥è¯è¯´ï¼ŒçŸ¥é“å¾—è¶Šå¤šï¼ŒçŸ¥é“è‡ªå·±ä¸çŸ¥é“è¶Šå¤šã€‚ç°åœ¨è‡ªå·±è¿˜æœ‰å†²è¿›ï¼Œåº”è¯¥å°½åŠ›å­¦å¤šä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä»è®¡ç®—æœºè¡Œä¸šæ¥è¯´ï¼ŒæŠ€æœ¯åƒå˜ä¸‡åŒ–ï¼Œä½†æ˜¯æœ‰äº›ä¸œè¥¿æ˜¯åŸºç¡€æ€§çš„ã€‚è¿™äº›åŸºæœ¬åŠŸå†³å®šä½ èƒ½èµ°å¤šè¿œã€‚ç®—æ³•ï¼Œæ•°æ®ç»“æ„ï¼Œç¼–è¯‘åŸç†ï¼Œæ“ä½œç³»ç»Ÿï¼Œè¿™äº›åŸºæœ¬çš„è¯¾ç¨‹éå¸¸é‡è¦ï¼Œè€Œè¿™åˆæ°æ°æ˜¯æˆ‘çš„å¼±é¡¹ï¼Œæˆ‘åƒè¿‡è¿™ä¸ªäºã€‚æˆ‘æƒ³å¼¥è¡¥ã€‚æœ€è¿‘çœ‹å¾®åšçœ‹åˆ°&lt;strong&gt;é™ˆçš“&lt;/strong&gt;è¿™æ ·çš„å¤§ç‰›æŠŠleetcodeçš„é¢˜ç›®åˆ·å®Œäº†ï¼ŒçœŸæ˜¯ä½©æœä¸å·²ã€‚æˆ‘ä¹‹å‰æˆ‘åˆ°ä¸Šé¢åˆ·è¿‡ä¸€ä¸‹å­ï¼Œä½†æ˜¯æ²¡æœ‰åšæŒä¸‹æ¥ã€‚ä¸»è¦æ˜¯æœ‰äº›è¿˜æ˜¯æŒºéš¾çš„ï¼Œè€Œä¸”è‹±è¯­è¿˜æ˜¯æœ‰ç‚¹åƒåŠ›ã€‚æˆ‘å†³å®šå…ˆä»åŸºæœ¬åŠŸå¼€å§‹ï¼Œè¿›è¡Œä¸€ä¸ªç³»ç»Ÿçš„å­¦ä¹ ã€‚è™½ç„¶ç½‘ç»œä¸Šåˆå¾ˆå¤šèµ„æ–™ï¼Œä½†æ˜¯ç½‘ç»œä¸Šçš„èµ„æ–™éƒ½æ˜¯ä¸ç³»ç»Ÿçš„ï¼Œåªèƒ½å‚è€ƒè€Œå·²ï¼Œä¸èƒ½ä½œä¸ºå­¦ä¹ ææ–™ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘æƒ³ä»çº¸è´¨ä¹¦å¼€å§‹ï¼Œæˆ‘å†³å®šä»Šåå°½é‡å°‘çœ‹ä»»ä½•ç¤¾äº¤è½¯ä»¶ï¼Œè¿˜æœ‰å¨±ä¹è§†é¢‘ä¹‹ç±»çš„ï¼Œå¤šä¸€ç‚¹æ—¶é—´çœ‹ä¹¦ã€‚å°½é‡è°ƒå¥½ä½œæ¯æ—¶é—´ï¼Œåˆ©ç”¨ç¢ç‰‡åŒ–æ—¶é—´æ¥å­¦ä¹ ã€‚&lt;/p&gt;
&lt;h3&gt;å…³äºå·¥ä½œ&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;æˆ‘ä»å¼€å§‹åšC++çš„SDKï¼Œåæ¥åŠ å…¥iOSé¡¹ç›®ç»„åšiOSå¼€å‘ï¼Œå†åˆ°æœ€è¿‘çš„æ”¯æŒAndroidå¼€å‘ï¼Œå¤§åŠå¹´æ—¶é—´å°±å˜åŒ–è¿™ä¹ˆå¤šã€‚é¡¹ç›®ä¹Ÿéƒ½æ˜¯åšåˆ°äº†ä¸€åŠå°±è¢«åœæ‰ã€‚XLå…¬å¸çš„åŸºå› å°±æ˜¯è¿™æ ·ï¼Œæ²¡æœ‰åŠæ³•ç¨³å®šä¸‹æ¥ï¼Œå…¬å¸æ¶æ„é¢‘é¢‘å˜åŠ¨ï¼Œé«˜ç®¡æ¥ä¸€æ‰¹æ‰“ä¸€ç‚®åˆèµ°äº†ã€‚é¡¹ç›®åšäº†ä¸€åŠåˆè¯´æ–¹å‘ä¸å¤šï¼Œè¦è½¬å˜ï¼Œæˆ–è€…ç›´æ¥åœæ‰ã€‚ä»Šå¤©é¥­å±€ä¸ŠåŒäº‹è¯´è¦å˜é©äº†ï¼Œé‡‡ç”¨å†…éƒ¨åˆ›ä¸šå½¢å¼ã€‚æˆ‘è§‰å¾—æŒºå¥½ã€‚æƒ³åœ¨å…¬å¸å†…éƒ¨å°±æ˜¯å¤ªèˆ’æœï¼Œè€Œä¸”æŠ€æœ¯äººå‘˜å’Œäº§å“ç»ç†éƒ½æ²¡æœ‰å¤ªå¤šè¯è¯­æƒã€‚å¸Œæœ›æ”¹é©åèƒ½æœ‰æ‰€æ”¹å˜ã€‚&lt;/p&gt;
&lt;h3&gt;å…³äºç†è´¢æŠ•èµ„&lt;/h3&gt;
&lt;hr /&gt;
&lt;p&gt;æœ‰å¥è¯è¯´ä½ ä¸ç†è´¢ï¼Œè´¢ä¸ç†ä½ ã€‚è‡ªå·±å·¥ä½œä¹Ÿå¥½å‡ å¹´äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆç§¯è“„ã€‚çœ‹åˆ°å¾ˆå¤šç‰›äººéƒ½æœ‰æˆ¿æœ‰è½¦ï¼Œæ›´æœ‰ç”šçš„æ¯•ä¸šä¸€å¹´å°±ä¹°å®é©¬çš„å¹´è½»äººã€‚æˆ‘ä¹Ÿå¸Œæœ›èƒ½å¥½å¥½ç†è´¢ï¼Œå¥½å¥½å·¥ä½œï¼Œæ”’ç‚¹ç‚¹æŠŠåª³å¦‡å¨¶è¿‡æ¥ï¼Œæ‰€ä»¥å‰æ®µæ—¶é—´å¼€å§‹ä¹°ç¾è‚¡ï¼Œç°åœ¨æ˜¯è¿˜äºäº†ä¸€ç‚¹ï¼Œä¸è¿‡æˆ‘æœ‰ä¿¡å¿ƒèµšå›æ¥ã€‚åªä¸è¿‡è¦æƒ³æŒ£ç‚¹é’±ï¼Œè¿˜æ˜¯éœ€è¦ä¸€å®šçš„èµ„é‡‘ï¼Œç°åœ¨è‡ªå·±ä¸æ•¢æŠ•å¤ªå¤šã€‚ä¸€åˆ‡éƒ½å¯ä»¥æ…¢æ…¢æ¥ï¼Œåªè¦åšæŒã€‚&lt;/p&gt;</summary><category term="æ‚è°ˆ"></category></entry><entry><title>Good Morning</title><link href="http://szuwest.github.io/good-morning.html" rel="alternate"></link><updated>2014-10-15T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-10-15:good-morning.html</id><summary type="html">&lt;p&gt;Hi, good morning. This is from West.&lt;/p&gt;</summary><category term="Test"></category></entry><entry><title>å…³äºç¨‹åºæ¶æ„è®¾è®¡</title><link href="http://szuwest.github.io/guan-yu-cheng-xu-jia-gou-she-ji.html" rel="alternate"></link><updated>2014-06-22T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-06-22:guan-yu-cheng-xu-jia-gou-she-ji.html</id><summary type="html">&lt;h1&gt;å…³äºç¨‹åºæ¶æ„è®¾è®¡&lt;/h1&gt;
&lt;p&gt;æœ€è¿‘ç¼–ç¨‹å½“ä¸­ï¼Œè¶Šæ¥è¶Šåœ¨æ„ç¨‹åºæ¶æ„é—®é¢˜ï¼Œç»å¸¸çº ç»“æ€æ ·æ‰æ˜¯å¥½çš„è®¾è®¡ï¼Œæ€æ ·æ‰èƒ½å°†ç¨‹åºè§£è€¦ï¼Œæ€æ ·æ‰èƒ½å†™å‡ºæ˜“æ‰©å±•ï¼Œå±‚æ¬¡åˆ†æ˜å¥½ç»´æŠ¤çš„ç¨‹åºã€‚å¯æ˜¯æƒ³æ¥æƒ³å»ä¹Ÿæ˜¯ä¸èƒ½å†³å®šæ€æ ·åšæ‰æ˜¯æœ€ä½³ã€‚ä¸è¿‡æœ€è¿‘è‡ªå·±æ˜¯è‚¯å®šäº†ä¸€æ ·ä¸œè¥¿ï¼šè¦æƒ³çœŸçš„åšå‡ºå¥½çš„æ¶æ„ï¼Œåˆ’åˆ†å¥½æ¨¡å—æ˜¯ç¬¬ä¸€æ¬¡ã€‚åªè¦æ¨¡å—åˆ’åˆ†çš„æ¸…æ™°ï¼Œç‹¬ç«‹å’Œå°‘è€¦åˆï¼Œåé¢çš„äº‹æƒ…å°±å¥½åšäº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ³æ³•ä¹Ÿä¸å•å•åªæœ‰æˆ‘æ‰æœ‰ï¼Œæˆ‘ç°åœ¨æ‰€åœ¨é¡¹ç›®è´Ÿè´£äººåœ¨ä¸€ä¸ªç¨‹åºæ¶æ„è®¾è®¡çš„æŠ€æœ¯è®²åº§ä¸Šè¯´è¿‡è¿™ä¸ªè§‚ç‚¹ã€‚è€Œæˆ‘ä»æˆ‘ä»¬é¡¹ç›®çš„æ¶æ„ä¹Ÿçœ‹å‡ºä»–æ˜¯è¿™æ ·å®è¡Œçš„ã€‚ä¸€èˆ¬åœ¨æˆ‘ä»¬å»ºç«‹é¡¹ç›®ä¹‹åˆï¼Œå°±å…ˆå»ºç«‹å¥½ç›®å½•ç»“æ„ï¼Œè€Œè¿™ä¸ªç›®å½•ç»“æ„ä¹Ÿå¾ˆè®²ç©¶ï¼Œå®ƒå°±ç›´æ¥ä½“ç°äº†æˆ‘ä»¬æ˜¯æ€ä¹ˆåˆ’åˆ†æ¨¡å—å’Œåˆ’åˆ†å±‚æ¬¡çš„ã€‚ç°åœ¨æˆ‘ä»¬é¡¹ç›®ä¸»è¦åˆ†ä¸¤å¤§å—ï¼ŒUIæ¨¡å—å’Œmoduleæ¨¡å—ã€‚ç„¶åUIç›®å½•ä¸‹å°±æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†å‡ºä¸€ä¸ªä¸ªå­ç›®å½•ï¼Œå¯¹åº”çš„å†moduleç›®å½•ä¸‹ä¹Ÿæ˜¯æŒ‰ç…§åŠŸèƒ½åˆ’åˆ†å‡ºä¸€ä¸ªä¸ªå­ç›®å½•ã€‚è¿™é‡ŒUIç›®å½•ä¸‹çš„å­ç›®å½•ç»“æ„å’Œmoduleç›®å½•ä¸‹çš„å­ç›®å½•ç»“æ„åŸºæœ¬æ˜¯ä¸€è‡´çš„ã€‚ç„¶ååœ¨èµ„æºæ–‡ä»¶ç›®å½•ä¸‹ï¼Œä¹Ÿæ˜¯æŒ‰ç…§UIå­æ¨¡å—é‚£æ ·åˆ’åˆ†ï¼Œå»ºç«‹ä¸åŒçš„å­èµ„æºæ–‡ä»¶ã€‚åªè¦åˆ’åˆ†å¥½äº†æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è¶³å¤Ÿç‹¬ç«‹çš„èŠ±ï¼Œæ¯ä¸ªæ¨¡å—é‡Œé¢æ˜¯æ€ä¹ˆåˆ†å±‚ï¼Œæ€ä¹ˆåšè®¾è®¡çš„ï¼Œå¯¹åˆ«çš„æ¨¡å—å½±å“ä¸å¤§ã€‚å³ä½¿è¿™ä¸ªæŸä¸ªæ¨¡å—åšå¾—å¾ˆçƒ‚ï¼Œåˆ°æ—¶è¦é‡æ„çš„ä¹Ÿåªæ˜¯é‚£ä¸€ä¸ªæ¨¡å—è€Œå·²ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å…¬å¸çš„é¡¹ç›®å¾ˆå¤šæ¨¡å—åˆ’åˆ†éƒ½ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œèƒ½å¤Ÿåšåˆ°åƒä¸Šé¢é‚£æ ·åˆ’åˆ†æ¨¡å—å’Œæ¶æ„çš„é¡¹ç›®ä¼°è®¡éƒ½æ˜¯å¾ˆå¤šã€‚äº’è”ç½‘å…¬å¸äººå‘˜æµåŠ¨å¤§ï¼Œä¸‰ä¸¤ä¸‹å°±æ¢ä¸€æ‹¨äººï¼Œæ¯æ‹¨äººé‡Œé¢å„ä¸ªæŠ€æœ¯å‚å·®ä¸é½ï¼Œæ ¹æœ¬æ²¡åŠæ³•åšåˆ°å¾ˆå¥½çš„æ¶æ„è®¾è®¡ã€‚ä½†æ˜¯ä¸Šé¢è¿™ç§åŸºç¡€çš„æ¶æ„è¿˜æ˜¯å¯ä»¥åšçš„ï¼Œè€Œä¸”æ˜¯å¯ä»¥åšå¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¯æ˜¯å…‰æ˜¯é åˆ’åˆ†æ¨¡å—æ˜¯åšä¸åˆ°ä¸€ä¸ªå¥½çš„ç¨‹åºæ¶æ„ï¼Œè€Œä¸”ä¸€ä¸ªé¡¹ç›®æœ‰äº›æ¨¡å—æ˜¯åˆ’åˆ†ä¸å‡ºæ¥æˆ–è€…è·Ÿå…¶ä»–æ¨¡å—è”ç³»å¾ˆå¤šã€‚æ‰€ä»¥è¿˜æœ‰å…¶ä»–ä¸œè¥¿è¦åšã€‚åˆ†å±‚å°±æ˜¯ä¸€ä¸ªã€‚é¡¹ç›®æ•´ä½“å¯ä»¥åˆ†å±‚ï¼Œè¿˜æœ‰æ¨¡å—é‡Œé¢ä¹Ÿå¯ä»¥åˆ†å±‚ã€‚æœ€ç»å…¸çš„åˆ†å±‚å°±æ˜¯MVCæ¨¡å¼ã€‚åƒæˆ‘ä»¬ä¸Šé¢çš„åˆ†UIå’Œmoduleå°±æ˜¯å°†é¡¹ç›®æŒ‰MVCåˆ†å±‚ï¼ŒV,Cåˆ†åœ¨äº†UIé‡Œï¼ŒMå¯¹åº”çš„æ—¶moduleã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨Mä¹‹ä¸‹ï¼Œè¿˜æœ‰ä¸€å±‚æ˜¯æ•°æ®è®¿é—®å±‚ï¼Œä¸€èˆ¬æ˜¯æ•°æ®åº“è®¿é—®å±‚æˆ–è€…æ˜¯ç½‘ç»œè®¿é—®å±‚ã€‚å®é™…é¡¹ç›®éƒ½å¾ˆå¤æ‚ï¼Œå„ç§å…³è”ï¼Œåˆ’åˆ†å¥½å±‚æ¬¡è§£è€¦ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹ã€‚è¿˜æœ‰ä¸ºäº†å¥½ç®¡ç†ä»£ç å’Œå¤ç”¨ï¼Œæ˜¯éœ€è¦æŠ½å‡ºä¸€ä¸‹å…±ç”¨æ¨¡å—çš„ã€‚ä¾‹å¦‚ç½‘ç»œè®¿é—®çš„è¯ä¸€èˆ¬æ˜¯ä¸€ä¸ªå…¨å±€å…±ç”¨æ¨¡å—ï¼Œè¿˜æœ‰å‡ ä¹æ¯ä¸ªç§»åŠ¨é¡¹ç›®å¿…ä¸å¯å°‘çš„å›¾ç‰‡ç®¡ç†æ¨¡å—ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šè¯´çš„éƒ½æ˜¯åœ¨å®è§‚æ–¹é¢çš„ï¼ŒçœŸæ­£è½å®åˆ°ä¸€è¡Œè¡Œä»£ç é—´åˆæœ‰æ›´å¤šè¦æ³¨æ„çš„äº†ã€‚è¿™é‡Œåˆæœ‰ä¸€å¥—ç¼–ç è¦éµå¾ªè§„åˆ™ï¼šAPIè®¾è®¡ï¼Œæ¥å£è®¾è®¡åŸåˆ™ï¼Œè®¾è®¡æ¨¡å¼ç­‰ã€‚æœ€è¿‘æˆ‘ç»å¸¸çƒ¦çš„æ˜¯è¿™ä¸ªç±»æ˜¯ä¸æ˜¯å¤ªå¤§äº†ï¼Œè¦æ€ä¹ˆåˆ†å‰²æ‰å¥½ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æ”¾åœ¨è¿™ä¸ªç±»å¥½ï¼Œè¿˜æ˜¯æ”¾åœ¨é‚£ä¸ªç±»å¥½ï¼Œè¿˜æ˜¯æ–°å»ºä¸€ä¸ªç±»æ¥å°è£…ï¼Ÿå¾ˆå¤šæ—¶å€™æˆ‘è‡ªå·±éƒ½ä¸çŸ¥é“æ€æ ·åšæ‰æ˜¯å¯¹çš„ï¼Œæˆ–è€…è¯´æ˜¯æœ€å¥½çš„ã€‚æˆ‘è¶Šå‘è§‰å¾—è‡ªå·±å¾ˆå¼±ï¼Œå¾ˆå¤šä¸œè¥¿æ ¹æœ¬æ— æ³•åˆ¤æ–­ä¼˜åŠ£ã€‚è‡ªå·±è¿˜æ˜¯å¤ªå«©äº†ï¼Œä»£ç å†™çš„è¿œè¿œä¸å¤Ÿã€‚æ¯å½“è¿™ä¸ªæ—¶å€™æˆ‘è‡ªå·±å°±ä¼šä¿¡å¿ƒä¸è¶³ã€‚&lt;/p&gt;
&lt;p&gt;å”¯æœ‰å¤šå†™ä»£ç å’Œæ€è€ƒæ¥å‡å°‘ä¸ºè‡ªå·±çš„æ— çŸ¥å¸¦æ¥çš„ææƒ§&lt;/p&gt;</summary><category term="ç¼–ç¨‹æ„Ÿæ‚Ÿ"></category></entry><entry><title>swiftåˆæ¢</title><link href="http://szuwest.github.io/swiftchu-tan.html" rel="alternate"></link><updated>2014-06-22T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-06-22:swiftchu-tan.html</id><summary type="html">&lt;h1&gt;swiftåˆæ¢&lt;/h1&gt;
&lt;p&gt;è‡ªä»swiftå…¬å¸ƒä»¥æ¥ï¼Œç«å¾—ä¸å¾—äº†ã€‚å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡swiftï¼Œé‚£è¿˜çœŸæ˜¯outäº†ï¼ˆä¸è¿‡è¯è¯´å›æ¥ï¼Œå¹¶ä¸æ˜¯æ²¡æœ‰çœ‹è¿‡swiftå°±ä¸æ˜¯å¥½å¼€å‘è€…ã€‚å¥½çš„ç¨‹åºå‘˜è·Ÿçœ‹æ²¡çœ‹è¿‡æŸç§è¯­è¨€æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼‰ã€‚æˆ‘ä»å…¬å¸ƒä»¥æ¥å°±æ–­æ–­ç»­ç»­çš„çœ‹ï¼Œä¸€ç›´åœ¨çœ‹å®˜æ–¹çš„è‹±æ–‡æ–‡æ¡£ã€‚å¶å°”ä¹Ÿçœ‹çœ‹åˆ«äººå†™çš„æˆ–è€…ç¿»è¯‘çš„æ–‡ç« ã€‚ç°åœ¨è™½ç„¶æ²¡æœ‰æŠŠå®˜æ–¹æ–‡æ¡£çœ‹å®Œï¼Œä½†æ˜¯ä¹Ÿçœ‹äº†å¤§éƒ¨åˆ†ï¼Œå¯ä»¥å†™å†™æ„Ÿæƒ³å¿ƒå¾—ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œswiftæ˜¯é›†åˆäº†è®¸å¤šè„šæœ¬è¯­è¨€çš„ç‰¹æ€§è€Œåˆä¸åƒå…¶ä»–ä¸€èˆ¬çš„è„šæœ¬è¯­è¨€çš„è‹¹æœæ–°ç”Ÿä»£å¼€å‘è¯­è¨€ã€‚swifté›†åˆäº†å¾ˆå¤šè¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚rubyï¼Œobject-cï¼Œc++ï¼Œc#ç­‰ï¼Œå…¶ä¸­é•¿å¾—æœ€åƒçš„åº”è¯¥æ˜¯rubyã€‚å’‹çœ‹ä¹‹ä¸‹swiftå°±æƒ³rubyä¸€æ ·çš„è„šæœ¬è¯­è¨€ã€‚å®Œå…¨é¢å‘å¯¹è±¡ï¼Œç±»å‹å®šä¹‰ï¼Œclosureç‰¹æ€§ï¼Œå‡½æ•°å¼ç¼–ç¨‹ç­‰ç­‰ã€‚ä¸è¿‡æ®å®˜æ–¹æ–‡æ¡£ä»‹ç»ï¼Œswiftè¯­è¨€ä¸æ˜¯è§£é‡Šå‹è¯­è¨€ï¼Œå®ƒæœ€ç»ˆä¼šç¼–è¯‘æˆäºŒè¿›åˆ¶ä»£ç ï¼Œå¹¶ä¸”å®ƒçš„è¿è¡Œæ•ˆç‡æ¯”object-cè¦å¿«ã€‚è¯´æ¯”object-Cè¦å¿«æˆ‘æ˜¯æ¯”è¾ƒæ€€ç–‘çš„ï¼Œè€Œå¤–å›½å¼€å‘è€…è¿›è¡Œäº†æµ‹è¯•ï¼Œå¾—å‡ºç»“è®ºæ˜¯å¦‚æœä¸å¼ºåŠ ä¸€äº›ç¼–è¯‘ä¼˜åŒ–çš„è¯ï¼Œæ˜¯å¿«ä¸è¿‡objCçš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå¯¹rubyï¼ŒObject-Cï¼Œc++è¯­è¨€ç†Ÿæ‚‰çš„è¯ï¼Œå­¦èµ·swiftæ¥åº”è¯¥æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚ä½†æ˜¯å®ƒè¿˜æœ‰å¾ˆå¤šè¯­æ³•ç‰¹æ€§æ˜¯åˆ«çš„è¯­è¨€æ²¡æœ‰çš„ï¼Œå¹¶ä¸”æœ‰äº›åœ¨æˆ‘çœ‹æ¥æœ‰ç‚¹å¥‡æ€ªçš„ç‰¹æ€§ã€‚ä¸è¿‡è¿™æ˜¯éƒ½æ²¡æœ‰ä»€ä¹ˆï¼Œè¯´æ˜è‡ªå·±è§è¯†å°‘ï¼Œç†Ÿæ‚‰äº†å°±å¥½äº†ã€‚é¦–å…ˆä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„æ˜¯ï¼Œä½ ä¸åœ¨éœ€è¦åœ¨æ¯è¡Œä»£ç ç»“æŸæ—¶åŠ ä¸Šåˆ†å·ï¼Œç›´æ¥å›è½¦æ¢è¡Œå°±è¡Œã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä¸€è¡Œæœ‰å¤šå¥ä»£ç ï¼Œæ¯ä¸€å¥çš„æœ«å°¾è¿˜æ˜¯è¦åŠ åˆ†å·çš„ã€‚ç„¶åå¦å¤–ä¸€ä¸ªæˆ‘è‡ªå·±ä¸å¤ªé€‚åº”çš„æ˜¯ifè¯­å¥çš„åˆ¤æ–­è¡¨è¾¾å¼ä¸å†éœ€è¦ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œæˆ‘è‡ªå·±æ„Ÿè§‰å¾ˆåˆ«æ‰­ã€‚å½“ç„¶ï¼Œä¹Ÿè¿˜æœ‰åˆ«çš„è¯­æ³•ï¼Œä¸åŒï¼Œä¾‹å¦‚å‡½æ•°çš„å®šä¹‰ç”¨funcï¼Œè¿”å›å€¼çš„è¡¨ç¤ºç”¨"-&gt;".Object-Cé‚£ç§æ–¹æ³•è°ƒç”¨æ–¹å¼ä¸å†æœ‰ï¼Œæ‰€æœ‰çš„éƒ½æ˜¯ç”¨.æ¥è®¿é—®å’Œè°ƒç”¨ã€‚æˆ‘è§‰å¾—swiftåŸºæœ¬ä¸Šå¯¹æ‰€æœ‰çš„ä¸€äº›è¯­æ³•ç‰¹æ€§éƒ½æ˜¯å€Ÿé‰´å…¶ä»–è¯­è¨€ä¸€äº›ä¼˜ç§€ç‰¹æ€§ï¼Œå¹¶ä¸”åŠ å…¥äº†è‡ªå·±ç‰¹æœ‰çš„æ–¹å¼ï¼Œå½¢æˆswiftè‡ªå·±ç‹¬ç‰¹çš„è¯­æ³•ã€‚æ¯”å¦‚è¯´å‡½æ•°çš„å½¢å¼å‚æ•°ï¼Œåƒc++ä¸€æ ·æ˜¯ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œå¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œå¹¶ä¸”å¯ä»¥æœ‰å¤–éƒ¨æ ‡ç­¾ï¼Œå°±æ˜¯åƒObject-Cä¸€æ ·å¯¹æ¯ä¸ªå‚æ•°åŠ ä¸ªæ ‡ç­¾æ ‡æ˜å®ƒçš„æ„ä¹‰ã€‚è¿˜æœ‰ä¸çŸ¥é“æ˜¯å¦æ˜¯ç‹¬åˆ›çš„é€šè¿‡tupleæ”¯æŒå¤šè¿”å›å€¼ã€‚è¿˜æœ‰å¯¹é—­åŒ…çš„æ”¯æŒã€‚æˆ‘è‡ªå·±çš„ç†è§£æ˜¯Object-Cçš„blockä¹Ÿå±äºé—­åŒ…ï¼Œä½†æ˜¯å®ƒè¯­æ³•æ˜¯ç±»Cçš„ï¼Œswiftçš„closureæ˜¯çº¯æ­£çš„é—­åŒ…ç‰¹æ€§ï¼Œè€Œä¸”å¯ä»¥ç®€åŒ–åˆ°ä»¤äººå‘æŒ‡çš„åœ°æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;swiftå¯ä»¥è¯´æ˜¯å¾ˆå¤šè¯­è¨€çš„é›†å¤§æˆè€…ï¼Œå¹¶ä¸”è¶…è¶Šå®ƒæ‰€å€Ÿé‰´çš„é‚£äº›è¯­è¨€ã€‚ä¹Ÿæ˜¯è¿™æ˜¯è‹¹æœè¦å–ä»£Object-Cçš„åŸå› ã€‚æˆ‘ä»¥å‰å¾ˆå–œæ¬¢Object-Cï¼Œç°åœ¨ä¹Ÿå–œæ¬¢ï¼Œåªæ˜¯swiftå‡ºæ¥ä¹‹åå°±æ²¡é‚£ä¹ˆå–œæ¬¢äº†ã€‚å› ä¸ºæˆ‘çœ‹åˆ°äº†ä¸€ä¸ªæ›´å¥½çš„è¯­è¨€ã€‚æˆ‘æœ¬èº«javaå†™å¾—æœ€å¤šï¼Œå¼€å§‹æ˜¯å¯¹c++çš„æ€•å’Œæ¨ï¼Œåˆ°å¯¹javaçš„å–œæ¬¢ï¼Œå†åˆ°å¯¹å®ƒçš„åŒå€¦ï¼Œç„¶åå‘ç°Object-Cçš„ä¸é”™è¿›è€Œå¯¹å®ƒå–œçˆ±ã€‚è€Œç°åœ¨æˆ‘è¦è·¨è¶Šå®ƒï¼Œè¿›å…¥swiftçš„é¢†åœ°ã€‚&lt;/p&gt;
&lt;p&gt;æœªå®Œå¾…ç»­...&lt;/p&gt;</summary><category term="swift"></category></entry><entry><title>Hello world</title><link href="http://szuwest.github.io/hello-world.html" rel="alternate"></link><updated>2014-06-10T00:00:00+08:00</updated><author><name>West</name></author><id>tag:szuwest.github.io,2014-06-10:hello-world.html</id><summary type="html">&lt;h1&gt;Hello World&lt;/h1&gt;
&lt;p&gt;Hello, world. This is first test.&lt;/p&gt;</summary><category term="Test"></category></entry></feed>