<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>West's blog - 技术</title>

    <link rel="stylesheet" href="http://szuwest.github.io/theme/css/normalize.css" />
    <link rel="stylesheet" href="http://szuwest.github.io/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="http://szuwest.github.io/theme/css/style.css" />
    <link rel="stylesheet" href="http://szuwest.github.io/theme/css/pygments.css" />	
    <script src="http://szuwest.github.io/theme/js/custom.modernizr.js"></script>

    <!-- So Firefox can bookmark->"abo this site" -->

</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="http://szuwest.github.io">West's blog</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
        
        

            <article>
                <a href="http://szuwest.github.io/ioskai-fa-ru-he-zuo-wai-bu-ce-shi.html"><h3 class="article-title">iOS开发如何做外部测试</h3></a>
<h6 class="subheader" title="2019-01-05T00:00:00">2019-01-05
</h6>


<h2>iOS开发如何做外部测试</h2>
<p>我们做APP开发的，开发出来的APP还未上线，又要想给别人用一下，该怎么做？实际上这是我们每个做APP开发的人都会遇到的，但是并不是每个人都清楚怎么做，有哪些方式。今天我们就来讲一讲。</p>
<p>在将iOS的APP如何给别人使用和测试前，先说一下安卓APP开发是怎么做的。安卓端是很简单的，你只要先生成一个证书文件keystone，然后用这个文件给apk签名，就可以将apk发给任意一个人安装使用了。这很简单，也很方便。可是iOS的就没那么容易了。我们还是从最简单的开发人员如何用真机测试开始说起。</p>
<h3>真机调试</h3>
<p>我们有了一个想法，并开始写代码，模拟器调试很方便，要在iPhone上看效果怎么办了。你直接将iPhone连上电脑是不行的。现在的情况至少你需要一个Apple ID，在Xcode上登录你的账号，在调试前Xcode会自动帮你初始化一些东西，然后就可以将APP安装到你的iPhone上了。在以前，你这个AppleID不能是普通的账号，必须是付了前的开发者账号才行。现在苹果放宽限制了。</p>
<p>这种方式的做法是你的手机必须连上你的电脑，在Xcode上选择你的iPhone来调试，Xcode会自动帮你注册设备的UDID。如果你没办法把iPhone连接到电脑上呢？或者不方便把iPhone连接到电脑上，毕竟如果是老板的手机的话，不方便那种做的。那我们需要一种把安装包提供给别人安装，或者一个地址给别人安装的方式。</p>
<h3>adhoc 方式</h3>
<p>我们将项目archive后，在导出（现在Xcode叫distribution）的时候，有个选项是adhoc，就是专门来做这个的。我们可以将APP导出成一个IPA，然后把这个IPA丢给别人，对方可以通过将iPhone连接到电脑，打开iTunes，通过iTunes来安装这个IPA到手机上。这还是有点麻烦，普遍做法都是放到一个网页上，别人通过这个网页来安装这个IPA。我一般都是借助第三方来做这步，例如蒲公英网站就是专门做种业务的。把你的IPA上传到蒲公英上，还会生成网址二维码，很方便分发。</p>
<p>但是这个IPA并不是每个人都可以安装的，能安装的前提是他/她的手机必须先注册过，即他/她的手机的UDID必须先注册到苹果的网站上，最终在打包IPA的时候苹果会把这些UDID写入证书里，只有注册过的手机才能安装成功。</p>
<p>如何注册手机UDID呢？最简单的方法是将手机连接到开发电脑，Xcode会自动帮你注册这个设备。但是并这很不方便，因为别人的手机你不能预先拿到的。当然还有别的方法，例如你放手机拥有这连接电脑，在iTunes上可以看到那部手机的UDID，让他把UDID发给你。这样的操作成本也很高。还是借助别人第三方来做这个事情比较好。蒲公英在这方面做得不错，他们专门做了个网站来帮你获取UDID。网站地址是：https://www.pgyer.com/udid。我一般都是把这个网址发给对方，对方按照网址的做法就可以获取到他手机的UDID，通过微信发给我。然后我到itunesconnect网站上，把这个UDID注册好。有一点特别需要的是，你注册好UDID后，要重新导出IPA。之前已经导出的IPA还是不能装的，要重新打包和导出IPA。并且要特别注意，在导出IPA之前，要把本地的profiles文件先删掉，让Xcode去苹果服务器同步最新的已注册设备列表。profiles文件一般是存放在 /Users/用户名/Library/MobileDevice/Provisioning Profiles  这个目录下。将这个目录下的文件都删掉，在下次打包导出的时候，会自动重新下载最新的。</p>
<p>adhoc方式还是有UDID这个前提，还是不是很方便，有没有不需要任何登记，直接给个安装地址，就能安装的呢？还是有的，下面介绍。</p>
<h3>Enterprise（企业级证书）方式</h3>
<p>有一种证书叫企业级开发证书，这种证书跟普通的开发者证书不一样。企业级开发证书是299美刀每年，普通的开发证书是99刀每年。而且不要跟99刀每年的开发证书里面的企业开发者混淆。在99刀每年的开发证书里，分个人开发者和企业开发者两种，企业开发者要提交的资料多一些。企业级开发证书是专门用户处理APP不需要上架App Store的情况。也就是说你用这个证书开发的APP，可以不经过Apple审核，不上App Store，自己发布，别人就能安装。</p>
<p>什么情况下会用到这种证书呢，我想一种情况是企业内部的APP，因为一些问题，不需要上App Store，自己内部人士使用，采用这种方式是很好的。还有一种用法就是用作beta测试。我们开发出来的APP，需要进行多人的beta测试，可以用企业级证书来打包发布，然后把安装网址发给用户，用户就可以安装使用了。真的很方便。这种方式还是挺流行的，特别是大公司内部，都是使用这种方式来做测试，当测试完成之后，再用普通开发证书打包，提交到App Store审核，完美。</p>
<p>那这种方式有没有什么弊端？当然是有的，例如用企业级开发证书打包的APP，无法使用推送通知，还有一些跟App Store相关的功能。如果你是内部使用的APP，还无法使用App Store来更新APP，只有你们自己实现APP更新的功能。还有一个缺点，一般来说用企业级开发证书打包APP，使用的BundleID跟正式要发布到App Store的BundleID是不一样的（普通做法都是在正式的bundleID后面加Enterprise后者.enterprise）,这样安装到手机上就是两个不同的APP了。对应普通用户来说，你不知道怎么给他解释这个。如果企业版和正式版都用同一个BundleID，也有不好的地方。另外还有一个缺点，就是安装企业版APP的时候，需要先信任一个证书。而且是要到设置里面自己点击信任，操作有点难度，而且很多人不敢怎么信任这些。。</p>
<p>另外，如果你只是用企业级开发证书来打包测试的，那么要经常在企业级开发证书和普通开发证书之前切换，你用持续集成环境打包的话，还要专门设置企业版打包，我以前用Jenkins做个这个设置，挺烦，折腾了不少精力，也专门写过这方面的文章。</p>
<p>现在还有很多企业是用这种方式来做beta测试的。</p>
<h3>TestFlight，公开链接</h3>
<p>大公司可以申请企业级开发证书，他们不在乎那点钱。企业级开发证书打包可以随时打包随时发布，那真是比较理想的beta测试方式。但是小公司怎么办呢，小公司没那么多财力和精力做这个事情。苹果也提供了TestFlight的方式。
TestFlight最早是一个独立的公司，后来被苹果公司收购了，并整合到了iTunesconnect上。早期我们怎么用TestFlight来做beta测试呢？从iTunesconnect上可以看到，有一个内部测试和外部测试分类。内部测试，就是你可以邀请一些人（通过他们的Apple ID）来加入iTunesconnect，让他们作为内部测试人员。你只需要将你的APP上传到iTunesconnect，然后你刚刚上传的版本，加入到内部测试中，内部测试人员就可以收到邮件，邮件里会教他们如何使用TestFlight来安装测试。这种方似乎有缺陷，因为必须邀请他们加入iTunesconnect才行，显示这是针对公司内部人员的。</p>
<p>而外部测试的话，不需要邀请，但是需要获取他们的邮件地址。并且你的APP版本需要先提交审核人员审核，审核通过了才能通过邮件发给相关人员。后来有第三方公司专门做这个的，不再需要用户是邮件了。你只需在审核过后，导入他们提供的文件就可以愉快的发布任何用户测试了。这种方式我自己没有试过，但是我通过这种方式安装过别人的APP。如果可以省略掉手机用户的邮件这步，真是一个大进步。</p>
<p>不过好消息是，现在苹果已经提供了一种叫<strong>公开链接</strong>的方式，不再需要手机用户的邮件来做beta测试了。当然审核是省略不了，你仍然需要上传你构建的APP，然后建一个小组，在这个组里选中你刚构建的版本，提交审核。审核过后，会有一个叫公开连接的按钮，点击之后，会生成一个连接地址，你可以把这个链接地址发给任何人，他们打开这个链接后，会有教他们怎安装使用（当让还是通过TestFlight）。</p>
<p>现在我看淘宝和京东已经采用这种方式在做beta测试了。这种方式优点很明显：用户是通过苹果官方方式安装的，他们比较信任这个，比那种企业版要额外信任的方式要好。还有这种方式跟正式版是没有任何区别的，推送什么的都是正常可以用的。当然缺点就是每个版本都需要苹果先审核，有点慢，不够快捷（也许这不算缺点，因为这是必要的）。</p>
<p>我觉得<strong>公开链接</strong>这种方式是最好的beta测试方式，值得每个iOS开发负责人去使用。</p>
<hr />
<p>如果你觉得这篇文章有用，请打赏小钱喝杯咖啡^_^
<img alt="打赏" src="https://raw.githubusercontent.com/szuwest/szuwest.github.io/master/images/2018-02-21%20133111.jpg" /></p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/ioskai-fa-betace-shi-testflight-gong-kai-lian-jie.html">iOS开发 beta测试 TestFlight 公开链接 </a>
</p>



<p><a href="http://szuwest.github.io/ioskai-fa-ru-he-zuo-wai-bu-ce-shi.html#disqus_thread">comments</a></p>            </article>


                <hr  class="gradient"/>


        


            <article>
                <a href="http://szuwest.github.io/svgtu-pian-zai-yi-dong-duan-de-ying-yong-jie-jue-fang-an.html"><h3 class="article-title">SVG图片在移动端的应用解决方案</h3></a>
<h6 class="subheader" title="2018-11-03T00:00:00">2018-11-03
</h6>


<h2>SVG图片在移动端的应用解决方案</h2>
<p>近几年来SVG使用得越来越多，就连Android的官方库也加入VectorDrawable的支持。这个类就是用来支持向量图的。SVG图片在web端使用非常广泛，我第一次接触这个也是在做react-native的项目中使用的。当时我们要做一些动画，需要从一个形状变换成另一个形状，这种一般都是用矢量图来做的。当时设计师就给了我一些矢量图，于是我就开始研究这个东西。</p>
<p>在react-native中，有专门一个库叫<a href="https://github.com/react-native-community/react-native-svg">react-native-svg</a>来处理这个。不过当时要做两个SVG形状的动画变化，并不是任何一个形状都可以的，需要遵循一定的标准。设计师给我的两个SVG文件并不能转换。后来是我自己根据文件里的一些关键参数自己在代码里直接画出来后，再做转换动画。</p>
<p>最近我在做的native项目中，也遇到了要用SVG的图片。我们的项目里要从服务器下载SVG图片来展示。我们要实现的这些文件是需要服务器动态配置的，也就是说我们不能预先打包进我们的APP里。所以我们这里的要提供一个解决方案，跟图片JPG图片一样显示，缓存。</p>
<p>这个需求跟之前我遇到的那个需求是很不一样的，之前的是设计师已经定义好图片，我们工程师直接拿到文件在程序里展示，不需要考虑下载和缓存之类的。这种需求其实很简单，我们实际上大部分的需求就是这种需求，网上有很多库可以完成这种需求。把SVG图片跟JPG等普通图片一样使用，网上的方案还真不多，特别是iOS方面。。。。</p>
<p>要像普通图片一样使用，就要考虑下载，本地缓存，内存缓存。像这种需求，我们移动端都会使用专门的图片框架，像安卓端的glide，UIL等，iOS端的SDWebImage等。但是这种库它是默认都不会考虑SVG图片。但是我们最好还是像使用这种框架来处理SVG图片 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/suan-fa-svg-androidsvg-glide-macaw.html">算法 SVG androidsvg glide Macaw </a>
</p>



<p><a href="http://szuwest.github.io/svgtu-pian-zai-yi-dong-duan-de-ying-yong-jie-jue-fang-an.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/svgtu-pian-zai-yi-dong-duan-de-ying-yong-jie-jue-fang-an.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/duo-jia-gong-si-de-ren-zheng-bi-dui-suan-fa-ti-yan-he-kai-fa-gan-xiang.html"><h3 class="article-title">多家公司的人证比对算法体验和开发感想</h3></a>
<h6 class="subheader" title="2018-07-13T00:00:00">2018-07-13
</h6>


<h1>多家公司的人证比对算法体验和开发感想</h1>
<p>最近在开发一个声纹采集一体机系统，这个系统里用到了人证比对功能，即刷身份证后拍照，然后将身份证里面的照片跟拍照比对，验证是否是同一个人。我们不是做人脸识别的公司，所以人脸识别功能当然是接入别人的SDK，这里我们找了好多家的人脸算法，对接过程中也遇到很多问题。经过这次的开发，我了解到这个行业的一些现状。</p>
<p>我们的系统主要运行在Windows电脑上，而且需要无网络也能使用，所以人脸算法必须是用离线版的。人脸算法厂家一般对外提供两种方式：在线版和离线版。一般在线版都可以提供免费试用，离线版需要授权使用。</p>
<h2>云端方案</h2>
<p>在线版的人脸识别我试用过依图科技的和中科视拓的SDK。在我们的应用声临其境APP上有个声纹购物的场景，需要人脸验证。这两个厂家提供的API都差不多，依图的API安全性考虑更全面，错误码定义的比较详细。还有他们的API共同点是，图片传输都是将图片数据进行base64编码后传输的。至于准确率，感觉都差不多，没有特别明显的差距。</p>
<h2>离线方案</h2>
<p>离线版的人脸算法用得比对多。因为它是用在我们要卖的机器上，而在线版的我们只是做试验。离线版的集成和使用要比在线版麻烦很多。由于离线版要给出算法库，处于安全和容易被拷贝的原因，都是要先授权的。授权的方式一般有两种：在设备上接入加密狗USB key或者绑定设备机器码的方式。加密狗方式比较方便，我们一般采用这种方式。</p>
<p>我们接入了很多厂家，有阅面科技，中控，杰锐达，商汤，我还把开源的dlib人脸识别也接入了 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/ren-lian-jian-ce-ren-zheng-bi-dui-dlib-electron.html">人脸检测 人证比对 dlib electron </a>
</p>



<p><a href="http://szuwest.github.io/duo-jia-gong-si-de-ren-zheng-bi-dui-suan-fa-ti-yan-he-kai-fa-gan-xiang.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/duo-jia-gong-si-de-ren-zheng-bi-dui-suan-fa-ti-yan-he-kai-fa-gan-xiang.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/flutterkuang-jia-yan-jiu-he-yu-rndui-bi.html"><h3 class="article-title">Flutter框架研究和与RN对比</h3></a>
<h6 class="subheader" title="2018-03-16T00:00:00">2018-03-16
</h6>


<h2>Flutter是什么</h2>
<p>现在技术更新迭代真的很快，每隔几年就会出现一些新的技术。当然，Flutter出现有有一点时间了，只不过还未真是发布，但是已经有一些人在使用了。这篇文章主要内容来自我在公司内部的一次分享会，所以大部分内容都是提炼。</p>
<ul>
<li>Flutter 是由 Google 的工程师团队打造的，用于创建高性能、跨平台的移动应用的框架。</li>
<li>Flutter 针对当下以及未来的移动设备进行优化，专注于 Android and iOS 低延迟的输入和高帧率</li>
<li>Flutter的设计跟react-native很像，但是比RN进了一步</li>
<li>Flutter的开发语言是Dart</li>
</ul>
<h2>移动端跨平台开发技术演进</h2>
<p>现在主流的移动开发平台是Android和iOS，之前还有过windows phone，每个平台的开发技术都不太一样。大家都是针对每个平台开发应用。自然有人就会觉得这样效率低下，想进行跨平台开发。从最开始的Hybrid混合开发技术，到RN的桥接技术，到现在新兴的Flutter技术，跨平台开发技术一直在演进。</p>
<p>以往最早的Hybrid开发，主要依赖于WebView。但是WebView是一个很重的控件，很容易产生内存问题，而且复杂的UI在WebView上显示的性能不好。react-native技术抛开了WebView，利用JavaScriptCore来做桥接，将js调用转为native调用，只牺牲了小部分性能获取的跨平台开发，这是一大进步。所以现在react-native很流行的原因。</p>
<p><img alt="react-native原理图" src="https://res.infoq.com/articles/why-is-flutter-revolutionary/zh/resources/2.png" /></p>
<p>上图react-native框架原理</p>
<p>Flutter实现跨平台采用了更为彻底的方案 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/reactnative-flutter.html">ReactNative Flutter </a>
</p>



<p><a href="http://szuwest.github.io/flutterkuang-jia-yan-jiu-he-yu-rndui-bi.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/flutterkuang-jia-yan-jiu-he-yu-rndui-bi.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/jenkins-slave-reactnativexiang-mu-zi-dong-da-bao.html"><h3 class="article-title">Jenkins slave ReactNative项目自动打包</h3></a>
<h6 class="subheader" title="2018-03-08T00:00:00">2018-03-08
</h6>


<h1>Jenkins slave ReactNative项目自动打包</h1>
<p>这次我想在谈谈Jenkins自动打包的问题。针对react-native项目。
一般情况下，我们都是在一台电脑上安装Jenkins，然后在该电脑上打开Jenkins网页进行打包配置。如果我们有很多项目，分布在不同的电脑，而且运行的系统也不同，这时候我们需要一个master来统一管理这些电脑，然后统一在一个网页上进行打包配置。这就是Jenkins的master-slave打包模式。这种模式跟单机模式稍有不同，这里主要讲怎么配置slave。</p>
<h2>slave节点配置</h2>
<ul>
<li>首先slave上也同样要安装Jenkins和相关的打包所依赖的环境，一个都不能少。配置好之后，我们并不需要在本机上打开Jenkins网页来创建项目，配置项目等，而是要到主机上去配置。在去主机的Jenkins管理页面上新建节点之前，从机还需要做一些其他配置。</li>
<li>打开远程登录。在系统设置--&gt;共享，然后选中远程登录，允许所有用户访问。</li>
<li>记住本机IP地址。在系统设置--&gt;网络，可以看到当前网络的IP地址。为了以后方便，可以将IP地址设置为一个固定IP地址。不然当该电脑重启之后，IP地址可能会变，然后主机再按照之前配置的旧IP连接从机的时候，就连不上了。Mac电脑配置固定IP也有注意的地方。我第一次配置就是没有成功，上不了网。选择手动方式，然后填上一个没有被占用的IP地址，然后，子网掩码也要注意，如果跟服务器是跨网段访问的，需要注意255.255 ...</li></ul><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/reactnative-jenkins-ios.html">ReactNative Jenkins iOS </a>
</p>



<p><a href="http://szuwest.github.io/jenkins-slave-reactnativexiang-mu-zi-dong-da-bao.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/jenkins-slave-reactnativexiang-mu-zi-dong-da-bao.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosxia.html"><h3 class="article-title">react-native框架源码学习(iOS)(下)</h3></a>
<h6 class="subheader" title="2018-03-02T00:00:00">2018-03-02
</h6>


<h1>react-native框架源码学习(iOS)(下)</h1>
<p>如果没有看过上篇，请先看<a href="">react-native框架源码学习(iOS)(上)</a>。</p>
<h3>JSCExecutor相关初始化</h3>
<p>在上篇中说到Instance的初始化方法initializeBridge里，最主要是创建了NativeToJsBridge的实例。而NativeToJsBridge的构造函数里，主要是调用了executorFactory来创建一个JSCExecutor。NativeToJsBridge的构造函数还包含更多的东西。</p>
<div class="highlight"><pre><span class="n">NativeToJsBridge</span><span class="o">::</span><span class="n">NativeToJsBridge</span><span class="p">(</span>
    <span class="n">JSExecutorFactory</span><span class="o">*</span> <span class="n">jsExecutorFactory</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">ModuleRegistry</span><span class="o">&gt;</span> <span class="n">registry</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">MessageQueueThread</span><span class="o">&gt;</span> <span class="n">jsQueue</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">InstanceCallback</span><span class="o">&gt;</span> <span class="n">callback</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">m_destroyed</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="nb">false</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_delegate</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">JsToNativeBridge</span><span class="o">&gt;</span><span class="p">(</span><span class="n">registry</span><span class="p">,</span> <span class="n">callback</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_executor</span><span class="p">(</span><span class="n">jsExecutorFactory</span><span class="o">-&gt;</span><span class="n">createJSExecutor</span><span class="p">(</span><span class="n">m_delegate</span><span class="p">,</span> <span class="n">jsQueue</span><span class="p">))</span>
    <span class="p">,</span> <span class="n">m_executorMessageQueueThread</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">jsQueue ...</span></pre></div><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/reactnative-yuan-ma-ios.html">ReactNative 源码 iOS </a>
</p>



<p><a href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosxia.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosxia.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosshang.html"><h3 class="article-title">react-native框架源码学习(iOS)(上)</h3></a>
<h6 class="subheader" title="2018-02-26T00:00:00">2018-02-26
</h6>


<h1>react-native框架源码学习(iOS)(上)</h1>
<h2>注意事项</h2>
<p>要学习react-native框架iOS端源码，先要了解一下注意的事项。</p>
<ul>
<li>一、 首先需要非常熟悉objective-c语言，对OC的runtime机制更是必不可少。源码里大量用了runtime特性。然后也要熟悉c++语言。除了OC语言，里面还有大量的c++代码，OC与c++混合代码。对c++的template和std库也要熟悉。我本人对c++也熟悉，但是不够深入，对一些高级特性不是很了解，所以相关的一些代码看起来很吃力。最后当然也熟悉js语言。我大学时学习过js，但是那还真是远古时代了，js近年来发展很快，我对很多新特性不是很了解，这也对我学习有一定的阻碍。另外还有要比较了解iOS的JavaScriptCore框架，这个是js与OC通信的基础。</li>
<li>二、 要对react-native的版本了解。查看网上的资料时也要注意他们所说的RN版本。现在网上很多研究资料，他们所研究的版本都是很早之前的版本。新的版本跟老版本有很多细节和流程改变了。如果你发现有些文章里说的东西跟你所看到的对不上，那就是研究的版本不一致。</li>
<li>三、如果看不懂，多看看别人的分析文章。如果对某种语言或者框架库不熟悉，建议先把该补的补上。</li>
</ul>
<p>我所研究的RN版本是<strong>0.49</strong>，而最新版是0.51 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/reactnative-yuan-ma-ios.html">ReactNative 源码 iOS </a>
</p>



<p><a href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosshang.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/react-nativekuang-jia-yuan-ma-xue-xi-iosshang.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/qian-tan-reactnativeji-zhu-de-you-lie.html"><h3 class="article-title">浅谈ReactNative技术的优劣</h3></a>
<h6 class="subheader" title="2018-02-06T00:00:00">2018-02-06
</h6>


<h1>浅谈ReactNative技术的优劣</h1>
<p>去年大概10月份开始使用ReactNative技术来开发项目，现在也已经有几个月时间了。也上线了三个ReactNative开发的项目。一直想谈谈使用ReactNative的开发感受。</p>
<ul>
<li>使用react-native确实可以提高界面开发效率，因为两个平台，只需要编写一套代码。react-native在这方面做了很多工作，让界面开发跟web开发基本一致。web开发人员可以很方便的写react-native界面，不需要二次学习。而且在react-native里面的像素是逻辑像素，可以比较好的适配界面。</li>
<li>react-native界面开发方式跟web开发是基本一致的，这跟native开发界面有很大不同。react-native界面开发是声明式开发，而且是继承于react框架，而纯native开发人员根本不了解这个框架，需要学习成本。它的View布局层次跟原生的布局层次不太一样。我自己也搞了挺久才搞清楚。</li>
<li>react-native很适合那些纯http数据交互的应用。即那些数据和内容都是从服务器拉取，APP只是展示和消费的场景应用。这样不但界面可以react-native来写，HTTP请求也可以很方便的用ReactNative来写。</li>
<li>react-native不适合用于那些需要复杂的通信方式的应用，也不适用于那些强多媒体资源的应用，例如要做相册，音视频播放的应用。因为react-native上不方便用socket的那些通信方法，需要自己封装。然后内存问题也不太好把控。对于相册，多媒体播放，ReactNative也没有封装。</li>
<li>react-native对于web转native开发是很有用，对纯native开发转react-native开发不是很友好，主要是思维方式发生比较大的变化。</li>
<li>react-native不能隔绝native开发的知识。要做APP开发，最终还是需懂得native开发的一些知识，react-native并不能完全屏蔽这些。一个纯web开发想要转react-native开发，还是需要懂native开发的人来帮助和指导，或者自己需要先学习native相关知识。</li>
</ul>
<h1>react-native开发会是未来的方向吗</h1>
<p>这个我也不敢说。不过ReactNative开发未来会代替掉一些native发 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/react-native.html">react-native </a>
</p>



<p><a href="http://szuwest.github.io/qian-tan-reactnativeji-zhu-de-you-lie.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/qian-tan-reactnativeji-zhu-de-you-lie.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/code-reviewfang-an.html"><h3 class="article-title">Code Review方案</h3></a>
<h6 class="subheader" title="2018-01-10T00:00:00">2018-01-10
</h6>


<h1>Code Review方案</h1>
<h2>定义</h2>
<p>Code Review代码评审是指在软件开发过程中，通过对源代码进行系统性检查的过程。通常的目的是查找各种缺陷，包括代码缺陷、功能实现问题、编码合理性、性能优化等；保证软件总体质量和提高开发者自身水平</p>
<h2>code review 的好处</h2>
<ul>
<li>
<ol>
<li>提高代码质量。</li>
</ol>
</li>
<li>
<ol>
<li>及早发现潜在缺陷，降低修改/弥补缺陷的成本。</li>
</ol>
</li>
<li>
<ol>
<li>促进团队内部知识共享，提高团队整体水平。</li>
</ol>
</li>
<li>
<ol>
<li>评审过程对于评审人员来说，也是一种思路重构的过程。帮助更多的人理解系统。</li>
</ol>
</li>
<li>
<ol>
<li>是一个传递知识的手段，可以让其它并不熟悉代码的人知道作者的意图和想法，从而可以在以后轻松维护代码。</li>
</ol>
</li>
<li>
<ol>
<li>鼓励程序员们相互学习对方的长处和优点。 </li>
</ol>
</li>
<li>
<ol>
<li>可以被用来确认自己的设计和实现是一个清楚和简单的。</li>
</ol>
</li>
</ul>
<h2>code review形式</h2>
<p>一般code review有两种形式，一种是代码评审会议，我称之为Code Review Meeting，就是将团队成员都组织起来开会，让代码Owner上去讲自己代码的实现和思路，其它人发表意见和进行讨论，也有把这种叫做team review。另外一种是一对一评审，我称之为Single Review，就是项目owner提交代码之后，让reviewer在空闲的时候帮忙评审代码，并且写出批注，owner收到批注后，进行修改或者回复 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/codereview.html">codereview </a>
</p>



<p><a href="http://szuwest.github.io/code-reviewfang-an.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/code-reviewfang-an.html">Read More</a>
                <hr  class="gradient"/>
            </article>

        


            <article>
                <a href="http://szuwest.github.io/shou-ji-ju-yu-wang-nei-bao-gua-re-dian-fa-xian-he-zu-wang-tong-xun-shi-xian.html"><h3 class="article-title">手机局域网内（包括热点）发现和组网通讯实现</h3></a>
<h6 class="subheader" title="2017-11-05T00:00:00">2017-11-05
</h6>


<h1>手机局域网内（包括热点）组网通讯实现</h1>
<p>最近在做一个应用，需要多个手机一起组网，一个充当主机，其他多个手机充当从机。主机跟每个从机之间可以相互通信，发送消息和文件。这不就是个CS（client-server）模式吗，只不过server不是在云端，只是在同一个局域网的手机上罢了。</p>
<p>这里面有两个关键的地方，一个是如何发现同一个局域网内的手机客户端，包括自建的热点，一个是知道各个手机的Ip地址后，用什么方式来建立通信。这里说一下热点，手机开启热点之后，别的手机连上这个特点，其实也是一个小型局域网，只不过这个局域网稍微有点不一样（Ip地址），其他的都一样。</p>
<h2>局域网发现</h2>
<p>局域网发现主要难点在于如何得到对方Ip地址。我们的做法是发送UDP包。UDP协议是无面向连接的，也就是不需要像TCP协议那样提前建立连接。所以我们向局域网内某一个特定的端口广播UDP包，接收到这个包的人，发送回包，那么我们就知道彼此的存在和地址。</p>
<p>那么关键地方是</p>
<ul>
<li>有人一直在监听一个端口X，接收UDP包</li>
<li>有人在一直往这个端口X发送UDP包</li>
</ul>
<p>监听端的人收到了UDP包后，就知道了发送者的Ip地址。但这时发送者是不知道接收者的，因为这是UDP包，无连接的状态的。那怎么做才让发送者也知道了。其实只要发过来再做一次就行。发送者同时也是监听者，这就行了。不过发送者A监听的是另一个端口Y，接收者B接收到包后 ...</p><p class="subheader">Category: <a href="http://szuwest.github.io/category/ji-zhu.html">技术</a>

    Tagged: 
    <a href="http://szuwest.github.io/tag/ju-yu-wang-re-dian-tong-xun-yan-bo-websocket.html">局域网 热点 通讯 广播 WebSocket </a>
</p>



<p><a href="http://szuwest.github.io/shou-ji-ju-yu-wang-nei-bao-gua-re-dian-fa-xian-he-zu-wang-tong-xun-shi-xian.html#disqus_thread">comments</a></p>                <a class="button radius secondary small right" href="http://szuwest.github.io/shou-ji-ju-yu-wang-nei-bao-gua-re-dian-fa-xian-he-zu-wang-tong-xun-shi-xian.html">Read More</a>
                <hr  class="gradient"/>
            </article>

            <!-- /#posts-list -->
<div class="pagination-centered">
<h6 class="subheader">Page 1 of 2</h6>

<p>

        <a href="http://szuwest.github.io/category/ji-zhu2.html">Next &raquo;</a>
</p>
</div>

    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="http://szuwest.github.io/archives.html">Archives</a>
            <li><a href="http://szuwest.github.io/tags.html">Tags</a>


        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="http://szuwest.github.io/category/android.html">Android</a></li>
            <li><a href="http://szuwest.github.io/category/bian-cheng-jia-gou.html">编程架构</a></li>
            <li><a href="http://szuwest.github.io/category/chan-pin.html">产品</a></li>
            <li><a href="http://szuwest.github.io/category/ios.html">iOS</a></li>
            <li><a href="http://szuwest.github.io/category/ji-zhu.html">技术</a></li>
            <li><a href="http://szuwest.github.io/category/sheng-huo.html">生活</a></li>
            <li><a href="http://szuwest.github.io/category/suan-fa.html">算法</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://szuwest.github.io/pages/about.html">About</a></li>
            <li><a href="http://szhanfeng203.blog.163.com/">我的生活博客</a></li>
            <li><a href="http://szuwest.github.io/feeds/all.atom.xml">RSS</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="https://github.com/szuwest">Github</a></li>
            <li><a href="https://twitter.com/szuwest">Twitter</a></li>
            <li><a href="https://www.facebook.com/profile.php?id=1084651913">Facebook</a></li>
            <li><a href="http://weibo.com/szuwest">微博</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
                <p>West's blog by West</p>
            </div>
            </div>
    </div>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-55687145-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</footer>